I want you to create a **minimal tilemap editor** in JavaScript (or TypeScript + HTML + CSS) that can generate `.tmx` maps compatible with the Flare engine. 

Core requirements:
- The editor should open in a browser (no server backend needed).
- It should support both **32x32** and **64x64** tile sizes.
- **Canvas**: draw a grid representing the map (e.g., 20x15 tiles). Each cell can hold one tile ID.
- **Tileset panel**: load a sprite sheet (PNG), split it into tiles of chosen size, display them as selectable buttons.
- When the user clicks a tile in the panel, it becomes the active brush.
- **Mouse painting**: left click on the grid places the selected tile ID, right click erases.
- **Save as TMX**: add a button that exports the map into a `.tmx` XML string with `<layer><data encoding="csv">…</data></layer>` format. Save it as a downloadable file (`map.tmx`).
- Output must follow Flare’s `.tmx` convention: 
  - `<map orientation="orthogonal" tilewidth="32" tileheight="32" width="W" height="H">`
  - `<tileset firstgid="1" name="main" tilewidth="32" tileheight="32" tilecount="X" columns="Y" source="tileset.tsx"/>`
  - `<layer name="Ground"> … </layer>`

Constraints:
- Keep the UI very simple: left panel = tileset, right panel = canvas.
- Use plain HTML5 canvas and DOM (no React/Vue/Angular).
- Include comments in the code explaining how to extend later.