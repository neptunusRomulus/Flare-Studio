Now extend the previous tilemap editor into a more advanced **map editor** for Flare-compatible `.tmx` files.

New features to add:
1. **Multiple tile layers**:
   - Allow creating and switching between layers (Ground, Wall, Decor).
   - Each layer is stored separately in the `.tmx` output.

2. **Collision / special layers**:
   - Add a toggleable “collision layer” where tiles mark passable/non-passable areas.
   - Store it as a separate `<layer name="Collision">` in the XML.

3. **Object layer**:
   - Add support for placing “objects” (doors, npc, spawn).
   - When Object Tool is active, clicking on the canvas places a rectangle object.
   - User can drag to resize/move objects.

4. **Property editor**:
   - When an object is selected, show a panel with editable key-value properties.
   - Example: object type = “event”, property `map=town.tmx`.

5. **Mini-map preview**:
   - Generate a small scaled-down preview of the whole map that updates in real time.

6. **Export improvements**:
   - Ensure all layers and objects are exported into correct `<objectgroup>` and `<layer>` nodes.
   - Properties must be written into `<properties><property name="..." value="..."/></properties>` format.
   - Continue supporting “Save as TMX” with download option.

Constraints:
- Keep the project modular and well-commented.
- Still pure HTML/JS/CSS (no frameworks).
- Organize the UI: 
  - Left sidebar = tileset + layer list. 
  - Main area = canvas editor. 
  - Right sidebar = object/property inspector + minimap preview.
- The final `.tmx` must remain fully usable in Flare.