function ex(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function $h(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fh={exports:{}},Uo={},Hh={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ii=Symbol.for("react.element"),tx=Symbol.for("react.portal"),nx=Symbol.for("react.fragment"),rx=Symbol.for("react.strict_mode"),sx=Symbol.for("react.profiler"),ix=Symbol.for("react.provider"),ox=Symbol.for("react.context"),lx=Symbol.for("react.forward_ref"),ax=Symbol.for("react.suspense"),cx=Symbol.for("react.memo"),ux=Symbol.for("react.lazy"),hd=Symbol.iterator;function dx(t){return t===null||typeof t!="object"?null:(t=hd&&t[hd]||t["@@iterator"],typeof t=="function"?t:null)}var Bh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wh=Object.assign,Yh={};function Hr(t,e,n){this.props=t,this.context=e,this.refs=Yh,this.updater=n||Bh}Hr.prototype.isReactComponent={};Hr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Uh(){}Uh.prototype=Hr.prototype;function bc(t,e,n){this.props=t,this.context=e,this.refs=Yh,this.updater=n||Bh}var kc=bc.prototype=new Uh;kc.constructor=bc;Wh(kc,Hr.prototype);kc.isPureReactComponent=!0;var fd=Array.isArray,Xh=Object.prototype.hasOwnProperty,jc={current:null},Vh={key:!0,ref:!0,__self:!0,__source:!0};function Gh(t,e,n){var r,s={},i=null,l=null;if(e!=null)for(r in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(i=""+e.key),e)Xh.call(e,r)&&!Vh.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ii,type:t,key:i,ref:l,props:s,_owner:jc.current}}function hx(t,e){return{$$typeof:ii,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sc(t){return typeof t=="object"&&t!==null&&t.$$typeof===ii}function fx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var md=/\/+/g;function Ol(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fx(""+t.key):e.toString(36)}function ro(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case ii:case tx:l=!0}}if(l)return l=t,s=s(l),t=r===""?"."+Ol(l,0):r,fd(s)?(n="",t!=null&&(n=t.replace(md,"$&/")+"/"),ro(s,e,n,"",function(u){return u})):s!=null&&(Sc(s)&&(s=hx(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(md,"$&/")+"/")+t)),e.push(s)),1;if(l=0,r=r===""?".":r+":",fd(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Ol(i,a);l+=ro(i,e,n,c,s)}else if(c=dx(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Ol(i,a++),l+=ro(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Ai(t,e,n){if(t==null)return t;var r=[],s=0;return ro(t,r,"","",function(i){return e.call(n,i,s++)}),r}function mx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ye={current:null},so={transition:null},px={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:so,ReactCurrentOwner:jc};function qh(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Ai,forEach:function(t,e,n){Ai(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ai(t,function(){e++}),e},toArray:function(t){return Ai(t,function(e){return e})||[]},only:function(t){if(!Sc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=Hr;Z.Fragment=nx;Z.Profiler=sx;Z.PureComponent=bc;Z.StrictMode=rx;Z.Suspense=ax;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=px;Z.act=qh;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Wh({},t.props),s=t.key,i=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,l=jc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Xh.call(e,c)&&!Vh.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ii,type:t.type,key:s,ref:i,props:r,_owner:l}};Z.createContext=function(t){return t={$$typeof:ox,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ix,_context:t},t.Consumer=t};Z.createElement=Gh;Z.createFactory=function(t){var e=Gh.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:lx,render:t}};Z.isValidElement=Sc;Z.lazy=function(t){return{$$typeof:ux,_payload:{_status:-1,_result:t},_init:mx}};Z.memo=function(t,e){return{$$typeof:cx,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=so.transition;so.transition={};try{t()}finally{so.transition=e}};Z.unstable_act=qh;Z.useCallback=function(t,e){return Ye.current.useCallback(t,e)};Z.useContext=function(t){return Ye.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return Ye.current.useDeferredValue(t)};Z.useEffect=function(t,e){return Ye.current.useEffect(t,e)};Z.useId=function(){return Ye.current.useId()};Z.useImperativeHandle=function(t,e,n){return Ye.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return Ye.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return Ye.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return Ye.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return Ye.current.useReducer(t,e,n)};Z.useRef=function(t){return Ye.current.useRef(t)};Z.useState=function(t){return Ye.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return Ye.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return Ye.current.useTransition()};Z.version="18.3.1";Hh.exports=Z;var m=Hh.exports;const me=$h(m),gx=ex({__proto__:null,default:me},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx=m,yx=Symbol.for("react.element"),vx=Symbol.for("react.fragment"),wx=Object.prototype.hasOwnProperty,bx=xx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kx={key:!0,ref:!0,__self:!0,__source:!0};function Kh(t,e,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(l=e.ref);for(r in e)wx.call(e,r)&&!kx.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yx,type:t,key:i,ref:l,props:s,_owner:bx.current}}Uo.Fragment=vx;Uo.jsx=Kh;Uo.jsxs=Kh;Fh.exports=Uo;var o=Fh.exports,wa={},Qh={exports:{}},ut={},Zh={exports:{}},Jh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,B){var Y=I.length;I.push(B);e:for(;0<Y;){var te=Y-1>>>1,se=I[te];if(0<s(se,B))I[te]=B,I[Y]=se,Y=te;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var B=I[0],Y=I.pop();if(Y!==B){I[0]=Y;e:for(var te=0,se=I.length,ae=se>>>1;te<ae;){var ht=2*(te+1)-1,Yr=I[ht],Ve=ht+1,Zn=I[Ve];if(0>s(Yr,Y))Ve<se&&0>s(Zn,Yr)?(I[te]=Zn,I[Ve]=Y,te=Ve):(I[te]=Yr,I[ht]=Y,te=ht);else if(Ve<se&&0>s(Zn,Y))I[te]=Zn,I[Ve]=Y,te=Ve;else break e}}return B}function s(I,B){var Y=I.sortIndex-B.sortIndex;return Y!==0?Y:I.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,a=l.now();t.unstable_now=function(){return l.now()-a}}var c=[],u=[],h=1,f=null,p=3,b=!1,k=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(I){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=I)r(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(u)}}function w(I){if(j=!1,x(I),!k)if(n(c)!==null)k=!0,ve(C);else{var B=n(u);B!==null&&Xe(w,B.startTime-I)}}function C(I,B){k=!1,j&&(j=!1,y(E),E=-1),b=!0;var Y=p;try{for(x(B),f=n(c);f!==null&&(!(f.expirationTime>B)||I&&!V());){var te=f.callback;if(typeof te=="function"){f.callback=null,p=f.priorityLevel;var se=te(f.expirationTime<=B);B=t.unstable_now(),typeof se=="function"?f.callback=se:f===n(c)&&r(c),x(B)}else r(c);f=n(c)}if(f!==null)var ae=!0;else{var ht=n(u);ht!==null&&Xe(w,ht.startTime-B),ae=!1}return ae}finally{f=null,p=Y,b=!1}}var M=!1,P=null,E=-1,O=5,z=-1;function V(){return!(t.unstable_now()-z<O)}function G(){if(P!==null){var I=t.unstable_now();z=I;var B=!0;try{B=P(!0,I)}finally{B?re():(M=!1,P=null)}}else M=!1}var re;if(typeof g=="function")re=function(){g(G)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ie=U.port2;U.port1.onmessage=G,re=function(){ie.postMessage(null)}}else re=function(){N(G,0)};function ve(I){P=I,M||(M=!0,re())}function Xe(I,B){E=N(function(){I(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){k||b||(k=!0,ve(C))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(I){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var Y=p;p=B;try{return I()}finally{p=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,B){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Y=p;p=I;try{return B()}finally{p=Y}},t.unstable_scheduleCallback=function(I,B,Y){var te=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?te+Y:te):Y=te,I){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Y+se,I={id:h++,callback:B,priorityLevel:I,startTime:Y,expirationTime:se,sortIndex:-1},Y>te?(I.sortIndex=Y,e(u,I),n(c)===null&&I===n(u)&&(j?(y(E),E=-1):j=!0,Xe(w,Y-te))):(I.sortIndex=se,e(c,I),k||b||(k=!0,ve(C))),I},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(I){var B=p;return function(){var Y=p;p=B;try{return I.apply(this,arguments)}finally{p=Y}}}})(Jh);Zh.exports=Jh;var jx=Zh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx=m,ct=jx;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ef=new Set,Hs={};function qn(t,e){Ar(t,e),Ar(t+"Capture",e)}function Ar(t,e){for(Hs[t]=e,t=0;t<e.length;t++)ef.add(e[t])}var Gt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ba=Object.prototype.hasOwnProperty,Nx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pd={},gd={};function Cx(t){return ba.call(gd,t)?!0:ba.call(pd,t)?!1:Nx.test(t)?gd[t]=!0:(pd[t]=!0,!1)}function Tx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Mx(t,e,n,r){if(e===null||typeof e>"u"||Tx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ue(t,e,n,r,s,i,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=l}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ae[t]=new Ue(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ae[e]=new Ue(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ae[t]=new Ue(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ae[t]=new Ue(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ae[t]=new Ue(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ae[t]=new Ue(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ae[t]=new Ue(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ae[t]=new Ue(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ae[t]=new Ue(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nc=/[\-:]([a-z])/g;function Cc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nc,Cc);Ae[e]=new Ue(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nc,Cc);Ae[e]=new Ue(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nc,Cc);Ae[e]=new Ue(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ae[t]=new Ue(t,1,!1,t.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new Ue("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ae[t]=new Ue(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tc(t,e,n,r){var s=Ae.hasOwnProperty(e)?Ae[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Mx(e,n,s,r)&&(n=null),r||s===null?Cx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zt=Sx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zi=Symbol.for("react.element"),gr=Symbol.for("react.portal"),xr=Symbol.for("react.fragment"),Mc=Symbol.for("react.strict_mode"),ka=Symbol.for("react.profiler"),tf=Symbol.for("react.provider"),nf=Symbol.for("react.context"),Ec=Symbol.for("react.forward_ref"),ja=Symbol.for("react.suspense"),Sa=Symbol.for("react.suspense_list"),Pc=Symbol.for("react.memo"),on=Symbol.for("react.lazy"),rf=Symbol.for("react.offscreen"),xd=Symbol.iterator;function us(t){return t===null||typeof t!="object"?null:(t=xd&&t[xd]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,$l;function Ts(t){if($l===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$l=e&&e[1]||""}return`
`+$l+t}var Fl=!1;function Hl(t,e){if(!t||Fl)return"";Fl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),l=s.length-1,a=i.length-1;1<=l&&0<=a&&s[l]!==i[a];)a--;for(;1<=l&&0<=a;l--,a--)if(s[l]!==i[a]){if(l!==1||a!==1)do if(l--,a--,0>a||s[l]!==i[a]){var c=`
`+s[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=a);break}}}finally{Fl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ts(t):""}function Ex(t){switch(t.tag){case 5:return Ts(t.type);case 16:return Ts("Lazy");case 13:return Ts("Suspense");case 19:return Ts("SuspenseList");case 0:case 2:case 15:return t=Hl(t.type,!1),t;case 11:return t=Hl(t.type.render,!1),t;case 1:return t=Hl(t.type,!0),t;default:return""}}function Na(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xr:return"Fragment";case gr:return"Portal";case ka:return"Profiler";case Mc:return"StrictMode";case ja:return"Suspense";case Sa:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nf:return(t.displayName||"Context")+".Consumer";case tf:return(t._context.displayName||"Context")+".Provider";case Ec:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pc:return e=t.displayName||null,e!==null?e:Na(t.type)||"Memo";case on:e=t._payload,t=t._init;try{return Na(t(e))}catch{}}return null}function Px(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Na(e);case 8:return e===Mc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Lx(t){var e=sf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Di(t){t._valueTracker||(t._valueTracker=Lx(t))}function of(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=sf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ca(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lf(t,e){e=e.checked,e!=null&&Tc(t,"checked",e,!1)}function Ta(t,e){lf(t,e);var n=wn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ma(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ma(t,e.type,wn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ma(t,e,n){(e!=="number"||wo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ms=Array.isArray;function Mr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ea(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(Ms(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wn(n)}}function af(t,e){var n=wn(e.value),r=wn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function bd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ri,uf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ri=Ri||document.createElement("div"),Ri.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ri.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ls={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_x=["Webkit","ms","Moz","O"];Object.keys(Ls).forEach(function(t){_x.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ls[e]=Ls[t]})});function df(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ls.hasOwnProperty(t)&&Ls[t]?(""+e).trim():e+"px"}function hf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=df(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Ix=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function La(t,e){if(e){if(Ix[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function _a(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ia=null;function Lc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Aa=null,Er=null,Pr=null;function kd(t){if(t=ai(t)){if(typeof Aa!="function")throw Error(L(280));var e=t.stateNode;e&&(e=Ko(e),Aa(t.stateNode,t.type,e))}}function ff(t){Er?Pr?Pr.push(t):Pr=[t]:Er=t}function mf(){if(Er){var t=Er,e=Pr;if(Pr=Er=null,kd(t),e)for(t=0;t<e.length;t++)kd(e[t])}}function pf(t,e){return t(e)}function gf(){}var Bl=!1;function xf(t,e,n){if(Bl)return t(e,n);Bl=!0;try{return pf(t,e,n)}finally{Bl=!1,(Er!==null||Pr!==null)&&(gf(),mf())}}function Ws(t,e){var n=t.stateNode;if(n===null)return null;var r=Ko(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var za=!1;if(Gt)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){za=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{za=!1}function Ax(t,e,n,r,s,i,l,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var _s=!1,bo=null,ko=!1,Da=null,zx={onError:function(t){_s=!0,bo=t}};function Dx(t,e,n,r,s,i,l,a,c){_s=!1,bo=null,Ax.apply(zx,arguments)}function Rx(t,e,n,r,s,i,l,a,c){if(Dx.apply(this,arguments),_s){if(_s){var u=bo;_s=!1,bo=null}else throw Error(L(198));ko||(ko=!0,Da=u)}}function Kn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jd(t){if(Kn(t)!==t)throw Error(L(188))}function Ox(t){var e=t.alternate;if(!e){if(e=Kn(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return jd(s),t;if(i===r)return jd(s),e;i=i.sibling}throw Error(L(188))}if(n.return!==r.return)n=s,r=i;else{for(var l=!1,a=s.child;a;){if(a===n){l=!0,n=s,r=i;break}if(a===r){l=!0,r=s,n=i;break}a=a.sibling}if(!l){for(a=i.child;a;){if(a===n){l=!0,n=i,r=s;break}if(a===r){l=!0,r=i,n=s;break}a=a.sibling}if(!l)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function vf(t){return t=Ox(t),t!==null?wf(t):null}function wf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wf(t);if(e!==null)return e;t=t.sibling}return null}var bf=ct.unstable_scheduleCallback,Sd=ct.unstable_cancelCallback,$x=ct.unstable_shouldYield,Fx=ct.unstable_requestPaint,be=ct.unstable_now,Hx=ct.unstable_getCurrentPriorityLevel,_c=ct.unstable_ImmediatePriority,kf=ct.unstable_UserBlockingPriority,jo=ct.unstable_NormalPriority,Bx=ct.unstable_LowPriority,jf=ct.unstable_IdlePriority,Xo=null,At=null;function Wx(t){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Xo,t,void 0,(t.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:Xx,Yx=Math.log,Ux=Math.LN2;function Xx(t){return t>>>=0,t===0?32:31-(Yx(t)/Ux|0)|0}var Oi=64,$i=4194304;function Es(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function So(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,l=n&268435455;if(l!==0){var a=l&~s;a!==0?r=Es(a):(i&=l,i!==0&&(r=Es(i)))}else l=n&~s,l!==0?r=Es(l):i!==0&&(r=Es(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nt(e),s=1<<n,r|=t[n],e&=~s;return r}function Vx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-Nt(i),a=1<<l,c=s[l];c===-1?(!(a&n)||a&r)&&(s[l]=Vx(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Ra(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sf(){var t=Oi;return Oi<<=1,!(Oi&4194240)&&(Oi=64),t}function Wl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nt(e),t[e]=n}function qx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Nt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ic(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var le=0;function Nf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cf,Ac,Tf,Mf,Ef,Oa=!1,Fi=[],hn=null,fn=null,mn=null,Ys=new Map,Us=new Map,an=[],Kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nd(t,e){switch(t){case"focusin":case"focusout":hn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":Ys.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Us.delete(e.pointerId)}}function hs(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ai(e),e!==null&&Ac(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Qx(t,e,n,r,s){switch(e){case"focusin":return hn=hs(hn,t,e,n,r,s),!0;case"dragenter":return fn=hs(fn,t,e,n,r,s),!0;case"mouseover":return mn=hs(mn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ys.set(i,hs(Ys.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Us.set(i,hs(Us.get(i)||null,t,e,n,r,s)),!0}return!1}function Pf(t){var e=zn(t.target);if(e!==null){var n=Kn(e);if(n!==null){if(e=n.tag,e===13){if(e=yf(n),e!==null){t.blockedOn=e,Ef(t.priority,function(){Tf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function io(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$a(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ia=r,n.target.dispatchEvent(r),Ia=null}else return e=ai(n),e!==null&&Ac(e),t.blockedOn=n,!1;e.shift()}return!0}function Cd(t,e,n){io(t)&&n.delete(e)}function Zx(){Oa=!1,hn!==null&&io(hn)&&(hn=null),fn!==null&&io(fn)&&(fn=null),mn!==null&&io(mn)&&(mn=null),Ys.forEach(Cd),Us.forEach(Cd)}function fs(t,e){t.blockedOn===e&&(t.blockedOn=null,Oa||(Oa=!0,ct.unstable_scheduleCallback(ct.unstable_NormalPriority,Zx)))}function Xs(t){function e(s){return fs(s,t)}if(0<Fi.length){fs(Fi[0],t);for(var n=1;n<Fi.length;n++){var r=Fi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hn!==null&&fs(hn,t),fn!==null&&fs(fn,t),mn!==null&&fs(mn,t),Ys.forEach(e),Us.forEach(e),n=0;n<an.length;n++)r=an[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<an.length&&(n=an[0],n.blockedOn===null);)Pf(n),n.blockedOn===null&&an.shift()}var Lr=Zt.ReactCurrentBatchConfig,No=!0;function Jx(t,e,n,r){var s=le,i=Lr.transition;Lr.transition=null;try{le=1,zc(t,e,n,r)}finally{le=s,Lr.transition=i}}function ey(t,e,n,r){var s=le,i=Lr.transition;Lr.transition=null;try{le=4,zc(t,e,n,r)}finally{le=s,Lr.transition=i}}function zc(t,e,n,r){if(No){var s=$a(t,e,n,r);if(s===null)Jl(t,e,r,Co,n),Nd(t,r);else if(Qx(s,t,e,n,r))r.stopPropagation();else if(Nd(t,r),e&4&&-1<Kx.indexOf(t)){for(;s!==null;){var i=ai(s);if(i!==null&&Cf(i),i=$a(t,e,n,r),i===null&&Jl(t,e,r,Co,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Jl(t,e,r,null,n)}}var Co=null;function $a(t,e,n,r){if(Co=null,t=Lc(r),t=zn(t),t!==null)if(e=Kn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Co=t,null}function Lf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hx()){case _c:return 1;case kf:return 4;case jo:case Bx:return 16;case jf:return 536870912;default:return 16}default:return 16}}var un=null,Dc=null,oo=null;function _f(){if(oo)return oo;var t,e=Dc,n=e.length,r,s="value"in un?un.value:un.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(r=1;r<=l&&e[n-r]===s[i-r];r++);return oo=s.slice(t,1<r?1-r:void 0)}function lo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hi(){return!0}function Td(){return!1}function dt(t){function e(n,r,s,i,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Hi:Td,this.isPropagationStopped=Td,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),e}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rc=dt(Br),li=xe({},Br,{view:0,detail:0}),ty=dt(li),Yl,Ul,ms,Vo=xe({},li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ms&&(ms&&t.type==="mousemove"?(Yl=t.screenX-ms.screenX,Ul=t.screenY-ms.screenY):Ul=Yl=0,ms=t),Yl)},movementY:function(t){return"movementY"in t?t.movementY:Ul}}),Md=dt(Vo),ny=xe({},Vo,{dataTransfer:0}),ry=dt(ny),sy=xe({},li,{relatedTarget:0}),Xl=dt(sy),iy=xe({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),oy=dt(iy),ly=xe({},Br,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ay=dt(ly),cy=xe({},Br,{data:0}),Ed=dt(cy),uy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hy[t])?!!e[t]:!1}function Oc(){return fy}var my=xe({},li,{key:function(t){if(t.key){var e=uy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(t){return t.type==="keypress"?lo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),py=dt(my),gy=xe({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pd=dt(gy),xy=xe({},li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),yy=dt(xy),vy=xe({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),wy=dt(vy),by=xe({},Vo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ky=dt(by),jy=[9,13,27,32],$c=Gt&&"CompositionEvent"in window,Is=null;Gt&&"documentMode"in document&&(Is=document.documentMode);var Sy=Gt&&"TextEvent"in window&&!Is,If=Gt&&(!$c||Is&&8<Is&&11>=Is),Ld=" ",_d=!1;function Af(t,e){switch(t){case"keyup":return jy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yr=!1;function Ny(t,e){switch(t){case"compositionend":return zf(e);case"keypress":return e.which!==32?null:(_d=!0,Ld);case"textInput":return t=e.data,t===Ld&&_d?null:t;default:return null}}function Cy(t,e){if(yr)return t==="compositionend"||!$c&&Af(t,e)?(t=_f(),oo=Dc=un=null,yr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return If&&e.locale!=="ko"?null:e.data;default:return null}}var Ty={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Id(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ty[t.type]:e==="textarea"}function Df(t,e,n,r){ff(r),e=To(e,"onChange"),0<e.length&&(n=new Rc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var As=null,Vs=null;function My(t){Vf(t,0)}function Go(t){var e=br(t);if(of(e))return t}function Ey(t,e){if(t==="change")return e}var Rf=!1;if(Gt){var Vl;if(Gt){var Gl="oninput"in document;if(!Gl){var Ad=document.createElement("div");Ad.setAttribute("oninput","return;"),Gl=typeof Ad.oninput=="function"}Vl=Gl}else Vl=!1;Rf=Vl&&(!document.documentMode||9<document.documentMode)}function zd(){As&&(As.detachEvent("onpropertychange",Of),Vs=As=null)}function Of(t){if(t.propertyName==="value"&&Go(Vs)){var e=[];Df(e,Vs,t,Lc(t)),xf(My,e)}}function Py(t,e,n){t==="focusin"?(zd(),As=e,Vs=n,As.attachEvent("onpropertychange",Of)):t==="focusout"&&zd()}function Ly(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Go(Vs)}function _y(t,e){if(t==="click")return Go(e)}function Iy(t,e){if(t==="input"||t==="change")return Go(e)}function Ay(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tt=typeof Object.is=="function"?Object.is:Ay;function Gs(t,e){if(Tt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ba.call(e,s)||!Tt(t[s],e[s]))return!1}return!0}function Dd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rd(t,e){var n=Dd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dd(n)}}function $f(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$f(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ff(){for(var t=window,e=wo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wo(t.document)}return e}function Fc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zy(t){var e=Ff(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$f(n.ownerDocument.documentElement,n)){if(r!==null&&Fc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Rd(n,i);var l=Rd(n,r);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Dy=Gt&&"documentMode"in document&&11>=document.documentMode,vr=null,Fa=null,zs=null,Ha=!1;function Od(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ha||vr==null||vr!==wo(r)||(r=vr,"selectionStart"in r&&Fc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zs&&Gs(zs,r)||(zs=r,r=To(Fa,"onSelect"),0<r.length&&(e=new Rc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vr)))}function Bi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wr={animationend:Bi("Animation","AnimationEnd"),animationiteration:Bi("Animation","AnimationIteration"),animationstart:Bi("Animation","AnimationStart"),transitionend:Bi("Transition","TransitionEnd")},ql={},Hf={};Gt&&(Hf=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function qo(t){if(ql[t])return ql[t];if(!wr[t])return t;var e=wr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hf)return ql[t]=e[n];return t}var Bf=qo("animationend"),Wf=qo("animationiteration"),Yf=qo("animationstart"),Uf=qo("transitionend"),Xf=new Map,$d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(t,e){Xf.set(t,e),qn(e,[t])}for(var Kl=0;Kl<$d.length;Kl++){var Ql=$d[Kl],Ry=Ql.toLowerCase(),Oy=Ql[0].toUpperCase()+Ql.slice(1);kn(Ry,"on"+Oy)}kn(Bf,"onAnimationEnd");kn(Wf,"onAnimationIteration");kn(Yf,"onAnimationStart");kn("dblclick","onDoubleClick");kn("focusin","onFocus");kn("focusout","onBlur");kn(Uf,"onTransitionEnd");Ar("onMouseEnter",["mouseout","mouseover"]);Ar("onMouseLeave",["mouseout","mouseover"]);Ar("onPointerEnter",["pointerout","pointerover"]);Ar("onPointerLeave",["pointerout","pointerover"]);qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qn("onBeforeInput",["compositionend","keypress","textInput","paste"]);qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ps="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$y=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ps));function Fd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Rx(r,e,void 0,t),t.currentTarget=null}function Vf(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var l=r.length-1;0<=l;l--){var a=r[l],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Fd(s,a,u),i=c}else for(l=0;l<r.length;l++){if(a=r[l],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Fd(s,a,u),i=c}}}if(ko)throw t=Da,ko=!1,Da=null,t}function de(t,e){var n=e[Xa];n===void 0&&(n=e[Xa]=new Set);var r=t+"__bubble";n.has(r)||(Gf(e,t,2,!1),n.add(r))}function Zl(t,e,n){var r=0;e&&(r|=4),Gf(n,t,r,e)}var Wi="_reactListening"+Math.random().toString(36).slice(2);function qs(t){if(!t[Wi]){t[Wi]=!0,ef.forEach(function(n){n!=="selectionchange"&&($y.has(n)||Zl(n,!1,t),Zl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wi]||(e[Wi]=!0,Zl("selectionchange",!1,e))}}function Gf(t,e,n,r){switch(Lf(e)){case 1:var s=Jx;break;case 4:s=ey;break;default:s=zc}n=s.bind(null,e,n,t),s=void 0,!za||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Jl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;a!==null;){if(l=zn(a),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}a=a.parentNode}}r=r.return}xf(function(){var u=i,h=Lc(n),f=[];e:{var p=Xf.get(t);if(p!==void 0){var b=Rc,k=t;switch(t){case"keypress":if(lo(n)===0)break e;case"keydown":case"keyup":b=py;break;case"focusin":k="focus",b=Xl;break;case"focusout":k="blur",b=Xl;break;case"beforeblur":case"afterblur":b=Xl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=ry;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=yy;break;case Bf:case Wf:case Yf:b=oy;break;case Uf:b=wy;break;case"scroll":b=ty;break;case"wheel":b=ky;break;case"copy":case"cut":case"paste":b=ay;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Pd}var j=(e&4)!==0,N=!j&&t==="scroll",y=j?p!==null?p+"Capture":null:p;j=[];for(var g=u,x;g!==null;){x=g;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,y!==null&&(w=Ws(g,y),w!=null&&j.push(Ks(g,w,x)))),N)break;g=g.return}0<j.length&&(p=new b(p,k,null,n,h),f.push({event:p,listeners:j}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",p&&n!==Ia&&(k=n.relatedTarget||n.fromElement)&&(zn(k)||k[qt]))break e;if((b||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,b?(k=n.relatedTarget||n.toElement,b=u,k=k?zn(k):null,k!==null&&(N=Kn(k),k!==N||k.tag!==5&&k.tag!==6)&&(k=null)):(b=null,k=u),b!==k)){if(j=Md,w="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(j=Pd,w="onPointerLeave",y="onPointerEnter",g="pointer"),N=b==null?p:br(b),x=k==null?p:br(k),p=new j(w,g+"leave",b,n,h),p.target=N,p.relatedTarget=x,w=null,zn(h)===u&&(j=new j(y,g+"enter",k,n,h),j.target=x,j.relatedTarget=N,w=j),N=w,b&&k)t:{for(j=b,y=k,g=0,x=j;x;x=mr(x))g++;for(x=0,w=y;w;w=mr(w))x++;for(;0<g-x;)j=mr(j),g--;for(;0<x-g;)y=mr(y),x--;for(;g--;){if(j===y||y!==null&&j===y.alternate)break t;j=mr(j),y=mr(y)}j=null}else j=null;b!==null&&Hd(f,p,b,j,!1),k!==null&&N!==null&&Hd(f,N,k,j,!0)}}e:{if(p=u?br(u):window,b=p.nodeName&&p.nodeName.toLowerCase(),b==="select"||b==="input"&&p.type==="file")var C=Ey;else if(Id(p))if(Rf)C=Iy;else{C=Ly;var M=Py}else(b=p.nodeName)&&b.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=_y);if(C&&(C=C(t,u))){Df(f,C,n,h);break e}M&&M(t,p,u),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Ma(p,"number",p.value)}switch(M=u?br(u):window,t){case"focusin":(Id(M)||M.contentEditable==="true")&&(vr=M,Fa=u,zs=null);break;case"focusout":zs=Fa=vr=null;break;case"mousedown":Ha=!0;break;case"contextmenu":case"mouseup":case"dragend":Ha=!1,Od(f,n,h);break;case"selectionchange":if(Dy)break;case"keydown":case"keyup":Od(f,n,h)}var P;if($c)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else yr?Af(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(If&&n.locale!=="ko"&&(yr||E!=="onCompositionStart"?E==="onCompositionEnd"&&yr&&(P=_f()):(un=h,Dc="value"in un?un.value:un.textContent,yr=!0)),M=To(u,E),0<M.length&&(E=new Ed(E,t,null,n,h),f.push({event:E,listeners:M}),P?E.data=P:(P=zf(n),P!==null&&(E.data=P)))),(P=Sy?Ny(t,n):Cy(t,n))&&(u=To(u,"onBeforeInput"),0<u.length&&(h=new Ed("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=P))}Vf(f,e)})}function Ks(t,e,n){return{instance:t,listener:e,currentTarget:n}}function To(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ws(t,n),i!=null&&r.unshift(Ks(t,i,s)),i=Ws(t,e),i!=null&&r.push(Ks(t,i,s))),t=t.return}return r}function mr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hd(t,e,n,r,s){for(var i=e._reactName,l=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Ws(n,i),c!=null&&l.unshift(Ks(n,c,a))):s||(c=Ws(n,i),c!=null&&l.push(Ks(n,c,a)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var Fy=/\r\n?/g,Hy=/\u0000|\uFFFD/g;function Bd(t){return(typeof t=="string"?t:""+t).replace(Fy,`
`).replace(Hy,"")}function Yi(t,e,n){if(e=Bd(e),Bd(t)!==e&&n)throw Error(L(425))}function Mo(){}var Ba=null,Wa=null;function Ya(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ua=typeof setTimeout=="function"?setTimeout:void 0,By=typeof clearTimeout=="function"?clearTimeout:void 0,Wd=typeof Promise=="function"?Promise:void 0,Wy=typeof queueMicrotask=="function"?queueMicrotask:typeof Wd<"u"?function(t){return Wd.resolve(null).then(t).catch(Yy)}:Ua;function Yy(t){setTimeout(function(){throw t})}function ea(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Xs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Xs(e)}function pn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wr=Math.random().toString(36).slice(2),It="__reactFiber$"+Wr,Qs="__reactProps$"+Wr,qt="__reactContainer$"+Wr,Xa="__reactEvents$"+Wr,Uy="__reactListeners$"+Wr,Xy="__reactHandles$"+Wr;function zn(t){var e=t[It];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qt]||n[It]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yd(t);t!==null;){if(n=t[It])return n;t=Yd(t)}return e}t=n,n=t.parentNode}return null}function ai(t){return t=t[It]||t[qt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function br(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function Ko(t){return t[Qs]||null}var Va=[],kr=-1;function jn(t){return{current:t}}function he(t){0>kr||(t.current=Va[kr],Va[kr]=null,kr--)}function ce(t,e){kr++,Va[kr]=t.current,t.current=e}var bn={},Oe=jn(bn),Je=jn(!1),Hn=bn;function zr(t,e){var n=t.type.contextTypes;if(!n)return bn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function et(t){return t=t.childContextTypes,t!=null}function Eo(){he(Je),he(Oe)}function Ud(t,e,n){if(Oe.current!==bn)throw Error(L(168));ce(Oe,e),ce(Je,n)}function qf(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(L(108,Px(t)||"Unknown",s));return xe({},n,r)}function Po(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bn,Hn=Oe.current,ce(Oe,t),ce(Je,Je.current),!0}function Xd(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=qf(t,e,Hn),r.__reactInternalMemoizedMergedChildContext=t,he(Je),he(Oe),ce(Oe,t)):he(Je),ce(Je,n)}var Yt=null,Qo=!1,ta=!1;function Kf(t){Yt===null?Yt=[t]:Yt.push(t)}function Vy(t){Qo=!0,Kf(t)}function Sn(){if(!ta&&Yt!==null){ta=!0;var t=0,e=le;try{var n=Yt;for(le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yt=null,Qo=!1}catch(s){throw Yt!==null&&(Yt=Yt.slice(t+1)),bf(_c,Sn),s}finally{le=e,ta=!1}}return null}var jr=[],Sr=0,Lo=null,_o=0,mt=[],pt=0,Bn=null,Ut=1,Xt="";function _n(t,e){jr[Sr++]=_o,jr[Sr++]=Lo,Lo=t,_o=e}function Qf(t,e,n){mt[pt++]=Ut,mt[pt++]=Xt,mt[pt++]=Bn,Bn=t;var r=Ut;t=Xt;var s=32-Nt(r)-1;r&=~(1<<s),n+=1;var i=32-Nt(e)+s;if(30<i){var l=s-s%5;i=(r&(1<<l)-1).toString(32),r>>=l,s-=l,Ut=1<<32-Nt(e)+s|n<<s|r,Xt=i+t}else Ut=1<<i|n<<s|r,Xt=t}function Hc(t){t.return!==null&&(_n(t,1),Qf(t,1,0))}function Bc(t){for(;t===Lo;)Lo=jr[--Sr],jr[Sr]=null,_o=jr[--Sr],jr[Sr]=null;for(;t===Bn;)Bn=mt[--pt],mt[pt]=null,Xt=mt[--pt],mt[pt]=null,Ut=mt[--pt],mt[pt]=null}var at=null,lt=null,fe=!1,St=null;function Zf(t,e){var n=gt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,at=t,lt=pn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,at=t,lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bn!==null?{id:Ut,overflow:Xt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,at=t,lt=null,!0):!1;default:return!1}}function Ga(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qa(t){if(fe){var e=lt;if(e){var n=e;if(!Vd(t,e)){if(Ga(t))throw Error(L(418));e=pn(n.nextSibling);var r=at;e&&Vd(t,e)?Zf(r,n):(t.flags=t.flags&-4097|2,fe=!1,at=t)}}else{if(Ga(t))throw Error(L(418));t.flags=t.flags&-4097|2,fe=!1,at=t}}}function Gd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;at=t}function Ui(t){if(t!==at)return!1;if(!fe)return Gd(t),fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ya(t.type,t.memoizedProps)),e&&(e=lt)){if(Ga(t))throw Jf(),Error(L(418));for(;e;)Zf(t,e),e=pn(e.nextSibling)}if(Gd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){lt=pn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}lt=null}}else lt=at?pn(t.stateNode.nextSibling):null;return!0}function Jf(){for(var t=lt;t;)t=pn(t.nextSibling)}function Dr(){lt=at=null,fe=!1}function Wc(t){St===null?St=[t]:St.push(t)}var Gy=Zt.ReactCurrentBatchConfig;function ps(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(l){var a=s.refs;l===null?delete a[i]:a[i]=l},e._stringRef=i,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Xi(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qd(t){var e=t._init;return e(t._payload)}function em(t){function e(y,g){if(t){var x=y.deletions;x===null?(y.deletions=[g],y.flags|=16):x.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function s(y,g){return y=vn(y,g),y.index=0,y.sibling=null,y}function i(y,g,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<g?(y.flags|=2,g):x):(y.flags|=2,g)):(y.flags|=1048576,g)}function l(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,g,x,w){return g===null||g.tag!==6?(g=aa(x,y.mode,w),g.return=y,g):(g=s(g,x),g.return=y,g)}function c(y,g,x,w){var C=x.type;return C===xr?h(y,g,x.props.children,w,x.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===on&&qd(C)===g.type)?(w=s(g,x.props),w.ref=ps(y,g,x),w.return=y,w):(w=po(x.type,x.key,x.props,null,y.mode,w),w.ref=ps(y,g,x),w.return=y,w)}function u(y,g,x,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=ca(x,y.mode,w),g.return=y,g):(g=s(g,x.children||[]),g.return=y,g)}function h(y,g,x,w,C){return g===null||g.tag!==7?(g=Fn(x,y.mode,w,C),g.return=y,g):(g=s(g,x),g.return=y,g)}function f(y,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=aa(""+g,y.mode,x),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case zi:return x=po(g.type,g.key,g.props,null,y.mode,x),x.ref=ps(y,null,g),x.return=y,x;case gr:return g=ca(g,y.mode,x),g.return=y,g;case on:var w=g._init;return f(y,w(g._payload),x)}if(Ms(g)||us(g))return g=Fn(g,y.mode,x,null),g.return=y,g;Xi(y,g)}return null}function p(y,g,x,w){var C=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:a(y,g,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zi:return x.key===C?c(y,g,x,w):null;case gr:return x.key===C?u(y,g,x,w):null;case on:return C=x._init,p(y,g,C(x._payload),w)}if(Ms(x)||us(x))return C!==null?null:h(y,g,x,w,null);Xi(y,x)}return null}function b(y,g,x,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(x)||null,a(g,y,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case zi:return y=y.get(w.key===null?x:w.key)||null,c(g,y,w,C);case gr:return y=y.get(w.key===null?x:w.key)||null,u(g,y,w,C);case on:var M=w._init;return b(y,g,x,M(w._payload),C)}if(Ms(w)||us(w))return y=y.get(x)||null,h(g,y,w,C,null);Xi(g,w)}return null}function k(y,g,x,w){for(var C=null,M=null,P=g,E=g=0,O=null;P!==null&&E<x.length;E++){P.index>E?(O=P,P=null):O=P.sibling;var z=p(y,P,x[E],w);if(z===null){P===null&&(P=O);break}t&&P&&z.alternate===null&&e(y,P),g=i(z,g,E),M===null?C=z:M.sibling=z,M=z,P=O}if(E===x.length)return n(y,P),fe&&_n(y,E),C;if(P===null){for(;E<x.length;E++)P=f(y,x[E],w),P!==null&&(g=i(P,g,E),M===null?C=P:M.sibling=P,M=P);return fe&&_n(y,E),C}for(P=r(y,P);E<x.length;E++)O=b(P,y,E,x[E],w),O!==null&&(t&&O.alternate!==null&&P.delete(O.key===null?E:O.key),g=i(O,g,E),M===null?C=O:M.sibling=O,M=O);return t&&P.forEach(function(V){return e(y,V)}),fe&&_n(y,E),C}function j(y,g,x,w){var C=us(x);if(typeof C!="function")throw Error(L(150));if(x=C.call(x),x==null)throw Error(L(151));for(var M=C=null,P=g,E=g=0,O=null,z=x.next();P!==null&&!z.done;E++,z=x.next()){P.index>E?(O=P,P=null):O=P.sibling;var V=p(y,P,z.value,w);if(V===null){P===null&&(P=O);break}t&&P&&V.alternate===null&&e(y,P),g=i(V,g,E),M===null?C=V:M.sibling=V,M=V,P=O}if(z.done)return n(y,P),fe&&_n(y,E),C;if(P===null){for(;!z.done;E++,z=x.next())z=f(y,z.value,w),z!==null&&(g=i(z,g,E),M===null?C=z:M.sibling=z,M=z);return fe&&_n(y,E),C}for(P=r(y,P);!z.done;E++,z=x.next())z=b(P,y,E,z.value,w),z!==null&&(t&&z.alternate!==null&&P.delete(z.key===null?E:z.key),g=i(z,g,E),M===null?C=z:M.sibling=z,M=z);return t&&P.forEach(function(G){return e(y,G)}),fe&&_n(y,E),C}function N(y,g,x,w){if(typeof x=="object"&&x!==null&&x.type===xr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case zi:e:{for(var C=x.key,M=g;M!==null;){if(M.key===C){if(C=x.type,C===xr){if(M.tag===7){n(y,M.sibling),g=s(M,x.props.children),g.return=y,y=g;break e}}else if(M.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===on&&qd(C)===M.type){n(y,M.sibling),g=s(M,x.props),g.ref=ps(y,M,x),g.return=y,y=g;break e}n(y,M);break}else e(y,M);M=M.sibling}x.type===xr?(g=Fn(x.props.children,y.mode,w,x.key),g.return=y,y=g):(w=po(x.type,x.key,x.props,null,y.mode,w),w.ref=ps(y,g,x),w.return=y,y=w)}return l(y);case gr:e:{for(M=x.key;g!==null;){if(g.key===M)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(y,g.sibling),g=s(g,x.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else e(y,g);g=g.sibling}g=ca(x,y.mode,w),g.return=y,y=g}return l(y);case on:return M=x._init,N(y,g,M(x._payload),w)}if(Ms(x))return k(y,g,x,w);if(us(x))return j(y,g,x,w);Xi(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(y,g.sibling),g=s(g,x),g.return=y,y=g):(n(y,g),g=aa(x,y.mode,w),g.return=y,y=g),l(y)):n(y,g)}return N}var Rr=em(!0),tm=em(!1),Io=jn(null),Ao=null,Nr=null,Yc=null;function Uc(){Yc=Nr=Ao=null}function Xc(t){var e=Io.current;he(Io),t._currentValue=e}function Ka(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _r(t,e){Ao=t,Yc=Nr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ze=!0),t.firstContext=null)}function yt(t){var e=t._currentValue;if(Yc!==t)if(t={context:t,memoizedValue:e,next:null},Nr===null){if(Ao===null)throw Error(L(308));Nr=t,Ao.dependencies={lanes:0,firstContext:t}}else Nr=Nr.next=t;return e}var Dn=null;function Vc(t){Dn===null?Dn=[t]:Dn.push(t)}function nm(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Vc(e)):(n.next=s.next,s.next=n),e.interleaved=n,Kt(t,r)}function Kt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ln=!1;function Gc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Kt(t,n)}return s=r.interleaved,s===null?(e.next=e,Vc(r)):(e.next=s.next,s.next=e),r.interleaved=e,Kt(t,n)}function ao(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ic(t,n)}}function Kd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zo(t,e,n,r){var s=t.updateQueue;ln=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,l===null?i=u:l.next=u,l=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==l&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;l=0,h=u=c=null,a=i;do{var p=a.lane,b=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:b,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=t,j=a;switch(p=e,b=n,j.tag){case 1:if(k=j.payload,typeof k=="function"){f=k.call(b,f,p);break e}f=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=j.payload,p=typeof k=="function"?k.call(b,f,p):k,p==null)break e;f=xe({},f,p);break e;case 2:ln=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else b={eventTime:b,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=b,c=f):h=h.next=b,l|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Yn|=l,t.lanes=l,t.memoizedState=f}}function Qd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(L(191,s));s.call(r)}}}var ci={},zt=jn(ci),Zs=jn(ci),Js=jn(ci);function Rn(t){if(t===ci)throw Error(L(174));return t}function qc(t,e){switch(ce(Js,e),ce(Zs,t),ce(zt,ci),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pa(e,t)}he(zt),ce(zt,e)}function Or(){he(zt),he(Zs),he(Js)}function sm(t){Rn(Js.current);var e=Rn(zt.current),n=Pa(e,t.type);e!==n&&(ce(Zs,t),ce(zt,n))}function Kc(t){Zs.current===t&&(he(zt),he(Zs))}var pe=jn(0);function Do(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var na=[];function Qc(){for(var t=0;t<na.length;t++)na[t]._workInProgressVersionPrimary=null;na.length=0}var co=Zt.ReactCurrentDispatcher,ra=Zt.ReactCurrentBatchConfig,Wn=0,ge=null,Te=null,Ee=null,Ro=!1,Ds=!1,ei=0,qy=0;function ze(){throw Error(L(321))}function Zc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Tt(t[n],e[n]))return!1;return!0}function Jc(t,e,n,r,s,i){if(Wn=i,ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,co.current=t===null||t.memoizedState===null?Jy:ev,t=n(r,s),Ds){i=0;do{if(Ds=!1,ei=0,25<=i)throw Error(L(301));i+=1,Ee=Te=null,e.updateQueue=null,co.current=tv,t=n(r,s)}while(Ds)}if(co.current=Oo,e=Te!==null&&Te.next!==null,Wn=0,Ee=Te=ge=null,Ro=!1,e)throw Error(L(300));return t}function eu(){var t=ei!==0;return ei=0,t}function _t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?ge.memoizedState=Ee=t:Ee=Ee.next=t,Ee}function vt(){if(Te===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=Te.next;var e=Ee===null?ge.memoizedState:Ee.next;if(e!==null)Ee=e,Te=t;else{if(t===null)throw Error(L(310));Te=t,t={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Ee===null?ge.memoizedState=Ee=t:Ee=Ee.next=t}return Ee}function ti(t,e){return typeof e=="function"?e(t):e}function sa(t){var e=vt(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=Te,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=l=null,c=null,u=i;do{var h=u.lane;if((Wn&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,l=r):c=c.next=f,ge.lanes|=h,Yn|=h}u=u.next}while(u!==null&&u!==i);c===null?l=r:c.next=a,Tt(r,e.memoizedState)||(Ze=!0),e.memoizedState=r,e.baseState=l,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ge.lanes|=i,Yn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ia(t){var e=vt(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do i=t(i,l.action),l=l.next;while(l!==s);Tt(i,e.memoizedState)||(Ze=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function im(){}function om(t,e){var n=ge,r=vt(),s=e(),i=!Tt(r.memoizedState,s);if(i&&(r.memoizedState=s,Ze=!0),r=r.queue,tu(cm.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ee!==null&&Ee.memoizedState.tag&1){if(n.flags|=2048,ni(9,am.bind(null,n,r,s,e),void 0,null),Pe===null)throw Error(L(349));Wn&30||lm(n,e,s)}return s}function lm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function am(t,e,n,r){e.value=n,e.getSnapshot=r,um(e)&&dm(t)}function cm(t,e,n){return n(function(){um(e)&&dm(t)})}function um(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Tt(t,n)}catch{return!0}}function dm(t){var e=Kt(t,1);e!==null&&Ct(e,t,1,-1)}function Zd(t){var e=_t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:t},e.queue=t,t=t.dispatch=Zy.bind(null,ge,t),[e.memoizedState,t]}function ni(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hm(){return vt().memoizedState}function uo(t,e,n,r){var s=_t();ge.flags|=t,s.memoizedState=ni(1|e,n,void 0,r===void 0?null:r)}function Zo(t,e,n,r){var s=vt();r=r===void 0?null:r;var i=void 0;if(Te!==null){var l=Te.memoizedState;if(i=l.destroy,r!==null&&Zc(r,l.deps)){s.memoizedState=ni(e,n,i,r);return}}ge.flags|=t,s.memoizedState=ni(1|e,n,i,r)}function Jd(t,e){return uo(8390656,8,t,e)}function tu(t,e){return Zo(2048,8,t,e)}function fm(t,e){return Zo(4,2,t,e)}function mm(t,e){return Zo(4,4,t,e)}function pm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gm(t,e,n){return n=n!=null?n.concat([t]):null,Zo(4,4,pm.bind(null,e,t),n)}function nu(){}function xm(t,e){var n=vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ym(t,e){var n=vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vm(t,e,n){return Wn&21?(Tt(n,e)||(n=Sf(),ge.lanes|=n,Yn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ze=!0),t.memoizedState=n)}function Ky(t,e){var n=le;le=n!==0&&4>n?n:4,t(!0);var r=ra.transition;ra.transition={};try{t(!1),e()}finally{le=n,ra.transition=r}}function wm(){return vt().memoizedState}function Qy(t,e,n){var r=yn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bm(t))km(e,n);else if(n=nm(t,e,n,r),n!==null){var s=We();Ct(n,t,r,s),jm(n,e,r)}}function Zy(t,e,n){var r=yn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bm(t))km(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var l=e.lastRenderedState,a=i(l,n);if(s.hasEagerState=!0,s.eagerState=a,Tt(a,l)){var c=e.interleaved;c===null?(s.next=s,Vc(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=nm(t,e,s,r),n!==null&&(s=We(),Ct(n,t,r,s),jm(n,e,r))}}function bm(t){var e=t.alternate;return t===ge||e!==null&&e===ge}function km(t,e){Ds=Ro=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ic(t,n)}}var Oo={readContext:yt,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},Jy={readContext:yt,useCallback:function(t,e){return _t().memoizedState=[t,e===void 0?null:e],t},useContext:yt,useEffect:Jd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,uo(4194308,4,pm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uo(4194308,4,t,e)},useInsertionEffect:function(t,e){return uo(4,2,t,e)},useMemo:function(t,e){var n=_t();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_t();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Qy.bind(null,ge,t),[r.memoizedState,t]},useRef:function(t){var e=_t();return t={current:t},e.memoizedState=t},useState:Zd,useDebugValue:nu,useDeferredValue:function(t){return _t().memoizedState=t},useTransition:function(){var t=Zd(!1),e=t[0];return t=Ky.bind(null,t[1]),_t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ge,s=_t();if(fe){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),Pe===null)throw Error(L(349));Wn&30||lm(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Jd(cm.bind(null,r,i,t),[t]),r.flags|=2048,ni(9,am.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=_t(),e=Pe.identifierPrefix;if(fe){var n=Xt,r=Ut;n=(r&~(1<<32-Nt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ei++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qy++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ev={readContext:yt,useCallback:xm,useContext:yt,useEffect:tu,useImperativeHandle:gm,useInsertionEffect:fm,useLayoutEffect:mm,useMemo:ym,useReducer:sa,useRef:hm,useState:function(){return sa(ti)},useDebugValue:nu,useDeferredValue:function(t){var e=vt();return vm(e,Te.memoizedState,t)},useTransition:function(){var t=sa(ti)[0],e=vt().memoizedState;return[t,e]},useMutableSource:im,useSyncExternalStore:om,useId:wm,unstable_isNewReconciler:!1},tv={readContext:yt,useCallback:xm,useContext:yt,useEffect:tu,useImperativeHandle:gm,useInsertionEffect:fm,useLayoutEffect:mm,useMemo:ym,useReducer:ia,useRef:hm,useState:function(){return ia(ti)},useDebugValue:nu,useDeferredValue:function(t){var e=vt();return Te===null?e.memoizedState=t:vm(e,Te.memoizedState,t)},useTransition:function(){var t=ia(ti)[0],e=vt().memoizedState;return[t,e]},useMutableSource:im,useSyncExternalStore:om,useId:wm,unstable_isNewReconciler:!1};function kt(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qa(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jo={isMounted:function(t){return(t=t._reactInternals)?Kn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=We(),s=yn(t),i=Vt(r,s);i.payload=e,n!=null&&(i.callback=n),e=gn(t,i,s),e!==null&&(Ct(e,t,s,r),ao(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=We(),s=yn(t),i=Vt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gn(t,i,s),e!==null&&(Ct(e,t,s,r),ao(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=We(),r=yn(t),s=Vt(n,r);s.tag=2,e!=null&&(s.callback=e),e=gn(t,s,r),e!==null&&(Ct(e,t,r,n),ao(e,t,r))}};function eh(t,e,n,r,s,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,l):e.prototype&&e.prototype.isPureReactComponent?!Gs(n,r)||!Gs(s,i):!0}function Sm(t,e,n){var r=!1,s=bn,i=e.contextType;return typeof i=="object"&&i!==null?i=yt(i):(s=et(e)?Hn:Oe.current,r=e.contextTypes,i=(r=r!=null)?zr(t,s):bn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function th(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jo.enqueueReplaceState(e,e.state,null)}function Za(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Gc(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=yt(i):(i=et(e)?Hn:Oe.current,s.context=zr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Qa(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Jo.enqueueReplaceState(s,s.state,null),zo(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function $r(t,e){try{var n="",r=e;do n+=Ex(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function oa(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ja(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nv=typeof WeakMap=="function"?WeakMap:Map;function Nm(t,e,n){n=Vt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fo||(Fo=!0,cc=r),Ja(t,e)},n}function Cm(t,e,n){n=Vt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ja(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ja(t,e),typeof r!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function nh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nv;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=gv.bind(null,t,e,n),e.then(t,t))}function rh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sh(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vt(-1,1),e.tag=2,gn(n,e,1))),n.lanes|=1),t)}var rv=Zt.ReactCurrentOwner,Ze=!1;function Be(t,e,n,r){e.child=t===null?tm(e,null,n,r):Rr(e,t.child,n,r)}function ih(t,e,n,r,s){n=n.render;var i=e.ref;return _r(e,s),r=Jc(t,e,n,r,i,s),n=eu(),t!==null&&!Ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qt(t,e,s)):(fe&&n&&Hc(e),e.flags|=1,Be(t,e,r,s),e.child)}function oh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!uu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Tm(t,e,i,r,s)):(t=po(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Gs,n(l,r)&&t.ref===e.ref)return Qt(t,e,s)}return e.flags|=1,t=vn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Tm(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Gs(i,r)&&t.ref===e.ref)if(Ze=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ze=!0);else return e.lanes=t.lanes,Qt(t,e,s)}return ec(t,e,n,r,s)}function Mm(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(Tr,it),it|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(Tr,it),it|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ce(Tr,it),it|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ce(Tr,it),it|=r;return Be(t,e,s,n),e.child}function Em(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ec(t,e,n,r,s){var i=et(n)?Hn:Oe.current;return i=zr(e,i),_r(e,s),n=Jc(t,e,n,r,i,s),r=eu(),t!==null&&!Ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qt(t,e,s)):(fe&&r&&Hc(e),e.flags|=1,Be(t,e,n,s),e.child)}function lh(t,e,n,r,s){if(et(n)){var i=!0;Po(e)}else i=!1;if(_r(e,s),e.stateNode===null)ho(t,e),Sm(e,n,r),Za(e,n,r,s),r=!0;else if(t===null){var l=e.stateNode,a=e.memoizedProps;l.props=a;var c=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=yt(u):(u=et(n)?Hn:Oe.current,u=zr(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==r||c!==u)&&th(e,l,r,u),ln=!1;var p=e.memoizedState;l.state=p,zo(e,r,l,s),c=e.memoizedState,a!==r||p!==c||Je.current||ln?(typeof h=="function"&&(Qa(e,n,h,r),c=e.memoizedState),(a=ln||eh(e,n,a,r,p,c,u))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),l.props=r,l.state=c,l.context=u,r=a):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{l=e.stateNode,rm(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:kt(e.type,a),l.props=u,f=e.pendingProps,p=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=yt(c):(c=et(n)?Hn:Oe.current,c=zr(e,c));var b=n.getDerivedStateFromProps;(h=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==f||p!==c)&&th(e,l,r,c),ln=!1,p=e.memoizedState,l.state=p,zo(e,r,l,s);var k=e.memoizedState;a!==f||p!==k||Je.current||ln?(typeof b=="function"&&(Qa(e,n,b,r),k=e.memoizedState),(u=ln||eh(e,n,u,r,p,k,c)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,k,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,k,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),l.props=r,l.state=k,l.context=c,r=u):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return tc(t,e,n,r,i,s)}function tc(t,e,n,r,s,i){Em(t,e);var l=(e.flags&128)!==0;if(!r&&!l)return s&&Xd(e,n,!1),Qt(t,e,i);r=e.stateNode,rv.current=e;var a=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&l?(e.child=Rr(e,t.child,null,i),e.child=Rr(e,null,a,i)):Be(t,e,a,i),e.memoizedState=r.state,s&&Xd(e,n,!0),e.child}function Pm(t){var e=t.stateNode;e.pendingContext?Ud(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ud(t,e.context,!1),qc(t,e.containerInfo)}function ah(t,e,n,r,s){return Dr(),Wc(s),e.flags|=256,Be(t,e,n,r),e.child}var nc={dehydrated:null,treeContext:null,retryLane:0};function rc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lm(t,e,n){var r=e.pendingProps,s=pe.current,i=!1,l=(e.flags&128)!==0,a;if((a=l)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ce(pe,s&1),t===null)return qa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=r.children,t=r.fallback,i?(r=e.mode,i=e.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=nl(l,r,0,null),t=Fn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=rc(n),e.memoizedState=nc,t):ru(e,l));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return sv(t,e,l,r,a,s,n);if(i){i=r.fallback,l=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=vn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=vn(a,i):(i=Fn(i,l,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,l=t.child.memoizedState,l=l===null?rc(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~n,e.memoizedState=nc,r}return i=t.child,t=i.sibling,r=vn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ru(t,e){return e=nl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vi(t,e,n,r){return r!==null&&Wc(r),Rr(e,t.child,null,n),t=ru(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sv(t,e,n,r,s,i,l){if(n)return e.flags&256?(e.flags&=-257,r=oa(Error(L(422))),Vi(t,e,l,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=nl({mode:"visible",children:r.children},s,0,null),i=Fn(i,s,l,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Rr(e,t.child,null,l),e.child.memoizedState=rc(l),e.memoizedState=nc,i);if(!(e.mode&1))return Vi(t,e,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(L(419)),r=oa(i,r,void 0),Vi(t,e,l,r)}if(a=(l&t.childLanes)!==0,Ze||a){if(r=Pe,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Kt(t,s),Ct(r,t,s,-1))}return cu(),r=oa(Error(L(421))),Vi(t,e,l,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=xv.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,lt=pn(s.nextSibling),at=e,fe=!0,St=null,t!==null&&(mt[pt++]=Ut,mt[pt++]=Xt,mt[pt++]=Bn,Ut=t.id,Xt=t.overflow,Bn=e),e=ru(e,r.children),e.flags|=4096,e)}function ch(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ka(t.return,e,n)}function la(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function _m(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Be(t,e,r.children,n),r=pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ch(t,n,e);else if(t.tag===19)ch(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ce(pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Do(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),la(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Do(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}la(e,!0,n,null,i);break;case"together":la(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ho(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=vn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iv(t,e,n){switch(e.tag){case 3:Pm(e),Dr();break;case 5:sm(e);break;case 1:et(e.type)&&Po(e);break;case 4:qc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ce(Io,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ce(pe,pe.current&1),e.flags|=128,null):n&e.child.childLanes?Lm(t,e,n):(ce(pe,pe.current&1),t=Qt(t,e,n),t!==null?t.sibling:null);ce(pe,pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _m(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ce(pe,pe.current),r)break;return null;case 22:case 23:return e.lanes=0,Mm(t,e,n)}return Qt(t,e,n)}var Im,sc,Am,zm;Im=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sc=function(){};Am=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Rn(zt.current);var i=null;switch(n){case"input":s=Ca(t,s),r=Ca(t,r),i=[];break;case"select":s=xe({},s,{value:void 0}),r=xe({},r,{value:void 0}),i=[];break;case"textarea":s=Ea(t,s),r=Ea(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mo)}La(n,r);var l;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Hs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(l in a)!a.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&a[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Hs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&de("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};zm=function(t,e,n,r){n!==r&&(e.flags|=4)};function gs(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function De(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ov(t,e,n){var r=e.pendingProps;switch(Bc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(e),null;case 1:return et(e.type)&&Eo(),De(e),null;case 3:return r=e.stateNode,Or(),he(Je),he(Oe),Qc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ui(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,St!==null&&(hc(St),St=null))),sc(t,e),De(e),null;case 5:Kc(e);var s=Rn(Js.current);if(n=e.type,t!==null&&e.stateNode!=null)Am(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return De(e),null}if(t=Rn(zt.current),Ui(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[It]=e,r[Qs]=i,t=(e.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(s=0;s<Ps.length;s++)de(Ps[s],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":yd(r,i),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},de("invalid",r);break;case"textarea":wd(r,i),de("invalid",r)}La(n,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var a=i[l];l==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Yi(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Yi(r.textContent,a,t),s=["children",""+a]):Hs.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&de("scroll",r)}switch(n){case"input":Di(r),vd(r,i,!0);break;case"textarea":Di(r),bd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Mo)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[It]=e,t[Qs]=r,Im(t,e,!1,!1),e.stateNode=t;e:{switch(l=_a(n,r),n){case"dialog":de("cancel",t),de("close",t),s=r;break;case"iframe":case"object":case"embed":de("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ps.length;s++)de(Ps[s],t);s=r;break;case"source":de("error",t),s=r;break;case"img":case"image":case"link":de("error",t),de("load",t),s=r;break;case"details":de("toggle",t),s=r;break;case"input":yd(t,r),s=Ca(t,r),de("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=xe({},r,{value:void 0}),de("invalid",t);break;case"textarea":wd(t,r),s=Ea(t,r),de("invalid",t);break;default:s=r}La(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?hf(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&uf(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Bs(t,c):typeof c=="number"&&Bs(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&de("scroll",t):c!=null&&Tc(t,i,c,l))}switch(n){case"input":Di(t),vd(t,r,!1);break;case"textarea":Di(t),bd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Mr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Mr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Mo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return De(e),null;case 6:if(t&&e.stateNode!=null)zm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=Rn(Js.current),Rn(zt.current),Ui(e)){if(r=e.stateNode,n=e.memoizedProps,r[It]=e,(i=r.nodeValue!==n)&&(t=at,t!==null))switch(t.tag){case 3:Yi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yi(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[It]=e,e.stateNode=r}return De(e),null;case 13:if(he(pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fe&&lt!==null&&e.mode&1&&!(e.flags&128))Jf(),Dr(),e.flags|=98560,i=!1;else if(i=Ui(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(L(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[It]=e}else Dr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),i=!1}else St!==null&&(hc(St),St=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pe.current&1?Me===0&&(Me=3):cu())),e.updateQueue!==null&&(e.flags|=4),De(e),null);case 4:return Or(),sc(t,e),t===null&&qs(e.stateNode.containerInfo),De(e),null;case 10:return Xc(e.type._context),De(e),null;case 17:return et(e.type)&&Eo(),De(e),null;case 19:if(he(pe),i=e.memoizedState,i===null)return De(e),null;if(r=(e.flags&128)!==0,l=i.rendering,l===null)if(r)gs(i,!1);else{if(Me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Do(t),l!==null){for(e.flags|=128,gs(i,!1),r=l.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ce(pe,pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&be()>Fr&&(e.flags|=128,r=!0,gs(i,!1),e.lanes=4194304)}else{if(!r)if(t=Do(l),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!fe)return De(e),null}else 2*be()-i.renderingStartTime>Fr&&n!==1073741824&&(e.flags|=128,r=!0,gs(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(n=i.last,n!==null?n.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=be(),e.sibling=null,n=pe.current,ce(pe,r?n&1|2:n&1),e):(De(e),null);case 22:case 23:return au(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?it&1073741824&&(De(e),e.subtreeFlags&6&&(e.flags|=8192)):De(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function lv(t,e){switch(Bc(e),e.tag){case 1:return et(e.type)&&Eo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Or(),he(Je),he(Oe),Qc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Kc(e),null;case 13:if(he(pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));Dr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(pe),null;case 4:return Or(),null;case 10:return Xc(e.type._context),null;case 22:case 23:return au(),null;case 24:return null;default:return null}}var Gi=!1,Re=!1,av=typeof WeakSet=="function"?WeakSet:Set,R=null;function Cr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ye(t,e,r)}else n.current=null}function ic(t,e,n){try{n()}catch(r){ye(t,e,r)}}var uh=!1;function cv(t,e){if(Ba=No,t=Ff(),Fc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,a=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var b;f!==n||s!==0&&f.nodeType!==3||(a=l+s),f!==i||r!==0&&f.nodeType!==3||(c=l+r),f.nodeType===3&&(l+=f.nodeValue.length),(b=f.firstChild)!==null;)p=f,f=b;for(;;){if(f===t)break t;if(p===n&&++u===s&&(a=l),p===i&&++h===r&&(c=l),(b=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=b}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wa={focusedElem:t,selectionRange:n},No=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var j=k.memoizedProps,N=k.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?j:kt(e.type,j),N);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(w){ye(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return k=uh,uh=!1,k}function Rs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ic(e,n,i)}s=s.next}while(s!==r)}}function el(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function oc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Dm(t){var e=t.alternate;e!==null&&(t.alternate=null,Dm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[It],delete e[Qs],delete e[Xa],delete e[Uy],delete e[Xy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Rm(t){return t.tag===5||t.tag===3||t.tag===4}function dh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mo));else if(r!==4&&(t=t.child,t!==null))for(lc(t,e,n),t=t.sibling;t!==null;)lc(t,e,n),t=t.sibling}function ac(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ac(t,e,n),t=t.sibling;t!==null;)ac(t,e,n),t=t.sibling}var _e=null,jt=!1;function rn(t,e,n){for(n=n.child;n!==null;)Om(t,e,n),n=n.sibling}function Om(t,e,n){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Xo,n)}catch{}switch(n.tag){case 5:Re||Cr(n,e);case 6:var r=_e,s=jt;_e=null,rn(t,e,n),_e=r,jt=s,_e!==null&&(jt?(t=_e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_e.removeChild(n.stateNode));break;case 18:_e!==null&&(jt?(t=_e,n=n.stateNode,t.nodeType===8?ea(t.parentNode,n):t.nodeType===1&&ea(t,n),Xs(t)):ea(_e,n.stateNode));break;case 4:r=_e,s=jt,_e=n.stateNode.containerInfo,jt=!0,rn(t,e,n),_e=r,jt=s;break;case 0:case 11:case 14:case 15:if(!Re&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&ic(n,e,l),s=s.next}while(s!==r)}rn(t,e,n);break;case 1:if(!Re&&(Cr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ye(n,e,a)}rn(t,e,n);break;case 21:rn(t,e,n);break;case 22:n.mode&1?(Re=(r=Re)||n.memoizedState!==null,rn(t,e,n),Re=r):rn(t,e,n);break;default:rn(t,e,n)}}function hh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new av),e.forEach(function(r){var s=yv.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function wt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,l=e,a=l;e:for(;a!==null;){switch(a.tag){case 5:_e=a.stateNode,jt=!1;break e;case 3:_e=a.stateNode.containerInfo,jt=!0;break e;case 4:_e=a.stateNode.containerInfo,jt=!0;break e}a=a.return}if(_e===null)throw Error(L(160));Om(i,l,s),_e=null,jt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ye(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$m(e,t),e=e.sibling}function $m(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wt(e,t),Lt(t),r&4){try{Rs(3,t,t.return),el(3,t)}catch(j){ye(t,t.return,j)}try{Rs(5,t,t.return)}catch(j){ye(t,t.return,j)}}break;case 1:wt(e,t),Lt(t),r&512&&n!==null&&Cr(n,n.return);break;case 5:if(wt(e,t),Lt(t),r&512&&n!==null&&Cr(n,n.return),t.flags&32){var s=t.stateNode;try{Bs(s,"")}catch(j){ye(t,t.return,j)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,l=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&lf(s,i),_a(a,l);var u=_a(a,i);for(l=0;l<c.length;l+=2){var h=c[l],f=c[l+1];h==="style"?hf(s,f):h==="dangerouslySetInnerHTML"?uf(s,f):h==="children"?Bs(s,f):Tc(s,h,f,u)}switch(a){case"input":Ta(s,i);break;case"textarea":af(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?Mr(s,!!i.multiple,b,!1):p!==!!i.multiple&&(i.defaultValue!=null?Mr(s,!!i.multiple,i.defaultValue,!0):Mr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Qs]=i}catch(j){ye(t,t.return,j)}}break;case 6:if(wt(e,t),Lt(t),r&4){if(t.stateNode===null)throw Error(L(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(j){ye(t,t.return,j)}}break;case 3:if(wt(e,t),Lt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xs(e.containerInfo)}catch(j){ye(t,t.return,j)}break;case 4:wt(e,t),Lt(t);break;case 13:wt(e,t),Lt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ou=be())),r&4&&hh(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Re=(u=Re)||h,wt(e,t),Re=u):wt(e,t),Lt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(R=t,h=t.child;h!==null;){for(f=R=h;R!==null;){switch(p=R,b=p.child,p.tag){case 0:case 11:case 14:case 15:Rs(4,p,p.return);break;case 1:Cr(p,p.return);var k=p.stateNode;if(typeof k.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(j){ye(r,n,j)}}break;case 5:Cr(p,p.return);break;case 22:if(p.memoizedState!==null){mh(f);continue}}b!==null?(b.return=p,R=b):mh(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,c=f.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=df("display",l))}catch(j){ye(t,t.return,j)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(j){ye(t,t.return,j)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:wt(e,t),Lt(t),r&4&&hh(t);break;case 21:break;default:wt(e,t),Lt(t)}}function Lt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Rm(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Bs(s,""),r.flags&=-33);var i=dh(t);ac(t,i,s);break;case 3:case 4:var l=r.stateNode.containerInfo,a=dh(t);lc(t,a,l);break;default:throw Error(L(161))}}catch(c){ye(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uv(t,e,n){R=t,Fm(t)}function Fm(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var s=R,i=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||Gi;if(!l){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Re;a=Gi;var u=Re;if(Gi=l,(Re=c)&&!u)for(R=s;R!==null;)l=R,c=l.child,l.tag===22&&l.memoizedState!==null?ph(s):c!==null?(c.return=l,R=c):ph(s);for(;i!==null;)R=i,Fm(i),i=i.sibling;R=s,Gi=a,Re=u}fh(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,R=i):fh(t)}}function fh(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Re||el(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Re)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:kt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Qd(e,i,r);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qd(e,l,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Xs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Re||e.flags&512&&oc(e)}catch(p){ye(e,e.return,p)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function mh(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function ph(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{el(4,e)}catch(c){ye(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ye(e,s,c)}}var i=e.return;try{oc(e)}catch(c){ye(e,i,c)}break;case 5:var l=e.return;try{oc(e)}catch(c){ye(e,l,c)}}}catch(c){ye(e,e.return,c)}if(e===t){R=null;break}var a=e.sibling;if(a!==null){a.return=e.return,R=a;break}R=e.return}}var dv=Math.ceil,$o=Zt.ReactCurrentDispatcher,su=Zt.ReactCurrentOwner,xt=Zt.ReactCurrentBatchConfig,ne=0,Pe=null,Ne=null,Ie=0,it=0,Tr=jn(0),Me=0,ri=null,Yn=0,tl=0,iu=0,Os=null,Qe=null,ou=0,Fr=1/0,Wt=null,Fo=!1,cc=null,xn=null,qi=!1,dn=null,Ho=0,$s=0,uc=null,fo=-1,mo=0;function We(){return ne&6?be():fo!==-1?fo:fo=be()}function yn(t){return t.mode&1?ne&2&&Ie!==0?Ie&-Ie:Gy.transition!==null?(mo===0&&(mo=Sf()),mo):(t=le,t!==0||(t=window.event,t=t===void 0?16:Lf(t.type)),t):1}function Ct(t,e,n,r){if(50<$s)throw $s=0,uc=null,Error(L(185));oi(t,n,r),(!(ne&2)||t!==Pe)&&(t===Pe&&(!(ne&2)&&(tl|=n),Me===4&&cn(t,Ie)),tt(t,r),n===1&&ne===0&&!(e.mode&1)&&(Fr=be()+500,Qo&&Sn()))}function tt(t,e){var n=t.callbackNode;Gx(t,e);var r=So(t,t===Pe?Ie:0);if(r===0)n!==null&&Sd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Sd(n),e===1)t.tag===0?Vy(gh.bind(null,t)):Kf(gh.bind(null,t)),Wy(function(){!(ne&6)&&Sn()}),n=null;else{switch(Nf(r)){case 1:n=_c;break;case 4:n=kf;break;case 16:n=jo;break;case 536870912:n=jf;break;default:n=jo}n=Gm(n,Hm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Hm(t,e){if(fo=-1,mo=0,ne&6)throw Error(L(327));var n=t.callbackNode;if(Ir()&&t.callbackNode!==n)return null;var r=So(t,t===Pe?Ie:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bo(t,r);else{e=r;var s=ne;ne|=2;var i=Wm();(Pe!==t||Ie!==e)&&(Wt=null,Fr=be()+500,$n(t,e));do try{mv();break}catch(a){Bm(t,a)}while(!0);Uc(),$o.current=i,ne=s,Ne!==null?e=0:(Pe=null,Ie=0,e=Me)}if(e!==0){if(e===2&&(s=Ra(t),s!==0&&(r=s,e=dc(t,s))),e===1)throw n=ri,$n(t,0),cn(t,r),tt(t,be()),n;if(e===6)cn(t,r);else{if(s=t.current.alternate,!(r&30)&&!hv(s)&&(e=Bo(t,r),e===2&&(i=Ra(t),i!==0&&(r=i,e=dc(t,i))),e===1))throw n=ri,$n(t,0),cn(t,r),tt(t,be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:In(t,Qe,Wt);break;case 3:if(cn(t,r),(r&130023424)===r&&(e=ou+500-be(),10<e)){if(So(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){We(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ua(In.bind(null,t,Qe,Wt),e);break}In(t,Qe,Wt);break;case 4:if(cn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var l=31-Nt(r);i=1<<l,l=e[l],l>s&&(s=l),r&=~i}if(r=s,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dv(r/1960))-r,10<r){t.timeoutHandle=Ua(In.bind(null,t,Qe,Wt),r);break}In(t,Qe,Wt);break;case 5:In(t,Qe,Wt);break;default:throw Error(L(329))}}}return tt(t,be()),t.callbackNode===n?Hm.bind(null,t):null}function dc(t,e){var n=Os;return t.current.memoizedState.isDehydrated&&($n(t,e).flags|=256),t=Bo(t,e),t!==2&&(e=Qe,Qe=n,e!==null&&hc(e)),t}function hc(t){Qe===null?Qe=t:Qe.push.apply(Qe,t)}function hv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Tt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cn(t,e){for(e&=~iu,e&=~tl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nt(e),r=1<<n;t[n]=-1,e&=~r}}function gh(t){if(ne&6)throw Error(L(327));Ir();var e=So(t,0);if(!(e&1))return tt(t,be()),null;var n=Bo(t,e);if(t.tag!==0&&n===2){var r=Ra(t);r!==0&&(e=r,n=dc(t,r))}if(n===1)throw n=ri,$n(t,0),cn(t,e),tt(t,be()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,In(t,Qe,Wt),tt(t,be()),null}function lu(t,e){var n=ne;ne|=1;try{return t(e)}finally{ne=n,ne===0&&(Fr=be()+500,Qo&&Sn())}}function Un(t){dn!==null&&dn.tag===0&&!(ne&6)&&Ir();var e=ne;ne|=1;var n=xt.transition,r=le;try{if(xt.transition=null,le=1,t)return t()}finally{le=r,xt.transition=n,ne=e,!(ne&6)&&Sn()}}function au(){it=Tr.current,he(Tr)}function $n(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,By(n)),Ne!==null)for(n=Ne.return;n!==null;){var r=n;switch(Bc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Eo();break;case 3:Or(),he(Je),he(Oe),Qc();break;case 5:Kc(r);break;case 4:Or();break;case 13:he(pe);break;case 19:he(pe);break;case 10:Xc(r.type._context);break;case 22:case 23:au()}n=n.return}if(Pe=t,Ne=t=vn(t.current,null),Ie=it=e,Me=0,ri=null,iu=tl=Yn=0,Qe=Os=null,Dn!==null){for(e=0;e<Dn.length;e++)if(n=Dn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=s,r.next=l}n.pending=r}Dn=null}return t}function Bm(t,e){do{var n=Ne;try{if(Uc(),co.current=Oo,Ro){for(var r=ge.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ro=!1}if(Wn=0,Ee=Te=ge=null,Ds=!1,ei=0,su.current=null,n===null||n.return===null){Me=1,ri=e,Ne=null;break}e:{var i=t,l=n.return,a=n,c=e;if(e=Ie,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var b=rh(l);if(b!==null){b.flags&=-257,sh(b,l,a,i,e),b.mode&1&&nh(i,u,e),e=b,c=u;var k=e.updateQueue;if(k===null){var j=new Set;j.add(c),e.updateQueue=j}else k.add(c);break e}else{if(!(e&1)){nh(i,u,e),cu();break e}c=Error(L(426))}}else if(fe&&a.mode&1){var N=rh(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),sh(N,l,a,i,e),Wc($r(c,a));break e}}i=c=$r(c,a),Me!==4&&(Me=2),Os===null?Os=[i]:Os.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Nm(i,c,e);Kd(i,y);break e;case 1:a=c;var g=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(xn===null||!xn.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=Cm(i,a,e);Kd(i,w);break e}}i=i.return}while(i!==null)}Um(n)}catch(C){e=C,Ne===n&&n!==null&&(Ne=n=n.return);continue}break}while(!0)}function Wm(){var t=$o.current;return $o.current=Oo,t===null?Oo:t}function cu(){(Me===0||Me===3||Me===2)&&(Me=4),Pe===null||!(Yn&268435455)&&!(tl&268435455)||cn(Pe,Ie)}function Bo(t,e){var n=ne;ne|=2;var r=Wm();(Pe!==t||Ie!==e)&&(Wt=null,$n(t,e));do try{fv();break}catch(s){Bm(t,s)}while(!0);if(Uc(),ne=n,$o.current=r,Ne!==null)throw Error(L(261));return Pe=null,Ie=0,Me}function fv(){for(;Ne!==null;)Ym(Ne)}function mv(){for(;Ne!==null&&!$x();)Ym(Ne)}function Ym(t){var e=Vm(t.alternate,t,it);t.memoizedProps=t.pendingProps,e===null?Um(t):Ne=e,su.current=null}function Um(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lv(n,e),n!==null){n.flags&=32767,Ne=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Me=6,Ne=null;return}}else if(n=ov(n,e,it),n!==null){Ne=n;return}if(e=e.sibling,e!==null){Ne=e;return}Ne=e=t}while(e!==null);Me===0&&(Me=5)}function In(t,e,n){var r=le,s=xt.transition;try{xt.transition=null,le=1,pv(t,e,n,r)}finally{xt.transition=s,le=r}return null}function pv(t,e,n,r){do Ir();while(dn!==null);if(ne&6)throw Error(L(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(qx(t,i),t===Pe&&(Ne=Pe=null,Ie=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qi||(qi=!0,Gm(jo,function(){return Ir(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=xt.transition,xt.transition=null;var l=le;le=1;var a=ne;ne|=4,su.current=null,cv(t,n),$m(n,t),zy(Wa),No=!!Ba,Wa=Ba=null,t.current=n,uv(n),Fx(),ne=a,le=l,xt.transition=i}else t.current=n;if(qi&&(qi=!1,dn=t,Ho=s),i=t.pendingLanes,i===0&&(xn=null),Wx(n.stateNode),tt(t,be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fo)throw Fo=!1,t=cc,cc=null,t;return Ho&1&&t.tag!==0&&Ir(),i=t.pendingLanes,i&1?t===uc?$s++:($s=0,uc=t):$s=0,Sn(),null}function Ir(){if(dn!==null){var t=Nf(Ho),e=xt.transition,n=le;try{if(xt.transition=null,le=16>t?16:t,dn===null)var r=!1;else{if(t=dn,dn=null,Ho=0,ne&6)throw Error(L(331));var s=ne;for(ne|=4,R=t.current;R!==null;){var i=R,l=i.child;if(R.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(R=u;R!==null;){var h=R;switch(h.tag){case 0:case 11:case 15:Rs(8,h,i)}var f=h.child;if(f!==null)f.return=h,R=f;else for(;R!==null;){h=R;var p=h.sibling,b=h.return;if(Dm(h),h===u){R=null;break}if(p!==null){p.return=b,R=p;break}R=b}}}var k=i.alternate;if(k!==null){var j=k.child;if(j!==null){k.child=null;do{var N=j.sibling;j.sibling=null,j=N}while(j!==null)}}R=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,R=l;else e:for(;R!==null;){if(i=R,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Rs(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,R=y;break e}R=i.return}}var g=t.current;for(R=g;R!==null;){l=R;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,R=x;else e:for(l=g;R!==null;){if(a=R,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:el(9,a)}}catch(C){ye(a,a.return,C)}if(a===l){R=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,R=w;break e}R=a.return}}if(ne=s,Sn(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Xo,t)}catch{}r=!0}return r}finally{le=n,xt.transition=e}}return!1}function xh(t,e,n){e=$r(n,e),e=Nm(t,e,1),t=gn(t,e,1),e=We(),t!==null&&(oi(t,1,e),tt(t,e))}function ye(t,e,n){if(t.tag===3)xh(t,t,n);else for(;e!==null;){if(e.tag===3){xh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xn===null||!xn.has(r))){t=$r(n,t),t=Cm(e,t,1),e=gn(e,t,1),t=We(),e!==null&&(oi(e,1,t),tt(e,t));break}}e=e.return}}function gv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=We(),t.pingedLanes|=t.suspendedLanes&n,Pe===t&&(Ie&n)===n&&(Me===4||Me===3&&(Ie&130023424)===Ie&&500>be()-ou?$n(t,0):iu|=n),tt(t,e)}function Xm(t,e){e===0&&(t.mode&1?(e=$i,$i<<=1,!($i&130023424)&&($i=4194304)):e=1);var n=We();t=Kt(t,e),t!==null&&(oi(t,e,n),tt(t,n))}function xv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Xm(t,n)}function yv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),Xm(t,n)}var Vm;Vm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Je.current)Ze=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ze=!1,iv(t,e,n);Ze=!!(t.flags&131072)}else Ze=!1,fe&&e.flags&1048576&&Qf(e,_o,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ho(t,e),t=e.pendingProps;var s=zr(e,Oe.current);_r(e,n),s=Jc(null,e,r,t,s,n);var i=eu();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,et(r)?(i=!0,Po(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Gc(e),s.updater=Jo,e.stateNode=s,s._reactInternals=e,Za(e,r,t,n),e=tc(null,e,r,!0,i,n)):(e.tag=0,fe&&i&&Hc(e),Be(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ho(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=wv(r),t=kt(r,t),s){case 0:e=ec(null,e,r,t,n);break e;case 1:e=lh(null,e,r,t,n);break e;case 11:e=ih(null,e,r,t,n);break e;case 14:e=oh(null,e,r,kt(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),ec(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),lh(t,e,r,s,n);case 3:e:{if(Pm(e),t===null)throw Error(L(387));r=e.pendingProps,i=e.memoizedState,s=i.element,rm(t,e),zo(e,r,null,n);var l=e.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=$r(Error(L(423)),e),e=ah(t,e,r,n,s);break e}else if(r!==s){s=$r(Error(L(424)),e),e=ah(t,e,r,n,s);break e}else for(lt=pn(e.stateNode.containerInfo.firstChild),at=e,fe=!0,St=null,n=tm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Dr(),r===s){e=Qt(t,e,n);break e}Be(t,e,r,n)}e=e.child}return e;case 5:return sm(e),t===null&&qa(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,l=s.children,Ya(r,s)?l=null:i!==null&&Ya(r,i)&&(e.flags|=32),Em(t,e),Be(t,e,l,n),e.child;case 6:return t===null&&qa(e),null;case 13:return Lm(t,e,n);case 4:return qc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Rr(e,null,r,n):Be(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),ih(t,e,r,s,n);case 7:return Be(t,e,e.pendingProps,n),e.child;case 8:return Be(t,e,e.pendingProps.children,n),e.child;case 12:return Be(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,l=s.value,ce(Io,r._currentValue),r._currentValue=l,i!==null)if(Tt(i.value,l)){if(i.children===s.children&&!Je.current){e=Qt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){l=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Vt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ka(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===e.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(L(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),Ka(l,n,e),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===e){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Be(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,_r(e,n),s=yt(s),r=r(s),e.flags|=1,Be(t,e,r,n),e.child;case 14:return r=e.type,s=kt(r,e.pendingProps),s=kt(r.type,s),oh(t,e,r,s,n);case 15:return Tm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),ho(t,e),e.tag=1,et(r)?(t=!0,Po(e)):t=!1,_r(e,n),Sm(e,r,s),Za(e,r,s,n),tc(null,e,r,!0,t,n);case 19:return _m(t,e,n);case 22:return Mm(t,e,n)}throw Error(L(156,e.tag))};function Gm(t,e){return bf(t,e)}function vv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(t,e,n,r){return new vv(t,e,n,r)}function uu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wv(t){if(typeof t=="function")return uu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ec)return 11;if(t===Pc)return 14}return 2}function vn(t,e){var n=t.alternate;return n===null?(n=gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function po(t,e,n,r,s,i){var l=2;if(r=t,typeof t=="function")uu(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case xr:return Fn(n.children,s,i,e);case Mc:l=8,s|=8;break;case ka:return t=gt(12,n,e,s|2),t.elementType=ka,t.lanes=i,t;case ja:return t=gt(13,n,e,s),t.elementType=ja,t.lanes=i,t;case Sa:return t=gt(19,n,e,s),t.elementType=Sa,t.lanes=i,t;case rf:return nl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tf:l=10;break e;case nf:l=9;break e;case Ec:l=11;break e;case Pc:l=14;break e;case on:l=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=gt(l,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Fn(t,e,n,r){return t=gt(7,t,r,e),t.lanes=n,t}function nl(t,e,n,r){return t=gt(22,t,r,e),t.elementType=rf,t.lanes=n,t.stateNode={isHidden:!1},t}function aa(t,e,n){return t=gt(6,t,null,e),t.lanes=n,t}function ca(t,e,n){return e=gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bv(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wl(0),this.expirationTimes=Wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function du(t,e,n,r,s,i,l,a,c){return t=new bv(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=gt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gc(i),t}function kv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function qm(t){if(!t)return bn;t=t._reactInternals;e:{if(Kn(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(et(n))return qf(t,n,e)}return e}function Km(t,e,n,r,s,i,l,a,c){return t=du(n,r,!0,t,s,i,l,a,c),t.context=qm(null),n=t.current,r=We(),s=yn(n),i=Vt(r,s),i.callback=e??null,gn(n,i,s),t.current.lanes=s,oi(t,s,r),tt(t,r),t}function rl(t,e,n,r){var s=e.current,i=We(),l=yn(s);return n=qm(n),e.context===null?e.context=n:e.pendingContext=n,e=Vt(i,l),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gn(s,e,l),t!==null&&(Ct(t,s,l,i),ao(t,s,l)),l}function Wo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hu(t,e){yh(t,e),(t=t.alternate)&&yh(t,e)}function jv(){return null}var Qm=typeof reportError=="function"?reportError:function(t){console.error(t)};function fu(t){this._internalRoot=t}sl.prototype.render=fu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));rl(t,e,null,null)};sl.prototype.unmount=fu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Un(function(){rl(null,t,null,null)}),e[qt]=null}};function sl(t){this._internalRoot=t}sl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Mf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<an.length&&e!==0&&e<an[n].priority;n++);an.splice(n,0,t),n===0&&Pf(t)}};function mu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vh(){}function Sv(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Wo(l);i.call(u)}}var l=Km(e,r,t,0,null,!1,!1,"",vh);return t._reactRootContainer=l,t[qt]=l.current,qs(t.nodeType===8?t.parentNode:t),Un(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Wo(c);a.call(u)}}var c=du(t,0,!1,null,null,!1,!1,"",vh);return t._reactRootContainer=c,t[qt]=c.current,qs(t.nodeType===8?t.parentNode:t),Un(function(){rl(e,c,n,r)}),c}function ol(t,e,n,r,s){var i=n._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var a=s;s=function(){var c=Wo(l);a.call(c)}}rl(e,l,t,s)}else l=Sv(n,e,t,s,r);return Wo(l)}Cf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Es(e.pendingLanes);n!==0&&(Ic(e,n|1),tt(e,be()),!(ne&6)&&(Fr=be()+500,Sn()))}break;case 13:Un(function(){var r=Kt(t,1);if(r!==null){var s=We();Ct(r,t,1,s)}}),hu(t,1)}};Ac=function(t){if(t.tag===13){var e=Kt(t,134217728);if(e!==null){var n=We();Ct(e,t,134217728,n)}hu(t,134217728)}};Tf=function(t){if(t.tag===13){var e=yn(t),n=Kt(t,e);if(n!==null){var r=We();Ct(n,t,e,r)}hu(t,e)}};Mf=function(){return le};Ef=function(t,e){var n=le;try{return le=t,e()}finally{le=n}};Aa=function(t,e,n){switch(e){case"input":if(Ta(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ko(r);if(!s)throw Error(L(90));of(r),Ta(r,s)}}}break;case"textarea":af(t,n);break;case"select":e=n.value,e!=null&&Mr(t,!!n.multiple,e,!1)}};pf=lu;gf=Un;var Nv={usingClientEntryPoint:!1,Events:[ai,br,Ko,ff,mf,lu]},xs={findFiberByHostInstance:zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cv={bundleType:xs.bundleType,version:xs.version,rendererPackageName:xs.rendererPackageName,rendererConfig:xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vf(t),t===null?null:t.stateNode},findFiberByHostInstance:xs.findFiberByHostInstance||jv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ki=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ki.isDisabled&&Ki.supportsFiber)try{Xo=Ki.inject(Cv),At=Ki}catch{}}ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nv;ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mu(e))throw Error(L(200));return kv(t,e,null,n)};ut.createRoot=function(t,e){if(!mu(t))throw Error(L(299));var n=!1,r="",s=Qm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=du(t,1,!1,null,null,n,!1,r,s),t[qt]=e.current,qs(t.nodeType===8?t.parentNode:t),new fu(e)};ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=vf(e),t=t===null?null:t.stateNode,t};ut.flushSync=function(t){return Un(t)};ut.hydrate=function(t,e,n){if(!il(e))throw Error(L(200));return ol(null,t,e,!0,n)};ut.hydrateRoot=function(t,e,n){if(!mu(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",l=Qm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=Km(e,null,t,1,n??null,s,!1,i,l),t[qt]=e.current,qs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new sl(e)};ut.render=function(t,e,n){if(!il(e))throw Error(L(200));return ol(null,t,e,!1,n)};ut.unmountComponentAtNode=function(t){if(!il(t))throw Error(L(40));return t._reactRootContainer?(Un(function(){ol(null,null,t,!1,function(){t._reactRootContainer=null,t[qt]=null})}),!0):!1};ut.unstable_batchedUpdates=lu;ut.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!il(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return ol(t,e,n,!1,r)};ut.version="18.3.1-next-f1338f8080-20240426";function Zm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zm)}catch(t){console.error(t)}}Zm(),Qh.exports=ut;var Xn=Qh.exports;const Tv=$h(Xn);var wh=Xn;wa.createRoot=wh.createRoot,wa.hydrateRoot=wh.hydrateRoot;function bh(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Jm(...t){return e=>{let n=!1;const r=t.map(s=>{const i=bh(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():bh(t[s],null)}}}}function Vn(...t){return m.useCallback(Jm(...t),t)}function Yo(t){const e=Ev(t),n=m.forwardRef((r,s)=>{const{children:i,...l}=r,a=m.Children.toArray(i),c=a.find(Lv);if(c){const u=c.props.children,h=a.map(f=>f===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return o.jsx(e,{...l,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,h):null})}return o.jsx(e,{...l,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var Mv=Yo("Slot");function Ev(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const l=Iv(s),a=_v(i,s.props);return s.type!==m.Fragment&&(a.ref=r?Jm(r,l):l),m.cloneElement(s,a)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Pv=Symbol("radix.slottable");function Lv(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Pv}function _v(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function Iv(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ep(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=ep(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function tp(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=ep(t))&&(r&&(r+=" "),r+=e);return r}const kh=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,jh=tp,np=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return jh(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,l=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const p=kh(h)||kh(f);return s[u][p]}),a=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...b}=h;return Object.entries(b).every(k=>{let[j,N]=k;return Array.isArray(N)?N.includes({...i,...a}[j]):{...i,...a}[j]===N})?[...u,f,p]:u},[]);return jh(t,l,c,n==null?void 0:n.class,n==null?void 0:n.className)};function Av(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=rp(e))&&(r&&(r+=" "),r+=n);return r}function rp(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=rp(t[r]))&&(n&&(n+=" "),n+=e);return n}var pu="-";function zv(t){var e=Rv(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,s=r===void 0?{}:r;function i(a){var c=a.split(pu);return c[0]===""&&c.length!==1&&c.shift(),sp(c,e)||Dv(a)}function l(a,c){var u=n[a]||[];return c&&s[a]?[].concat(u,s[a]):u}return{getClassGroupId:i,getConflictingClassGroupIds:l}}function sp(t,e){var l;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),s=r?sp(t.slice(1),r):void 0;if(s)return s;if(e.validators.length!==0){var i=t.join(pu);return(l=e.validators.find(function(a){var c=a.validator;return c(i)}))==null?void 0:l.classGroupId}}var Sh=/^\[(.+)\]$/;function Dv(t){if(Sh.test(t)){var e=Sh.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function Rv(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},s=$v(Object.entries(t.classGroups),n);return s.forEach(function(i){var l=i[0],a=i[1];fc(a,r,l,e)}),r}function fc(t,e,n,r){t.forEach(function(s){if(typeof s=="string"){var i=s===""?e:Nh(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(Ov(s)){fc(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(function(l){var a=l[0],c=l[1];fc(c,Nh(e,a),n,r)})})}function Nh(t,e){var n=t;return e.split(pu).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function Ov(t){return t.isThemeGetter}function $v(t,e){return e?t.map(function(n){var r=n[0],s=n[1],i=s.map(function(l){return typeof l=="string"?e+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(function(a){var c=a[0],u=a[1];return[e+c,u]})):l});return[r,i]}):t}function Fv(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function s(i,l){n.set(i,l),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(l){var a=n.get(l);if(a!==void 0)return a;if((a=r.get(l))!==void 0)return s(l,a),a},set:function(l,a){n.has(l)?n.set(l,a):s(l,a)}}}var ip="!";function Hv(t){var e=t.separator||":",n=e.length===1,r=e[0],s=e.length;return function(l){for(var a=[],c=0,u=0,h,f=0;f<l.length;f++){var p=l[f];if(c===0){if(p===r&&(n||l.slice(f,f+s)===e)){a.push(l.slice(u,f)),u=f+s;continue}if(p==="/"){h=f;continue}}p==="["?c++:p==="]"&&c--}var b=a.length===0?l:l.substring(u),k=b.startsWith(ip),j=k?b.substring(1):b,N=h&&h>u?h-u:void 0;return{modifiers:a,hasImportantModifier:k,baseClassName:j,maybePostfixModifierPosition:N}}}function Bv(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var s=r[0]==="[";s?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function Wv(t){return{cache:Fv(t.cacheSize),splitModifiers:Hv(t),...zv(t)}}var Yv=/\s+/;function Uv(t,e){var n=e.splitModifiers,r=e.getClassGroupId,s=e.getConflictingClassGroupIds,i=new Set;return t.trim().split(Yv).map(function(l){var a=n(l),c=a.modifiers,u=a.hasImportantModifier,h=a.baseClassName,f=a.maybePostfixModifierPosition,p=r(f?h.substring(0,f):h),b=!!f;if(!p){if(!f)return{isTailwindClass:!1,originalClassName:l};if(p=r(h),!p)return{isTailwindClass:!1,originalClassName:l};b=!1}var k=Bv(c).join(":"),j=u?k+ip:k;return{isTailwindClass:!0,modifierId:j,classGroupId:p,originalClassName:l,hasPostfixModifier:b}}).reverse().filter(function(l){if(!l.isTailwindClass)return!0;var a=l.modifierId,c=l.classGroupId,u=l.hasPostfixModifier,h=a+c;return i.has(h)?!1:(i.add(h),s(c,u).forEach(function(f){return i.add(a+f)}),!0)}).reverse().map(function(l){return l.originalClassName}).join(" ")}function Xv(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,s,i,l=a;function a(u){var h=e[0],f=e.slice(1),p=f.reduce(function(b,k){return k(b)},h());return r=Wv(p),s=r.cache.get,i=r.cache.set,l=c,c(u)}function c(u){var h=s(u);if(h)return h;var f=Uv(u,r);return i(u,f),f}return function(){return l(Av.apply(null,arguments))}}function ue(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var op=/^\[(?:([a-z-]+):)?(.+)\]$/i,Vv=/^\d+\/\d+$/,Gv=new Set(["px","full","screen"]),qv=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Kv=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Qv=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function bt(t){return On(t)||Gv.has(t)||Vv.test(t)||mc(t)}function mc(t){return Qn(t,"length",r0)}function Zv(t){return Qn(t,"size",lp)}function Jv(t){return Qn(t,"position",lp)}function e0(t){return Qn(t,"url",s0)}function Qi(t){return Qn(t,"number",On)}function On(t){return!Number.isNaN(Number(t))}function t0(t){return t.endsWith("%")&&On(t.slice(0,-1))}function ys(t){return Ch(t)||Qn(t,"number",Ch)}function ee(t){return op.test(t)}function vs(){return!0}function sn(t){return qv.test(t)}function n0(t){return Qn(t,"",i0)}function Qn(t,e,n){var r=op.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function r0(t){return Kv.test(t)}function lp(){return!1}function s0(t){return t.startsWith("url(")}function Ch(t){return Number.isInteger(Number(t))}function i0(t){return Qv.test(t)}function o0(){var t=ue("colors"),e=ue("spacing"),n=ue("blur"),r=ue("brightness"),s=ue("borderColor"),i=ue("borderRadius"),l=ue("borderSpacing"),a=ue("borderWidth"),c=ue("contrast"),u=ue("grayscale"),h=ue("hueRotate"),f=ue("invert"),p=ue("gap"),b=ue("gradientColorStops"),k=ue("gradientColorStopPositions"),j=ue("inset"),N=ue("margin"),y=ue("opacity"),g=ue("padding"),x=ue("saturate"),w=ue("scale"),C=ue("sepia"),M=ue("skew"),P=ue("space"),E=ue("translate"),O=function(){return["auto","contain","none"]},z=function(){return["auto","hidden","clip","visible","scroll"]},V=function(){return["auto",ee,e]},G=function(){return[ee,e]},re=function(){return["",bt]},U=function(){return["auto",On,ee]},ie=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},ve=function(){return["solid","dashed","dotted","double","none"]},Xe=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},I=function(){return["start","end","center","between","around","evenly","stretch"]},B=function(){return["","0",ee]},Y=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},te=function(){return[On,Qi]},se=function(){return[On,ee]};return{cacheSize:500,theme:{colors:[vs],spacing:[bt],blur:["none","",sn,ee],brightness:te(),borderColor:[t],borderRadius:["none","","full",sn,ee],borderSpacing:G(),borderWidth:re(),contrast:te(),grayscale:B(),hueRotate:se(),invert:B(),gap:G(),gradientColorStops:[t],gradientColorStopPositions:[t0,mc],inset:V(),margin:V(),opacity:te(),padding:G(),saturate:te(),scale:te(),sepia:B(),skew:se(),space:G(),translate:G()},classGroups:{aspect:[{aspect:["auto","square","video",ee]}],container:["container"],columns:[{columns:[sn]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(ie(),[ee])}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[j]}],"inset-x":[{"inset-x":[j]}],"inset-y":[{"inset-y":[j]}],start:[{start:[j]}],end:[{end:[j]}],top:[{top:[j]}],right:[{right:[j]}],bottom:[{bottom:[j]}],left:[{left:[j]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ys]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ee]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",ys]}],"grid-cols":[{"grid-cols":[vs]}],"col-start-end":[{col:["auto",{span:["full",ys]},ee]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[vs]}],"row-start-end":[{row:["auto",{span:[ys]},ee]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ee]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ee]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal"].concat(I())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(I(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(I(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[N]}],mx:[{mx:[N]}],my:[{my:[N]}],ms:[{ms:[N]}],me:[{me:[N]}],mt:[{mt:[N]}],mr:[{mr:[N]}],mb:[{mb:[N]}],ml:[{ml:[N]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ee,e]}],"min-w":[{"min-w":["min","max","fit",ee,bt]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[sn]},sn,ee]}],h:[{h:[ee,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ee,bt]}],"max-h":[{"max-h":[ee,e,"min","max","fit"]}],"font-size":[{text:["base",sn,mc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Qi]}],"font-family":[{font:[vs]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ee]}],"line-clamp":[{"line-clamp":["none",On,Qi]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ee,bt]}],"list-image":[{"list-image":["none",ee]}],"list-style-type":[{list:["none","disc","decimal",ee]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(ve(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",bt]}],"underline-offset":[{"underline-offset":["auto",ee,bt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(ie(),[Jv])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Zv]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},e0]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[k]}],"gradient-via-pos":[{via:[k]}],"gradient-to-pos":[{to:[k]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[].concat(ve(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:ve()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(ve())}],"outline-offset":[{"outline-offset":[ee,bt]}],"outline-w":[{outline:[bt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[bt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",sn,n0]}],"shadow-color":[{shadow:[vs]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":Xe()}],"bg-blend":[{"bg-blend":Xe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",sn,ee]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[x]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ee]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",ee]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",ee]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[ys,ee]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ee]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ee]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ee]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[bt,Qi]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var l0=Xv(o0);function nt(...t){return l0(tp(t))}const a0=np("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),A=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const l=r?Mv:"button";return o.jsx(l,{className:nt(a0({variant:e,size:n,className:t})),ref:i,...s})});A.displayName="Button";function c0({className:t,variant:e="default",...n}){const r={default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border border-input text-foreground"};return o.jsx("div",{className:nt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",r[e],t),...n})}const K=({content:t,side:e="top",className:n="",children:r,offsetY:s=8})=>{const i=`tooltip-${me.useId()}`,l=me.isValidElement(r)?me.cloneElement(r,{"aria-describedby":i}):o.jsx("span",{tabIndex:0,"aria-describedby":i,className:"inline-flex",children:r}),a=me.useRef(null),c=me.useRef(null),u=me.useRef(null),[h,f]=me.useState(!1),[p,b]=me.useState(null),[k,j]=me.useState(!1),N=me.useCallback(()=>{let w=s;if(a.current)try{const C=a.current.dataset;if(C&&C.tooltipOffset){const M=parseInt(C.tooltipOffset,10);Number.isNaN(M)||(w=M)}}catch{}return w},[s]),y=me.useCallback(()=>{if(!a.current)return;const w=a.current.getBoundingClientRect(),C=N(),M=w.left+w.width/2,P=40;let E=w.top;e==="top"?E=w.top-P-C:e==="bottom"||e==="auto"?E=w.bottom+C:E=w.top+w.height/2,b({left:M,top:E})},[e,N]);me.useEffect(()=>(window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)),[y]);const g=()=>{requestAnimationFrame(()=>y()),f(!0),j(!0)},x=()=>{f(!1),window.setTimeout(()=>j(!1),220)};return me.useEffect(()=>{if(!h||!u.current||!a.current)return;const w=u.current.getBoundingClientRect(),C=a.current.getBoundingClientRect(),M=N(),P=w.width/2;let E=C.left+C.width/2;const O=8+P,z=window.innerWidth-8-P;E<O&&(E=O),E>z&&(E=z);let V=C.top-w.height-M;(e==="bottom"||e==="auto")&&(V=C.bottom+M),V=Math.max(8,Math.min(window.innerHeight-w.height-8,V)),b({left:E,top:V})},[h,e,N]),o.jsxs(o.Fragment,{children:[o.jsx("span",{ref:a,onMouseEnter:g,onFocus:g,onMouseLeave:x,onBlur:x,className:`relative inline-flex ${n}`,children:l}),typeof document<"u"&&p&&k&&Xn.createPortal(o.jsxs("div",{ref:u,id:i,role:"tooltip",className:`custom-tooltip ${h?"visible":"fade-out"}`,style:{left:p.left,top:p.top,transform:"translateX(-50%)"},children:[o.jsx("span",{ref:c,className:"inline-block text-xs px-3 py-1.5 rounded-md shadow-md max-w-[18rem] break-words",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t}),o.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 mt-[-6px] w-2 h-2 rotate-45 bg-black","aria-hidden":!0})]}),document.body)]})},F=m.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:nt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));F.displayName="Input";function ws({open:t,onOpenChange:e,children:n}){return t?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"fixed inset-0 bg-black/80",onClick:()=>e(!1)}),o.jsx("div",{className:"relative z-50",children:n})]}):null}function bs({className:t,children:e,...n}){return o.jsx("div",{className:nt("bg-background border border-border rounded-lg p-6 w-full max-w-lg mx-auto shadow-lg",t),...n,children:e})}function ks({className:t,children:e,...n}){return o.jsx("div",{className:nt("flex flex-col space-y-1.5 text-center sm:text-left",t),...n,children:e})}function js({className:t,children:e,...n}){return o.jsx("h3",{className:nt("text-lg font-semibold leading-none tracking-tight",t),...n,children:e})}function Ss({className:t,children:e,...n}){return o.jsx("p",{className:nt("text-sm text-muted-foreground",t),...n,children:e})}function Ns({className:t,children:e,...n}){return o.jsx("div",{className:nt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n,children:e})}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d0=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Th=t=>{const e=d0(t);return e.charAt(0).toUpperCase()+e.slice(1)},ap=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),h0=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:l,...a},c)=>m.createElement("svg",{ref:c,...f0,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:ap("lucide",s),...!i&&!h0(a)&&{"aria-hidden":"true"},...a},[...l.map(([u,h])=>m.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(m0,{ref:i,iconNode:e,className:ap(`lucide-${u0(Th(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Th(t),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=[["circle",{cx:"9",cy:"9",r:"7",key:"p2h5vp"}],["circle",{cx:"15",cy:"15",r:"7",key:"19ennj"}]],g0=W("blend",p0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],y0=W("box",x0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],w0=W("check",v0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],k0=W("chevron-left",b0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],S0=W("chevron-right",j0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ua=W("circle-question-mark",N0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Cs=W("circle",C0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],M0=W("clock",T0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],P0=W("download",E0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],da=W("eraser",L0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],I0=W("eye-off",_0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],z0=W("eye",A0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],R0=W("folder-open",D0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],go=W("folder",O0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],pc=W("grid-3x3",$0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],H0=W("image",F0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Mh=W("link-2",B0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}]],Y0=W("locate",W0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Eh=W("map-pin",U0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],ha=W("map",X0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],G0=W("menu",V0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=[["path",{d:"M5 12h14",key:"1ays0h"}]],gc=W("minus",q0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Q0=W("moon",K0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],J0=W("mouse-pointer-2",Z0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["rect",{x:"5",y:"2",width:"14",height:"20",rx:"7",key:"11ol66"}],["path",{d:"M12 6v4",key:"16clxf"}]],Zi=W("mouse",ew);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],nw=W("mouse-pointer",tw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],sw=W("move",rw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]],fa=W("paint-bucket",iw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v4",key:"qmzblu"}],["path",{d:"M17 2a1 1 0 0 1 1 1v9H6V3a1 1 0 0 1 1-1z",key:"ycvu00"}],["path",{d:"M6 12a1 1 0 0 0-1 1v1a2 2 0 0 0 2 2h2a1 1 0 0 1 1 1v2.9a2 2 0 1 0 4 0V17a1 1 0 0 1 1-1h2a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1",key:"iw4wnp"}]],Ji=W("paintbrush-vertical",ow);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ph=W("pen",lw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["path",{d:"m12 9-8.414 8.414A2 2 0 0 0 3 18.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 3.828 21h1.344a2 2 0 0 0 1.414-.586L15 12",key:"1y3wsu"}],["path",{d:"m18 9 .4.4a1 1 0 1 1-3 3l-3.8-3.8a1 1 0 1 1 3-3l.4.4 3.4-3.4a1 1 0 1 1 3 3z",key:"110lr1"}],["path",{d:"m2 22 .414-.414",key:"jhxm08"}]],Lh=W("pipette",aw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],xo=W("plus",cw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],dw=W("redo-2",uw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],fw=W("rotate-ccw",hw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],_h=W("save",mw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Ih=W("scan",pw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],xw=W("scissors",gw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ah=W("settings",yw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],ww=W("shapes",vw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ma=W("shield",bw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],An=W("square",kw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],Sw=W("stamp",jw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Cw=W("sun",Nw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],pr=W("target",Tw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ew=W("trash-2",Mw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Lw=W("undo-2",Pw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],eo=W("upload",_w);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Aw=W("users",Iw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],pa=W("wand-sparkles",zw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],He=W("x",Dw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Ow=W("zoom-in",Rw);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Fw=W("zoom-out",$w);class ga{constructor(e){this.showMinimap=!0,this.isDarkMode=!1,this.debugMode=!1,this.resizeObserver=null,this.boundResizeHandler=null,this.boundMouseDown=null,this.boundMouseMove=null,this.boundMouseUp=null,this.boundMouseLeave=null,this.boundWheel=null,this.boundContextMenu=null,this.mapWidth=20,this.mapHeight=15,this.tileSizeX=64,this.tileSizeY=32,this.orientation="isometric",this.tileContentThreshold=10,this.objectSeparationSensitivity=.5,this.detectedTileData=new Map,this.layerTilesets=new Map,this.nextLayerTabId=1,this.layerTabs=new Map,this.layerActiveTabId=new Map,this.layerTileData=new Map,this.layerActiveGid=new Map,this.tilesets=[],this.tilesetImage=null,this.tilesetFileName=null,this.tilesetColumns=0,this.tilesetRows=0,this.tileCount=0,this.tileLayers=[],this.activeLayerId=null,this.nextLayerId=1,this.collisionData=[],this.objects=[],this.selectedObject=null,this.nextObjectId=1,this.selectedObjectId=null,this.isDraggingActor=!1,this.draggingActorId=null,this.heroX=0,this.heroY=0,this.isDraggingHero=!1,this.heroLastClickTime=0,this.tool="tiles",this.currentTool="brush",this.currentSelectionTool="rectangular",this.currentShapeTool="rectangle",this.currentStampMode="select",this.activeGid=0,this.isMouseDown=!1,this.selection={active:!1,startX:-1,startY:-1,endX:-1,endY:-1,tiles:[]},this.isSelecting=!1,this.shapeDrawing={active:!1,startX:-1,startY:-1,endX:-1,endY:-1,preview:[]},this.isDrawingShape=!1,this.hoverX=-1,this.hoverY=-1,this.zoom=1,this.panX=0,this.panY=0,this.isPanning=!1,this.lastPanX=0,this.lastPanY=0,this.spacePressed=!1,this.history=[],this.historyIndex=-1,this.maxHistorySize=50,this.isApplyingHistory=!1,this.hasUnsavedChanges=!1,this.autoSaveTimeout=null,this.lastSaveTimestamp=0,this.autoSaveCallback=null,this.saveStatusCallback=null,this.activeGidCallback=null,this.AUTO_SAVE_DELAY=8e3,this.IMMEDIATE_SAVE_DELAY=2e3,this.autoSaveEnabled=!0,this.sidebarTransitioning=!1,this.lastMiniMapPos=null,this.eyedropperCallback=null,this.objectsChangedCallback=null,this.stamps=new Map,this.activeStamp=null,this.stampPreview={x:0,y:0,visible:!1},this.stampCallback=null,this.heroEditCallback=null,this.mapCanvas=e,this.initializeCanvas(),this.initializeState(),this.bindEvents(),this.createDefaultLayers(),this.saveState(),this.draw()}getTileCount(){return this.tileCount}setTileContentThreshold(e){this.tileContentThreshold=Math.max(0,Math.min(255,e))}getTileContentThreshold(){return this.tileContentThreshold}refreshTilePalette(e=!1){this.tilesetImage&&this.createTilePalette(e)}getDetectedTileInfo(){const e=[];return this.detectedTileData.forEach((n,r)=>{e.push({gid:r,width:n.width,height:n.height,sourceX:n.sourceX,sourceY:n.sourceY})}),e.sort((n,r)=>n.gid-r.gid)}getDetectedTilesForLayer(e){const n=this.layerTileData.get(e);return n?Array.from(n.entries()):[]}getCurrentLayerActiveGid(){const e=this.tileLayers.find(n=>n.id===this.activeLayerId);return e&&this.layerActiveGid.get(e.type)||0}setCurrentLayerActiveGid(e){const n=this.tileLayers.find(r=>r.id===this.activeLayerId);if(n&&(this.layerActiveGid.set(n.type,e),this.activeGid=e,this.activeGidCallback))try{this.activeGidCallback(this.activeGid)}catch(r){console.warn("activeGidCallback error",r)}}mergeBrushes(e){if(e.length<2)return;const n=e.map(f=>this.detectedTileData.get(f)).filter(f=>f!==void 0);if(n.length!==e.length)throw new Error("Some selected brushes not found");let r=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;for(const f of n)r=Math.min(r,f.sourceX),s=Math.min(s,f.sourceY),i=Math.max(i,f.sourceX+f.width),l=Math.max(l,f.sourceY+f.height);const a={sourceX:r,sourceY:s,width:i-r,height:l-s},c=Array.from(this.detectedTileData.entries()),u=c.findIndex(([f])=>e.includes(f)),h=c.filter(([f])=>!e.includes(f));h.splice(u,0,[e[0],a]),this.detectedTileData.clear(),h.forEach(([f,p],b)=>{this.detectedTileData.set(b,p)}),this.createTilePalette(!0),this.markAsChanged(!0),console.log(`Merged ${e.length} brushes into new brush at position ${u}`)}separateBrush(e){console.log(`separateBrush called with brushId: ${e}`);const n=this.detectedTileData.get(e);if(!n)throw console.error(`Brush ${e} not found`),new Error(`Brush ${e} not found`);console.log(`Separating brush ${e} with data:`,n);const r=Array.from(this.detectedTileData.entries()),s=r.findIndex(([a])=>a===e),i=r.filter(([a])=>a!==e),l=[];if(this.tilesetImage){const a=document.createElement("canvas");a.width=n.width,a.height=n.height;const c=a.getContext("2d");if(c){c.drawImage(this.tilesetImage,n.sourceX,n.sourceY,n.width,n.height,0,0,n.width,n.height);const h=c.getImageData(0,0,n.width,n.height).data;console.log(`Analyzing brush area: ${n.width}x${n.height}`);const f=this.findVerticalGaps(h,n.width,n.height);if(console.log("Found vertical gaps:",f),f.length>0){let p=0;for(const b of f){if(b>p){const k=b-p,j=this.findObjectBoundsInRegion(h,n.width,n.height,p,0,k,n.height);j&&j.width>0&&j.height>0&&l.push({sourceX:n.sourceX+j.x,sourceY:n.sourceY+j.y,width:j.width,height:j.height})}p=b+1}if(p<n.width){const b=n.width-p,k=this.findObjectBoundsInRegion(h,n.width,n.height,p,0,b,n.height);k&&k.width>0&&k.height>0&&l.push({sourceX:n.sourceX+k.x,sourceY:n.sourceY+k.y,width:k.width,height:k.height})}}else{const p=new Array(n.width*n.height).fill(!1);for(let b=0;b<n.height;b++)for(let k=0;k<n.width;k++){const j=b*n.width+k;if(p[j]||this.isPixelTransparent(h,k,b,n.width))continue;console.log(`Starting flood fill at pixel (${k}, ${b})`);const N=this.floodFillObjectDataInRegion(h,n.width,n.height,k,b,p);N&&this.isValidObjectSize(N.bounds)?(console.log("Found valid connected component:",N),l.push({sourceX:n.sourceX+N.bounds.x,sourceY:n.sourceY+N.bounds.y,width:N.bounds.width,height:N.bounds.height})):N&&console.log("Found invalid connected component (too small):",N)}}}}if(console.log(`Found ${l.length} new brushes from separation:`,l),l.length<=1){console.log(`No separation needed - only found ${l.length} component(s)`);return}l.forEach((a,c)=>{i.splice(s+c,0,[s+c,a])}),this.detectedTileData.clear(),i.forEach(([a,c],u)=>{this.detectedTileData.set(u,c)}),this.createTilePalette(!0),this.markAsChanged(!0),console.log(`Separated brush ${e} into ${l.length} new brushes`)}removeBrush(e){if(console.log(`removeBrush called with brushId: ${e}`),console.log("detectedTileData keys before removal:",Array.from(this.detectedTileData.keys())),!this.detectedTileData.has(e))throw console.error(`Brush ${e} not found in detectedTileData`),new Error(`Brush ${e} not found`);const n=Array.from(this.detectedTileData.entries());console.log("brushArray before filtering:",n.map(([s,i])=>s));const r=n.filter(([s])=>s!==e);console.log("filteredArray after filtering:",r.map(([s,i])=>s)),this.detectedTileData.clear(),r.forEach(([s,i],l)=>{this.detectedTileData.set(l,i)}),console.log("detectedTileData keys after rebuild:",Array.from(this.detectedTileData.keys())),this.createTilePalette(!0),this.markAsChanged(!0),console.log(`Removed brush ${e}`)}reorderBrush(e,n){const r=Array.from(this.detectedTileData.entries());if(e<0||e>=r.length||n<0||n>=r.length)throw new Error("Invalid brush indices for reordering");const[s]=r.splice(e,1);r.splice(n,0,s),this.detectedTileData.clear(),r.forEach(([i,l],a)=>{this.detectedTileData.set(a,l)}),this.createTilePalette(!0),this.markAsChanged(!0),console.log(`Reordered brush from index ${e} to ${n}`)}findVerticalGaps(e,n,r){const s=[];for(let i=1;i<n-1;i++){let l=!1;for(let a=0;a<r;a++)if(!this.isPixelTransparent(e,i,a,n)){l=!0;break}if(!l){let a=!1,c=!1;for(let u=0;u<r;u++)if(!this.isPixelTransparent(e,i-1,u,n)){a=!0;break}for(let u=0;u<r;u++)if(!this.isPixelTransparent(e,i+1,u,n)){c=!0;break}a&&c&&s.push(i)}}return console.log(`Detected ${s.length} vertical gaps at columns:`,s),s}findObjectBoundsInRegion(e,n,r,s,i,l,a){let c=s+l,u=s,h=i+a,f=i,p=!1;for(let b=i;b<i+a&&b<r;b++)for(let k=s;k<s+l&&k<n;k++)this.isPixelTransparent(e,k,b,n)||(p=!0,c=Math.min(c,k),u=Math.max(u,k),h=Math.min(h,b),f=Math.max(f,b));return p?{x:c,y:h,width:u-c+1,height:f-h+1}:null}floodFillObjectDataInRegion(e,n,r,s,i,l){const a=[{x:s,y:i}];let c=s,u=s,h=i,f=i,p=0;const b=[];for(;a.length>0;){const x=a.pop(),{x:w,y:C}=x;if(w<0||w>=n||C<0||C>=r)continue;const M=C*n+w;l[M]||this.isPixelTransparent(e,w,C,n)||(l[M]=!0,p++,b.push({x:w,y:C}),c=Math.min(c,w),u=Math.max(u,w),h=Math.min(h,C),f=Math.max(f,C),a.push({x:w+1,y:C}),a.push({x:w-1,y:C}),a.push({x:w,y:C+1}),a.push({x:w,y:C-1}))}if(p===0)return null;const k=1,j=Math.max(0,c-k),N=Math.max(0,h-k),y=Math.min(n-1,u+k),g=Math.min(r-1,f+k);return{bounds:{x:j,y:N,width:y-j+1,height:g-N+1},pixels:b}}updateActiveGid(e){if(this.activeGid=e,this.activeGidCallback)try{this.activeGidCallback(this.activeGid)}catch(n){console.warn("activeGidCallback error",n)}}setActiveGidCallback(e){if(this.activeGidCallback=e,e)try{e(this.activeGid)}catch(n){console.warn("setActiveGidCallback initial callback error",n)}}initializeCanvas(){const e=this.mapCanvas.getContext("2d");if(!e)throw new Error("Unable to get canvas context");this.ctx=e,this.ctx.imageSmoothingEnabled=!1,this.cleanupCanvasObservers(),this.resizeCanvas(),this.boundResizeHandler=()=>this.resizeCanvas(),window.addEventListener("resize",this.boundResizeHandler),window.ResizeObserver&&(this.resizeObserver=new ResizeObserver(()=>this.resizeCanvas()),this.mapCanvas.parentElement&&this.resizeObserver.observe(this.mapCanvas.parentElement))}cleanupCanvasObservers(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.boundResizeHandler&&(window.removeEventListener("resize",this.boundResizeHandler),this.boundResizeHandler=null)}cleanupCanvasEvents(){this.boundMouseDown&&(this.mapCanvas.removeEventListener("mousedown",this.boundMouseDown),this.boundMouseDown=null),this.boundMouseMove&&(this.mapCanvas.removeEventListener("mousemove",this.boundMouseMove),this.boundMouseMove=null),this.boundMouseUp&&(this.mapCanvas.removeEventListener("mouseup",this.boundMouseUp),this.boundMouseUp=null),this.boundMouseLeave&&(this.mapCanvas.removeEventListener("mouseleave",this.boundMouseLeave),this.boundMouseLeave=null),this.boundWheel&&(this.mapCanvas.removeEventListener("wheel",this.boundWheel),this.boundWheel=null),this.boundContextMenu&&(this.mapCanvas.removeEventListener("contextmenu",this.boundContextMenu),this.boundContextMenu=null)}resizeCanvas(){const e=this.mapCanvas.parentElement;e&&requestAnimationFrame(()=>{const n=e.getBoundingClientRect(),r=Math.max(1,Math.floor(n.width)),s=Math.max(1,Math.floor(n.height));(this.mapCanvas.width!==r||this.mapCanvas.height!==s)&&(this.mapCanvas.width=r,this.mapCanvas.height=s,this.draw())})}initializeState(){this.collisionData=new Array(this.mapWidth*this.mapHeight).fill(0)}bindEvents(){this.cleanupCanvasEvents(),this.boundMouseDown=this.handleMouseDown.bind(this),this.boundMouseMove=this.handleMouseMove.bind(this),this.boundMouseUp=this.handleMouseUp.bind(this),this.boundMouseLeave=this.handleMouseLeave.bind(this),this.boundWheel=this.handleWheel.bind(this),this.boundContextMenu=e=>e.preventDefault(),this.mapCanvas.addEventListener("mousedown",this.boundMouseDown),this.mapCanvas.addEventListener("mousemove",this.boundMouseMove),this.mapCanvas.addEventListener("mouseup",this.boundMouseUp),this.mapCanvas.addEventListener("mouseleave",this.boundMouseLeave),this.mapCanvas.addEventListener("contextmenu",this.boundContextMenu),this.mapCanvas.addEventListener("wheel",this.boundWheel),document.addEventListener("keydown",this.handleKeyDown.bind(this)),document.addEventListener("keyup",this.handleKeyUp.bind(this)),this.mapCanvas.tabIndex=0}createDefaultLayers(){this.tileLayers=[{id:1,name:"NPC Layer",type:"npc",data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1},{id:2,name:"Enemy Layer",type:"enemy",data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1},{id:3,name:"Event Layer",type:"event",data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1},{id:4,name:"Collision Layer",type:"collision",data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1},{id:5,name:"Object Layer",type:"object",data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1},{id:6,name:"Background Layer",type:"background",data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1}],this.activeLayerId=6,this.nextLayerId=7,this.sortLayersByPriority();try{this.layerTabs.clear(),this.layerActiveTabId.clear();const e=this.tileLayers.some(r=>r.type==="object"),n=this.tileLayers.some(r=>r.type==="background");if(e){const r=this.createLayerTab("object");this.setActiveLayerTab("object",r)}if(n){const r=this.createLayerTab("background");this.setActiveLayerTab("background",r)}}catch(e){console.warn("Failed to initialize default layer tabs",e)}}getDraggableActorAt(e,n){return e<0||n<0?null:this.objects.find(r=>r.x===e&&r.y===n&&this.actorUsesPlaceholder(r))||null}handleActorDrag(e,n){if(!this.isDraggingActor||this.draggingActorId===null||e<0||n<0||e>=this.mapWidth||n>=this.mapHeight)return;const r=this.objects.find(s=>s.id===this.draggingActorId);r&&(r.x===e&&r.y===n||(this.updateMapObject(r.id,{x:e,y:n}),this.draw()))}handleMouseDown(e){const n=this.mapCanvas.getBoundingClientRect(),r=e.clientX-n.left,s=e.clientY-n.top;if(this.spacePressed)this.isPanning=!0,this.lastPanX=r,this.lastPanY=s,this.mapCanvas.style.cursor="grabbing";else{this.isMouseDown=!0;const i=this.screenToTile(r,s);if(i){if(this.isHeroAtPosition(i.x,i.y)){this.handleHeroClick(i.x,i.y,e);return}const l=this.getDraggableActorAt(i.x,i.y);if(l){this.isDraggingActor=!0,this.draggingActorId=l.id,this.selectedObject=l,this.selectedObjectId=l.id;return}this.tool==="tiles"?this.handleTileClick(i.x,i.y,e.button===2):this.tool==="selection"?this.handleSelectionStart(i.x,i.y,e.button===2):this.tool==="shape"?this.handleShapeStart(i.x,i.y,e.button===2):this.tool==="eyedropper"?this.handleEyedropper(i.x,i.y)&&(this.isMouseDown=!1):this.tool==="stamp"&&this.handleStampClick(i.x,i.y,e.button===2)}}}handleMouseMove(e){const n=this.mapCanvas.getBoundingClientRect(),r=e.clientX-n.left,s=e.clientY-n.top;if(this.isPanning&&this.spacePressed){const i=r-this.lastPanX,l=s-this.lastPanY;this.setPan(i,l),this.lastPanX=r,this.lastPanY=s}else{const i=this.screenToTile(r,s);i&&(this.hoverX=i.x,this.hoverY=i.y,this.updateCursorForHover(),this.tool==="stamp"&&this.currentStampMode==="place"&&this.activeStamp&&(this.stampPreview.x=i.x,this.stampPreview.y=i.y,this.stampPreview.visible=!0),this.isMouseDown&&!this.spacePressed&&(this.isDraggingHero?this.setHeroPosition(i.x,i.y):this.isDraggingActor?this.handleActorDrag(i.x,i.y):this.tool==="tiles"?this.handleTileClick(i.x,i.y,!1):this.isSelecting?this.handleSelectionDrag(i.x,i.y):this.isDrawingShape&&this.handleShapeDrag(i.x,i.y)))}this.draw()}handleMouseUp(){this.isSelecting?this.handleSelectionEnd():this.isDrawingShape&&this.handleShapeEnd(),this.isDraggingHero&&(this.isDraggingHero=!1),this.isDraggingActor&&(this.isDraggingActor=!1,this.draggingActorId=null),this.isMouseDown=!1,this.isPanning=!1}handleMouseLeave(){this.hideObjectTooltip(),this.hoverX=-1,this.hoverY=-1,this.isDraggingActor=!1,this.draggingActorId=null,this.draw()}handleHeroClick(e,n,r){const s=Date.now();s-this.heroLastClickTime<300?this.openHeroEditDialog():this.isDraggingHero=!0,this.heroLastClickTime=s}openHeroEditDialog(){this.heroEditCallback?this.heroEditCallback(this.heroX,this.heroY,this.mapWidth,this.mapHeight,(e,n)=>{this.setHeroPosition(e,n)}):alert(`Hero position: (${this.heroX}, ${this.heroY}). Set up hero edit dialog in React component.`)}handleWheel(e){e.preventDefault();const n=e.deltaY>0?.9:1.1;this.setZoom(this.zoom*n)}handleKeyDown(e){if(e.code==="Space"&&(e.preventDefault(),this.spacePressed=!0,this.mapCanvas.style.cursor="grab"),e.ctrlKey||e.metaKey)switch(e.code){case"KeyZ":e.preventDefault(),e.shiftKey?this.redo():this.undo();break;case"KeyY":e.preventDefault(),this.redo();break;case"KeyA":e.preventDefault(),this.selectAll();break}switch(e.code){case"Delete":case"Backspace":e.preventDefault(),this.deleteSelection();break;case"Escape":e.preventDefault(),this.clearSelection(),this.isDrawingShape&&(this.shapeDrawing.active=!1,this.isDrawingShape=!1,this.shapeDrawing.preview=[],this.draw());break}}handleKeyUp(e){e.code==="Space"&&(e.preventDefault(),this.spacePressed=!1,this.mapCanvas.style.cursor="crosshair")}screenToTile(e,n){const r=this.screenToWorld(e,n);return this.raycastToTile(r.x,r.y)}handleStampClick(e,n,r){if(r){this.stampPreview.visible=!1,this.draw();return}this.currentStampMode==="create"?this.handleSelectionStart(e,n,r):this.currentStampMode==="place"&&this.activeStamp&&this.placeStamp(e,n)}handleTileClick(e,n,r){if(this.activeLayerId!==null){const s=this.tileLayers.find(i=>i.id===this.activeLayerId);if(s){const i=n*this.mapWidth+e,l=s.data[i];let a;const c=this.getCurrentLayerActiveGid();if(r)a=0;else switch(this.currentTool){case"brush":if(c===0)return;a=c;break;case"eraser":a=0;break;case"bucket":if(c===0)return;l!==c&&(this.saveState(),this.bucketFill(s,e,n,c),this.markAsChanged(),this.draw());return;default:if(c===0)return;a=c;break}l!==a&&(this.saveState(),console.log(`Painting on layer: ${s.name} (ID: ${s.id}, Type: ${s.type})`),console.log(`Position: (${e}, ${n}), Index: ${i}`),console.log(`Current value: ${l}, New value: ${a}`),console.log(`Active GID for this layer: ${c}`),s.data[i]=a,(s.type==="event"||s.type==="enemy"||s.type==="npc"||s.type==="object")&&(a>0?this.createObjectFromTile(e,n,s.type,a):this.removeObjectAtPosition(e,n)),this.markAsChanged(),this.draw())}}}handleSelectionStart(e,n,r){if(r){this.clearSelection();return}const s=this.tileLayers.find(i=>i.id===this.activeLayerId);s&&(this.selection.startX=e,this.selection.startY=n,this.selection.endX=e,this.selection.endY=n,this.currentSelectionTool==="magic-wand"?(this.selectMagicWand(s,e,n),this.draw()):this.currentSelectionTool==="same-tile"?(this.selectSameTile(s,e,n),this.draw()):this.isSelecting=!0)}handleSelectionDrag(e,n){this.isSelecting&&(this.selection.endX=e,this.selection.endY=n,this.draw())}handleSelectionEnd(){if(!this.isSelecting)return;const e=this.tileLayers.find(n=>n.id===this.activeLayerId);e&&(this.currentSelectionTool==="rectangular"?this.selectRectangular(e,this.selection.startX,this.selection.startY,this.selection.endX,this.selection.endY):this.currentSelectionTool==="circular"&&this.selectCircular(e,this.selection.startX,this.selection.startY,this.selection.endX,this.selection.endY),this.isSelecting=!1,this.draw())}handleShapeStart(e,n,r){if(r){this.shapeDrawing.active=!1,this.isDrawingShape=!1,this.draw();return}this.shapeDrawing.active=!0,this.shapeDrawing.startX=e,this.shapeDrawing.startY=n,this.shapeDrawing.endX=e,this.shapeDrawing.endY=n,this.shapeDrawing.preview=[],this.isDrawingShape=!0}handleShapeDrag(e,n){if(this.isDrawingShape){switch(this.shapeDrawing.endX=e,this.shapeDrawing.endY=n,this.currentShapeTool){case"rectangle":this.shapeDrawing.preview=this.drawRectangleShape(this.shapeDrawing.startX,this.shapeDrawing.startY,this.shapeDrawing.endX,this.shapeDrawing.endY);break;case"circle":this.shapeDrawing.preview=this.drawCircleShape(this.shapeDrawing.startX,this.shapeDrawing.startY,this.shapeDrawing.endX,this.shapeDrawing.endY);break;case"line":this.shapeDrawing.preview=this.drawLineShape(this.shapeDrawing.startX,this.shapeDrawing.startY,this.shapeDrawing.endX,this.shapeDrawing.endY);break}this.draw()}}handleShapeEnd(){if(!this.isDrawingShape)return;const e=this.tileLayers.find(r=>r.id===this.activeLayerId);if(!e)return;const n=this.getCurrentLayerActiveGid();this.shapeDrawing.preview.length>0&&n>0&&(this.saveState(),this.shapeDrawing.preview.forEach(r=>{const s=r.y*this.mapWidth+r.x;e.data[s]=n}),this.markAsChanged()),this.shapeDrawing.active=!1,this.isDrawingShape=!1,this.shapeDrawing.preview=[],this.draw()}handleEyedropper(e,n){const r=this.tileLayers.find(s=>s.id===this.activeLayerId);if(!r)return null;if(e>=0&&e<this.mapWidth&&n>=0&&n<this.mapHeight){const s=n*this.mapWidth+e,i=r.data[s];if(i>0)return this.setCurrentLayerActiveGid(i),this.updateTilePaletteSelection(),this.tool="tiles",this.currentTool="brush",this.mapCanvas.style.cursor="crosshair",this.eyedropperCallback&&this.eyedropperCallback(),i}return null}updateTilePaletteSelection(){const e=document.getElementById("activeGid");e&&(e.textContent=this.activeGid.toString()),document.querySelectorAll(".tile-palette .tile").forEach((r,s)=>{const i=r;s===this.activeGid-1?(i.classList.add("selected"),i.scrollIntoView({behavior:"smooth",block:"nearest"})):i.classList.remove("selected")})}draw(){this.ctx.clearRect(0,0,this.mapCanvas.width,this.mapCanvas.height),this.ctx.save(),this.drawGrid(),this.drawTiles(),this.hoverX>=0&&this.hoverY>=0&&this.drawHover(),this.drawSelection(),this.drawHeroPosition(),this.drawActorPlaceholders(),this.drawShapePreview(),this.ctx.restore(),this.drawMiniMap(),this.drawStampPreview(),this.drawDebugInfo()}mapToScreen(e,n){const r=(e-n)*(this.tileSizeX/2),s=(e+n)*(this.tileSizeY/2),i=this.mapCanvas.width/2+this.panX,l=100+this.panY;return{x:(r+i)*this.zoom,y:(s+l)*this.zoom}}screenToMap(e,n){const r=e/this.zoom,s=n/this.zoom,i=this.mapCanvas.width/2+this.panX,l=100+this.panY,a=r-i,c=s-l,u=a-this.tileSizeX/2,h=c-this.tileSizeY/2,f=this.tileSizeX/2,p=this.tileSizeY/2,b=(u/f+h/p)/2,k=(h/p-u/f)/2;return{x:Math.floor(b),y:Math.floor(k)}}screenToWorld(e,n){const r=e/this.zoom,s=n/this.zoom,i=this.mapCanvas.width/2+this.panX,l=100+this.panY;return{x:r-i,y:s-l}}raycastToTile(e,n){const r=[],s=this.worldToScreen(e,n);for(let i=0;i<this.mapHeight;i++)for(let l=0;l<this.mapWidth;l++)if(this.isPointInTileDiamond(e,n,l,i)){const a=this.mapToScreen(l,i),c=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));r.push({x:l,y:i,distance:c})}return r.length>0?(r.sort((i,l)=>i.distance-l.distance),{x:r[0].x,y:r[0].y}):null}isPointInTileDiamond(e,n,r,s){const i=this.mapToScreen(r,s),l=this.worldToScreen(e,n),a=l.x-i.x,c=l.y-i.y,u=this.tileSizeX/2*this.zoom,h=this.tileSizeY/2*this.zoom,f=.9,p=Math.abs(a/u),b=Math.abs(c/h);return p+b<=f}tileToWorld(e,n){return{x:(e-n)*(this.tileSizeX/2),y:(e+n)*(this.tileSizeY/2)}}worldToScreen(e,n){const r=this.mapCanvas.width/2+this.panX,s=100+this.panY;return{x:(e+r)*this.zoom,y:(n+s)*this.zoom}}drawDebugInfo(){if(this.debugMode){this.ctx.strokeStyle="rgba(255, 0, 0, 0.5)",this.ctx.lineWidth=1;for(let e=0;e<this.mapHeight;e++)for(let n=0;n<this.mapWidth;n++){const r=this.mapToScreen(n,e),s=this.tileSizeX/2*this.zoom,i=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(r.x,r.y-i),this.ctx.lineTo(r.x+s,r.y),this.ctx.lineTo(r.x,r.y+i),this.ctx.lineTo(r.x-s,r.y),this.ctx.closePath(),this.ctx.stroke(),this.ctx.strokeStyle="rgba(0, 255, 0, 0.5)",this.ctx.lineWidth=1;const l=this.tileSizeX*this.zoom,a=this.tileSizeY*this.zoom,c=r.y+i,u=r.x-l/2,h=c-a;this.ctx.strokeRect(u,h,l,a),this.ctx.strokeStyle="rgba(255, 0, 0, 0.5)",this.ctx.fillStyle="rgba(255, 255, 255, 0.8)",this.ctx.font="10px Arial",this.ctx.textAlign="center",this.ctx.fillText(`${n},${e}`,r.x,r.y)}}}toggleDebugMode(){this.debugMode=!this.debugMode,this.draw()}getDebugMode(){return this.debugMode}setZoom(e){this.zoom=Math.max(.1,Math.min(5,e)),this.draw()}getZoom(){return this.zoom}zoomIn(){this.setZoom(this.zoom*1.2)}zoomOut(){this.setZoom(this.zoom/1.2)}resetZoom(){this.zoom=1,this.panX=0,this.panY=0,this.draw()}toggleMinimap(){this.showMinimap=!this.showMinimap,this.draw()}setSidebarTransitioning(e){this.sidebarTransitioning=!!e,this.sidebarTransitioning||(this.lastMiniMapPos=null)}setPan(e,n){this.panX+=e,this.panY+=n,this.draw()}resizeCanvasToContainer(){this.resizeCanvas()}drawGrid(){this.ctx.strokeStyle=this.isDarkMode?"#666":"#999",this.ctx.lineWidth=Math.max(1,Math.min(3,2/this.zoom)),this.ctx.globalAlpha=.8;for(let e=0;e<this.mapHeight;e++)for(let n=0;n<this.mapWidth;n++){const r=this.mapToScreen(n,e),s=this.tileSizeX/2*this.zoom,i=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(r.x,r.y-i),this.ctx.lineTo(r.x+s,r.y),this.ctx.lineTo(r.x,r.y+i),this.ctx.lineTo(r.x-s,r.y),this.ctx.closePath(),this.ctx.stroke()}this.ctx.globalAlpha=1}drawTiles(){const e=[...this.tileLayers].reverse();for(const n of e){if(!n.visible)continue;const r=this.layerTilesets.get(n.type);if(!r||!r.image)continue;this.ctx.globalAlpha=n.transparency||1;const s=this.layerTileData.get(n.type)||new Map;for(let i=0;i<this.mapHeight;i++)for(let l=0;l<this.mapWidth;l++){const a=i*this.mapWidth+l,c=n.data[a];c>0&&this.drawTileFromLayer(l,i,c,r,s)}}this.ctx.globalAlpha=1}drawTileFromLayer(e,n,r,s,i){if(!s.image||r<=0)return;const l=i.get(r);let a,c,u,h;if(l)a=l.sourceX,c=l.sourceY,u=l.width,h=l.height;else{const g=r-1;a=g%s.columns*this.tileSizeX,c=Math.floor(g/s.columns)*this.tileSizeY,u=this.tileSizeX,h=this.tileSizeY}const f=this.mapToScreen(e,n),p=u*this.zoom,b=h*this.zoom,k=this.tileSizeY/2*this.zoom,j=f.y+k,N=f.x-p/2,y=j-b;this.ctx.drawImage(s.image,a,c,u,h,N,y,p,b)}drawTile(e,n,r){if(!this.tilesetImage||r<=0)return;const s=this.detectedTileData.get(r);let i,l,a,c;if(s)i=s.sourceX,l=s.sourceY,a=s.width,c=s.height;else{const N=r-1;i=N%this.tilesetColumns*this.tileSizeX,l=Math.floor(N/this.tilesetColumns)*this.tileSizeY,a=this.tileSizeX,c=this.tileSizeY}const u=this.mapToScreen(e,n),h=a*this.zoom,f=c*this.zoom,p=this.tileSizeY/2*this.zoom,b=u.y+p,k=u.x-h/2,j=b-f;this.ctx.drawImage(this.tilesetImage,i,l,a,c,k,j,h,f)}drawHover(){const e=this.mapToScreen(this.hoverX,this.hoverY),n=this.tileSizeX/2*this.zoom,r=this.tileSizeY/2*this.zoom,s=this.getActiveLayer();s&&["enemy","npc","object","event","background"].includes(s.type)&&this.getObjectsAtPosition(this.hoverX,this.hoverY).length>0?(this.ctx.save(),[{color:"rgba(255, 107, 0, 0.1)",width:8},{color:"rgba(255, 107, 0, 0.2)",width:6},{color:"rgba(255, 107, 0, 0.3)",width:4},{color:"rgba(255, 107, 0, 0.5)",width:2}].forEach(c=>{this.ctx.strokeStyle=c.color,this.ctx.lineWidth=Math.max(1,Math.min(c.width,c.width/this.zoom)),this.ctx.shadowColor="#ff6b00",this.ctx.shadowBlur=Math.max(2,Math.min(10,c.width/this.zoom)),this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y-r),this.ctx.lineTo(e.x+n,e.y),this.ctx.lineTo(e.x,e.y+r),this.ctx.lineTo(e.x-n,e.y),this.ctx.closePath(),this.ctx.stroke()}),this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0,this.ctx.strokeStyle="#ff6b00",this.ctx.lineWidth=Math.max(1,Math.min(3,3/this.zoom)),this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y-r),this.ctx.lineTo(e.x+n,e.y),this.ctx.lineTo(e.x,e.y+r),this.ctx.lineTo(e.x-n,e.y),this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore()):(this.ctx.strokeStyle="#007acc",this.ctx.lineWidth=Math.max(1,Math.min(3,2/this.zoom)),this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y-r),this.ctx.lineTo(e.x+n,e.y),this.ctx.lineTo(e.x,e.y+r),this.ctx.lineTo(e.x-n,e.y),this.ctx.closePath(),this.ctx.stroke())}drawSelection(){this.isSelecting&&(this.currentSelectionTool==="rectangular"||this.currentSelectionTool==="circular")&&(this.ctx.strokeStyle="#ff6b00",this.ctx.lineWidth=Math.max(1,Math.min(2,2/this.zoom)),this.ctx.setLineDash([5,5]),this.currentSelectionTool==="rectangular"?this.drawRectangularSelectionPreview():this.currentSelectionTool==="circular"&&this.drawCircularSelectionPreview(),this.ctx.setLineDash([])),this.selection.active&&this.selection.tiles.length>0&&(this.ctx.strokeStyle="#00ff00",this.ctx.lineWidth=Math.max(1,Math.min(2,2/this.zoom)),this.selection.tiles.forEach(e=>{const n=this.mapToScreen(e.x,e.y),r=this.tileSizeX/2*this.zoom,s=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(n.x,n.y-s),this.ctx.lineTo(n.x+r,n.y),this.ctx.lineTo(n.x,n.y+s),this.ctx.lineTo(n.x-r,n.y),this.ctx.closePath(),this.ctx.stroke()}))}drawRectangularSelectionPreview(){const e=Math.min(this.selection.startX,this.selection.endX),n=Math.max(this.selection.startX,this.selection.endX),r=Math.min(this.selection.startY,this.selection.endY),s=Math.max(this.selection.startY,this.selection.endY);for(let i=r;i<=s;i++)for(let l=e;l<=n;l++)if(l>=0&&l<this.mapWidth&&i>=0&&i<this.mapHeight){const a=this.mapToScreen(l,i),c=this.tileSizeX/2*this.zoom,u=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(a.x,a.y-u),this.ctx.lineTo(a.x+c,a.y),this.ctx.lineTo(a.x,a.y+u),this.ctx.lineTo(a.x-c,a.y),this.ctx.closePath(),this.ctx.stroke()}}drawCircularSelectionPreview(){const e=Math.sqrt(Math.pow(this.selection.endX-this.selection.startX,2)+Math.pow(this.selection.endY-this.selection.startY,2));for(let n=0;n<this.mapHeight;n++)for(let r=0;r<this.mapWidth;r++)if(Math.sqrt(Math.pow(r-this.selection.startX,2)+Math.pow(n-this.selection.startY,2))<=e){const i=this.mapToScreen(r,n),l=this.tileSizeX/2*this.zoom,a=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(i.x,i.y-a),this.ctx.lineTo(i.x+l,i.y),this.ctx.lineTo(i.x,i.y+a),this.ctx.lineTo(i.x-l,i.y),this.ctx.closePath(),this.ctx.stroke()}}drawShapePreview(){!this.isDrawingShape||this.shapeDrawing.preview.length===0||(this.ctx.strokeStyle="#0099ff",this.ctx.lineWidth=Math.max(1,Math.min(2,2/this.zoom)),this.ctx.setLineDash([3,3]),this.shapeDrawing.preview.forEach(e=>{const n=this.mapToScreen(e.x,e.y),r=this.tileSizeX/2*this.zoom,s=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(n.x,n.y-s),this.ctx.lineTo(n.x+r,n.y),this.ctx.lineTo(n.x,n.y+s),this.ctx.lineTo(n.x-r,n.y),this.ctx.closePath(),this.ctx.stroke()}),this.ctx.setLineDash([]))}drawHeroPosition(){const e=this.mapToScreen(this.heroX,this.heroY),n=this.tileSizeX/2*this.zoom,r=this.tileSizeY/2*this.zoom;this.ctx.save(),this.hoverX===this.heroX&&this.hoverY===this.heroY&&[{color:"rgba(255, 107, 0, 0.1)",width:8},{color:"rgba(255, 107, 0, 0.2)",width:6},{color:"rgba(255, 107, 0, 0.3)",width:4},{color:"rgba(255, 107, 0, 0.5)",width:2}].forEach(l=>{this.ctx.strokeStyle=l.color,this.ctx.lineWidth=Math.max(1,Math.min(l.width,l.width/this.zoom)),this.ctx.shadowColor="#ff6b00",this.ctx.shadowBlur=Math.max(2,Math.min(10,l.width/this.zoom)),this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y-r),this.ctx.lineTo(e.x+n,e.y),this.ctx.lineTo(e.x,e.y+r),this.ctx.lineTo(e.x-n,e.y),this.ctx.closePath(),this.ctx.stroke()}),this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0,this.ctx.fillStyle="#ff6b00",this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y-r),this.ctx.lineTo(e.x+n,e.y),this.ctx.lineTo(e.x,e.y+r),this.ctx.lineTo(e.x-n,e.y),this.ctx.closePath(),this.ctx.fill(),this.ctx.strokeStyle="#ff8c00",this.ctx.lineWidth=Math.max(1,Math.min(2,2/this.zoom)),this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y-r),this.ctx.lineTo(e.x+n,e.y),this.ctx.lineTo(e.x,e.y+r),this.ctx.lineTo(e.x-n,e.y),this.ctx.closePath(),this.ctx.stroke(),this.drawHeroIcon(e.x,e.y),this.ctx.restore()}drawHeroIcon(e,n){const s=Math.max(12,Math.min(20,16*this.zoom))/2;this.ctx.save(),this.ctx.fillStyle="#ffffff",this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=1.5,this.ctx.beginPath(),this.ctx.arc(e,n-s*.6,s*.25,0,Math.PI*2),this.ctx.fill(),this.ctx.beginPath(),this.ctx.roundRect(e-s*.3,n-s*.2,s*.6,s*.8,s*.15),this.ctx.fill(),this.ctx.restore()}getActorLayerType(e){return e.type==="npc"||e.category==="npc"?"npc":e.type==="enemy"||e.category==="enemy"||e.category==="creature"||e.type==="creature"?e.category==="npc"?"npc":"enemy":null}getActorLayerByType(e){return this.tileLayers.find(n=>n.type===e)||null}actorUsesPlaceholder(e){const n=this.getActorLayerType(e);if(!n)return!1;const r=this.getActorLayerByType(n);if(!r)return!1;const s=e.y*this.mapWidth+e.x;return s<0||s>=r.data.length?!1:r.data[s]===0}drawActorPlaceholders(){for(const e of this.objects){if(!this.actorUsesPlaceholder(e))continue;const n=this.getActorLayerType(e);n&&this.drawActorPlaceholder(e,n)}}drawActorPlaceholder(e,n){const r=this.mapToScreen(e.x,e.y),s=this.tileSizeX/2*this.zoom,i=this.tileSizeY/2*this.zoom;this.ctx.save();const l=this.hoverX===e.x&&this.hoverY===e.y,a=this.isDraggingActor&&this.draggingActorId===e.id;(l||a)&&[{color:"rgba(255, 107, 0, 0.1)",width:8},{color:"rgba(255, 107, 0, 0.2)",width:6},{color:"rgba(255, 107, 0, 0.3)",width:4},{color:"rgba(255, 107, 0, 0.5)",width:2}].forEach(u=>{this.ctx.strokeStyle=u.color,this.ctx.lineWidth=Math.max(1,Math.min(u.width,u.width/this.zoom)),this.ctx.shadowColor="#ff6b00",this.ctx.shadowBlur=Math.max(2,Math.min(10,u.width/this.zoom)),this.ctx.beginPath(),this.ctx.moveTo(r.x,r.y-i),this.ctx.lineTo(r.x+s,r.y),this.ctx.lineTo(r.x,r.y+i),this.ctx.lineTo(r.x-s,r.y),this.ctx.closePath(),this.ctx.stroke()}),this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0,this.ctx.fillStyle="#ff6b00",this.ctx.beginPath(),this.ctx.moveTo(r.x,r.y-i),this.ctx.lineTo(r.x+s,r.y),this.ctx.lineTo(r.x,r.y+i),this.ctx.lineTo(r.x-s,r.y),this.ctx.closePath(),this.ctx.fill(),this.ctx.strokeStyle="#ff8c00",this.ctx.lineWidth=Math.max(1,Math.min(2,2/this.zoom)),this.ctx.beginPath(),this.ctx.moveTo(r.x,r.y-i),this.ctx.lineTo(r.x+s,r.y),this.ctx.lineTo(r.x,r.y+i),this.ctx.lineTo(r.x-s,r.y),this.ctx.closePath(),this.ctx.stroke(),this.drawActorIcon(r.x,r.y,n),this.ctx.restore()}drawActorIcon(e,n,r){const s=Math.max(10,Math.min(18,14*this.zoom)),i=r==="npc"?"N":"E";this.ctx.save(),this.ctx.fillStyle="#ffffff",this.ctx.font=`bold ${s}px "Segoe UI", sans-serif`,this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(i,e,n),this.ctx.restore()}drawStampPreview(){if(!(!this.stampPreview.visible||!this.activeStamp)){this.ctx.strokeStyle="#00ff00",this.ctx.fillStyle="rgba(0, 255, 0, 0.2)",this.ctx.lineWidth=Math.max(1,Math.min(2,2/this.zoom)),this.ctx.setLineDash([3,3]);for(let e=0;e<this.activeStamp.height;e++)for(let n=0;n<this.activeStamp.width;n++){const r=this.stampPreview.x+n,s=this.stampPreview.y+e;if(r>=0&&r<this.mapWidth&&s>=0&&s<this.mapHeight){const i=this.mapToScreen(r,s),l=this.tileSizeX/2*this.zoom,a=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(i.x,i.y-a),this.ctx.lineTo(i.x+l,i.y),this.ctx.lineTo(i.x,i.y+a),this.ctx.lineTo(i.x-l,i.y),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()}}this.ctx.setLineDash([])}}drawMiniMap(){if(!this.showMinimap)return;const e=150,n=120,r=10,s=this.mapCanvas.getBoundingClientRect(),i=window.innerWidth-e-r,l=window.innerHeight-n-r;let a=Math.floor(i-s.left),c=Math.floor(l-s.top);a=Math.max(0,Math.min(this.mapCanvas.width-e,a)),c=Math.max(0,Math.min(this.mapCanvas.height-n,c)),this.lastMiniMapPos={x:a,y:c},this.ctx.save();const u=5,h=a-u,f=c-u,p=e+u*2,b=n+u*2,k=Math.min(12,Math.floor(Math.min(p,b)/6)),j=Math.min(8,Math.floor(Math.min(e,n)/8)),N=(E,O,z,V,G)=>{const re=Math.max(0,Math.min(G,Math.min(z,V)/2));this.ctx.beginPath(),this.ctx.moveTo(E+re,O),this.ctx.lineTo(E+z-re,O),this.ctx.quadraticCurveTo(E+z,O,E+z,O+re),this.ctx.lineTo(E+z,O+V-re),this.ctx.quadraticCurveTo(E+z,O+V,E+z-re,O+V),this.ctx.lineTo(E+re,O+V),this.ctx.quadraticCurveTo(E,O+V,E,O+V-re),this.ctx.lineTo(E,O+re),this.ctx.quadraticCurveTo(E,O,E+re,O),this.ctx.closePath()};this.ctx.fillStyle=this.isDarkMode?"rgba(42, 42, 42, 0.9)":"rgba(0, 0, 0, 0.7)",N(h,f,p,b,k),this.ctx.fill(),this.ctx.fillStyle=this.isDarkMode?"#2a2a2a":"#f0f0f0",N(a,c,e,n,j),this.ctx.fill(),this.ctx.strokeStyle=this.isDarkMode?"#999":"#333",this.ctx.lineWidth=1,N(a,c,e,n,j),this.ctx.stroke();const y=Math.floor(e/this.mapWidth)||1,g=Math.floor(n/this.mapHeight)||1,x=Math.max(1,Math.min(y,g)),w=this.mapWidth*x,C=this.mapHeight*x,M=a+Math.floor((e-w)/2),P=c+Math.floor((n-C)/2);this.ctx.imageSmoothingEnabled=!1;for(let E=0;E<this.tileLayers.length;E++){const O=this.tileLayers[E];if(O.visible)for(let z=0;z<this.mapHeight;z++)for(let V=0;V<this.mapWidth;V++){const G=z*this.mapWidth+V,re=O.data[G];if(re>0){const U=M+V*x,ie=P+z*x,ve=re*137.5%360;this.ctx.fillStyle=`hsl(${ve}, 55%, ${E===0?"45%":"60%"})`,this.ctx.fillRect(U,ie,x,x)}}}if(x>=3){this.ctx.strokeStyle=this.isDarkMode?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.05)",this.ctx.lineWidth=.5;for(let E=0;E<this.mapHeight;E++)for(let O=0;O<this.mapWidth;O++){const z=M+O*x+.25,V=P+E*x+.25;this.ctx.strokeRect(z,V,x-.5,x-.5)}}this.ctx.restore()}handleFileUpload(e,n){if(n==="tileset"){const r=new FileReader;r.onload=s=>{var l;const i=new Image;i.onload=()=>{this.tilesetImage=i,this.tilesetFileName=e.name,this.tilesetColumns=Math.floor(i.width/this.tileSizeX),this.tilesetRows=Math.floor(i.height/this.tileSizeY),this.tileCount=this.tilesetColumns*this.tilesetRows,this.createTilePalette(),this.draw()},i.src=(l=s.target)==null?void 0:l.result},r.readAsDataURL(e)}else if(n==="layerTileset"){const r=this.tileLayers.find(s=>s.id===this.activeLayerId);r&&this.setLayerTileset(r.type,e)}}createTilePalette(e=!1){const n=document.getElementById("tilesContainer");if(!n||!this.tilesetImage)return;n.innerHTML="";let r;if(e&&this.detectedTileData.size>0)r=Array.from(this.detectedTileData.entries()).map(([l,a])=>({index:l,sourceX:a.sourceX,sourceY:a.sourceY,width:a.width,height:a.height}));else{this.detectedTileData.clear(),r=this.detectVariableSizedTiles().map(c=>(this.detectedTileData.set(c.index,{sourceX:c.sourceX,sourceY:c.sourceY,width:c.width,height:c.height}),c));const a=this.tileLayers.find(c=>c.id===this.activeLayerId);if(a){const c=new Map;for(const[u,h]of this.detectedTileData.entries())c.set(u,h);this.layerTileData.set(a.type,c),console.log(`Stored ${c.size} newly detected tiles for layer type: ${a.type}`)}}let s=0;const i=()=>document.getElementById("brushToolState")||document.querySelector("[data-brush-tool]");for(const l of r){const a=document.createElement("canvas");a.width=l.width,a.height=l.height,a.width=l.width,a.height=l.height,a.className="palette-tile",a.style.setProperty("--tile-width",`${l.width}px`),a.style.setProperty("--tile-height",`${l.height}px`);const c=a.getContext("2d");c&&c.drawImage(this.tilesetImage,l.sourceX,l.sourceY,l.width,l.height,0,0,l.width,l.height);const u=document.createElement("div");u.className="brush-wrapper",u.style.position="relative",u.style.display="inline-block",u.style.margin="2px";const h=document.createElement("div");h.className="selection-number",h.style.position="absolute",h.style.top="2px",h.style.left="2px",h.style.background="red",h.style.color="white",h.style.borderRadius="50%",h.style.width="16px",h.style.height="16px",h.style.fontSize="10px",h.style.display="none",h.style.alignItems="center",h.style.justifyContent="center",h.style.fontWeight="bold",h.style.zIndex="10";const f=document.createElement("div");f.className="remove-overlay",f.style.position="absolute",f.style.top="0",f.style.left="0",f.style.right="0",f.style.bottom="0",f.style.background="rgba(255, 0, 0, 0.7)",f.style.display="none",f.style.alignItems="center",f.style.justifyContent="center",f.style.fontSize="24px",f.style.color="white",f.style.cursor="pointer",f.style.zIndex="10",f.textContent="✕";const p=document.createElement("div");p.className="separate-icon",p.style.position="absolute",p.style.top="50%",p.style.left="50%",p.style.transform="translate(-50%, -50%)",p.style.display="none",p.style.alignItems="center",p.style.justifyContent="center",p.style.background="none",p.style.color="white",p.style.zIndex="2",p.style.pointerEvents="none",p.style.width="24px",p.style.height="24px",p.innerHTML=`
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="6" cy="6" r="3"></circle>
          <circle cx="6" cy="18" r="3"></circle>
          <line x1="20" y1="4" x2="8.12" y2="15.88"></line>
          <line x1="14.47" y1="14.48" x2="20" y2="20"></line>
          <line x1="8.12" y1="8.12" x2="12" y2="12"></line>
        </svg>
      `;const b=document.createElement("div");b.className="merge-icon",b.style.position="absolute",b.style.top="50%",b.style.left="50%",b.style.transform="translate(-50%, -50%)",b.style.display="none",b.style.alignItems="center",b.style.justifyContent="center",b.style.background="none",b.style.color="white",b.style.zIndex="2",b.style.pointerEvents="none",b.style.width="24px",b.style.height="24px",b.innerHTML=`
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m8 6 4-4 4 4"></path>
          <path d="M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22"></path>
          <path d="m20 22-6.828-6.828A4 4 0 0 1 12 12.3"></path>
        </svg>
      `,f.addEventListener("click",y=>{y.preventDefault(),y.stopPropagation(),console.log(`Remove overlay clicked for tile index: ${l.index}`),this.handleBrushRemove(l.index)}),a.addEventListener("click",y=>{y.preventDefault();const g=i(),x=(g==null?void 0:g.getAttribute("data-brush-tool"))||"none";console.log(`Tile clicked! Index: ${l.index}, Current brush tool: ${x}`),x==="merge"?(console.log("Handling merge tool selection"),this.handleBrushMerge(l.index,u)):x==="separate"?(console.log("Handling separate tool"),this.handleBrushSeparate(l.index)):x==="remove"?(console.log("Handling remove tool"),this.handleBrushRemove(l.index)):(console.log("Normal tile selection"),this.setCurrentLayerActiveGid(l.index),this.updateActiveTile())}),u.draggable=!1,u.addEventListener("dragstart",y=>{const g=i();((g==null?void 0:g.getAttribute("data-brush-tool"))||"none")==="move"?(u.style.opacity="0.5",y.dataTransfer.effectAllowed="move",y.dataTransfer.setData("text/plain",l.index.toString()),this.dispatchBrushEvent("dragstart",l.index)):y.preventDefault()}),u.addEventListener("dragend",y=>{u.style.opacity="1",this.dispatchBrushEvent("dragend",l.index)}),u.addEventListener("dragover",y=>{const g=i();((g==null?void 0:g.getAttribute("data-brush-tool"))||"none")==="move"&&(y.preventDefault(),y.dataTransfer.dropEffect="move",u.style.borderTop="3px solid #007acc")}),u.addEventListener("dragleave",y=>{u.style.borderTop=""}),u.addEventListener("drop",y=>{y.preventDefault(),u.style.borderTop="";const g=i();if(((g==null?void 0:g.getAttribute("data-brush-tool"))||"none")==="move"){const w=parseInt(y.dataTransfer.getData("text/plain")),C=l.index;w!==C&&this.dispatchBrushEvent("drop",{from:w,to:C})}});const k=()=>{const y=i(),g=(y==null?void 0:y.getAttribute("data-brush-tool"))||"none";u.classList.remove("separate-mode","merge-mode","merge-selected-first","merge-selected-second"),u.draggable=!1,u.style.cursor="",u.title="",u.setAttribute("data-tile-index",l.index.toString()),g==="move"?(u.draggable=!0,u.style.cursor="move",u.title="Drag to reorder"):g==="separate"?(u.classList.add("separate-mode"),u.style.cursor="pointer",u.title="Click to separate"):g==="merge"&&(u.classList.add("merge-mode"),u.style.cursor="pointer",u.title="Click to merge (max 2 brushes)")};k();const j=new MutationObserver(()=>{k()}),N=i();N&&j.observe(N,{attributes:!0,attributeFilter:["data-brush-tool"]}),u.addEventListener("mouseenter",()=>{const y=document.querySelector("[data-brush-tool]");((y==null?void 0:y.getAttribute("data-brush-tool"))||"none")==="remove"&&(f.style.display="flex")}),u.addEventListener("mouseleave",()=>{f.style.display="none"}),a.setAttribute("data-tile-index",l.index.toString()),a.setAttribute("data-tile-width",l.width.toString()),a.setAttribute("data-tile-height",l.height.toString()),a.setAttribute("data-source-x",l.sourceX.toString()),a.setAttribute("data-source-y",l.sourceY.toString()),u.appendChild(a),u.appendChild(h),u.appendChild(f),u.appendChild(p),u.appendChild(b),n.appendChild(u),s++}console.log(`Created ${s} variable-sized tiles from tileset`)}handleBrushMerge(e,n){const r=document.querySelector(".merge-selected-first"),s=document.querySelector(".merge-selected-second");if(n.classList.contains("merge-selected-first")||n.classList.contains("merge-selected-second")){n.classList.remove("merge-selected-first","merge-selected-second");return}if(!r)n.classList.add("merge-selected-first");else if(!s)n.classList.add("merge-selected-second"),setTimeout(()=>{const i=parseInt(r.getAttribute("data-tile-index")||"0");this.performMerge(i,e),r.classList.remove("merge-selected-first"),n.classList.remove("merge-selected-second")},300);else return}performMerge(e,n){console.log(`Merging tiles ${e} and ${n}`);try{this.mergeBrushes([e,n]),console.log(`Successfully merged brushes ${e} and ${n}`)}catch(r){console.error("Failed to merge brushes:",r)}}handleBrushSeparate(e){this.dispatchBrushEvent("separate",e)}handleBrushRemove(e){console.log(`handleBrushRemove called with tileIndex: ${e}`),this.dispatchBrushEvent("remove",e)}dispatchBrushEvent(e,n){const r=new CustomEvent("brushAction",{detail:typeof n=="number"?{action:e,tileIndex:n}:{action:e,...n}});document.dispatchEvent(r)}detectVariableSizedTiles(){if(!this.tilesetImage)return[];const e=[],n=document.createElement("canvas");n.width=this.tilesetImage.width,n.height=this.tilesetImage.height;const r=n.getContext("2d");if(!r)return[];r.drawImage(this.tilesetImage,0,0);const i=r.getImageData(0,0,this.tilesetImage.width,this.tilesetImage.height).data,l=new Array(this.tilesetImage.width*this.tilesetImage.height).fill(!1);let a=1;const c=[];for(let u=0;u<this.tilesetImage.height;u++)for(let h=0;h<this.tilesetImage.width;h++){const f=u*this.tilesetImage.width+h;if(l[f]||this.isPixelTransparent(i,h,u,this.tilesetImage.width))continue;const p=this.floodFillObjectData(i,this.tilesetImage.width,this.tilesetImage.height,h,u,l);p&&this.isValidObjectSize(p.bounds)&&c.push(p)}for(const u of c){const h=this.intelligentObjectSplit(u);for(const f of h)e.push({index:a++,sourceX:f.x,sourceY:f.y,width:f.width,height:f.height})}return e}isPixelTransparent(e,n,r,s){const i=(r*s+n)*4+3;return e[i]<=this.tileContentThreshold}floodFillObjectData(e,n,r,s,i,l){const a=[{x:s,y:i}];let c=s,u=s,h=i,f=i,p=0;const b=[];for(;a.length>0;){const x=a.pop(),{x:w,y:C}=x;if(w<0||w>=n||C<0||C>=r)continue;const M=C*n+w;l[M]||this.isPixelTransparent(e,w,C,n)||(l[M]=!0,p++,b.push({x:w,y:C}),c=Math.min(c,w),u=Math.max(u,w),h=Math.min(h,C),f=Math.max(f,C),a.push({x:w+1,y:C}),a.push({x:w-1,y:C}),a.push({x:w,y:C+1}),a.push({x:w,y:C-1}),a.push({x:w+1,y:C+1}),a.push({x:w+1,y:C-1}),a.push({x:w-1,y:C+1}),a.push({x:w-1,y:C-1}))}if(p===0)return null;const k=1,j=Math.max(0,c-k),N=Math.max(0,h-k),y=Math.min(n-1,u+k),g=Math.min(r-1,f+k);return{bounds:{x:j,y:N,width:y-j+1,height:g-N+1},pixels:b}}intelligentObjectSplit(e){const{bounds:n,pixels:r}=e,{width:s,height:i}=n,l=r.length,a=s*i,c=l/a,u=Math.max(this.tileSizeX,this.tileSizeY),h=this.shouldSplitDirection(r,n,"horizontal",u),f=this.shouldSplitDirection(r,n,"vertical",u),p=this.isFloorPattern(n,r),b=this.isVerticalWall(n,r),k=this.isHorizontalWall(n,r);return console.log(`Object analysis: ${s}x${i}, density: ${c.toFixed(2)}, floor: ${p}, vWall: ${b}, hWall: ${k}`),p?(console.log("Detected floor/ground pattern - splitting into individual tiles"),this.splitObjectByGrid(e,"horizontal")):b?(console.log("Detected vertical wall/structure - keeping as single tile"),[n]):k?(console.log("Detected horizontal wall - keeping as single tile"),[n]):h&&s>this.tileSizeX*1.5?(console.log("Splitting horizontal arrangement into individual objects"),this.splitObjectByGrid(e,"horizontal")):f&&i>this.tileSizeY*1.5&&!this.isLikelySingleVerticalObject(n,r)?(console.log("Splitting vertical arrangement into individual objects"),this.splitObjectByGrid(e,"vertical")):c<.4&&a>u*u*2?(console.log("Splitting sparse large object"),this.splitObjectByDensity(e)):(s>this.tileSizeX*1.8||i>this.tileSizeY*1.8)&&!b&&!k&&c<.8?(console.log("Splitting large non-wall object into tile-sized pieces"),this.splitObjectByGrid(e,s>i?"horizontal":"vertical")):(console.log("Keeping as single object"),[n])}isVerticalWall(e,n){const{width:r,height:s}=e,i=s/r,l=n.length/(r*s);if(i<1.5||l<.5)return!1;const a=this.hasConsistentVerticalWidth(n,e),c=this.hasVerticalContinuity(n,e),u=s>this.tileSizeY*1.5&&r<=this.tileSizeX*1.2;return a&&c||u&&l>.6}isHorizontalWall(e,n){const{width:r,height:s}=e,i=r/s,l=n.length/(r*s);if(i<2||l<.6||s<this.tileSizeY*.7)return!1;const a=this.hasConsistentHorizontalHeight(n,e),c=this.hasHorizontalContinuity(n,e);return a&&c}isLikelySingleVerticalObject(e,n){const{width:r,height:s}=e;return n.length/(r*s)>.7?!0:this.hasVerticalContinuity(n,e)}hasConsistentVerticalWidth(e,n){const{y:r,height:s}=n,i=Math.max(1,Math.floor(s/5)),l=[];for(let h=0;h<5;h++){const f=r+h*i,p=Math.min(f+i,r+s);let b=Number.MAX_SAFE_INTEGER,k=Number.MIN_SAFE_INTEGER,j=!1;for(const N of e)N.y>=f&&N.y<p&&(b=Math.min(b,N.x),k=Math.max(k,N.x),j=!0);j&&l.push(k-b+1)}if(l.length<2)return!1;const a=l.reduce((h,f)=>h+f,0)/l.length,c=l.reduce((h,f)=>h+Math.pow(f-a,2),0)/l.length,u=Math.sqrt(c);return a>0&&u/a<.3}hasConsistentHorizontalHeight(e,n){const{x:r,width:s}=n,i=Math.max(1,Math.floor(s/5)),l=[];for(let h=0;h<5;h++){const f=r+h*i,p=Math.min(f+i,r+s);let b=Number.MAX_SAFE_INTEGER,k=Number.MIN_SAFE_INTEGER,j=!1;for(const N of e)N.x>=f&&N.x<p&&(b=Math.min(b,N.y),k=Math.max(k,N.y),j=!0);j&&l.push(k-b+1)}if(l.length<2)return!1;const a=l.reduce((h,f)=>h+f,0)/l.length,c=l.reduce((h,f)=>h+Math.pow(f-a,2),0)/l.length,u=Math.sqrt(c);return a>0&&u/a<.3}hasVerticalContinuity(e,n){const{y:r,height:s}=n,i=Math.max(1,Math.floor(s/10));let l=0,a=0;for(let c=r;c<r+s;c+=i){const u=Math.min(c+i,r+s);let h=!1;for(const f of e)if(f.y>=c&&f.y<u){h=!0;break}h&&l++,a++}return a>0&&l/a>=.7}hasHorizontalContinuity(e,n){const{x:r,width:s}=n,i=Math.max(1,Math.floor(s/10));let l=0,a=0;for(let c=r;c<r+s;c+=i){const u=Math.min(c+i,r+s);let h=!1;for(const f of e)if(f.x>=c&&f.x<u){h=!0;break}h&&l++,a++}return a>0&&l/a>=.7}isFloorPattern(e,n){const{width:r,height:s}=e,i=s<=this.tileSizeY*.6,l=r>this.tileSizeX*1.3,a=this.hasRepeatingHorizontalPattern(n,e),c=this.hasDiamondLikeShape(n,e);return i&&l||a&&l||c&&l}hasRepeatingHorizontalPattern(e,n){const{x:r,width:s}=n,i=this.tileSizeX,l=Math.floor(s/i);if(l<2)return!1;const a=[];for(let f=0;f<l;f++){const p=r+f*i,b=p+i;let k=0;for(const j of e)j.x>=p&&j.x<b&&k++;a.push(k)}const c=a.reduce((f,p)=>f+p,0)/a.length,u=a.reduce((f,p)=>f+Math.pow(p-c,2),0)/a.length,h=Math.sqrt(u);return c>0&&h/c<.5}hasDiamondLikeShape(e,n){const{y:r,height:s}=n,i=[];for(let f=0;f<s;f++){let p=0;for(const b of e)b.y===r+f&&p++;i.push(p)}if(i.length<3)return!1;const l=Math.floor(i.length*.2),a=Math.floor(i.length*.3),c=Math.floor(i.length*.7),u=(i.slice(0,l).reduce((f,p)=>f+p,0)+i.slice(-l).reduce((f,p)=>f+p,0))/(l*2||1);return i.slice(a,c).reduce((f,p)=>f+p,0)/(c-a||1)>u*1.2}shouldSplitDirection(e,n,r,s){const{x:i,y:l,width:a,height:c}=n;if(r==="horizontal"){const u=[],h=Math.max(1,Math.floor(a/(a/s)));for(let k=0;k<a;k+=h){let j=0;for(const N of e)N.x>=i+k&&N.x<i+k+h&&j++;u.push(j)}let f=0,p=0;const b=u.reduce((k,j)=>k+j,0)/u.length;for(let k=0;k<u.length;k++)u[k]<b*.3?f++:u[k]>b*.7&&p++;return p>=2&&f>=1}else{const u=[],h=Math.max(1,Math.floor(c/(c/s)));for(let k=0;k<c;k+=h){let j=0;for(const N of e)N.y>=l+k&&N.y<l+k+h&&j++;u.push(j)}let f=0,p=0;const b=u.reduce((k,j)=>k+j,0)/u.length;for(let k=0;k<u.length;k++)u[k]<b*.3?f++:u[k]>b*.7&&p++;return p>=2&&f>=1}}splitObjectByGrid(e,n){const{bounds:r}=e,s=[];if(n==="horizontal"){const i=this.tileSizeX;for(let l=r.x;l<r.x+r.width;l+=i){const a=this.findContentInRegion(e.pixels,{x:l,y:r.y,width:Math.min(i,r.x+r.width-l),height:r.height});a&&s.push(a)}}else{const i=this.tileSizeY;for(let l=r.y;l<r.y+r.height;l+=i){const a=this.findContentInRegion(e.pixels,{x:r.x,y:l,width:r.width,height:Math.min(i,r.y+r.height-l)});a&&s.push(a)}}return s.length>0?s:[r]}splitObjectByDensity(e){const{bounds:n}=e,r=Math.min(this.tileSizeX,this.tileSizeY),s=[];for(let i=n.y;i<n.y+n.height;i+=r)for(let l=n.x;l<n.x+n.width;l+=r){const a=this.findContentInRegion(e.pixels,{x:l,y:i,width:Math.min(r,n.x+n.width-l),height:Math.min(r,n.y+n.height-i)});a&&s.push(a)}return s.length>0?s:[n]}findContentInRegion(e,n){let r=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER,a=!1;for(const u of e)u.x>=n.x&&u.x<n.x+n.width&&u.y>=n.y&&u.y<n.y+n.height&&(r=Math.min(r,u.x),s=Math.max(s,u.x),i=Math.min(i,u.y),l=Math.max(l,u.y),a=!0);if(!a)return null;const c=1;return{x:Math.max(0,r-c),y:Math.max(0,i-c),width:s-r+1+c*2,height:l-i+1+c*2}}isValidObjectSize(e){var s,i;const r=Math.max(((s=this.tilesetImage)==null?void 0:s.width)||512,((i=this.tilesetImage)==null?void 0:i.height)||512);return e.width>=8&&e.height>=8&&e.width<=r&&e.height<=r&&e.width*e.height>=8*8}setObjectSeparationSensitivity(e){this.objectSeparationSensitivity=Math.max(0,Math.min(1,e))}getObjectSeparationSensitivity(){return this.objectSeparationSensitivity}tileHasContent(e){try{const r=e.getImageData(0,0,this.tileSizeX,this.tileSizeY).data;for(let s=3;s<r.length;s+=4)if(r[s]>this.tileContentThreshold)return!0;return!1}catch(n){return console.warn("Could not analyze tile content, assuming tile has content:",n),!0}}updateActiveTile(){const e=document.getElementById("activeGid");if(e&&(e.textContent=this.activeGid.toString()),document.querySelectorAll(".palette-tile").forEach(r=>r.classList.remove("selected")),this.activeGid>0){const r=document.querySelector(`.palette-tile[data-tile-index="${this.activeGid}"]`);r&&r.classList.add("selected")}}resizeMap(e,n){this.mapWidth=e,this.mapHeight=n;for(const r of this.tileLayers){const s=new Array(e*n).fill(0);for(let i=0;i<Math.min(n,this.mapHeight);i++)for(let l=0;l<Math.min(e,this.mapWidth);l++){const a=i*this.mapWidth+l,c=i*e+l;a<r.data.length&&(s[c]=r.data[a])}r.data=s}this.draw(),this.markAsChanged(!0)}addLayer(e,n){if(this.tileLayers.find(i=>i.type===n))return!1;this.saveState();const s={id:this.nextLayerId++,name:e,type:n,data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1};return this.tileLayers.push(s),this.sortLayersByPriority(),this.activeLayerId=s.id,this.draw(),this.markAsChanged(!0),!0}sortLayersByPriority(){const e={npc:1,enemy:2,event:3,collision:4,object:5,background:6};this.tileLayers.sort((n,r)=>e[n.type]-e[r.type])}deleteLayer(e){if(this.tileLayers.length<=1)return!1;const n=this.tileLayers.findIndex(r=>r.id===e);return n!==-1?(this.saveState(),this.tileLayers.splice(n,1),this.activeLayerId===e&&(this.activeLayerId=this.tileLayers.length>0?this.tileLayers[0].id:null),this.draw(),this.markAsChanged(!0),!0):!1}setActiveLayer(e){this.activeLayerId=e;const n=this.tileLayers.find(r=>r.id===e);n&&this.updateCurrentTileset(n.type),this.draw()}toggleLayerVisibility(e){const n=this.tileLayers.find(r=>r.id===e);n&&(n.visible=!n.visible,this.draw())}setLayerTransparency(e,n){const r=this.tileLayers.find(s=>s.id===e);r&&(r.transparency=Math.max(0,Math.min(1,n)),this.draw())}setMapSize(e,n){this.mapWidth=e,this.mapHeight=n,this.collisionData=new Array(e*n).fill(0),this.tileLayers.forEach(r=>{const s=r.data;r.data=new Array(e*n).fill(0);for(let i=0;i<Math.min(n,15);i++)for(let l=0;l<Math.min(e,20);l++){const a=i*20+l,c=i*e+l;a<s.length&&(r.data[c]=s[a])}}),this.draw()}renameLayer(e,n){const r=this.tileLayers.find(s=>s.id===e);r&&(r.name=n)}changeLayerType(e,n,r){const s=this.tileLayers.find(i=>i.id===e);return s?(s.type=n,s.name=r,this.sortLayersByPriority(),!0):!1}setLayerType(e,n){const r=this.tileLayers.find(s=>s.id===e);r&&(r.type=n,this.sortLayersByPriority())}getLayers(){return this.tileLayers}getActiveLayerId(){return this.activeLayerId}getHoverCoordinates(){return this.hoverX>=0&&this.hoverY>=0?{x:this.hoverX,y:this.hoverY}:null}getActiveLayer(){return this.activeLayerId!==null&&this.tileLayers.find(e=>e.id===this.activeLayerId)||null}setCurrentTool(e){this.currentTool=e,this.tool="tiles"}getCurrentTool(){return this.currentTool}setCurrentSelectionTool(e){this.currentSelectionTool=e,this.tool="selection"}getCurrentSelectionTool(){return this.currentSelectionTool}setCurrentShapeTool(e){this.currentShapeTool=e,this.tool="shape"}getCurrentShapeTool(){return this.currentShapeTool}setEyedropperTool(){this.tool="eyedropper",this.mapCanvas.style.cursor="crosshair"}isEyedropperActive(){return this.tool==="eyedropper"}setEyedropperCallback(e){this.eyedropperCallback=e}setObjectsChangedCallback(e){this.objectsChangedCallback=e,e&&e(this.getMapObjects())}setStampTool(){this.tool="stamp",this.mapCanvas.style.cursor="crosshair",this.stampPreview.visible=!1}isStampActive(){return this.tool==="stamp"}setCurrentStampMode(e){this.currentStampMode=e,this.stampPreview.visible=e==="place"&&this.activeStamp!==null,this.draw()}getCurrentStampMode(){return this.currentStampMode}createStampFromSelection(e){if(!this.selection.active||this.selection.tiles.length===0)return!1;let n=1/0,r=1/0,s=-1/0,i=-1/0;for(const f of this.selection.tiles)n=Math.min(n,f.x),r=Math.min(r,f.y),s=Math.max(s,f.x),i=Math.max(i,f.y);const l=s-n+1,a=i-r+1,c=[],u=this.activeLayerId||0;for(const f of this.selection.tiles)f.gid>0&&c.push({tileId:f.gid,layerId:u,x:f.x-n,y:f.y-r});const h={id:Date.now().toString(),name:e,width:l,height:a,tiles:c};return this.stamps.set(h.id,h),this.clearSelection(),this.stampCallback&&this.stampCallback(Array.from(this.stamps.values())),!0}setActiveStamp(e){e&&this.stamps.has(e)?(this.activeStamp=this.stamps.get(e),this.currentStampMode="place",this.stampPreview.visible=!0):(this.activeStamp=null,this.stampPreview.visible=!1),this.draw()}getStamps(){return Array.from(this.stamps.values())}deleteStamp(e){return this.stamps.has(e)?(this.stamps.delete(e),this.activeStamp&&this.activeStamp.id===e&&(this.activeStamp=null,this.stampPreview.visible=!1),this.stampCallback&&this.stampCallback(Array.from(this.stamps.values())),this.draw(),!0):!1}setStampCallback(e){this.stampCallback=e}setHeroEditCallback(e){this.heroEditCallback=e}placeStamp(e,n){if(this.activeStamp&&!(e<0||n<0||e+this.activeStamp.width>this.mapWidth||n+this.activeStamp.height>this.mapHeight)){for(const r of this.activeStamp.tiles){const s=e+r.x,l=(n+r.y)*this.mapWidth+s;let a=this.tileLayers.find(c=>c.id===r.layerId);!a&&this.activeLayerId!==null&&(a=this.tileLayers.find(c=>c.id===this.activeLayerId)),a&&(a.data[l]=r.tileId)}this.saveState(),this.draw()}}clearSelection(){this.selection.active=!1,this.selection.tiles=[],this.draw()}hasActiveSelection(){return this.selection.active&&this.selection.tiles.length>0}getSelection(){return[...this.selection.tiles]}selectAll(){const e=this.tileLayers.find(n=>n.id===this.activeLayerId);if(e){this.selection.tiles=[];for(let n=0;n<this.mapHeight;n++)for(let r=0;r<this.mapWidth;r++){const s=n*this.mapWidth+r,i=e.data[s];this.selection.tiles.push({x:r,y:n,gid:i})}this.selection.active=!0,this.draw()}}deleteSelection(){if(!this.selection.active||this.selection.tiles.length===0)return;const e=this.tileLayers.find(n=>n.id===this.activeLayerId);e&&(this.saveState(),this.selection.tiles.forEach(n=>{const r=n.y*this.mapWidth+n.x;e.data[r]=0}),this.clearSelection(),this.markAsChanged(),this.draw())}fillSelection(){if(!this.selection.active||this.selection.tiles.length===0||this.activeGid===0)return;const e=this.tileLayers.find(n=>n.id===this.activeLayerId);e&&(this.saveState(),this.selection.tiles.forEach(n=>{const r=n.y*this.mapWidth+n.x;e.data[r]=this.activeGid}),this.markAsChanged(),this.draw())}bucketFill(e,n,r,s){const i=e.data[r*this.mapWidth+n];if(i===s)return;const l=[{x:n,y:r}],a=new Set;for(;l.length>0;){const{x:c,y:u}=l.pop(),h=u*this.mapWidth+c;c<0||c>=this.mapWidth||u<0||u>=this.mapHeight||a.has(h)||e.data[h]===i&&(a.add(h),e.data[h]=s,l.push({x:c+1,y:u}),l.push({x:c-1,y:u}),l.push({x:c,y:u+1}),l.push({x:c,y:u-1}))}}selectRectangular(e,n,r,s,i){this.selection.tiles=[];const l=Math.min(n,s),a=Math.max(n,s),c=Math.min(r,i),u=Math.max(r,i);for(let h=c;h<=u;h++)for(let f=l;f<=a;f++)if(f>=0&&f<this.mapWidth&&h>=0&&h<this.mapHeight){const p=h*this.mapWidth+f,b=e.data[p];this.selection.tiles.push({x:f,y:h,gid:b})}this.selection.active=!0}selectMagicWand(e,n,r){const s=e.data[r*this.mapWidth+n];this.selection.tiles=[];const i=[{x:n,y:r}],l=new Set;for(;i.length>0;){const{x:a,y:c}=i.pop(),u=c*this.mapWidth+a;a<0||a>=this.mapWidth||c<0||c>=this.mapHeight||l.has(u)||e.data[u]===s&&(l.add(u),this.selection.tiles.push({x:a,y:c,gid:s}),i.push({x:a+1,y:c}),i.push({x:a-1,y:c}),i.push({x:a,y:c+1}),i.push({x:a,y:c-1}))}this.selection.active=!0}selectSameTile(e,n,r){const s=e.data[r*this.mapWidth+n];this.selection.tiles=[];for(let i=0;i<this.mapHeight;i++)for(let l=0;l<this.mapWidth;l++){const a=i*this.mapWidth+l;e.data[a]===s&&this.selection.tiles.push({x:l,y:i,gid:s})}this.selection.active=!0}selectCircular(e,n,r,s,i){this.selection.tiles=[];const l=Math.sqrt(Math.pow(s-n,2)+Math.pow(i-r,2));for(let a=0;a<this.mapHeight;a++)for(let c=0;c<this.mapWidth;c++)if(Math.sqrt(Math.pow(c-n,2)+Math.pow(a-r,2))<=l){const h=a*this.mapWidth+c,f=e.data[h];this.selection.tiles.push({x:c,y:a,gid:f})}this.selection.active=!0}drawRectangleShape(e,n,r,s){const i=[],l=Math.min(e,r),a=Math.max(e,r),c=Math.min(n,s),u=Math.max(n,s);for(let h=l;h<=a;h++)for(let f=c;f<=u;f++)(h===l||h===a||f===c||f===u)&&h>=0&&h<this.mapWidth&&f>=0&&f<this.mapHeight&&i.push({x:h,y:f});return i}drawCircleShape(e,n,r,s){const i=[],l=Math.sqrt(Math.pow(r-e,2)+Math.pow(s-n,2));for(let a=0;a<360;a+=1){const c=a*Math.PI/180,u=Math.round(e+l*Math.cos(c)),h=Math.round(n+l*Math.sin(c));u>=0&&u<this.mapWidth&&h>=0&&h<this.mapHeight&&(i.some(f=>f.x===u&&f.y===h)||i.push({x:u,y:h}))}return i}drawLineShape(e,n,r,s){const i=[],l=Math.abs(r-e),a=Math.abs(s-n),c=e<r?1:-1,u=n<s?1:-1;let h=l-a,f=e,p=n,b=!1;for(;!b;){if(f>=0&&f<this.mapWidth&&p>=0&&p<this.mapHeight&&i.push({x:f,y:p}),f===r&&p===s){b=!0;continue}const k=2*h;k>-a&&(h-=a,f+=c),k<l&&(h+=l,p+=u)}return i}setLayerTileset(e,n){const r=new Image;r.onload=()=>{const s=Math.floor(r.width/this.tileSizeX),i=Math.floor(r.height/this.tileSizeY),l=s*i;this.layerTilesets.set(e,{image:r,fileName:n.name,columns:s,rows:i,count:l});const a=this.tileLayers.find(c=>c.id===this.activeLayerId);a&&a.type===e&&this.updateCurrentTileset(e)},r.src=URL.createObjectURL(n)}getCurrentLayerType(){const e=this.tileLayers.find(n=>n.id===this.activeLayerId);return e?e.type:null}hasLayerTileset(e){return this.layerTilesets.has(e)}createLayerTab(e,n){const r=this.layerTabs.get(e)||[],s=this.nextLayerTabId++,i={id:s,name:n||`Tab ${r.length+1}`};return r.push(i),this.layerTabs.set(e,r),this.layerActiveTabId.has(e)||this.layerActiveTabId.set(e,s),s}getLayerTabs(e){return this.layerTabs.get(e)||[]}setActiveLayerTab(e,n){this.layerActiveTabId.set(e,n);const r=this.layerTabs.get(e);if(r){const s=r.find(i=>i.id===n);if(s&&s.tileset&&s.tileset.image){if(this.layerTilesets.set(e,{image:s.tileset.image,fileName:s.tileset.fileName,columns:s.tileset.columns,rows:s.tileset.rows,count:s.tileset.count}),s.detectedTiles){this.detectedTileData.clear();for(const[i,l]of s.detectedTiles.entries())this.detectedTileData.set(i,l)}this.updateCurrentTileset(e)}else this.layerTilesets.delete(e),this.updateCurrentTileset(e)}}importBrushImageToLayerTab(e,n,r){return new Promise((s,i)=>{const l=new Image;l.onload=()=>{const c=(this.layerTabs.get(e)||[]).find(h=>h.id===n);if(!c)return i(new Error("Tab not found"));c.brushes||(c.brushes=[]),c.brushes.push({image:l,fileName:r.name,width:l.width,height:l.height}),c.tileset||(c.tileset={image:l,fileName:r.name,columns:Math.floor(l.width/this.tileSizeX),rows:Math.floor(l.height/this.tileSizeY),count:Math.floor(l.width/this.tileSizeX)*Math.floor(l.height/this.tileSizeY)}),this.layerActiveTabId.get(e)===n&&this.setActiveLayerTab(e,n),s()},l.onerror=a=>i(new Error("Failed to load brush image")),l.src=URL.createObjectURL(r)})}removeLayerTab(e,n){const r=this.layerTabs.get(e)||[],s=r.findIndex(i=>i.id===n);if(console.info(`removeLayerTab called for layer=${e} tabId=${n} (found idx=${s})`),s!==-1){const i=r.splice(s,1);if(console.info("removeLayerTab removed:",i),this.layerTabs.set(e,r),this.layerActiveTabId.get(e)===n)if(r.length>0)try{this.setActiveLayerTab(e,r[0].id)}catch(a){console.warn("setActiveLayerTab failed during removeLayerTab fallback to direct set:",a),this.layerActiveTabId.set(e,r[0].id),this.updateCurrentTileset(e)}else this.layerActiveTabId.delete(e),this.layerTilesets.delete(e),this.updateCurrentTileset(e)}else console.warn(`removeLayerTab: tab id ${n} not found in layer ${e}. Current tabs:`,r.map(i=>i.id))}getActiveLayerTabId(e){return this.layerActiveTabId.get(e)||null}updateCurrentTileset(e){const n=this.layerTilesets.get(e);if(n){this.tilesetImage=n.image,this.tilesetFileName=n.fileName,this.tilesetColumns=n.columns,this.tilesetRows=n.rows,this.tileCount=n.count;const r=this.layerTileData.get(e);if(this.detectedTileData.clear(),r)for(const[i,l]of r.entries())this.detectedTileData.set(i,l);const s=this.layerActiveGid.get(e)||0;this.updateActiveGid(s),this.createTilePalette()}else this.tilesetImage=null,this.tilesetFileName=null,this.tilesetColumns=0,this.tilesetRows=0,this.tileCount=0,this.detectedTileData.clear(),this.updateActiveGid(0),this.clearTilePalette()}clearTilePalette(){const e=document.getElementById("tilesContainer");e&&(e.innerHTML="")}clearLayer(){if(this.activeLayerId!==null){const e=this.tileLayers.find(n=>n.id===this.activeLayerId);e&&e.data.fill(0)}this.draw()}removeLayerTileset(){const e=this.tileLayers.find(n=>n.id===this.activeLayerId);if(e){const n=e.type;this.layerTilesets.delete(n),this.layerTileData.delete(n),this.tilesetImage=null,this.tilesetFileName=null,this.tilesetColumns=0,this.tilesetRows=0,this.tileCount=0,this.detectedTileData.clear(),this.activeGid=0,this.clearTilePalette(),this.draw()}}exportFlareMap(){if(!this.tilesetImage||!this.tilesetFileName){alert("Please load a tileset first before exporting.");return}const e=this.generateFlareMapTxt(),n=this.generateFlareTilesetDef();this.downloadFile(e,"map.txt","text/plain"),this.downloadFile(n,"tileset.txt","text/plain"),console.log("Flare-compatible map exported successfully!"),console.log("📁 Files exported:"),console.log("  • map.txt (place in maps/ folder)"),console.log("  • tileset.txt (place in tilesetdefs/ folder)"),console.log("🎮 Format: Fully compatible with Flare Engine"),this.logGlobalTilesetMapping()}logGlobalTilesetMapping(){console.log("🗺️ Global Tileset Mapping:");const e=[];let n=1;this.tilesetFileName&&(e.push({fileName:this.tilesetFileName,count:this.tileCount,layerType:"main",offset:n}),n+=this.tileCount);const r=new Set;this.tilesetFileName&&r.add(this.tilesetFileName);for(const[s,i]of this.layerTilesets.entries())i.fileName&&!r.has(i.fileName)&&(e.push({fileName:i.fileName,count:i.count,layerType:s,offset:n}),n+=i.count,r.add(i.fileName));for(const s of e){const i=s.offset+s.count-1;console.log(`  ${s.fileName} (${s.layerType}): IDs ${s.offset}-${i} (${s.count} tiles)`)}}autoSaveExport(){if(!this.tilesetImage||!this.tilesetFileName||!this.tileLayers.some(n=>n.data.some(r=>r!==0)))return!1;try{return this.saveToLocalStorage(),!0}catch(n){return console.warn("Auto-save failed:",n),!1}}generateFlareMapTxt(){var u;const e=[];e.push("[header]"),e.push(`width=${this.mapWidth}`),e.push(`height=${this.mapHeight}`),e.push(`tilewidth=${this.tileSizeX}`),e.push(`tileheight=${this.tileSizeY}`),e.push("orientation=isometric"),e.push(`hero_pos=${this.heroX},${this.heroY}`),e.push("music=music/default_theme.ogg"),e.push("tileset=tilesetdefs/tileset.txt"),e.push(`title=${((u=this.tilesetFileName)==null?void 0:u.replace(/\.[^/.]+$/,""))||"Untitled Map"}`),e.push("");const n=[];let r=1;this.tilesetFileName&&(n.push({fileName:this.tilesetFileName,count:this.tileCount,layerType:"main",offset:r}),r+=this.tileCount);const s=new Set;this.tilesetFileName&&s.add(this.tilesetFileName);for(const[h,f]of this.layerTilesets.entries())f.fileName&&!s.has(f.fileName)&&(n.push({fileName:f.fileName,count:f.count,layerType:h,offset:r}),r+=f.count,s.add(f.fileName));const i=new Map;for(const h of n)i.set(h.fileName,h.offset);e.push("[tilesets]");for(const h of n)e.push(`tileset=../images/tilesets/${h.fileName},${this.tileSizeX},${this.tileSizeY},0,0`);e.push("");const l=["background","object","collision"];for(const h of l){const f=this.tileLayers.find(k=>k.type===h&&k.visible);if(!f)continue;e.push("[layer]"),e.push(`type=${f.type}`),e.push("data=");const p=this.layerTilesets.get(h),b=p!=null&&p.fileName&&i.get(p.fileName)||0;for(let k=0;k<this.mapHeight;k++){const j=[];for(let N=0;N<this.mapWidth;N++){const y=k*this.mapWidth+N,g=f.data[y];let x=0;g>0&&(x=b+(g-1)),j.push(x.toString())}e.push(j.join(","))}e.push("")}const a=this.objects.filter(h=>h.type==="event");for(const h of a){e.push("[event]"),e.push(`# ${h.name}`),e.push("type=event"),e.push(`location=${h.x},${h.y},${h.width},${h.height}`),h.activate&&e.push(`activate=${h.activate}`),h.hotspot&&e.push(`hotspot=${h.hotspot}`),h.intermap&&e.push(`intermap=${h.intermap}`),h.loot&&e.push(`loot=${h.loot}`),h.soundfx&&e.push(`soundfx=${h.soundfx}`),h.mapmod&&e.push(`mapmod=${h.mapmod}`),h.repeat!==void 0&&e.push(`repeat=${h.repeat}`),h.tooltip&&e.push(`tooltip=${h.tooltip}`);for(const[f,p]of Object.entries(h.properties))e.push(`${f}=${p}`);e.push("")}const c=this.objects.filter(h=>h.type==="enemy");for(const h of c){e.push("[enemy]"),e.push("type=enemy"),e.push(`location=${h.x},${h.y},${h.width},${h.height}`),h.category&&e.push(`category=${h.category}`),h.level&&e.push(`level=${h.level}`),h.number&&e.push(`number=${h.number}`),h.wander_radius!==void 0&&e.push(`wander_radius=${h.wander_radius}`);for(const[f,p]of Object.entries(h.properties))e.push(`${f}=${p}`);e.push("")}return e.join(`
`)}generateFlareTilesetDef(){const e=[];if(!this.tilesetFileName&&this.layerTilesets.size===0)return`# No tilesets found - please load tilesets before exporting
`;const n=[];let r=1;this.tilesetFileName&&(n.push({fileName:this.tilesetFileName,count:this.tileCount,layerType:"main",offset:r,tileset:{columns:this.tilesetColumns,rows:this.tilesetRows,count:this.tileCount}}),r+=this.tileCount);const s=new Set;this.tilesetFileName&&s.add(this.tilesetFileName);for(const[i,l]of this.layerTilesets.entries())l.fileName&&!s.has(l.fileName)&&(n.push({fileName:l.fileName,count:l.count,layerType:i,offset:r,tileset:l}),r+=l.count,s.add(l.fileName));for(const i of n)e.push(`img=../images/tilesets/${i.fileName}`);e.push("");for(const i of n){const l=i.tileset;for(let a=0;a<i.count;a++){const c=i.offset+a,u=a%l.columns*this.tileSizeX,h=Math.floor(a/l.columns)*this.tileSizeY,f=this.tileSizeX,p=this.tileSizeY,b=Math.floor(this.tileSizeX/2),k=Math.floor(this.tileSizeY/2);e.push(`tile=${c},${u},${h},${f},${p},${b},${k}`)}}return e.join(`
`)}downloadFile(e,n,r){const s=new Blob([e],{type:r}),i=URL.createObjectURL(s),l=document.createElement("a");l.href=i,l.download=n,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i)}saveState(){if(this.isApplyingHistory)return;const e={layers:this.tileLayers.map(n=>({...n,data:[...n.data]})),objects:this.objects.map(n=>({...n}))};this.history=this.history.slice(0,this.historyIndex+1),this.history.push(e),this.historyIndex=this.history.length-1,this.history.length>this.maxHistorySize&&(this.history.shift(),this.historyIndex--),this.markAsChanged(!1)}deepCopyLayers(e){return e.map(n=>({...n,data:[...n.data]}))}deepCopyObjects(e){return e.map(n=>({...n}))}undo(){this.historyIndex>0&&(this.historyIndex--,this.applyHistoryState())}redo(){this.historyIndex<this.history.length-1&&(this.historyIndex++,this.applyHistoryState())}applyHistoryState(){if(this.historyIndex>=0&&this.historyIndex<this.history.length){this.isApplyingHistory=!0;const e=this.history[this.historyIndex];this.tileLayers=this.deepCopyLayers(e.layers),this.objects=this.deepCopyObjects(e.objects),this.notifyObjectsChanged(),this.draw(),this.isApplyingHistory=!1}}setAutoSaveCallback(e){this.autoSaveCallback=e}setSaveStatusCallback(e){this.saveStatusCallback=e}setAutoSaveEnabled(e){this.autoSaveEnabled=e,!e&&this.autoSaveTimeout&&(clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=null)}setDarkMode(e){this.isDarkMode=e,this.draw()}markAsChanged(e=!1){if(!this.autoSaveEnabled)return;this.hasUnsavedChanges=!0,this.updateSaveStatus("unsaved"),this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout);const n=e?this.IMMEDIATE_SAVE_DELAY:this.AUTO_SAVE_DELAY;this.autoSaveTimeout=window.setTimeout(()=>{this.performAutoSave()},n)}async performAutoSave(){if(this.hasUnsavedChanges)try{this.updateSaveStatus("saving"),this.autoSaveExport()?(this.autoSaveCallback&&await this.autoSaveCallback(),this.hasUnsavedChanges=!1,this.lastSaveTimestamp=Date.now(),this.updateSaveStatus("saved")):this.updateSaveStatus("saved"),this.autoSaveTimeout=null}catch(e){console.error("Auto-save failed:",e),this.updateSaveStatus("error"),this.autoSaveTimeout=window.setTimeout(()=>{this.performAutoSave()},15e3)}}saveToLocalStorage(){try{const e={timestamp:Date.now(),mapWidth:this.mapWidth,mapHeight:this.mapHeight,layers:this.tileLayers,objects:this.objects,heroX:this.heroX,heroY:this.heroY,tilesetFileName:this.tilesetFileName,tilesetImage:this.tilesetImage?this.canvasToDataURL(this.tilesetImage):null,tileSizeX:this.tileSizeX,tileSizeY:this.tileSizeY,detectedTileData:Array.from(this.detectedTileData.entries()),tileContentThreshold:this.tileContentThreshold,objectSeparationSensitivity:this.objectSeparationSensitivity};localStorage.setItem("tilemap_autosave_backup",JSON.stringify(e))}catch(e){console.warn("Failed to save to localStorage:",e)}}canvasToDataURL(e){const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");return r?(r.drawImage(e,0,0),n.toDataURL("image/png")):""}generateMinimapDataUrl(){try{const r=Math.max(1,Math.floor(Math.min(160/Math.max(1,this.mapWidth),120/Math.max(1,this.mapHeight)))),s=this.mapWidth*r,i=this.mapHeight*r,l=document.createElement("canvas");l.width=s,l.height=i;const a=l.getContext("2d");if(!a)return"";a.imageSmoothingEnabled=!1,a.fillStyle="#ffffff",a.fillRect(0,0,s,i);for(let c=0;c<this.tileLayers.length;c++){const u=this.tileLayers[c];if(u.visible)for(let h=0;h<this.mapHeight;h++)for(let f=0;f<this.mapWidth;f++){const p=h*this.mapWidth+f,b=u.data[p];if(b>0){const k=b*137.5%360;a.fillStyle=`hsl(${k},55%,${c===0?"45%":"60%"})`,a.fillRect(f*r,h*r,r,r)}}}return l.toDataURL("image/png")}catch(e){return console.warn("generateMinimapDataUrl failed",e),""}}loadFromLocalStorage(){try{const e=localStorage.getItem("tilemap_autosave_backup");if(!e)return!1;const n=JSON.parse(e);if(Date.now()-n.timestamp>24*60*60*1e3)return!1;this.mapWidth=n.mapWidth,this.mapHeight=n.mapHeight,this.tileLayers=n.layers;const s=this.normalizeLoadedObjects(n.objects);if(this.objects=s,this.nextObjectId=this.calculateNextObjectId(s),this.notifyObjectsChanged(),this.tilesetFileName=n.tilesetFileName,n.heroX!==void 0&&n.heroY!==void 0?(this.heroX=Math.max(0,Math.min(n.heroX,this.mapWidth-1)),this.heroY=Math.max(0,Math.min(n.heroY,this.mapHeight-1))):(this.heroX=0,this.heroY=0),n.tileContentThreshold!==void 0&&(this.tileContentThreshold=n.tileContentThreshold),n.objectSeparationSensitivity!==void 0&&(this.objectSeparationSensitivity=n.objectSeparationSensitivity),n.detectedTileData){this.detectedTileData.clear();for(const[i,l]of n.detectedTileData)this.detectedTileData.set(i,l)}if(n.tilesetImage){const i=new Image;i.onload=()=>{this.tilesetImage=i,this.tilesetColumns=Math.floor(i.width/this.tileSizeX),this.tilesetRows=Math.floor(i.height/this.tileSizeY),this.tileCount=this.tilesetColumns*this.tilesetRows,n.detectedTileData&&n.detectedTileData.length>0?this.createTilePalette(!0):this.createTilePalette(),this.updateActiveTile(),this.draw()},i.src=n.tilesetImage}return this.draw(),!0}catch(e){return console.error("Failed to load from localStorage:",e),!1}}clearLocalStorageBackup(){localStorage.removeItem("tilemap_autosave_backup")}async saveProjectData(e){var n,r;try{console.log("=== SAVE PROJECT DATA DEBUG ==="),console.log("Project path:",e),console.log("Number of layer tilesets:",this.layerTilesets.size);const s={},i=[];console.log("=== SAVING LAYER TILESETS ===");for(const[a,c]of this.layerTilesets.entries())if(c.image&&c.fileName){console.log(`Saving tileset for layer ${a}: ${c.fileName}`);const u=this.canvasToDataURL(c.image);s[c.fileName]=u,i.push({layerType:a,fileName:c.fileName,name:c.fileName.replace(/\.[^/.]+$/,""),columns:c.columns,rows:c.rows,count:c.count,detectedTiles:this.getDetectedTilesForLayer(a)}),console.log(`Saved tileset: ${c.fileName} (${u.length} bytes)`)}else console.log(`No tileset image for layer ${a}`);if(this.layerTilesets.size===0&&this.tilesetImage&&this.tilesetFileName){console.log("Saving legacy tileset:",this.tilesetFileName);const a=this.canvasToDataURL(this.tilesetImage);s[this.tilesetFileName]=a,i.push({fileName:this.tilesetFileName,name:this.tilesetFileName.replace(/\.[^/.]+$/,""),detectedTiles:Array.from(this.detectedTileData.entries())})}const l={name:((n=this.tilesetFileName)==null?void 0:n.replace(/\.[^/.]+$/,""))||"Untitled Map",width:this.mapWidth,height:this.mapHeight,tileSize:64,layers:this.tileLayers,objects:this.objects,heroX:this.heroX,heroY:this.heroY,tilesets:i,tilesetImages:s,minimap:this.generateMinimapDataUrl(),version:"1.0",tileContentThreshold:this.tileContentThreshold,objectSeparationSensitivity:this.objectSeparationSensitivity};if(console.log("Project data prepared:",{name:l.name,tilesetCount:Object.keys(l.tilesetImages).length,layerCount:l.layers.length,layerTilesetCount:i.length}),(r=window.electronAPI)!=null&&r.saveMapProject){console.log("Saving via Electron API...");const a=await window.electronAPI.saveMapProject(e,l);return console.log("Electron save result:",a),a}else return console.log("Falling back to localStorage save..."),this.saveToLocalStorage(),!0}catch(s){return console.error("Error saving project data:",s),!1}}updateSaveStatus(e){this.saveStatusCallback&&this.saveStatusCallback(e)}getUnsavedChanges(){return this.hasUnsavedChanges}getLastSaveTime(){return this.lastSaveTimestamp}forceSave(){this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout),this.performAutoSave()}notifyObjectsChanged(){this.objectsChangedCallback&&this.objectsChangedCallback(this.getMapObjects())}calculateNextObjectId(e){return e.length?e.reduce((n,r)=>Math.max(n,typeof r.id=="number"?r.id:0),0)+1:1}normalizeLoadedObjects(e){return Array.isArray(e)?e.map((n,r)=>{const s={...n,id:typeof n.id=="number"&&!Number.isNaN(n.id)?n.id:r+1,width:typeof n.width=="number"&&n.width>0?n.width:1,height:typeof n.height=="number"&&n.height>0?n.height:1,properties:n.properties||{}};return s.category==="npc"||s.type==="npc"?(s.category="npc",s.type="npc",s.wander_radius=0):(s.category==="enemy"||s.category==="creature"||s.type==="enemy")&&(s.type="enemy",s.category=s.category||"enemy"),s}):[]}addMapObject(e,n,r,s=1,i=1){const l={id:this.nextObjectId++,name:`${e}_${this.nextObjectId-1}`,type:e,x:n,y:r,width:s,height:i,properties:{}};return e==="event"?(l.activate="on_trigger",l.hotspot="location",l.tooltip="Event"):e==="enemy"&&(l.category="enemy",l.level=1,l.number=1,l.wander_radius=4),this.objects.push(l),this.saveState(),this.notifyObjectsChanged(),l}removeMapObject(e){var r;const n=this.objects.findIndex(s=>s.id===e);return n>=0?(this.objects.splice(n,1),((r=this.selectedObject)==null?void 0:r.id)===e&&(this.selectedObject=null),this.saveState(),this.notifyObjectsChanged(),!0):!1}updateMapObject(e,n){const r=this.objects.find(s=>s.id===e);return r?(Object.assign(r,n),this.saveState(),this.notifyObjectsChanged(),!0):!1}getMapObjects(){return[...this.objects]}getObjectsAtPosition(e,n){return this.objects.filter(r=>r.x===e&&r.y===n)}isHeroAtPosition(e,n){return this.heroX===e&&this.heroY===n}setHeroPosition(e,n){this.heroX=Math.max(0,Math.min(e,this.mapWidth-1)),this.heroY=Math.max(0,Math.min(n,this.mapHeight-1)),this.saveState(),this.draw()}getHeroPosition(){return{x:this.heroX,y:this.heroY}}updateCursorForHover(){if(this.isHeroAtPosition(this.hoverX,this.hoverY)){this.mapCanvas.style.cursor="move",this.showHeroTooltip();return}const e=this.getDraggableActorAt(this.hoverX,this.hoverY);if(e){const s=this.getActorLayerType(e);if(s){this.mapCanvas.style.cursor="move",this.showActorTooltip(e,s);return}}const n=this.getActiveLayer();if(n&&["enemy","npc","object","event","background"].includes(n.type)){const s=this.getObjectsAtPosition(this.hoverX,this.hoverY);if(s.length>0){this.mapCanvas.style.cursor="pointer",this.showObjectTooltip(s[0]);return}}this.spacePressed?this.mapCanvas.style.cursor=this.isPanning?"grabbing":"grab":this.mapCanvas.style.cursor="crosshair",this.hideObjectTooltip()}showObjectTooltip(e){let n=document.getElementById("object-tooltip");n||(n=document.createElement("div"),n.id="object-tooltip",n.style.position="absolute",n.style.background="rgba(0, 0, 0, 0.35)",n.style.color="white",n.style.padding="4px 6px",n.style.borderRadius="3px",n.style.fontSize="11px",n.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',n.style.lineHeight="1.2",n.style.pointerEvents="none",n.style.zIndex="1000",n.style.border="1px solid rgba(255, 107, 0, 0.8)",n.style.boxShadow="0 1px 4px rgba(0,0,0,0.3)",n.style.backdropFilter="blur(2px)",document.body.appendChild(n));const r=`
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
        <rect x="5" y="2" width="14" height="20" rx="7"/>
        <path d="M12 6v4"/>
      </svg>
    `,s=e.type==="enemy"?e.category||"enemy":e.type;n.innerHTML=`
      <div style="font-weight: bold; margin-bottom: 2px; color: #ff6b00; font-size: 10px;">
        ${r}Double click to edit
      </div>
      <div style="font-weight: bold; margin-bottom: 1px;">${e.name||"Unnamed"}</div>
      <div style="font-size: 10px; color: rgba(255,255,255,0.9);">Type: ${s}</div>
    `;const i=this.mapCanvas.getBoundingClientRect(),l=this.mapToScreen(this.hoverX,this.hoverY);n.style.left=`${i.left+l.x+20}px`,n.style.top=`${i.top+l.y-10}px`,n.style.display="block"}showActorTooltip(e,n){let r=document.getElementById("object-tooltip");r||(r=document.createElement("div"),r.id="object-tooltip",r.style.position="absolute",r.style.background="rgba(0, 0, 0, 0.35)",r.style.color="white",r.style.padding="4px 6px",r.style.borderRadius="3px",r.style.fontSize="11px",r.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',r.style.lineHeight="1.2",r.style.pointerEvents="none",r.style.zIndex="1000",r.style.border="1px solid rgba(255, 107, 0, 0.8)",r.style.boxShadow="0 1px 4px rgba(0,0,0,0.3)",r.style.backdropFilter="blur(2px)",document.body.appendChild(r));const s=`
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
        <rect x="5" y="2" width="14" height="20" rx="7"/>
        <path d="M12 6v4"/>
      </svg>
    `,i=n==="npc"?"NPC":"Enemy",l=e.name||i;r.innerHTML=`
      <div style="font-weight: bold; margin-bottom: 2px; color: #ff6b00; font-size: 10px;">
        ${s}Drag to move
      </div>
      <div style="font-weight: bold; margin-bottom: 1px;">${l}</div>
      <div style="font-size: 10px; color: rgba(255,255,255,0.9);">Type: ${i}</div>
      <div style="font-size: 10px; color: rgba(255,255,255,0.9);">Double click to edit</div>
    `;const a=this.mapCanvas.getBoundingClientRect(),c=this.mapToScreen(this.hoverX,this.hoverY);r.style.left=`${a.left+c.x+20}px`,r.style.top=`${a.top+c.y-10}px`,r.style.display="block"}hideObjectTooltip(){const e=document.getElementById("object-tooltip");e&&(e.style.display="none")}showHeroTooltip(){let e=document.getElementById("object-tooltip");e||(e=document.createElement("div"),e.id="object-tooltip",e.style.position="absolute",e.style.background="rgba(0, 0, 0, 0.35)",e.style.color="white",e.style.padding="4px 6px",e.style.borderRadius="3px",e.style.fontSize="11px",e.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',e.style.lineHeight="1.2",e.style.pointerEvents="none",e.style.zIndex="1000",e.style.border="1px solid rgba(255, 107, 0, 0.8)",e.style.boxShadow="0 1px 4px rgba(0,0,0,0.3)",e.style.backdropFilter="blur(2px)",document.body.appendChild(e));const n=`
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
        <rect x="5" y="2" width="14" height="20" rx="7"/>
        <path d="M12 6v4"/>
      </svg>
    `;e.innerHTML=`
      <div style="font-weight: bold; margin-bottom: 2px; color: #ff6b00; font-size: 10px;">
        ${n}Double click to edit or drag to move
      </div>
      <div style="font-weight: bold; margin-bottom: 1px;">Hero Position</div>
      <div style="font-size: 10px; color: rgba(255,255,255,0.9);">Position: (${this.heroX}, ${this.heroY})</div>
    `;const r=this.mapCanvas.getBoundingClientRect(),s=this.mapToScreen(this.hoverX,this.hoverY);e.style.left=`${r.left+s.x+20}px`,e.style.top=`${r.top+s.y-10}px`,e.style.display="block"}createObjectFromTile(e,n,r,s){console.log(`Creating object from tile at (${e}, ${n}) for layer type: ${r}`);const i=this.objects.find(u=>u.x===e&&u.y===n);if(i){console.log(`Found existing object at (${e}, ${n}), updating instead of creating new one`);const u={name:`${r}_${e}_${n}`,type:r==="npc"?"npc":r};this.updateMapObject(i.id,u);return}let l;if(r==="event")l="event";else if(r==="enemy"||r==="npc"||r==="object")l="enemy";else{console.log(`Unsupported layer type: ${r}`);return}console.log(`Creating new ${l} object at (${e}, ${n})`);const a=this.addMapObject(l,e,n,1,1);console.log(`Created object with ID: ${a.id}`);const c={name:`${r}_${e}_${n}`,category:l==="event"?"block":r==="npc"?"npc":r==="object"?"object":"creature"};r==="npc"?c.type="npc":r==="enemy"&&(c.type="enemy"),l==="enemy"?(c.level=1,c.number=1,c.wander_radius=r==="npc"||r==="object"?0:4):(c.activate="on_trigger",c.hotspot="0,0,1,1"),this.updateMapObject(a.id,c)}removeObjectAtPosition(e,n){const r=this.objects.find(s=>s.x===e&&s.y===n);r&&this.removeMapObject(r.id)}selectObject(e){const n=this.objects.find(r=>r.id===e);return this.selectedObject=n||null,this.selectedObject}getSelectedObject(){return this.selectedObject}resetForNewProject(){this.clearLocalStorageBackup(),this.tilesetImage=null,this.tilesetFileName=null,this.tilesetColumns=0,this.tilesetRows=0,this.tileCount=0,this.detectedTileData.clear(),this.clearTilePalette(),this.tileLayers=[],this.activeLayerId=null,this.nextLayerId=1,this.objects=[],this.nextObjectId=1,this.selectedObjectId=null,this.notifyObjectsChanged(),this.heroX=0,this.heroY=0,this.isDraggingHero=!1,this.layerTilesets.clear(),this.tilesets=[],this.collisionData=[],this.selection={active:!1,startX:-1,startY:-1,endX:-1,endY:-1,tiles:[]},this.isSelecting=!1,this.shapeDrawing={active:!1,startX:-1,startY:-1,endX:-1,endY:-1,preview:[]},this.isDrawingShape=!1,this.stamps.clear(),this.activeStamp=null,this.stampPreview={x:0,y:0,visible:!1},this.hasUnsavedChanges=!1,this.lastSaveTimestamp=0,this.autoSaveTimeout&&(clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=null),this.createDefaultLayers(),this.history=[],this.historyIndex=-1,this.saveState(),this.ctx.clearRect(0,0,this.mapCanvas.width,this.mapCanvas.height),this.draw()}loadProjectData(e){try{if(console.log("=== LOADING PROJECT DATA IN EDITOR ==="),console.log("Project data:",{hasLayers:!!(e.layers&&e.layers.length>0),layerCount:e.layers?e.layers.length:0,hasObjects:!!(e.objects&&e.objects.length>0),objectCount:e.objects?e.objects.length:0,width:e.width,height:e.height,hasTilesets:!!(e.tilesets&&e.tilesets.length>0),tilesetCount:e.tilesets?e.tilesets.length:0}),e.tileContentThreshold!==void 0&&(this.tileContentThreshold=e.tileContentThreshold),e.objectSeparationSensitivity!==void 0&&(this.objectSeparationSensitivity=e.objectSeparationSensitivity),this.layerTilesets.clear(),e.tilesets&&Array.isArray(e.tilesets)){console.log("Loading tilesets:",e.tilesets.length);let r=0;const s=e.tilesets.length;for(const i of e.tilesets)if(i.fileName&&e.tilesetImages&&e.tilesetImages[i.fileName]){const l=e.tilesetImages[i.fileName],a=new Image;a.onload=()=>{console.log(`Tileset ${i.fileName} loaded for layer: ${i.layerType||"legacy"}`);const c={image:a,fileName:i.fileName,columns:i.columns||Math.floor(a.width/this.tileSizeX),rows:i.rows||Math.floor(a.height/this.tileSizeY),count:i.count||(i.columns||Math.floor(a.width/this.tileSizeX))*(i.rows||Math.floor(a.height/this.tileSizeY))};if(i.layerType)this.layerTilesets.set(i.layerType,c),console.log(`Set tileset for layer type ${i.layerType}`);else{this.tilesetImage=a,this.tilesetFileName=i.fileName,this.tilesetColumns=c.columns,this.tilesetRows=c.rows,this.tileCount=c.count;const u=this.tileLayers.find(h=>h.id===this.activeLayerId);u&&!this.layerTilesets.has(u.type)&&(this.layerTilesets.set(u.type,c),console.log(`Assigned legacy tileset to active layer: ${u.type}`))}if(i.detectedTiles&&Array.isArray(i.detectedTiles))if(console.log(`Restoring ${i.detectedTiles.length} detected tiles for ${i.layerType||"legacy"}`),i.layerType){const u=new Map;for(const[h,f]of i.detectedTiles)u.set(h,f);this.layerTileData.set(i.layerType,u),console.log(`Stored ${u.size} tiles for layer type: ${i.layerType}`)}else{this.detectedTileData.clear();for(const[h,f]of i.detectedTiles)this.detectedTileData.set(h,f);const u=this.tileLayers.find(h=>h.id===this.activeLayerId);if(u){const h=new Map;for(const[f,p]of i.detectedTiles)h.set(f,p);this.layerTileData.set(u.type,h)}}if(r++,r===s){console.log("All tilesets loaded, updating UI for active layer");const u=this.tileLayers.find(h=>h.id===this.activeLayerId);u&&this.updateCurrentTileset(u.type)}},a.src=l}else if(r++,r===s){console.log("All tilesets processed, updating UI for active layer");const l=this.tileLayers.find(a=>a.id===this.activeLayerId);l&&this.updateCurrentTileset(l.type)}}if(e.detectedTileData&&Array.isArray(e.detectedTileData)){this.detectedTileData.clear();for(const[r,s]of e.detectedTileData)this.detectedTileData.set(r,s)}e.layers&&e.layers.length>0?(console.log("Loading layers:",e.layers.length),this.tileLayers=[...e.layers],this.tileLayers.length>0&&(!this.activeLayerId||!this.tileLayers.find(r=>r.id===this.activeLayerId))&&(this.activeLayerId=this.tileLayers[0].id,console.log("Set active layer to:",this.activeLayerId))):(console.log("No layers found in project data, creating default layers"),this.createDefaultLayers());const n=this.normalizeLoadedObjects(e.objects);console.log("Loading objects:",n.length),this.objects=n,this.nextObjectId=this.calculateNextObjectId(n),this.notifyObjectsChanged(),e.width&&e.height&&(console.log("Setting map dimensions:",e.width,"x",e.height),this.mapWidth=e.width,this.mapHeight=e.height),e.heroX!==void 0&&e.heroY!==void 0?(console.log("Loading hero position:",e.heroX,",",e.heroY),this.heroX=Math.max(0,Math.min(e.heroX,this.mapWidth-1)),this.heroY=Math.max(0,Math.min(e.heroY,this.mapHeight-1))):(console.log("No hero position found, defaulting to (0,0)"),this.heroX=0,this.heroY=0),console.log("Project data loaded successfully"),this.draw()}catch(n){console.error("Error loading project data:",n)}}async loadTilesetFromDataURL(e,n){return new Promise((r,s)=>{console.log("Loading tileset from dataURL:",n,"Length:",e.length);const i=new Image;i.onload=()=>{console.log("Tileset image loaded successfully:",i.width,"x",i.height),this.tilesetImage=i,this.tilesetFileName=n,this.tilesetColumns=Math.floor(i.width/this.tileSizeX),this.tilesetRows=Math.floor(i.height/this.tileSizeY),this.tileCount=this.tilesetColumns*this.tilesetRows,console.log("Tileset properties:",{columns:this.tilesetColumns,rows:this.tilesetRows,tileCount:this.tileCount});const l=this.tileLayers.find(c=>c.id===this.activeLayerId);if(l){console.log("Setting tileset for active layer type:",l.type),this.layerTilesets.set(l.type,{image:i,fileName:n,columns:this.tilesetColumns,rows:this.tilesetRows,count:this.tileCount});const c=this.layerTileData.has(l.type);if(console.log(`Layer ${l.type} has existing tile data:`,c),!c)this.detectedTileData.clear();else{const u=this.layerTileData.get(l.type);if(this.detectedTileData.clear(),u)for(const[h,f]of u.entries())this.detectedTileData.set(h,f)}}else console.log("No active layer found, storing as global tileset");const a=l?this.layerTileData.has(l.type):!1;this.createTilePalette(a),console.log("Tile detection completed, detected tiles:",this.detectedTileData.size),this.draw(),console.log("Tileset loaded and palette created"),r()},i.onerror=l=>{console.error("Failed to load tileset image:",l),s(new Error("Failed to load tileset from data URL"))},i.src=e})}debugLayerData(){console.log("=== LAYER DATA DEBUG ===");for(const e of this.tileLayers){const n=e.data.filter(s=>s>0).length,r=this.layerTilesets.get(e.type);console.log(`Layer ${e.name} (${e.type}): ${n} painted tiles, has tileset: ${!!(r!=null&&r.image)}`)}}redraw(){this.draw()}getMapWidth(){return this.mapWidth}getMapHeight(){return this.mapHeight}updateCanvas(e){console.log("TileMapEditor: Updating canvas reference and rebinding events"),this.cleanupCanvasObservers(),this.cleanupCanvasEvents(),this.mapCanvas=e,this.initializeCanvas(),this.bindEvents(),this.refreshTilePalette(!0),this.draw(),console.log("TileMapEditor: Canvas update complete - events rebound")}}const Hw=1,Bw=1e6;let xa=0;function Ww(){return xa=(xa+1)%Number.MAX_SAFE_INTEGER,xa.toString()}const ya=new Map,zh=t=>{if(ya.has(t))return;const e=setTimeout(()=>{ya.delete(t),Fs({type:"REMOVE_TOAST",toastId:t})},Bw);ya.set(t,e)},Yw=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Hw)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?zh(n):t.toasts.forEach(r=>{zh(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},yo=[];let vo={toasts:[]};function Fs(t){vo=Yw(vo,t),yo.forEach(e=>{e(vo)})}function Uw({...t}){const e=Ww(),n=s=>Fs({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Fs({type:"DISMISS_TOAST",toastId:e});return Fs({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function cp(){const[t,e]=m.useState(vo);return m.useEffect(()=>(yo.push(e),()=>{const n=yo.indexOf(e);n>-1&&yo.splice(n,1)}),[t]),{...t,toast:Uw,dismiss:n=>Fs({type:"DISMISS_TOAST",toastId:n})}}function ot(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function up(t,e=[]){let n=[];function r(i,l){const a=m.createContext(l),c=n.length;n=[...n,l];const u=f=>{var y;const{scope:p,children:b,...k}=f,j=((y=p==null?void 0:p[t])==null?void 0:y[c])||a,N=m.useMemo(()=>k,Object.values(k));return o.jsx(j.Provider,{value:N,children:b})};u.displayName=i+"Provider";function h(f,p){var j;const b=((j=p==null?void 0:p[t])==null?void 0:j[c])||a,k=m.useContext(b);if(k)return k;if(l!==void 0)return l;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(l=>m.createContext(l));return function(a){const c=(a==null?void 0:a[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return s.scopeName=t,[r,Xw(s,...e)]}function Xw(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const l=r.reduce((a,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...a,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return n.scopeName=e.scopeName,n}function Vw(t){const e=t+"CollectionProvider",[n,r]=up(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),l=j=>{const{scope:N,children:y}=j,g=me.useRef(null),x=me.useRef(new Map).current;return o.jsx(s,{scope:N,itemMap:x,collectionRef:g,children:y})};l.displayName=e;const a=t+"CollectionSlot",c=Yo(a),u=me.forwardRef((j,N)=>{const{scope:y,children:g}=j,x=i(a,y),w=Vn(N,x.collectionRef);return o.jsx(c,{ref:w,children:g})});u.displayName=a;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=Yo(h),b=me.forwardRef((j,N)=>{const{scope:y,children:g,...x}=j,w=me.useRef(null),C=Vn(N,w),M=i(h,y);return me.useEffect(()=>(M.itemMap.set(w,{ref:w,...x}),()=>void M.itemMap.delete(w))),o.jsx(p,{[f]:"",ref:C,children:g})});b.displayName=h;function k(j){const N=i(t+"CollectionConsumer",j);return me.useCallback(()=>{const g=N.collectionRef.current;if(!g)return[];const x=Array.from(g.querySelectorAll(`[${f}]`));return Array.from(N.itemMap.values()).sort((M,P)=>x.indexOf(M.ref.current)-x.indexOf(P.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:l,Slot:u,ItemSlot:b},k,r]}var Gw=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dt=Gw.reduce((t,e)=>{const n=Yo(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:l,...a}=s,c=l?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function dp(t,e){t&&Xn.flushSync(()=>t.dispatchEvent(e))}function Gn(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function qw(t,e=globalThis==null?void 0:globalThis.document){const n=Gn(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Kw="DismissableLayer",xc="dismissableLayer.update",Qw="dismissableLayer.pointerDownOutside",Zw="dismissableLayer.focusOutside",Dh,hp=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fp=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:l,onDismiss:a,...c}=t,u=m.useContext(hp),[h,f]=m.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=m.useState({}),k=Vn(e,P=>f(P)),j=Array.from(u.layers),[N]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=j.indexOf(N),g=h?j.indexOf(h):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,w=g>=y,C=e1(P=>{const E=P.target,O=[...u.branches].some(z=>z.contains(E));!w||O||(s==null||s(P),l==null||l(P),P.defaultPrevented||a==null||a())},p),M=t1(P=>{const E=P.target;[...u.branches].some(z=>z.contains(E))||(i==null||i(P),l==null||l(P),P.defaultPrevented||a==null||a())},p);return qw(P=>{g===u.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},p),m.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Dh=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),Rh(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Dh)}},[h,p,n,u]),m.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),Rh())},[h,u]),m.useEffect(()=>{const P=()=>b({});return document.addEventListener(xc,P),()=>document.removeEventListener(xc,P)},[]),o.jsx(Dt.div,{...c,ref:k,style:{pointerEvents:x?w?"auto":"none":void 0,...t.style},onFocusCapture:ot(t.onFocusCapture,M.onFocusCapture),onBlurCapture:ot(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:ot(t.onPointerDownCapture,C.onPointerDownCapture)})});fp.displayName=Kw;var Jw="DismissableLayerBranch",mp=m.forwardRef((t,e)=>{const n=m.useContext(hp),r=m.useRef(null),s=Vn(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(Dt.div,{...t,ref:s})});mp.displayName=Jw;function e1(t,e=globalThis==null?void 0:globalThis.document){const n=Gn(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){pp(Qw,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function t1(t,e=globalThis==null?void 0:globalThis.document){const n=Gn(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&pp(Zw,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Rh(){const t=new CustomEvent(xc);document.dispatchEvent(t)}function pp(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?dp(s,i):s.dispatchEvent(i)}var n1=fp,r1=mp,si=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},s1="Portal",gp=m.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=m.useState(!1);si(()=>i(!0),[]);const l=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return l?Tv.createPortal(o.jsx(Dt.div,{...r,ref:e}),l):null});gp.displayName=s1;function i1(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var xp=t=>{const{present:e,children:n}=t,r=o1(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Vn(r.ref,l1(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};xp.displayName="Presence";function o1(t){const[e,n]=m.useState(),r=m.useRef(null),s=m.useRef(t),i=m.useRef("none"),l=t?"mounted":"unmounted",[a,c]=i1(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=to(r.current);i.current=a==="mounted"?u:"none"},[a]),si(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,b=to(u);t?c("MOUNT"):b==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),si(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=b=>{const j=to(r.current).includes(CSS.escape(b.animationName));if(b.target===e&&j&&(c("ANIMATION_END"),!s.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},p=b=>{b.target===e&&(i.current=to(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:m.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function to(t){return(t==null?void 0:t.animationName)||"none"}function l1(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var a1=gx[" useInsertionEffect ".trim().toString()]||si;function c1({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,l]=u1({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:s;{const h=m.useRef(t!==void 0);m.useEffect(()=>{const f=h.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=a},[a,r])}const u=m.useCallback(h=>{var f;if(a){const p=d1(h)?h(t):h;p!==t&&((f=l.current)==null||f.call(l,p))}else i(h)},[a,t,i,l]);return[c,u]}function u1({defaultProp:t,onChange:e}){const[n,r]=m.useState(t),s=m.useRef(n),i=m.useRef(e);return a1(()=>{i.current=e},[e]),m.useEffect(()=>{var l;s.current!==n&&((l=i.current)==null||l.call(i,n),s.current=n)},[n,s]),[n,r,i]}function d1(t){return typeof t=="function"}var h1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),f1="VisuallyHidden",gu=m.forwardRef((t,e)=>o.jsx(Dt.span,{...t,ref:e,style:{...h1,...t.style}}));gu.displayName=f1;var xu="ToastProvider",[yu,m1,p1]=Vw("Toast"),[yp,U1]=up("Toast",[p1]),[g1,ll]=yp(xu),vp=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:l}=t,[a,c]=m.useState(null),[u,h]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${xu}\`. Expected non-empty \`string\`.`),o.jsx(yu.Provider,{scope:e,children:o.jsx(g1,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:m.useCallback(()=>h(b=>b+1),[]),onToastRemove:m.useCallback(()=>h(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:l})})};vp.displayName=xu;var wp="ToastViewport",x1=["F8"],yc="toast.viewportPause",vc="toast.viewportResume",bp=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=x1,label:s="Notifications ({hotkey})",...i}=t,l=ll(wp,n),a=m1(n),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),p=Vn(e,f,l.onViewportChange),b=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),k=l.toastCount>0;m.useEffect(()=>{const N=y=>{var x;r.length!==0&&r.every(w=>y[w]||y.code===w)&&((x=f.current)==null||x.focus())};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[r]),m.useEffect(()=>{const N=c.current,y=f.current;if(k&&N&&y){const g=()=>{if(!l.isClosePausedRef.current){const M=new CustomEvent(yc);y.dispatchEvent(M),l.isClosePausedRef.current=!0}},x=()=>{if(l.isClosePausedRef.current){const M=new CustomEvent(vc);y.dispatchEvent(M),l.isClosePausedRef.current=!1}},w=M=>{!N.contains(M.relatedTarget)&&x()},C=()=>{N.contains(document.activeElement)||x()};return N.addEventListener("focusin",g),N.addEventListener("focusout",w),N.addEventListener("pointermove",g),N.addEventListener("pointerleave",C),window.addEventListener("blur",g),window.addEventListener("focus",x),()=>{N.removeEventListener("focusin",g),N.removeEventListener("focusout",w),N.removeEventListener("pointermove",g),N.removeEventListener("pointerleave",C),window.removeEventListener("blur",g),window.removeEventListener("focus",x)}}},[k,l.isClosePausedRef]);const j=m.useCallback(({tabbingDirection:N})=>{const g=a().map(x=>{const w=x.ref.current,C=[w,...P1(w)];return N==="forwards"?C:C.reverse()});return(N==="forwards"?g.reverse():g).flat()},[a]);return m.useEffect(()=>{const N=f.current;if(N){const y=g=>{var C,M,P;const x=g.altKey||g.ctrlKey||g.metaKey;if(g.key==="Tab"&&!x){const E=document.activeElement,O=g.shiftKey;if(g.target===N&&O){(C=u.current)==null||C.focus();return}const G=j({tabbingDirection:O?"backwards":"forwards"}),re=G.findIndex(U=>U===E);va(G.slice(re+1))?g.preventDefault():O?(M=u.current)==null||M.focus():(P=h.current)==null||P.focus()}};return N.addEventListener("keydown",y),()=>N.removeEventListener("keydown",y)}},[a,j]),o.jsxs(r1,{ref:c,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:k?void 0:"none"},children:[k&&o.jsx(wc,{ref:u,onFocusFromOutsideViewport:()=>{const N=j({tabbingDirection:"forwards"});va(N)}}),o.jsx(yu.Slot,{scope:n,children:o.jsx(Dt.ol,{tabIndex:-1,...i,ref:p})}),k&&o.jsx(wc,{ref:h,onFocusFromOutsideViewport:()=>{const N=j({tabbingDirection:"backwards"});va(N)}})]})});bp.displayName=wp;var kp="ToastFocusProxy",wc=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=ll(kp,n);return o.jsx(gu,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:l=>{var u;const a=l.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&r()}})});wc.displayName=kp;var ui="Toast",y1="toast.swipeStart",v1="toast.swipeMove",w1="toast.swipeCancel",b1="toast.swipeEnd",jp=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...l}=t,[a,c]=c1({prop:r,defaultProp:s??!0,onChange:i,caller:ui});return o.jsx(xp,{present:n||a,children:o.jsx(S1,{open:a,...l,ref:e,onClose:()=>c(!1),onPause:Gn(t.onPause),onResume:Gn(t.onResume),onSwipeStart:ot(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ot(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ot(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ot(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});jp.displayName=ui;var[k1,j1]=yp(ui,{onClose(){}}),S1=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:l,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:b,...k}=t,j=ll(ui,n),[N,y]=m.useState(null),g=Vn(e,U=>y(U)),x=m.useRef(null),w=m.useRef(null),C=s||j.duration,M=m.useRef(0),P=m.useRef(C),E=m.useRef(0),{onToastAdd:O,onToastRemove:z}=j,V=Gn(()=>{var ie;(N==null?void 0:N.contains(document.activeElement))&&((ie=j.viewport)==null||ie.focus()),l()}),G=m.useCallback(U=>{!U||U===1/0||(window.clearTimeout(E.current),M.current=new Date().getTime(),E.current=window.setTimeout(V,U))},[V]);m.useEffect(()=>{const U=j.viewport;if(U){const ie=()=>{G(P.current),u==null||u()},ve=()=>{const Xe=new Date().getTime()-M.current;P.current=P.current-Xe,window.clearTimeout(E.current),c==null||c()};return U.addEventListener(yc,ve),U.addEventListener(vc,ie),()=>{U.removeEventListener(yc,ve),U.removeEventListener(vc,ie)}}},[j.viewport,C,c,u,G]),m.useEffect(()=>{i&&!j.isClosePausedRef.current&&G(C)},[i,C,j.isClosePausedRef,G]),m.useEffect(()=>(O(),()=>z()),[O,z]);const re=m.useMemo(()=>N?Pp(N):null,[N]);return j.viewport?o.jsxs(o.Fragment,{children:[re&&o.jsx(N1,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:re}),o.jsx(k1,{scope:n,onClose:V,children:Xn.createPortal(o.jsx(yu.ItemSlot,{scope:n,children:o.jsx(n1,{asChild:!0,onEscapeKeyDown:ot(a,()=>{j.isFocusedToastEscapeKeyDownRef.current||V(),j.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(Dt.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":j.swipeDirection,...k,ref:g,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ot(t.onKeyDown,U=>{U.key==="Escape"&&(a==null||a(U.nativeEvent),U.nativeEvent.defaultPrevented||(j.isFocusedToastEscapeKeyDownRef.current=!0,V()))}),onPointerDown:ot(t.onPointerDown,U=>{U.button===0&&(x.current={x:U.clientX,y:U.clientY})}),onPointerMove:ot(t.onPointerMove,U=>{if(!x.current)return;const ie=U.clientX-x.current.x,ve=U.clientY-x.current.y,Xe=!!w.current,I=["left","right"].includes(j.swipeDirection),B=["left","up"].includes(j.swipeDirection)?Math.min:Math.max,Y=I?B(0,ie):0,te=I?0:B(0,ve),se=U.pointerType==="touch"?10:2,ae={x:Y,y:te},ht={originalEvent:U,delta:ae};Xe?(w.current=ae,no(v1,f,ht,{discrete:!1})):Oh(ae,j.swipeDirection,se)?(w.current=ae,no(y1,h,ht,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(ie)>se||Math.abs(ve)>se)&&(x.current=null)}),onPointerUp:ot(t.onPointerUp,U=>{const ie=w.current,ve=U.target;if(ve.hasPointerCapture(U.pointerId)&&ve.releasePointerCapture(U.pointerId),w.current=null,x.current=null,ie){const Xe=U.currentTarget,I={originalEvent:U,delta:ie};Oh(ie,j.swipeDirection,j.swipeThreshold)?no(b1,b,I,{discrete:!0}):no(w1,p,I,{discrete:!0}),Xe.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),j.viewport)})]}):null}),N1=t=>{const{__scopeToast:e,children:n,...r}=t,s=ll(ui,e),[i,l]=m.useState(!1),[a,c]=m.useState(!1);return M1(()=>l(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:o.jsx(gp,{asChild:!0,children:o.jsx(gu,{...r,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},C1="ToastTitle",Sp=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(Dt.div,{...r,ref:e})});Sp.displayName=C1;var T1="ToastDescription",Np=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(Dt.div,{...r,ref:e})});Np.displayName=T1;var Cp="ToastAction",Tp=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?o.jsx(Ep,{altText:n,asChild:!0,children:o.jsx(vu,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Cp}\`. Expected non-empty \`string\`.`),null)});Tp.displayName=Cp;var Mp="ToastClose",vu=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=j1(Mp,n);return o.jsx(Ep,{asChild:!0,children:o.jsx(Dt.button,{type:"button",...r,ref:e,onClick:ot(t.onClick,s.onClose)})})});vu.displayName=Mp;var Ep=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return o.jsx(Dt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Pp(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),E1(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const l=r.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...Pp(r))}}),e}function no(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?dp(s,i):s.dispatchEvent(i)}var Oh=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function M1(t=()=>{}){const e=Gn(t);si(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function E1(t){return t.nodeType===t.ELEMENT_NODE}function P1(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function va(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var L1=vp,Lp=bp,_p=jp,Ip=Sp,Ap=Np,zp=Tp,Dp=vu;const _1=L1,Rp=m.forwardRef(({className:t,...e},n)=>o.jsx(Lp,{ref:n,className:nt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Rp.displayName=Lp.displayName;const I1=np("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Op=m.forwardRef(({className:t,variant:e,...n},r)=>o.jsx(_p,{ref:r,className:nt(I1({variant:e}),t),...n}));Op.displayName=_p.displayName;const A1=m.forwardRef(({className:t,...e},n)=>o.jsx(zp,{ref:n,className:nt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));A1.displayName=zp.displayName;const $p=m.forwardRef(({className:t,...e},n)=>o.jsx(Dp,{ref:n,className:nt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(He,{className:"h-4 w-4"})}));$p.displayName=Dp.displayName;const Fp=m.forwardRef(({className:t,...e},n)=>o.jsx(Ip,{ref:n,className:nt("text-sm font-semibold",t),...e}));Fp.displayName=Ip.displayName;const Hp=m.forwardRef(({className:t,...e},n)=>o.jsx(Ap,{ref:n,className:nt("text-sm opacity-90",t),...e}));Hp.displayName=Ap.displayName;function z1(){const{toasts:t}=cp();return o.jsxs(_1,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return o.jsxs(Op,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(Fp,{children:n}),r&&o.jsx(Hp,{children:r})]}),s,o.jsx($p,{})]},e)}),o.jsx(Rp,{})]})}var D1={};const R1=({onCreateNewMap:t,onOpenMap:e,isDarkMode:n})=>{const[r,s]=m.useState(!1),[i,l]=m.useState([]),[a,c]=m.useState({}),[u,h]=m.useState({name:"ProjectName",width:20,height:15,tileSize:64,location:"",isStartingMap:!1});m.useEffect(()=>{(async()=>{const w=localStorage.getItem("recentMaps");if(!w)return;let C=JSON.parse(w);const M=window.electronAPI;if(M&&typeof M.checkProjectExists=="function")try{const E=(await Promise.all(C.map(async O=>{try{return await M.checkProjectExists(O.path)?O:null}catch{return O}}))).filter(Boolean);C=E,E.length!==JSON.parse(w).length&&localStorage.setItem("recentMaps",JSON.stringify(E))}catch(P){console.warn("Prune recent maps failed:",P)}l(C)})()},[]),m.useEffect(()=>{if(!i||i.length===0)return;const x=async w=>{const C=w;if(C.thumbnailDataUrl){c(M=>({...M,[w.id]:C.thumbnailDataUrl}));return}try{const M=window.electronAPI;if(M&&typeof M.getProjectThumbnail=="function"){const P=await M.getProjectThumbnail(w.path);if(P){c(E=>({...E,[w.id]:P}));return}}if(!(M&&typeof M.getProjectThumbnail=="function")){c(P=>({...P,[w.id]:null}));return}}catch(M){console.error("Failed to load thumbnail for",w.path,M)}c(M=>({...M,[w.id]:null}))};return i.forEach(w=>{x(w)}),()=>{Object.values(a).forEach(w=>{w&&w.startsWith("blob:")&&URL.revokeObjectURL(w)})}},[i]);const f=x=>{localStorage.setItem("recentMaps",JSON.stringify(x)),l(x)},p=async()=>{var x;try{if((x=window.electronAPI)!=null&&x.selectDirectory){const w=await window.electronAPI.selectDirectory();w&&h({...u,location:w})}else if("showDirectoryPicker"in window){const w=await window.showDirectoryPicker();h({...u,location:w.name})}else{const w="C:\\Users\\"+(navigator.userAgent.includes("Windows")&&D1.USERNAME||"User")+"\\Documents\\TileMaps";h({...u,location:w})}}catch(w){console.error("Error selecting directory:",w)}},b=async()=>{var w;if(!u.location){alert("Please select a location for your map project");return}const x=u.name.trim().toLowerCase();if(i.some(C=>C.name.trim().toLowerCase()===x)){alert("There can't be maps that have the same name. Please type another name.");return}try{const C=`${u.location}\\${u.name}`;if((w=window.electronAPI)!=null&&w.createMapProject){if(await window.electronAPI.createMapProject(u)){const E=[{id:Date.now().toString(),name:u.name,lastModified:"Just now",path:C},...i.slice(0,9)];f(E),t(u,C)}}else console.log("Creating map project:",u),t(u)}catch(C){console.error("Error creating map project:",C),alert("Error creating map project. Please try again.")}},k=x=>{e(x.path)},j=async()=>{var x;try{if((x=window.electronAPI)!=null&&x.selectDirectory){const w=await window.electronAPI.selectDirectory();w&&e(w)}else alert("Open Map Project functionality requires the desktop app")}catch(w){console.error("Error opening map project:",w)}},N=()=>{var x;(x=window.electronAPI)!=null&&x.minimize?window.electronAPI.minimize():console.log("Minimize clicked - Electron API not available")},y=()=>{var x;(x=window.electronAPI)!=null&&x.maximize?window.electronAPI.maximize():console.log("Maximize clicked - Electron API not available")},g=()=>{var x;(x=window.electronAPI)!=null&&x.close?window.electronAPI.close():console.log("Close clicked - Electron API not available")};return r?o.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-neutral-900 dark:to-neutral-800 flex flex-col ${n?"dark":""}`,children:[o.jsxs("div",{className:"bg-gray-100 dark:bg-neutral-900 text-orange-600 dark:text-orange-400 flex justify-between items-center px-4 py-1 select-none drag-region border-b border-gray-200 dark:border-neutral-700",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("img",{src:"/flare-ico.png",alt:"Flarism Logo",className:"w-6 h-6"}),o.jsx("span",{className:"text-sm font-semibold",children:"Flarism"})]}),o.jsxs("div",{className:"flex no-drag",children:[o.jsx(K,{content:"Minimize",children:o.jsx("button",{onClick:N,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-neutral-700 px-3 py-1 text-sm rounded transition-colors",children:o.jsx(gc,{className:"w-4 h-4"})})}),o.jsx(K,{content:"Maximize",children:o.jsx("button",{onClick:y,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-neutral-700 px-3 py-1 text-sm rounded transition-colors",children:o.jsx(An,{className:"w-4 h-4"})})}),o.jsx(K,{content:"Close",children:o.jsx("button",{onClick:g,className:"text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 hover:bg-gray-200 dark:hover:bg-neutral-700 px-3 py-1 text-sm rounded transition-colors",children:o.jsx(He,{className:"w-4 h-4"})})})]})]}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl p-8 w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"inline-flex items-center justify-center",children:o.jsx("img",{src:"/flare-logo.png",alt:"Flare Logo",className:"w-40 h-40 object-contain"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create a New Flare Project"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Name"}),o.jsx(F,{value:u.name,onChange:x=>h({...u,name:x.target.value}),placeholder:"Enter map name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Location"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(F,{value:u.location,onChange:x=>h({...u,location:x.target.value}),placeholder:"Select folder for your project",readOnly:!0}),o.jsx(A,{type:"button",variant:"outline",onClick:p,children:o.jsx(go,{className:"w-4 h-4"})})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx(A,{variant:"outline",onClick:()=>s(!1),className:"flex-1",children:"Back"}),o.jsx(A,{onClick:b,className:"flex-1",children:"Confirm"})]})]})})]}):o.jsxs("div",{className:`h-screen overflow-hidden bg-gradient-to-br from-slate-50 to-slate-100 dark:from-neutral-900 dark:to-neutral-800 flex flex-col ${n?"dark":""}`,children:[o.jsxs("div",{className:"bg-gray-100 dark:bg-neutral-900 text-orange-600 dark:text-orange-400 flex justify-between items-center px-4 py-1 select-none drag-region border-b border-gray-200 dark:border-neutral-700",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("img",{src:"/flare-ico.png",alt:"Flarism Logo",className:"w-4 h-6"}),o.jsx("span",{className:"text-sm font-semibold",children:"Flarism"})]}),o.jsxs("div",{className:"flex no-drag",children:[o.jsx(K,{content:"Minimize",children:o.jsx("button",{onClick:N,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-neutral-700 px-3 py-1 text-sm rounded transition-colors",children:o.jsx(gc,{className:"w-4 h-4"})})}),o.jsx(K,{content:"Maximize",children:o.jsx("button",{onClick:y,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-neutral-700 px-3 py-1 text-sm rounded transition-colors",children:o.jsx(An,{className:"w-4 h-4"})})}),o.jsx(K,{content:"Close",children:o.jsx("button",{onClick:g,className:"text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 hover:bg-gray-200 dark:hover:bg-neutral-700 px-3 py-1 text-sm rounded transition-colors",children:o.jsx(He,{className:"w-4 h-4"})})})]})]}),o.jsxs("div",{className:"flex flex-1 min-h-0 overflow-hidden",children:[o.jsxs("div",{className:"w-80 bg-white dark:bg-neutral-900 border-r border-slate-200 dark:border-neutral-700 p-6 flex flex-col h-full",children:[o.jsx("div",{className:"mb-4 flex items-center justify-between",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Projects"})}),o.jsxs("div",{className:"flex-1 min-h-0 h-full",children:[o.jsx("div",{className:"space-y-2 overflow-y-auto minimal-scroll px-1 py-1 h-full",children:i.map(x=>o.jsx("div",{className:"p-3 rounded-lg border border-slate-200 dark:border-neutral-700 hover:bg-slate-50 dark:hover:bg-neutral-800 cursor-pointer transition-colors",onClick:()=>k(x),children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-20 h-20 bg-orange-100 dark:bg-orange-900 rounded overflow-hidden flex items-center justify-center",children:a[x.id]?o.jsx("img",{src:a[x.id]||"",alt:`${x.name} thumbnail`,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(pc,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:x.name}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:x.lastModified})]})]})},x.id))}),i.length===0&&o.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[o.jsx(pc,{className:"w-20 h-20 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),o.jsx("p",{children:"No recent project"}),o.jsx("p",{className:"text-sm",children:"Create your first projet to get started"})]})]})]}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:o.jsxs("div",{className:"text-center max-w-md",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-50 h-20",children:o.jsx("img",{src:"/flare-logo.png",alt:"Flare Logo",className:"w-100 h-100 object-contain"})}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Flarism is an unofficial, community-made editor inspired by the Flare engine. It is not affiliated with the official Flare developers."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(A,{onClick:()=>s(!0),className:"w-full h-12 text-lg",size:"lg",children:[o.jsx(xo,{className:"w-5 h-5 mr-2"}),"Create New Projet"]}),o.jsxs(A,{variant:"outline",onClick:j,className:"w-full h-12 text-lg",size:"lg",children:[o.jsx(R0,{className:"w-5 h-5 mr-2"}),"Open Existing Project"]})]})]})})]})]})},O1={xp:{type:"int",min:0},xp_scaling:{type:"filename"},defeat_status:{type:"string"},convert_status:{type:"string"},first_defeat_loot:{type:"int",min:1},animations:{type:"filename"},loot:{type:"list"},loot_count:{type:"intPair",min:0},threat_range:{type:"floatPair",min:0},flee_range:{type:"float",min:0},chance_pursue:{type:"float",min:0},chance_flee:{type:"float",min:0},waypoint_pause:{type:"duration"},turn_delay:{type:"duration"},combat_style:{type:"predefined",options:["default","aggressive","passive"]},power:{type:"list"},passive_powers:{type:"list"},quest_loot:{type:"list"},flee_duration:{type:"duration"},flee_cooldown:{type:"duration"},humanoid:{type:"bool"},lifeform:{type:"bool"},flying:{type:"bool"},intangible:{type:"bool"}},Bp=new Set(["N","NE","E","SE","S","SW","W","NW"]),$1=new Set(["true","false","1","0"]);function F1(t,e,n){switch(n.type){case"int":{const r=Number.parseInt(e,10);return Number.isNaN(r)?`${t} must be an integer.`:n.min!==void 0&&r<n.min?`${t} must be greater than or equal to ${n.min}.`:n.max!==void 0&&r>n.max?`${t} must be less than or equal to ${n.max}.`:null}case"float":{const r=Number.parseFloat(e);return Number.isNaN(r)?`${t} must be a number.`:n.min!==void 0&&r<n.min?`${t} must be greater than or equal to ${n.min}.`:n.max!==void 0&&r>n.max?`${t} must be less than or equal to ${n.max}.`:null}case"bool":return $1.has(e.toLowerCase())?null:`${t} must be true or false.`;case"filename":return e?null:`${t} cannot be empty.`;case"duration":return/^\d+(ms|s)?$/i.test(e)?null:`${t} must be a duration such as 200ms or 2s.`;case"intPair":{const r=e.split(",").map(s=>s.trim()).filter(Boolean);if(r.length===0||r.length>2)return`${t} must contain one or two comma-separated integers.`;for(const s of r){if(!/^-?\d+$/.test(s))return`${t} must contain valid integers.`;const i=Number.parseInt(s,10);if(n.min!==void 0&&i<n.min)return`${t} values must be greater than or equal to ${n.min}.`;if(n.max!==void 0&&i>n.max)return`${t} values must be less than or equal to ${n.max}.`}return null}case"floatPair":{const r=e.split(",").map(s=>s.trim()).filter(Boolean);if(r.length===0||r.length>2)return`${t} must contain one or two comma-separated numbers.`;for(const s of r){const i=Number.parseFloat(s);if(Number.isNaN(i))return`${t} must contain valid numbers.`;if(n.min!==void 0&&i<n.min)return`${t} values must be greater than or equal to ${n.min}.`;if(n.max!==void 0&&i>n.max)return`${t} values must be less than or equal to ${n.max}.`}return null}case"direction":{const r=e.toUpperCase();if(Bp.has(r))return null;const s=Number.parseInt(e,10);return!Number.isNaN(s)&&s>=0&&s<=7?null:`${t} must be a direction (N, NE, ... , NW) or a number between 0 and 7.`}case"point":{const r=e.split(",").map(s=>s.trim());return r.length!==2||!r.every(s=>/^-?\d+$/.test(s))?`${t} must be two comma-separated integers.`:null}case"predefined":return n.options&&!n.options.includes(e)?`${t} must be one of: ${n.options.join(", ")}.`:null;case"list":case"string":default:return null}}const H1={};function B1(t){const e=t.type==="enemy"?O1:t.type==="npc"?H1:{},n={},r=[],s=t.properties||{};for(const[i,l]of Object.entries(s)){const c=(l??"").toString().trim(),u=e[i];if(u){const h=F1(i,c,u);h&&r.push(h),u.type==="bool"?n[i]=c.toLowerCase():u.type==="direction"&&Bp.has(c.toUpperCase())?n[i]=c.toUpperCase():n[i]=c}else n[i]=c}return{errors:r,sanitized:n}}function W1(){const[t,e]=m.useState(!0),[n,r]=m.useState(null),s=m.useRef(null),[i,l]=m.useState(0),[a,c]=m.useState(0),[u,h]=m.useState(!1),[f,p]=m.useState(!1),[b,k]=m.useState(20),[j,N]=m.useState(15),[y,g]=m.useState("Untitled Map"),[x,w]=m.useState(null),[C,M]=m.useState([]),[P,E]=m.useState(!1),[O,z]=m.useState("(none)"),[V,G]=m.useState(!0),[re,U]=m.useState(!0),[ie,ve]=m.useState(!1),[Xe,I]=m.useState(!1),[B,Y]=m.useState([]),[te,se]=m.useState(null),[ae,ht]=m.useState(!1),[Yr,Ve]=m.useState(!1),[Zn,wu]=m.useState(!1),[Wp,bu]=m.useState(!1),[di,ku]=m.useState("engine"),[ju,Yp]=m.useState(!0),[Up,Ur]=m.useState(0),[hi,Xr]=m.useState(!0),fi=m.useRef(null),al=m.useRef(null),[Nn,Vr]=m.useState(!0),mi=m.useRef(null),Su=m.useRef(null),[pi,Nu]=m.useState(!0),cl=m.useRef(null),Xp=m.useRef(null),[Jt,gi]=m.useState(null),Mt=m.useCallback(()=>{fi.current!==null&&(window.clearTimeout(fi.current),fi.current=null)},[]),Jn=m.useCallback(()=>{Mt(),fi.current=window.setTimeout(()=>{Xr(!1)},500)},[Mt]),xi=m.useCallback(()=>{Xr(!0),Jn()},[Jn]),Vp=m.useCallback(()=>{Mt(),Xr(!0)},[Mt]),Gp=m.useCallback(()=>{var v;const d=typeof document<"u"?document.activeElement:null;d&&((v=al.current)!=null&&v.contains(d))||Jn()},[Jn,al]),qp=m.useCallback(()=>{Mt(),Xr(!0)},[Mt]),Kp=m.useCallback(d=>{const v=d.relatedTarget;d.currentTarget.contains(v)||Jn()},[Jn]),Et=m.useCallback(()=>{mi.current!==null&&(window.clearTimeout(mi.current),mi.current=null)},[]),er=m.useCallback(()=>{Et(),mi.current=window.setTimeout(()=>{Vr(!1)},500)},[Et]),tr=m.useCallback(()=>{Vr(!0),er()},[er]),Qp=m.useCallback(()=>{Et(),Vr(!0)},[Et]),Zp=m.useCallback(()=>{var v;const d=typeof document<"u"?document.activeElement:null;d&&((v=Su.current)!=null&&v.contains(d))||er()},[er]),Jp=m.useCallback(()=>{Et(),Vr(!0)},[Et]),eg=m.useCallback(d=>{const v=d.relatedTarget;d.currentTarget.contains(v)||er()},[er]),nr=m.useCallback(()=>{cl.current!==null&&(window.clearTimeout(cl.current),cl.current=null)},[]),Cu=m.useCallback(()=>{nr()},[nr]),Gr=m.useCallback(()=>{Nu(!0),Cu()},[Cu]),tg=m.useCallback(d=>{Xp.current=d},[]),ng=m.useCallback(d=>{wl.current=d,Su.current=d},[]),Cn=m.useCallback(d=>{rg(d),tr()},[tr]),yi=m.useCallback(d=>{dl(v=>v===d?"none":d),Gr()},[Gr]),rr=m.useMemo(()=>{var d;return typeof window<"u"&&!!((d=window.electronAPI)!=null&&d.selectTilesetFile)},[]),[we,rg]=m.useState("brush"),[sg,vi]=m.useState(!1),[ig,wi]=m.useState(!1),[og,bi]=m.useState(!1),[Tn,qr]=m.useState("brush"),[Mn,ki]=m.useState("rectangular"),[sr,ul]=m.useState("rectangle"),[Ge,dl]=m.useState("none"),[lg,Kr]=m.useState(!1),[ji,hl]=m.useState(null),[Tu,fl]=m.useState([]),[Qr,ml]=m.useState(null),[ir,Zr]=m.useState("select"),[Y1,pl]=m.useState(!1),[Jr,Mu]=m.useState(""),[ag,Si]=m.useState(!1),[Rt,es]=m.useState(null),[cg,Eu]=m.useState(null),gl=me.useRef(null),[Pt,ts]=m.useState("Untitled Map"),[or,Ni]=m.useState(!1),[qe,ug]=m.useState(()=>{const d=localStorage.getItem("isDarkMode");return d?JSON.parse(d):!1}),[lr,dg]=m.useState(()=>{const d=localStorage.getItem("showSidebarToggle");return d?JSON.parse(d):!0});m.useEffect(()=>{try{localStorage.setItem("showSidebarToggle",JSON.stringify(lr))}catch{}},[lr]);const[Ci,Pu]=m.useState("saved"),[ns,hg]=m.useState(!0),[fg,Lu]=m.useState(0),[xl,_u]=m.useState(!1),[ar,Iu]=m.useState(!1),[ke,Au]=m.useState(null),[zu,Du]=m.useState(!1),[Ru,Ou]=m.useState(!1),[mg,En]=m.useState(0),[pg,$u]=m.useState(!1),[cr,Fu]=m.useState(!1),[ur,rs]=m.useState(null),Pn=m.useRef(null),[gg,Ti]=m.useState(!1),[q,$e]=m.useState(null),[Hu,ss]=m.useState([]),[yl,is]=m.useState([]),[oe,vl]=m.useState(null),[Bu,en]=m.useState(null),[xg,Mi]=m.useState(!1),[Ce,os]=m.useState(null),Ot=m.useRef(null),$t=m.useRef(null),Ft=m.useRef(null),wl=m.useRef(null),[rt,bl]=m.useState(null),[yg,kl]=m.useState(0),[jl,Sl]=m.useState(!1),{toast:je}=cp(),[Wu,Nl]=m.useState([]),[dr,tn]=m.useState(!1),Cl=m.useRef(null),[Tl,Yu]=m.useState(null),Ml=m.useRef(null),Uu=m.useRef(null),[El,Xu]=m.useState(null),[Ei,Pi]=m.useState(!1);m.useEffect(()=>{if(!dr)return;const d=()=>{const v=Cl.current;if(!v)return Yu(null);const S=v.getBoundingClientRect();Yu({left:S.left,top:S.top-8})};return d(),window.addEventListener("resize",d),window.addEventListener("scroll",d,!0),()=>{window.removeEventListener("resize",d),window.removeEventListener("scroll",d,!0)}},[dr]),m.useEffect(()=>{if(!Ei)return;const d=()=>{const v=Ml.current;if(!v)return Xu(null);const S=v.getBoundingClientRect();Xu({left:S.right+8,top:S.top})};return d(),window.addEventListener("resize",d),window.addEventListener("scroll",d,!0),()=>{window.removeEventListener("resize",d),window.removeEventListener("scroll",d,!0)}},[Ei]),m.useEffect(()=>{if(!dr)return;const d=S=>{S.key==="Escape"&&(tn(!1),Pi(!1))},v=S=>{const T=Ml.current,_=Uu.current,$=Cl.current,X=S.target;T&&(T.contains(X)||_&&_.contains(X)||$&&$.contains(X)||(tn(!1),Pi(!1)))};return window.addEventListener("keydown",d),window.addEventListener("mousedown",v),()=>{window.removeEventListener("keydown",d),window.removeEventListener("mousedown",v)}},[dr]);const Le=m.useCallback(()=>{is(n?n.getMapObjects():[])},[n]);m.useEffect(()=>()=>{},[je]),m.useEffect(()=>{qe?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),n&&n.setDarkMode(qe),localStorage.setItem("isDarkMode",JSON.stringify(qe))},[qe,n]),m.useEffect(()=>{if(!n)return;const d=v=>{z(v>0?v.toString():"(none)")};return n.setActiveGidCallback(d),()=>{n.setActiveGidCallback(null)}},[n]);const hr=m.useCallback(d=>{d.setAutoSaveCallback(async()=>{try{window.electronAPI&&ke&&await d.saveProjectData(ke)}catch(v){console.warn("Auto-save to disk failed:",v)}Lu(Date.now())}),d.setSaveStatusCallback(v=>{Pu(v),Iu(v==="unsaved"||v==="error")}),d.setAutoSaveEnabled(ns),d.setEyedropperCallback(()=>{Cn("brush"),qr("brush")}),d.setStampCallback(v=>{fl(v)}),d.setObjectsChangedCallback(v=>{is(v)}),d.setHeroEditCallback((v,S,T,_,$)=>{os({currentX:v,currentY:S,mapWidth:T,mapHeight:_,onConfirm:$}),Mi(!0)})},[ns,ke,Cn]);m.useEffect(()=>()=>{Mt()},[Mt]),m.useEffect(()=>{!t&&u&&xi()},[t,u,xi]),m.useEffect(()=>{(t||!u)&&(Xr(!0),Mt())},[t,u,Mt]),m.useEffect(()=>()=>{nr()},[nr]),m.useEffect(()=>{!t&&u&&Gr()},[t,u,Gr]),m.useEffect(()=>{(t||!u)&&(Nu(!0),nr())},[t,u,nr]),m.useEffect(()=>()=>{Et()},[Et]),m.useEffect(()=>{!t&&u&&tr()},[t,u,tr]),m.useEffect(()=>{(t||!u)&&(Vr(!0),Et())},[t,u,Et]),m.useEffect(()=>{if(s.current&&!t&&!n&&!zu&&!Jt){const d=new ga(s.current);d.setDarkMode(qe),hr(d),d.resetForNewProject(),u&&i>0&&a>0?d.setMapSize(i,a):d.setMapSize(0,0),r(d)}},[t,n,hr,zu,qe,Jt,u,i,a]),m.useEffect(()=>{if(!n)return;const d=()=>{const T=n.getHoverCoordinates();bl(T)};let v;const S=()=>{d(),v=requestAnimationFrame(S)};return S(),()=>{v&&cancelAnimationFrame(v)}},[n]),m.useEffect(()=>{if(n&&we==="brush"){const v={brush:"brush",bucket:"bucket",eraser:"eraser"}[Tn]||"brush";n.setCurrentTool(v)}else if(n&&we==="selection"){const v={rectangular:"rectangular","magic-wand":"magic-wand","same-tile":"same-tile",circular:"circular"}[Mn]||"rectangular";n.setCurrentSelectionTool(v)}else if(n&&we==="shape"){const v={rectangle:"rectangle",circle:"circle",line:"line"}[sr]||"rectangle";n.setCurrentShapeTool(v)}else n&&we==="eyedropper"?n.setEyedropperTool():n&&we==="stamp"&&n.setStampTool()},[n,we,Tn,Mn,sr]),m.useEffect(()=>{!n||we!=="stamp"||n.setCurrentStampMode(ir)},[n,we,ir]),m.useEffect(()=>{!n||we!=="stamp"||n.setActiveStamp(Qr)},[n,we,Qr]),m.useEffect(()=>{if(!n)return;const v=setInterval(()=>{const S=n.getSelection(),T=n.hasActiveSelection();kl(S.length),Sl(T)},100);return()=>clearInterval(v)},[n]);const st=m.useCallback(()=>{if(n){const d=n.getLayers();Y([...d]);const v=n.getActiveLayerId();se(v),Le()}},[n,Le]);m.useEffect(()=>{n&&st()},[n,st]),m.useEffect(()=>{Le()},[Le]),m.useEffect(()=>{const d=v=>{ae&&ht(!1)};return ae&&document.addEventListener("click",d),()=>{document.removeEventListener("click",d)}},[ae]);const Fe=m.useCallback((d,v)=>{if(wl.current){const S=wl.current.getBoundingClientRect();let T=window.innerWidth/2;if(s&&s.current){const $=s.current.getBoundingClientRect();T=$.left+$.width/2}const _=Math.max(8,S.top-60);rs({content:d,x:T,y:_,visible:!0,fadeOut:!1})}else{const S=v.getBoundingClientRect(),T=S.left+S.width/2,_=S.top-10;rs({content:d,x:T,y:_,visible:!0,fadeOut:!1})}Pn.current&&clearTimeout(Pn.current),Pn.current=setTimeout(()=>{rs(S=>S?{...S,fadeOut:!0}:null),setTimeout(()=>{rs(null)},300)},1e3)},[]),Ke=m.useCallback(()=>{Pn.current&&clearTimeout(Pn.current),rs(null)},[]);m.useEffect(()=>()=>{Pn.current&&clearTimeout(Pn.current),Ot.current&&clearTimeout(Ot.current),$t.current&&clearTimeout($t.current),Ft.current&&clearTimeout(Ft.current)},[]);const Vu=m.useCallback(()=>{Ot.current&&clearTimeout(Ot.current),$t.current&&clearTimeout($t.current),Ft.current&&clearTimeout(Ft.current),wi(!1),bi(!1),pl(!1),vi(!0)},[]),Gu=m.useCallback(()=>{Ot.current=setTimeout(()=>{vi(!1)},1e3)},[]),qu=m.useCallback(()=>{Ot.current&&clearTimeout(Ot.current),$t.current&&clearTimeout($t.current),Ft.current&&clearTimeout(Ft.current),vi(!1),bi(!1),pl(!1),wi(!0)},[]),Ku=m.useCallback(()=>{$t.current=setTimeout(()=>{wi(!1)},1e3)},[]),Qu=m.useCallback(()=>{Ot.current&&clearTimeout(Ot.current),$t.current&&clearTimeout($t.current),Ft.current&&clearTimeout(Ft.current),vi(!1),wi(!1),bi(!0)},[]),Zu=m.useCallback(()=>{Ft.current=setTimeout(()=>{bi(!1)},1e3)},[]),Ju=m.useCallback(()=>{if(!n||!Jr.trim())return;n.createStampFromSelection(Jr.trim())&&(Mu(""),pl(!1),Zr("select"))},[n,Jr]),vg=m.useCallback(d=>{ml(d),Zr("place")},[]),wg=m.useCallback(d=>{n&&(n.deleteStamp(d),Qr===d&&(ml(null),Zr("select")))},[n,Qr]),bg=()=>{switch(Tn){case"bucket":return o.jsx(fa,{className:"w-4 h-4"});case"eraser":return o.jsx(da,{className:"w-4 h-4"});default:return o.jsx(Ji,{className:"w-4 h-4"})}},kg=()=>{switch(Mn){case"magic-wand":return o.jsx(pa,{className:"w-4 h-4"});case"same-tile":return o.jsx(pr,{className:"w-4 h-4"});case"circular":return o.jsx(Cs,{className:"w-4 h-4"});default:return o.jsx(nw,{className:"w-4 h-4"})}},jg=()=>{switch(sr){case"circle":return o.jsx(Cs,{className:"w-4 h-4"});case"line":return o.jsx(Ph,{className:"w-4 h-4"});default:return o.jsx(ww,{className:"w-4 h-4"})}},ed=m.useCallback(d=>{hl(d),Kr(!0)},[]),Sg=m.useCallback(()=>{if(!(!n||ji===null)){try{n.separateBrush(ji),console.log(`Separated brush with ID: ${ji}`)}catch(d){console.error("Failed to separate brush:",d)}Kr(!1),hl(null),dl("none")}},[n,ji]),td=m.useCallback(d=>{n&&(console.log(`handleRemoveBrush called with brushId: ${d}`),es({type:"removeBrush",payload:d}))},[n]),nd=m.useCallback((d,v)=>{if(n)try{const S=n.getDetectedTileInfo(),T=S.findIndex($=>$.gid===d),_=S.findIndex($=>$.gid===v);T!==-1&&_!==-1&&(n.reorderBrush(T,_),console.log(`Reordered brush ${d} to position of ${v}`))}catch(S){console.error("Failed to reorder brush:",S)}},[n]),Pl=m.useCallback(d=>{if(!n)return;ss([]);const v=n.getMapObjects().find(S=>S.id===d);v&&($e(v),Ti(!0))},[n]),rd=m.useCallback(d=>{n&&(n.updateMapObject(d.id,d),$e(null),Ti(!1),Le(),ss([]))},[n,Le]),Ng=m.useCallback(d=>{const v=(rt==null?void 0:rt.x)??0,S=(rt==null?void 0:rt.y)??0;vl({type:d,name:"",x:v.toString(),y:S.toString(),tilesetPath:""}),en(null)},[rt]),fr=m.useCallback((d,v)=>{vl(S=>S&&{...S,[d]:v}),en(null)},[]),sd=m.useCallback(async()=>{var d;if(!(typeof window>"u"||!((d=window.electronAPI)!=null&&d.selectTilesetFile)))try{const v=await window.electronAPI.selectTilesetFile();v&&fr("tilesetPath",v)}catch(v){console.error("Failed to select tileset file for actor:",v)}},[fr]),Li=m.useCallback(()=>{vl(null),en(null)},[]),Cg=m.useCallback(d=>{n&&(n.removeMapObject(d),Le())},[n,Le]),Tg=m.useCallback(()=>{if(!n||!oe)return;const d=parseInt(oe.x,10),v=parseInt(oe.y,10);if(!oe.name.trim()){en("Name is required.");return}if(Number.isNaN(d)||Number.isNaN(v)){en("Position must be whole numbers.");return}if(d<0||d>=n.getMapWidth()||v<0||v>=n.getMapHeight()){en("Position is outside of the map bounds.");return}if(!oe.tilesetPath.trim()){en("Tileset location is required.");return}const S=oe.tilesetPath.trim(),T=oe.name.trim();if(n.getObjectsAtPosition(d,v).find(X=>X.type===oe.type)){en(`There is already a ${oe.type==="npc"?"NPC":"enemy"} at that position.`);return}const $=n.addMapObject("enemy",d,v,1,1);n.updateMapObject($.id,{name:T,x:d,y:v,type:oe.type,category:oe.type==="npc"?"npc":"enemy",wander_radius:oe.type==="npc"?0:$.wander_radius,properties:{...$.properties||{},tilesetPath:S}}),Le(),Li()},[oe,n,Li,Le]),id=m.useCallback(()=>{Ti(!1),$e(null),ss([])},[]),Mg=m.useCallback(()=>{if(!q)return;const{errors:d,sanitized:v}=B1(q);if(d.length>0){ss(d);return}ss([]),rd({...q,properties:v})},[q,rd]),D=m.useCallback((d,v)=>{$e(S=>{if(!S)return S;const T={...S.properties||{}};return v===null||v===""?delete T[d]:T[d]=v,{...S,properties:T}})},[]),Ll=m.useCallback((d,v)=>{$e(S=>{if(!S)return S;const T={...S.properties||{}};return T[d]=v?"true":"false",{...S,properties:T}})},[]),H=m.useCallback((d,v="")=>!q||!q.properties?v:q.properties[d]??v,[q]),od=m.useCallback(async()=>{var d;if(!(typeof window>"u"||!((d=window.electronAPI)!=null&&d.selectTilesetFile)))try{const v=await window.electronAPI.selectTilesetFile();v&&D("tilesetPath",v)}catch(v){console.error("Failed to select tileset for editing object:",v)}},[D]),Eg=m.useCallback((d,v)=>{Ce!=null&&Ce.onConfirm&&Ce.onConfirm(d,v),Mi(!1),os(null)},[Ce]),Pg=m.useCallback(()=>{Mi(!1),os(null)},[]);m.useEffect(()=>{if(!n||!s.current)return;const d=S=>{console.log("Double-click detected on canvas");const T=n.getActiveLayer();if(console.log("Active layer:",T),!T){console.log("No active layer found");return}if(!["enemy","npc","object","event","background"].includes(T.type)){console.log(`Layer type '${T.type}' is not interactive, skipping double-click`);return}const $=n.getHoverCoordinates();if(console.log("Hover coordinates:",$),$){const X=n.getMapObjects(),Q=n.getObjectsAtPosition($.x,$.y);console.log("All objects:",X.length),console.log("Objects at hover position:",Q);const Se=X.find(ft=>ft.x===$.x&&ft.y===$.y);console.log("Object at position (find method):",Se),Se?(console.log(`Opening edit dialog for object ID: ${Se.id}`),Pl(Se.id)):console.log("No object found at hover position")}},v=s.current;return v.addEventListener("dblclick",d),()=>{v.removeEventListener("dblclick",d)}},[n,Pl]),m.useEffect(()=>{console.log(`Brush tool changed to: ${Ge}`);const d=document.querySelector("[data-brush-tool]");if(d)d.setAttribute("data-brush-tool",Ge),console.log(`Updated existing data-brush-tool attribute to: ${Ge}`);else{const v=document.createElement("div");v.setAttribute("data-brush-tool",Ge),v.style.display="none",document.body.appendChild(v),console.log(`Created new data-brush-tool element with value: ${Ge}`)}},[Ge]),m.useEffect(()=>{const d=v=>{const{action:S,tileIndex:T}=v.detail;switch(S){case"separate":ed(T);break;case"remove":td(T);break;case"drop":v.detail.from&&v.detail.to&&nd(v.detail.from,v.detail.to);break}};return document.addEventListener("brushAction",d),()=>{document.removeEventListener("brushAction",d)}},[ed,td,nd]);const Lg=m.useCallback(async(d,v)=>{try{console.log("=== LOAD PROJECT DATA DEBUG ==="),console.log("Map config received:",{name:v.name,tilesets:v.tilesets?v.tilesets.length:0,tilesetImages:v.tilesetImages?Object.keys(v.tilesetImages).length:0,layers:v.layers?v.layers.length:0}),console.log("Map config full structure:",v),console.log("Creating layers from config...");const S=v.layers||[];console.log("Layers from config:",S);for(const T of S)if(console.log("Processing layer:",T),d.addLayer(T.name,T.type)){console.log(`Created layer: ${T.type} - ${T.name}`);const $=d.getLayers().find(X=>X.type===T.type);$&&T.data&&Array.isArray(T.data)&&(console.log(`Setting data for layer ${$.id} with ${T.data.length} tiles`),$.data=T.data)}else console.log(`Failed to create layer: ${T.type} - ${T.name}`);return console.log("=== CALLING EDITOR loadProjectData ==="),d.loadProjectData(v),console.log("Project data loading completed"),!0}catch(S){return console.error("Error loading project data:",S),!1}},[]);m.useEffect(()=>{Jt&&s.current&&!t&&(console.log("Canvas available and map config pending, creating editor..."),(async()=>{var v;try{console.log("Creating new editor with pending config...");const S=new ga(s.current);console.log("Clearing local storage backup..."),S.clearLocalStorageBackup(),console.log("Setting map size..."),S.setMapSize(Jt.width,Jt.height),console.log("Loading project data...");const T=await Lg(S,Jt);if(console.log("Project data loading result:",T),console.log("=== EDITOR STATE AFTER loadProjectData ==="),console.log("Tile count after loadProjectData:",S.getTileCount()),console.log("Active layer after loadProjectData:",S.getActiveLayerId()),console.log("Layers after loadProjectData:",S.getLayers().map(_=>({id:_.id,name:_.name,type:_.type}))),(v=window.electronAPI)!=null&&v.discoverTilesetImages&&ke){console.log("Calling discoverTilesetImages for path:",ke);const _=await window.electronAPI.discoverTilesetImages(ke),$=(_==null?void 0:_.tilesetImages)||{},X=Object.keys($),Q=Jt,Se=Q.tilesets&&Array.isArray(Q.tilesets)&&Q.tilesets.some(ft=>ft.layerType);if(console.log("Has per-layer tilesets in project:",Se),console.log("Available discovered images:",X),!Se&&X.length>0){console.log("No per-layer tilesets found, using fallback assignment");const ft=Ht=>(Ht||"").toLowerCase().replace(/\.[^/.]+$/,"").replace(/[^a-z0-9]+/g," ").trim(),nn=S.getActiveLayerId(),Dl=S.getLayers();let cd=!1;for(const Ht of Dl){const ud=[ft(Ht.type),ft(Ht.name)];let Bt=null;for(const cs of X){const Rl=ft(cs);if(ud.includes(Rl)){Bt=cs;break}}if(!Bt){const cs=X.find(Rl=>{const Jg=ft(Rl);return ud.some(dd=>dd&&Jg.includes(dd))});cs&&(Bt=cs)}!Bt&&X.length===1&&(Bt=X[0]),Bt?(console.log(`Assigning tileset '${Bt}' to layer ${Ht.id} (${Ht.type})`),S.setActiveLayer(Ht.id),await S.loadTilesetFromDataURL($[Bt],Bt),cd=!0):console.log(`No matching tileset found for layer ${Ht.id} (${Ht.type})`)}nn!==null&&S.setActiveLayer(nn),cd&&S.forceSave()}else console.log("Per-layer tilesets already loaded, skipping fallback assignment")}console.log("Setting up autosave and updating UI..."),S.setDarkMode(qe),hr(S),r(S),h(!0),p(!1),setTimeout(()=>{st();const _=S.getActiveLayerId(),$=S.getLayers().find(X=>X.id===_);console.log("Final UI update - checking active layer:",_,$==null?void 0:$.type),S.redraw()},150),gi(null)}catch(S){console.error("Failed to create editor with pending config:",S),gi(null),h(!1),typeof je=="function"&&je({title:"Failed to open project",description:S&&S.message?S.message:"An error occurred while loading the project.",variant:"destructive"})}})())},[Jt,t,ke,hr,st]);const _g=(d,v)=>{var T;const S=(T=d.target.files)==null?void 0:T[0];S&&(n!=null&&n.handleFileUpload)&&n.handleFileUpload(S,v)},Ig=d=>{n&&(n.setActiveLayer(d),se(d))},Ag=d=>{if(n){n.toggleLayerVisibility(d);const v=n.getLayers();Y([...v])}},zg=(d,v)=>{if(n){const S=B.find(T=>T.id===d);if(S){const T=S.transparency||0,_=Math.max(0,Math.min(1,T+v));n.setLayerTransparency(d,_),st()}}},Dg=()=>{n!=null&&n.resizeMap&&n.resizeMap(i,a)},Rg=()=>{n!=null&&n.zoomIn&&n.zoomIn()},Og=()=>{n!=null&&n.zoomOut&&n.zoomOut()},$g=()=>{n!=null&&n.resetZoom&&n.resetZoom()},Fg=m.useCallback(d=>{const v=d.trim().toLowerCase();if(!v)return!1;const S=new Set;C.forEach(T=>{T&&S.add(T)}),Pt.trim()&&S.add(Pt.trim().toLowerCase());try{const T=localStorage.getItem("recentMaps");if(T){const _=JSON.parse(T);Array.isArray(_)&&_.forEach($=>{if($&&typeof $.name=="string"){const X=$.name.trim().toLowerCase();X&&S.add(X)}})}}catch(T){console.warn("Failed to read recent map names for duplicate check:",T)}return S.has(v)},[Pt,C]),_l=m.useCallback(()=>{k(i>0?i:20),N(a>0?a:15),g(Pt||"Untitled Map"),E(or),w(null),p(!0)},[i,a,Pt,or]),Hg=async()=>{if(cr)return;const d=Math.max(1,Math.floor(b)||0),v=Math.max(1,Math.floor(j)||0),S=y.trim(),T=S||"Untitled Map";if(Fg(T)){w("There can't be maps that have the same name. Please type another name.");return}w(null),Fu(!0);try{if(!await ls({silent:!0})){w("Failed to export the current map. Please resolve any errors and try again.");return}M(X=>{const Q=Pt.trim().toLowerCase();return!Q||X.includes(Q)?X:[...X,Q]}),Y([]),se(null),fl([]),ml(null),is([]),bl(null),dl("none"),Kr(!1),hl(null),Pu("saved"),Iu(!1);let $=n;!$&&s.current&&($=new ga(s.current),$.setDarkMode(qe),hr($)),$&&($.resetForNewProject(),$.setMapSize(d,v),$.setDarkMode(qe),n||r($),st(),Le()),l(d),c(v),h(!0),xi(),tr(),ts(T),Ni(P),Sl(!1),kl(0),w(null),p(!1)}finally{Fu(!1)}},Il=m.useCallback(()=>{n!=null&&n.undo&&(n.undo(),st(),Le())},[n,st,Le]),Al=m.useCallback(()=>{n!=null&&n.redo&&(n.redo(),st(),Le())},[n,st,Le]),ls=m.useCallback(async({silent:d=!1}={})=>{var _;if(!n||!ke)return je({title:"Export Failed",description:"No project loaded or editor not initialized.",variant:"destructive"}),!1;d||(Ou(!0),En(0));const v=(()=>{const $=Pt.replace(/[<>:"/|?*]/g,"_").trim().replace(/\s+/g,"_").replace(/_{2,}/g,"_");return $||"Untitled_Map"})(),T=["# this file is automatically loaded when a New Game starts.","# it's a dummy map to send the player to the actual starting point.","","[header]","width=1","height=1","hero_pos=0,0","","[event]","type=event","location=0,0,1,1","activate=on_load",`intermap=${or?`maps/${v}.txt`:"maps/test11.txt"}`,""].join(`
`);try{d||En(25);const $=n.generateFlareMapTxt();d||En(50);const X=n.generateFlareTilesetDef();if(d||En(75),(_=window.electronAPI)!=null&&_.saveExportFiles){if(!await window.electronAPI.saveExportFiles(ke,Pt,$,X,{spawn:{enabled:!0,content:T,filename:"spawn.txt"}}))throw new Error("Failed to save export files");d||(En(100),setTimeout(()=>{$u(!0)},1500))}else n.exportFlareMap(),console.warn("Spawn file creation skipped: Electron API unavailable."),d||En(100);return!0}catch($){return console.error("Export failed:",$),je({title:"Export Failed",description:"An error occurred while exporting the map.",variant:"destructive"}),!1}finally{d||setTimeout(()=>{Ou(!1),En(0)},1e3)}},[n,ke,Pt,or,je]),Bg=m.useCallback(async()=>{await ls()},[ls]),Ln=m.useCallback(async()=>{if(n){_u(!0);try{if(window.electronAPI&&ke){const d=await n.saveProjectData(ke);await new Promise(v=>setTimeout(v,300)),d&&Lu(Date.now())}else n.forceSave(),await new Promise(d=>setTimeout(d,500))}catch(d){console.error("Save error:",d)}finally{_u(!1)}}},[n,ke]),Wg=m.useCallback(async()=>{var d;if(!ke||!((d=window.electronAPI)!=null&&d.listMaps)){Nl([]);return}try{const v=await window.electronAPI.listMaps(ke);Nl(v||[])}catch(v){console.warn("Failed to list maps:",v),Nl([])}},[ke]),Yg=m.useCallback(async d=>{if(ke)try{if(!await ls({silent:!0})){je({title:"Export failed",description:"Failed to export current map before opening a new one.",variant:"destructive"});return}await Ln();const S=await window.electronAPI.readMapFile(ke,d);if(!S){je({title:"Open failed",description:`Failed to read map file ${d}`,variant:"destructive"});return}n&&typeof n.loadFlareMapTxt=="function"?(n.loadFlareMapTxt(S),st(),Le(),h(!0),ts(d.replace(/\.txt$/i,"")),je({title:"Map opened",description:`Opened ${d}`})):je({title:"Map loaded (raw)",description:"Map content loaded but no parser available in the editor. Implement loadFlareMapTxt to parse it."})}catch(v){console.error("Open map error:",v),je({title:"Open failed",description:"An unexpected error occurred while opening the map.",variant:"destructive"})}},[ke,ls,Ln,n,st,Le,je]),Ug=()=>{n!=null&&n.toggleMinimap&&n.toggleMinimap(),G(!V)},Xg=(d,v)=>{var _;localStorage.removeItem("tilemap_autosave_backup"),Au(v??null);const S=(_=d.name)!=null&&_.trim()?d.name.trim():"Untitled Map",T=!!d.isStartingMap;ts(S),Ni(T),g(S),E(T),l(0),c(0),k(d.width),N(d.height),h(!1),Y([]),se(null),fl([]),is([]),bl(null),Sl(!1),kl(0),gi(null),r(null),w(null),p(!1),e(!1)},_i=m.useCallback(async d=>{var v,S;console.log("=== HANDLE OPEN MAP CALLED ===",d),console.log("Project path details:",{path:d,timestamp:new Date().toISOString()});try{if(Du(!0),Au(d),(v=window.electronAPI)!=null&&v.openMapProject){console.log("Calling electronAPI.openMapProject...");const T=await window.electronAPI.openMapProject(d);if(console.log("=== RAW MAP CONFIG RECEIVED ==="),console.log("Full mapConfig object:",JSON.stringify(T,null,2)),T){console.log("=== MAP CONFIG ANALYSIS ==="),console.log("Map dimensions:",{width:T.width,height:T.height}),console.log("Map name:",T.name);const _=(S=T.name)!=null&&S.trim()?T.name.trim():"Untitled Map",$=!!T.isStartingMap;ts(_),g(_),Ni($),E($);const X=T;console.log("Tilesets count:",X.tilesets?X.tilesets.length:0),console.log("Tileset images count:",X.tilesetImages?Object.keys(X.tilesetImages).length:0),console.log("Layers count:",X.layers?X.layers.length:0),X.tilesets&&(console.log("=== TILESETS DETAILS ==="),X.tilesets.forEach((Q,Se)=>{console.log(`Tileset ${Se}:`,{fileName:Q.fileName,tileWidth:Q.tileWidth,tileHeight:Q.tileHeight,spacing:Q.spacing,margin:Q.margin,tileCount:Q.tileCount})})),X.layers&&(console.log("=== LAYERS DETAILS ==="),X.layers.forEach((Q,Se)=>{console.log(`Layer ${Se}:`,{id:Q.id,name:Q.name,type:Q.type,visible:Q.visible,opacity:Q.opacity,dataLength:Q.data?Q.data.length:0})})),X.tilesetImages&&(console.log("=== TILESET IMAGES DETAILS ==="),Object.entries(X.tilesetImages).forEach(([Q,Se])=>{console.log(`Image ${Q}:`,{dataType:typeof Se,dataLength:Se?Se.length:0,isDataURL:typeof Se=="string"&&Se.startsWith("data:")})})),console.log("Setting map dimensions and clearing editor..."),l(T.width),c(T.height),h(!0),xi(),tr(),e(!1),p(!1),console.log("Clearing existing editor..."),n?(console.log("Found existing editor, clearing it"),r(null)):console.log("No existing editor to clear"),console.log("Storing map config for deferred editor creation"),gi(T)}}else console.log("Opening map project:",d)}catch(T){console.error("Error opening map project:",T)}finally{Du(!1)}},[n,hr,st]);m.useEffect(()=>{window.electronAPI&&(window.electronAPI.onMenuSaveMap(async()=>{await Ln()}),window.electronAPI.onMenuOpenMap(async()=>{const d=await window.electronAPI.selectDirectory();d&&await _i(d)}),window.electronAPI.onMenuNewMap(()=>{e(!0),h(!1),r(null),l(0),c(0),p(!1)}),window.electronAPI.onMenuUndo(()=>{Il()}),window.electronAPI.onMenuRedo(()=>{Al()}))},[Ln,_i,Il,Al]),m.useEffect(()=>{window.electronAPI&&(window.electronAPI.onBeforeClose(async()=>{await window.electronAPI.confirmClose(ar)}),window.electronAPI.onSaveAndClose(async()=>{try{await Ln(),window.electronAPI.closeAfterSave()}catch(d){console.error("Failed to save before close:",d),window.electronAPI.closeAfterSave()}}))},[ar,Ln]),m.useEffect(()=>{const d=v=>{if(ar)return v.preventDefault(),v.returnValue="",""};return window.addEventListener("beforeunload",d),()=>{window.removeEventListener("beforeunload",d)}},[ar]);const Vg=()=>{var d;(d=window.electronAPI)!=null&&d.minimize?window.electronAPI.minimize():console.log("Minimize clicked - Electron API not available")},Gg=()=>{var d;(d=window.electronAPI)!=null&&d.maximize?window.electronAPI.maximize():console.log("Maximize clicked - Electron API not available")},qg=()=>{var d;(d=window.electronAPI)!=null&&d.close?window.electronAPI.close():console.log("Close clicked - Electron API not available")},Kg=()=>{n&&n.fillSelection()},Qg=()=>{n&&n.clearSelection()},Zg=()=>{n&&n.deleteSelection()},J=m.useMemo(()=>B.find(d=>d.id===te)??null,[B,te]),as=(J==null?void 0:J.type)==="npc",Ii=(J==null?void 0:J.type)==="enemy",ld=m.useMemo(()=>as?yl.filter(d=>d.type==="npc"):Ii?yl.filter(d=>d.type==="enemy"):[],[yl,as,Ii]),[zl,ad]=m.useState("map");return o.jsx(o.Fragment,{children:t?o.jsx(R1,{onCreateNewMap:Xg,onOpenMap:_i,isDarkMode:qe}):o.jsxs("div",{className:"h-screen bg-background text-foreground flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"bg-gray-100 dark:bg-neutral-900 text-orange-600 dark:text-orange-400 flex justify-between items-center px-4 py-1 select-none drag-region border-b border-gray-200 dark:border-neutral-700",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("img",{src:"/flare-ico.png",alt:"Flarism Logo",className:"w-4 h-6"}),o.jsx("span",{className:"text-sm font-semibold text-orange-600 dark:text-orange-400",children:"Flarism"})]}),o.jsx("div",{className:"text-sm font-medium"}),o.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[Ci==="saving"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),o.jsx("span",{className:"text-orange-600",children:"Saving..."})]}),Ci==="saved"&&fg>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),o.jsx("span",{className:"text-green-600",children:"Saved"})]}),Ci==="error"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),o.jsx("span",{className:"text-red-600",children:"Save Error"})]}),Ci==="unsaved"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),o.jsx("span",{className:"text-yellow-600",children:"Unsaved"})]})]})]}),o.jsxs("div",{className:"flex no-drag",children:[o.jsx(K,{content:"Minimize",children:o.jsx("button",{onClick:Vg,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 p-1 rounded transition-colors",children:o.jsx(gc,{className:"w-4 h-4"})})}),o.jsx(K,{content:"Maximize",children:o.jsx("button",{onClick:Gg,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 p-1 rounded transition-colors",children:o.jsx(An,{className:"w-4 h-4"})})}),o.jsx(K,{content:"Close",children:o.jsx("button",{onClick:qg,className:"text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 hover:bg-gray-200 dark:hover:bg-gray-700 p-1 rounded transition-colors",children:o.jsx(He,{className:"w-4 h-4"})})})]})]}),lr&&o.jsx("button",{onClick:()=>{if(I(!0),n&&typeof n.setSidebarTransitioning=="function")try{n.setSidebarTransitioning(!0)}catch{}ve(d=>!d),window.setTimeout(()=>{if(I(!1),n&&typeof n.setSidebarTransitioning=="function")try{n.setSidebarTransitioning(!1)}catch{}},380)},"aria-label":ie?"Show sidebar":"Hide sidebar",style:{left:ie?0:224},className:"no-drag no-press-shift press-fill-effect fixed top-1/2 transform -translate-y-1/2 z-50 bg-white/90 dark:bg-neutral-900/90 border border-border rounded-l-md p-1 shadow-md hover:bg-white dark:hover:bg-neutral-800",children:ie?o.jsx(S0,{className:"w-4 h-4"}):o.jsx(k0,{className:"w-4 h-4"})}),o.jsxs("main",{className:"flex flex-1 min-h-0",children:[o.jsxs("aside",{className:"relative border-r border-border bg-muted/30 p-2 overflow-visible flex flex-col transition-all duration-200 ease-in-out app-sidebar "+(ie?"sidebar-collapsed":""),"aria-hidden":ie,children:[o.jsxs("div",{className:"sidebar-inner flex flex-col h-full",children:[o.jsxs("section",{className:"flex flex-col flex-1",children:[(()=>{const d=(J==null?void 0:J.type)==="event";return as||Ii||d?o.jsx(o.Fragment,{children:(as||Ii)&&o.jsx("div",{className:"flex-1 min-h-0",children:ld.length===0?o.jsx("div",{className:"h-full border border-dashed border-border rounded-md flex items-center justify-center text-sm text-muted-foreground px-4 text-center",children:as?"No NPCs added yet. Use the Add control to place your first NPC.":"No enemies added yet. Use the Add control to place an enemy."}):o.jsx("div",{className:"space-y-2 overflow-y-auto pr-1",children:ld.map(v=>{var S;return o.jsx("div",{className:"border border-border rounded-md px-3 py-2 bg-background/50 hover:bg-background transition-colors cursor-pointer",onClick:()=>Pl(v.id),children:o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"space-y-1 text-sm",children:[o.jsxs("div",{className:"font-medium text-foreground",title:v.name||`${v.type==="npc"?"NPC":"Enemy"} #${v.id}`,children:[o.jsx("span",{className:ie?"sr-only":"",children:v.name||`${v.type==="npc"?"NPC":"Enemy"} #${v.id}`}),!v.name&&ie&&o.jsxs("span",{className:"text-xs text-muted-foreground",children:["#",v.id]})]}),o.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[o.jsx(Eh,{className:"w-3 h-3"}),o.jsxs("span",{className:ie?"sr-only":"",children:["(",v.x,", ",v.y,")"]})]}),((S=v.properties)==null?void 0:S.tilesetPath)&&o.jsx("div",{className:"text-xs text-muted-foreground break-all",children:v.properties.tilesetPath})]}),o.jsx(K,{content:"Remove",children:o.jsx(A,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-red-500 hover:text-red-600",onClick:T=>{T.stopPropagation(),Cg(v.id)},children:o.jsx(He,{className:"w-3 h-3"})})})]})},v.id)})})})}):null})(),o.jsxs("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden p-0 m-0",children:[(()=>{const d=J==null?void 0:J.type;return d==="background"||d==="object"?o.jsx("div",{className:"flex items-center gap-2 px-2 pb-2",children:o.jsx("div",{className:`flex-1 flex items-center gap-1 overflow-x-auto tabs-scroll ${(()=>{try{const S=n&&d?n.getLayerTabs?n.getLayerTabs(d):[]:[];return S&&S.length>7?"tabs-limited":""}catch{return""}})()}`,onWheel:S=>{const T=S.currentTarget;T.scrollWidth>T.clientWidth&&(S.preventDefault(),T.scrollLeft+=S.deltaY)},children:n?(n.getLayerTabs?n.getLayerTabs(d):[]).map((S,T)=>o.jsx("button",{className:`w-5 h-5 flex items-center justify-center rounded-full text-white text-xs font-medium transition-colors shadow-sm ${n&&n.getCurrentLayerType()===d&&n.getActiveLayerTabId&&n.getActiveLayerTabId(d)===S.id?"opacity-100 scale-100 ring-2 ring-offset-1":"opacity-90 scale-95"}`,onClick:()=>{if(n){n.setActiveLayerTab(d,S.id);try{n.refreshTilePalette(!0)}catch{}Ur(_=>_+1)}},style:{background:n&&n.getActiveLayerTabId&&n.getActiveLayerTabId(d)===S.id?"#ea580c":"#f97316"},children:T+1},S.id)):o.jsx("div",{className:"text-xs text-muted-foreground",children:"No tabs"})})},Up):null})(),o.jsxs("div",{className:"relative flex-1 min-h-0 overflow-auto flex flex-col",children:[o.jsx("div",{id:"tilesContainer",className:"tile-palette flex flex-col flex-1 min-h-0 overflow-y-auto p-0 m-0 justify-start pb-12",onWheel:d=>{const v=d.currentTarget;v.scrollWidth>v.clientWidth&&(d.preventDefault(),v.scrollLeft+=d.deltaY)}}),o.jsx("div",{"data-brush-tool":Ge,className:"hidden"})]})]}),o.jsxs("div",{className:"sticky bottom-0 z-10 bg-transparent py-2",children:[o.jsx("div",{className:"text-xs text-muted-foreground"}),o.jsx("div",{className:"w-full flex justify-center",children:o.jsxs("div",{ref:tg,className:"flex items-center transition-all duration-300 ease-in-out gap-1 transform -translate-x-1 mt-2 mb-2",children:[o.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1",children:[((J==null?void 0:J.type)==="background"||(J==null?void 0:J.type)==="object")&&o.jsx(K,{content:"Add tab",side:"bottom",children:o.jsx(A,{variant:"outline",size:"sm",className:"text-xs px-1 py-1 h-6",onClick:()=>{if(!n||!J)return;const d=n.getLayerTabs?n.getLayerTabs(J.type):[];if(d&&d.length>=8){je({title:"Maximum tabs reached",description:"You can have up to 8 tabs per layer.",variant:"destructive"});return}const v=n.createLayerTab(J.type);n.setActiveLayerTab(J.type,v),Ur(S=>S+1)},children:"+"})}),(()=>{const d=(J==null?void 0:J.type)==="npc",v=(J==null?void 0:J.type)==="enemy",S=(J==null?void 0:J.type)==="event",_=d||v||S?`Add ${S?"Event":d?"NPC":"Enemy"}`:"Import a PNG tileset or brush for the active layer tab";return d||v||S?o.jsx(K,{content:_,side:"bottom",children:o.jsx(A,{variant:"default",size:"sm","aria-label":_,className:"relative z-20 text-xs px-1 py-1 h-6 shadow-sm bg-orange-500 hover:bg-orange-600 text-white border-orange-500",onClick:$=>{$.stopPropagation(),$.preventDefault(),d||v?Ng(d?"npc":"enemy"):je({title:"Not implemented",description:"Create Event will be implemented later."})},role:"button",children:o.jsx(eo,{className:"w-3 h-3 text-white"})})}):o.jsx(K,{content:_,side:"bottom",children:o.jsxs(A,{variant:"default",size:"sm","aria-label":_,className:"relative text-xs px-1 py-1 h-6 shadow-sm bg-orange-500 hover:bg-orange-600 text-white border-orange-500",children:[o.jsx(eo,{className:"w-3 h-3 text-white"}),o.jsx("input",{type:"file",accept:"image/png",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:async $=>{var Se;if(!n||!J)return;const X=(Se=$.target.files)==null?void 0:Se[0];if(!X)return;const Q=J.type;if(Q==="background"||Q==="object"){const ft=n.getLayerTabs?n.getLayerTabs(Q):[];let nn=n.getActiveLayerTabId?n.getActiveLayerTabId(Q):null;if(typeof nn!="number"||nn===null){if(ft&&ft.length>=8){je({title:"Maximum tabs reached",description:"You can have up to 8 tabs per layer.",variant:"destructive"});return}nn=n.createLayerTab(Q),n.setActiveLayerTab(Q,nn)}await n.importBrushImageToLayerTab(Q,nn,X),n.refreshTilePalette(!0),Ur(Dl=>Dl+1)}else _g($,"layerTileset")}})]})})})()]}),o.jsx("div",{className:"flex-shrink-0 overflow-visible transition-all duration-300 ease-out opacity-100 scale-100 max-w-[2.5rem] w-auto",children:o.jsx(K,{content:"Move/Reorder brushes",children:o.jsx(A,{variant:Ge==="move"?"default":"outline",size:"sm",className:"text-xs px-1 py-1 h-6 shadow-sm",onClick:()=>yi("move"),children:o.jsx(Ih,{className:"w-3 h-3"})})})}),o.jsx("div",{className:`flex-shrink-0 overflow-hidden transition-all duration-300 ease-out ${pi||Ge==="merge"?"opacity-100 scale-100 max-w-[2.5rem] w-auto":"opacity-0 scale-90 max-w-0 w-0 pointer-events-none"}`,children:o.jsx(K,{content:"Merge brushes",children:o.jsx(A,{variant:Ge==="merge"?"default":"outline",size:"sm",className:"text-xs px-1 py-1 h-6 shadow-sm",onClick:()=>yi("merge"),children:o.jsx(Mh,{className:"w-3 h-3"})})})}),o.jsx("div",{className:`flex-shrink-0 overflow-hidden transition-all duration-300 ease-out ${pi||Ge==="separate"?"opacity-100 scale-100 max-w-[2.5rem] w-auto":"opacity-0 scale-90 max-w-0 w-0 pointer-events-none"}`,children:o.jsx(K,{content:"Separate brushes",children:o.jsx(A,{variant:Ge==="separate"?"default":"outline",size:"sm",className:"text-xs px-1 py-1 h-6 shadow-sm",onClick:()=>yi("separate"),children:o.jsx(xw,{className:"w-3 h-3"})})})}),o.jsx("div",{className:`flex-shrink-0 overflow-hidden transition-all duration-300 ease-out ${pi||Ge==="remove"?"opacity-100 scale-100 max-w-[2.5rem] w-auto":"opacity-0 scale-90 max-w-0 w-0 pointer-events-none"}`,children:o.jsx(K,{content:"Remove brushes",children:o.jsx(A,{variant:Ge==="remove"?"default":"outline",size:"sm",className:"text-xs px-1 py-1 h-6 shadow-sm",onClick:()=>yi("remove"),children:o.jsx(Ew,{className:"w-3 h-3"})})})}),o.jsx("div",{className:`flex-shrink-0 overflow-hidden transition-all duration-300 ease-out ${pi?"opacity-100 scale-100 max-w-[2.5rem] w-auto":"opacity-0 scale-90 max-w-0 w-0 pointer-events-none"}`,children:o.jsx(K,{content:"Delete tileset tab",children:o.jsx(A,{variant:"outline",size:"sm",className:"text-xs px-1 py-1 h-6 border-red-500 hover:border-red-600 hover:bg-red-50 shadow-sm",onClick:()=>{if(Gr(),!n){je({title:"No editor",description:"Editor is not initialized yet.",variant:"destructive"});return}const d=J==null?void 0:J.type;if(!d){je({title:"No active layer",description:"Please select a layer first.",variant:"destructive"});return}const v=n.getActiveLayerTabId?n.getActiveLayerTabId(d):null;if(typeof v!="number"||v===null){je({title:"No tab selected",description:"There is no active tileset tab to delete for this layer.",variant:"destructive"});return}const S={layerType:d,tabId:v};gl.current=S,Eu(S),es({type:"removeTab",payload:S})},children:o.jsx(He,{className:"w-3 h-3 text-red-500"})})})})]})})]})]}),o.jsx("section",{className:"mb-0 flex-shrink-0 flex flex-col justify-center h-40",onMouseEnter:()=>wu(!0),onMouseLeave:()=>wu(!1),tabIndex:0,children:o.jsx("div",{className:"mb-2 w-full flex flex-col justify-center h-full",children:o.jsx("div",{className:"h-48 overflow-hidden flex flex-col justify-center w-full",children:o.jsx("div",{className:"space-y-0.5 h-full overflow-y-auto flex flex-col justify-center w-full",children:B.map(d=>{const v=te===d.id,S=Zn||v;return o.jsx("div",{className:`block w-full max-w-xs px-2 py-1 rounded transition-all text-xs transform-gpu ${v?"bg-orange-50 dark:bg-orange-900/20 border-orange-400":"bg-transparent border-transparent"}`,style:{opacity:S?1:.65,transform:S?"scaleY(1) translateY(0)":"scaleY(0.98) translateY(0)",transformOrigin:"top",pointerEvents:S?"auto":"none",transition:"transform 400ms cubic-bezier(.2,.9,.2,1), opacity 400ms ease, box-shadow 300ms ease",boxShadow:v?"0 6px 12px rgba(15,23,42,0.06)":"none",zIndex:v?30:10},children:o.jsx("div",{className:"cursor-pointer w-full flex items-center",onClick:()=>Ig(d.id),children:o.jsxs("div",{className:`flex items-center gap-2 w-full ${v?"opacity-100":"opacity-80"}`,children:[o.jsx(K,{content:d.visible?"Hide layer":"Show layer",children:o.jsx(A,{variant:"ghost",size:"sm",onClick:T=>{T.stopPropagation(),Ag(d.id)},className:"w-4 h-4 p-0 hover:bg-gray-200 dark:hover:bg-gray-700",children:d.visible?o.jsx(z0,{className:"w-2.5 h-2.5"}):o.jsx(I0,{className:"w-2.5 h-2.5 text-gray-400 dark:text-gray-500"})})}),o.jsx(A,{variant:"ghost",size:"sm",className:"w-4 h-4 p-0 hover:bg-gray-200 dark:hover:bg-gray-700",onMouseEnter:T=>{const _=Math.round((d.transparency||0)*100);Fe(o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Zi,{className:"w-3 h-3"}),"Transparency (",_,"%)"]}),T.currentTarget)},onMouseLeave:Ke,onWheel:T=>{T.preventDefault();const _=T.deltaY>0?.1:-.1;zg(d.id,_);const $=d.transparency||0,X=Math.max(0,Math.min(1,$+_)),Q=Math.round(X*100);Fe(o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Zi,{className:"w-3 h-3"}),"Transparency (",Q,"%)"]}),T.currentTarget)},children:o.jsx(g0,{className:"w-2.5 h-2.5"})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(K,{content:d.name,children:o.jsx("span",{className:"text-xs font-medium truncate flex items-center gap-2",children:(()=>{switch((d.type||"").toLowerCase()){case"background":case"bg":return o.jsx(H0,{className:"w-4 h-4"});case"collision":case"collision layer":return o.jsx(pc,{className:"w-4 h-4"});case"objects":case"object":return o.jsx(y0,{className:"w-4 h-4"});case"npc":return o.jsx(Aw,{className:"w-4 h-4"});case"enemy":return o.jsx(Y0,{className:"w-4 h-4"});case"event":return o.jsx(M0,{className:"w-4 h-4"});default:return o.jsx(ha,{className:"w-4 h-4"})}})()})}),o.jsx("span",{className:ie?"sr-only text-xs font-medium":"text-xs font-medium truncate",title:d.name,children:d.name})]})]})})},d.id)})})})})})]}),o.jsxs("section",{className:"flex-shrink-0 mt-auto mb-2",children:[o.jsx("div",{className:"w-full h-1.5 mb-2",children:Ru?o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-full overflow-hidden",children:o.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 h-full transition-all duration-1000 ease-out rounded-full",style:{width:`${mg}%`}})}):o.jsx("div",{className:"w-full h-full"})}),o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsxs("div",{children:[o.jsx(A,{ref:Cl,size:"sm",className:"w-7 h-7 p-0 shadow-sm",onClick:async()=>{dr||await Wg(),tn(d=>!d)},disabled:Ru||cr,children:o.jsx(G0,{className:"w-3 h-3"})}),dr&&Tl&&Xn.createPortal(o.jsx("div",{ref:Ml,style:{left:Tl.left,top:Tl.top,position:"absolute",transform:"translateY(-100%)"},className:"w-56 bg-background border border-border rounded shadow-lg z-[9999]",children:o.jsx("div",{className:"max-h-60 overflow-y-auto minimal-scroll",children:ke?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 text-xs flex items-center justify-between gap-2",onClick:()=>Pi(d=>!d),children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(go,{className:"w-3 h-3"}),o.jsx("span",{children:"Open map"})]}),o.jsx("svg",{className:`w-3 h-3 transition-transform ${Ei?"transform rotate-90":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),Ei&&El&&Xn.createPortal(o.jsx("div",{ref:Uu,style:{left:El.left,top:El.top,position:"absolute"},className:"w-48 bg-background border border-border rounded shadow-md z-[10000] max-h-60 overflow-y-auto minimal-scroll",children:Wu.length===0?o.jsx("div",{className:"p-2 text-xs text-muted-foreground",children:"No maps found"}):Wu.map(d=>o.jsx("button",{className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 text-xs",onClick:()=>{tn(!1),Pi(!1),Yg(d)},children:d},d))}),document.body)]}),o.jsx("div",{className:"border-t border-border"}),o.jsxs("button",{className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 text-xs flex items-center gap-2",onClick:async()=>{tn(!1),await Bg()},children:[o.jsx(P0,{className:"w-3 h-3"}),o.jsx("span",{children:"Export map"})]}),o.jsx("div",{className:"border-t border-border"}),o.jsxs("button",{className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 text-xs flex items-center gap-2",onClick:()=>{tn(!1),_l()},children:[o.jsx(xo,{className:"w-3 h-3"}),o.jsx("span",{children:"Create new map"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 text-xs flex items-center gap-2",onClick:async()=>{var d;if(tn(!1),(d=window.electronAPI)!=null&&d.selectDirectory)try{const v=await window.electronAPI.selectDirectory();v&&await _i(v)}catch(v){console.error("Failed to select directory:",v),je({title:"Open failed",description:"Unable to open project directory.",variant:"destructive"})}else je({title:"Open unavailable",description:"Open project requires the desktop app.",variant:"destructive"})},children:[o.jsx(go,{className:"w-3 h-3"}),o.jsx("span",{children:"Open project..."})]}),o.jsx("div",{className:"border-t border-border"}),o.jsx("div",{className:"p-2 text-xs",children:"No project is currently open. Open a project to list maps and enable Export."}),o.jsx("div",{className:"border-t border-border"}),o.jsxs("button",{className:"w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-neutral-800 text-xs flex items-center gap-2",onClick:()=>{tn(!1),_l()},children:[o.jsx(xo,{className:"w-3 h-3"}),o.jsx("span",{children:"Create new map"})]})]})})}),document.body)]}),o.jsx(K,{content:ar?"Save changes":"All changes saved",children:o.jsx(A,{onClick:Ln,className:`w-7 h-7 p-0 shadow-sm transition-colors ${xl?"bg-blue-500 hover:bg-blue-600":ar?"bg-orange-500 hover:bg-orange-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,disabled:xl||cr,size:"sm",children:xl?o.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}):o.jsx(_h,{className:"w-3 h-3"})})}),o.jsx(K,{content:"Map Settings",children:o.jsx(A,{onClick:()=>Ve(!0),className:"w-7 h-7 p-0 shadow-sm",variant:"outline",size:"sm",children:o.jsx(Ah,{className:"w-3 h-3"})})})]})]})]}),Yr&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-background border border-border rounded-lg p-6 w-96",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Settings"}),o.jsx(A,{variant:"ghost",size:"sm",onClick:()=>Ve(!1),className:"w-8 h-8 p-0",children:o.jsx(He,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex border-b mb-4",children:[o.jsx("button",{className:`flex-1 py-2 text-sm font-medium border-b-2 transition-colors ${zl==="map"?"border-orange-500 text-orange-600":"border-transparent text-gray-500"}`,onClick:()=>ad("map"),children:"Current Map Settings"}),o.jsx("button",{className:`flex-1 py-2 text-sm font-medium border-b-2 transition-colors ${zl==="other"?"border-orange-500 text-orange-600":"border-transparent text-gray-500"}`,onClick:()=>ad("other"),children:"Other Options"})]}),zl==="map"?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Map Name"}),o.jsx(F,{type:"text",value:Pt,onChange:d=>ts(d.target.value),placeholder:"Enter map name",className:"w-full"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Map Width"}),o.jsx(F,{type:"number",value:i,onChange:d=>l(Number(d.target.value)),min:"1",max:"100",className:"w-full"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Map Height"}),o.jsx(F,{type:"number",value:a,onChange:d=>c(Number(d.target.value)),min:"1",max:"100",className:"w-full"})]}),o.jsxs("div",{className:"flex items-center justify-between rounded-md border border-border px-3 py-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{htmlFor:"starting-map-checkbox",className:"text-sm font-medium text-muted-foreground",children:"Starting Map"}),o.jsx(K,{content:"If this map is the map that players will start the game then mark this option",children:o.jsx(ua,{className:"h-4 w-4 text-muted-foreground","aria-hidden":!0})})]}),o.jsx("input",{id:"starting-map-checkbox",type:"checkbox",className:"h-4 w-4 rounded border border-border accent-orange-500",checked:or,onChange:d=>Ni(d.target.checked),"aria-checked":or,"aria-label":"Set this map as the starting map"})]}),o.jsxs("div",{className:"flex gap-2 mt-6",children:[o.jsx(A,{variant:"outline",onClick:()=>Ve(!1),className:"flex-1",children:"Cancel"}),o.jsx(A,{onClick:()=>{Dg(),Ve(!1)},className:"flex-1",children:"Apply Changes"})]})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Theme (Experimental)"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm",children:"Light Mode"}),o.jsxs("button",{onClick:()=>ug(!qe),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${qe?"bg-orange-600":"bg-gray-200"}`,children:[o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${qe?"translate-x-6":"translate-x-1"}`}),o.jsx("span",{className:"sr-only",children:"Toggle dark mode"})]}),o.jsxs("span",{className:"text-sm flex items-center gap-1",children:[qe?o.jsx(Q0,{className:"w-4 h-4"}):o.jsx(Cw,{className:"w-4 h-4"}),"Dark Mode"]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Debug Mode"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm",children:"Disabled"}),o.jsxs("button",{onClick:()=>{n&&n.toggleDebugMode()},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n!=null&&n.getDebugMode()?"bg-orange-600":"bg-gray-200"}`,children:[o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n!=null&&n.getDebugMode()?"translate-x-6":"translate-x-1"}`}),o.jsx("span",{className:"sr-only",children:"Toggle debug mode"})]}),o.jsxs("span",{className:"text-sm flex items-center gap-1",children:[o.jsx(pr,{className:"w-4 h-4"}),"Debug Tiles"]})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Shows tile boundaries and coordinates for debugging"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Auto-Save"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm",children:"Disabled"}),o.jsxs("button",{onClick:()=>{const d=!ns;hg(d),n&&n.setAutoSaveEnabled(d)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${ns?"bg-orange-600":"bg-gray-200"}`,children:[o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${ns?"translate-x-6":"translate-x-1"}`}),o.jsx("span",{className:"sr-only",children:"Toggle auto-save"})]}),o.jsx("span",{className:"text-sm",children:"Enabled"})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically saves your work every 8 seconds"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Active GID Indicator"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm",children:"Show"}),o.jsxs("button",{onClick:()=>{U(!re)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${re?"bg-orange-600":"bg-gray-200"}`,children:[o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${re?"translate-x-6":"translate-x-1"}`}),o.jsx("span",{className:"sr-only",children:"Toggle Active GID Indicator"})]}),o.jsx("span",{className:"text-sm",children:re?"Shown":"Hidden"})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Toggle whether the Active GID badge is visible next to the hover coordinates."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Sidebar Collapse Button"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm",children:"Show toggle"}),o.jsxs("button",{onClick:()=>dg(d=>!d),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${lr?"bg-orange-600":"bg-gray-200"}`,children:[o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${lr?"translate-x-6":"translate-x-1"}`}),o.jsx("span",{className:"sr-only",children:"Toggle sidebar collapse button"})]}),o.jsx("span",{className:"text-sm",children:lr?"Shown":"Hidden"})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Show or hide the left-edge sidebar collapse/expand toggle."})]}),o.jsxs("div",{className:"flex gap-2 mt-6",children:[o.jsx(A,{variant:"outline",onClick:()=>Ve(!1),className:"flex-1",children:"Close"}),o.jsxs(A,{onClick:()=>{bu(!0),Ve(!1)},className:"flex-1 flex items-center justify-center gap-2",children:[o.jsx(ua,{className:"w-4 h-4"}),o.jsx("span",{children:"Help & Docs"})]})]})]})]})}),ag&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-background border border-border rounded-lg p-6 w-80",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Clear Layer"}),o.jsx(A,{variant:"ghost",size:"sm",onClick:()=>Si(!1),className:"w-8 h-8 p-0",children:o.jsx(He,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"text-sm text-foreground mb-4",children:"Are you sure you want to clear all tiles from the current layer? This action cannot be undone."}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx(A,{variant:"outline",onClick:()=>Si(!1),children:"Cancel"}),o.jsx(A,{onClick:()=>{n&&n.clearLayer(),qr("brush"),Si(!1)},children:"Clear"})]})]})}),Rt&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-background border border-border rounded-lg p-6 w-80",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Confirm"}),o.jsx(A,{variant:"ghost",size:"sm",onClick:()=>es(null),className:"w-8 h-8 p-0",children:o.jsx(He,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"text-sm text-foreground mb-4",children:[Rt.type==="removeBrush"&&"Are you sure you want to remove this brush?",Rt.type==="removeTileset"&&"Are you sure you want to remove the tileset for this layer? This will clear the tileset but keep any placed tiles.",Rt.type==="removeTab"&&"Are you sure you want to remove this tileset tab?"]}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx(A,{variant:"outline",onClick:()=>es(null),children:"Cancel"}),o.jsx(A,{onClick:()=>{try{if(Rt.type==="removeBrush"){const d=Rt.payload;n&&n.removeBrush(d)}else if(Rt.type==="removeTileset")n&&n.removeLayerTileset();else if(Rt.type==="removeTab"){const d=cg??gl.current??Rt.payload;if(n&&d&&d.layerType){const v=n.getActiveLayerTabId?n.getActiveLayerTabId(d.layerType):null,S=typeof v=="number"&&v!==null?v:d.tabId;if(console.info("Confirm removeTab: requested=",d,"liveActive=",v,"using=",S),typeof S=="number"){n.removeLayerTab(d.layerType,S),Ur(T=>T+1);try{n.refreshTilePalette(!0)}catch(T){console.warn("refreshTilePalette failed",T)}try{const T=n.getActiveLayerTabId?n.getActiveLayerTabId(d.layerType):null;if(typeof T=="number"){n.setActiveLayerTab(d.layerType,T),Ur(_=>_+1);try{n.refreshTilePalette(!0)}catch(_){console.warn("refreshTilePalette failed",_)}}}catch(T){console.warn("Post-remove setActiveLayerTab safeguard failed",T)}}else console.warn("Confirm removeTab: no finalTabId available, aborting",d)}Eu(null),gl.current=null}}catch(d){console.error("Confirm action failed:",d)}finally{es(null)}},children:"Confirm"})]})]})}),Wp&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-background border border-border rounded-lg p-0 w-[800px] max-h-[80vh] overflow-y-auto help-modal relative",children:[o.jsxs("div",{className:"sticky top-0 z-20 bg-background/95 backdrop-blur-sm border-b border-border py-3 px-4 rounded-t-lg",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Help & Documentation"}),o.jsx(A,{variant:"ghost",size:"sm",onClick:()=>bu(!1),className:"w-8 h-8 p-0 rounded-full","aria-label":"Close Help",children:o.jsx(He,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex space-x-1 mt-3 bg-gray-100 dark:bg-neutral-800 rounded-lg p-1",children:[o.jsxs("button",{onClick:()=>ku("engine"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all ${di==="engine"?"bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[o.jsx(pr,{className:"w-4 h-4 inline mr-2"}),"Engine"]}),o.jsxs("button",{onClick:()=>ku("collisions"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all ${di==="collisions"?"bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[o.jsx(ma,{className:"w-4 h-4 inline mr-2"}),"Collisions"]})]})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[di==="engine"&&o.jsxs(o.Fragment,{children:[o.jsxs("section",{children:[o.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[o.jsx(pr,{className:"w-5 h-5 text-orange-500"}),"Getting Started"]}),o.jsxs("div",{className:"space-y-2 text-gray-700 dark:text-gray-400",children:[o.jsx("p",{children:"Welcome to the Isometric Tile Map Editor! This tool allows you to create beautiful isometric tile-based maps."}),o.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-gray-700 dark:text-gray-400",children:[o.jsx("li",{children:"Start by creating a new map or loading an existing one"}),o.jsx("li",{children:"Import tilesets to begin designing"}),o.jsx("li",{children:"Use layers to organize different elements of your map"}),o.jsx("li",{children:"Export your finished map for use in your projects"})]})]})]}),o.jsxs("section",{children:[o.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[o.jsx(ha,{className:"w-5 h-5 text-orange-500"}),"Map Management"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-gray-700 dark:text-gray-400",children:"Layers help organize your map content. Each layer can have its own tileset and transparency."}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(_h,{className:"w-4 h-4 mt-1 text-orange-500"}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Save/Export"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Save your map as JSON or export as PNG image"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(eo,{className:"w-4 h-4 mt-1 text-orange-500"}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Load Map"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Load previously saved JSON map files"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Ah,{className:"w-4 h-4 mt-1 text-orange-500"}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Map Settings"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure map dimensions, tile size, and other properties"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Mh,{className:"w-4 h-4 mt-1 text-orange-500"}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Lock/Unlock"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prevent accidental edits to completed layers"})]})]})]})]})]}),o.jsxs("section",{children:[o.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[o.jsx(Ji,{className:"w-5 h-5 text-orange-500"}),"Drawing Tools"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Ji,{className:"w-4 h-4 mt-1 text-orange-500"}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Brush Tool"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Paint individual tiles by clicking"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(fa,{className:"w-4 h-4 mt-1 text-orange-500"}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Bucket Fill"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Fill connected areas with the same tile"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(da,{className:"w-4 h-4 mt-1 text-orange-500"}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Eraser"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Remove tiles from the map"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Lh,{className:"w-4 h-4 mt-1 text-orange-500"}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Eyedropper"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select a tile from the map to use as brush"})]})]})]})]}),o.jsxs("section",{children:[o.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[o.jsx(An,{className:"w-5 h-5 text-orange-500"}),"Tileset Management"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-gray-700 dark:text-gray-400",children:"Each layer can have its own tileset. Import PNG images to use as tilesets."}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(eo,{className:"w-4 h-4 mt-1 text-orange-500"}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Import Tileset"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Click the upload button for each layer to import a tileset image"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(He,{className:"w-4 h-4 mt-1 text-orange-500"}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Remove Tileset"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use the red X button to remove a tileset from a layer"})]})]})]})]})]}),o.jsxs("section",{children:[o.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2",children:[o.jsx(pr,{className:"w-5 h-5 text-orange-500"}),"Keyboard Shortcuts"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 bg-gray-50 dark:bg-neutral-900 p-4 rounded-lg",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"font-mono text-sm bg-gray-200 dark:bg-neutral-800 px-2 py-1 rounded",children:"Ctrl+Z"}),o.jsx("span",{className:"text-sm text-gray-400",children:"Undo"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"font-mono text-sm bg-gray-200 dark:bg-neutral-800 px-2 py-1 rounded",children:"Ctrl+Y"}),o.jsx("span",{className:"text-sm text-gray-400",children:"Redo"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"font-mono text-sm bg-gray-200 dark:bg-neutral-800 px-2 py-1 rounded",children:"Ctrl+S"}),o.jsx("span",{className:"text-sm text-gray-400",children:"Save Map"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"font-mono text-sm bg-gray-200 dark:bg-neutral-800 px-2 py-1 rounded",children:"Mouse Wheel"}),o.jsx("span",{className:"text-sm text-gray-400",children:"Zoom"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"font-mono text-sm bg-gray-200 dark:bg-neutral-800 px-2 py-1 rounded",children:"Middle Click + Drag"}),o.jsx("span",{className:"text-sm text-gray-400",children:"Pan"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"font-mono text-sm bg-gray-200 dark:bg-neutral-800 px-2 py-1 rounded",children:"Hover + Wheel"}),o.jsx("span",{className:"text-sm text-gray-400",children:"Layer Transparency"})]})]})]})]}),o.jsxs("section",{children:[o.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2",children:[o.jsx(pa,{className:"w-5 h-5 text-orange-500"}),"Tips & Best Practices"]}),o.jsx("div",{className:"space-y-2 text-gray-700 dark:text-gray-400",children:o.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-gray-700 dark:text-gray-400",children:[o.jsx("li",{children:"Use separate layers for different map elements (background, objects, decorations)"}),o.jsx("li",{children:"Name your layers descriptively for better organization"}),o.jsx("li",{children:"Lock completed layers to prevent accidental changes"}),o.jsx("li",{children:"Adjust layer transparency to see underlying elements while editing"}),o.jsx("li",{children:"Use the eyedropper tool to quickly select tiles from existing map areas"}),o.jsx("li",{children:"Save frequently to avoid losing work"}),o.jsx("li",{children:"Test your map export to ensure it looks correct in your target application"})]})})]})]}),di==="collisions"&&o.jsx(o.Fragment,{children:o.jsxs("section",{children:[o.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[o.jsx(ma,{className:"w-5 h-5 text-orange-500"}),"Summary of Collision Values for Flare"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-700 dark:text-gray-400",children:"Collision values in Flare Engine determine how entities interact with map tiles. Each value has specific behavior that affects movement and visibility."}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full border-collapse border border-gray-300 dark:border-gray-600",children:[o.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 text-left font-semibold text-gray-800 dark:text-gray-100",children:"Value"}),o.jsx("th",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 text-left font-semibold text-gray-800 dark:text-gray-100",children:"Type"}),o.jsx("th",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 text-left font-semibold text-gray-800 dark:text-gray-100",children:"Behavior"})]})}),o.jsxs("tbody",{className:"text-gray-700 dark:text-gray-300",children:[o.jsxs("tr",{children:[o.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-mono bg-red-50 dark:bg-red-900/20",children:"1"}),o.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-medium text-red-600 dark:text-red-400",children:"Red Block"}),o.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2",children:"Impassable wall, visible on minimap"})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-mono bg-red-50 dark:bg-red-900/20",children:"2"}),o.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-medium text-red-600 dark:text-red-400",children:"Dithered Red"}),o.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2",children:"Still blocks entities, minimap shows dithered tile"})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-mono bg-blue-50 dark:bg-blue-900/20",children:"3"}),o.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-medium text-blue-600 dark:text-blue-400",children:"Pit (Blue)"}),o.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2",children:"Ground entities blocked; air can pass"})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-mono bg-blue-50 dark:bg-blue-900/20",children:"4"}),o.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-medium text-blue-600 dark:text-blue-400",children:"Dithered Pit"}),o.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2",children:"Same as 3, but minimap shows dithered"})]})]})]})}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[o.jsxs("h5",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2 flex items-center gap-2",children:[o.jsx(ma,{className:"w-4 h-4"}),"Usage Guidelines"]}),o.jsxs("ul",{className:"text-blue-700 dark:text-blue-300 text-sm space-y-1 list-disc list-inside",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Value 1 (Red Block):"})," Use for walls, buildings, and solid obstacles that should be clearly visible on the minimap"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Value 2 (Dithered Red):"})," Use for partial barriers or decorative walls that still block movement"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Value 3 (Pit):"})," Use for water, lava, or ground hazards that flying entities can cross"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Value 4 (Dithered Pit):"})," Use for shallow water or transitional pit areas"]})]})]}),o.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg border border-amber-200 dark:border-amber-800",children:[o.jsx("h5",{className:"font-medium text-amber-800 dark:text-amber-200 mb-2",children:"⚠️ Important Notes"}),o.jsxs("ul",{className:"text-amber-700 dark:text-amber-300 text-sm space-y-1 list-disc list-inside",children:[o.jsxs("li",{children:["Collision values are set in the ",o.jsx("strong",{children:"Collision Layer"})," of your map"]}),o.jsx("li",{children:"Each tile position can only have one collision value"}),o.jsx("li",{children:"Collision affects AI pathfinding and player movement"}),o.jsx("li",{children:"Minimap visualization helps players understand map layout"})]})]})]})]})}),o.jsx("div",{className:"pt-4 border-t border-gray-200 text-center",children:o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Flarism | GUI for Flare Engine by ism."})})]})]})}),o.jsxs("section",{className:"flex-1 min-w-0 flex flex-col relative",children:[o.jsx("div",{ref:al,className:"absolute top-2 right-2 z-10",onMouseEnter:Vp,onMouseLeave:Gp,onFocus:qp,onBlur:Kp,tabIndex:hi?-1:0,"aria-label":"Map controls",children:o.jsxs("div",{className:`flex items-center bg-white/90 dark:bg-neutral-900/90 border border-border rounded-full shadow-lg transition-all duration-300 ease-in-out ${hi?"px-2 py-1":"px-1 py-1"}`,children:[o.jsxs("div",{className:`flex items-center gap-1 overflow-hidden transition-all duration-300 ease-out ${hi?"opacity-100 scale-100 max-w-[420px]":"opacity-0 scale-95 max-w-0 pointer-events-none"}`,children:[o.jsx(K,{content:"Undo (Ctrl+Z)",side:"bottom",children:o.jsx(A,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 rounded-full",onClick:Il,children:o.jsx(Lw,{className:"w-4 h-4"})})}),o.jsx(K,{content:"Redo (Ctrl+Y)",side:"bottom",children:o.jsx(A,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 rounded-full",onClick:Al,children:o.jsx(dw,{className:"w-4 h-4"})})}),o.jsx(K,{content:"Zoom In",side:"bottom",children:o.jsx(A,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 rounded-full",onClick:Rg,children:o.jsx(Ow,{className:"w-4 h-4"})})}),o.jsx(K,{content:"Zoom Out",side:"bottom",children:o.jsx(A,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 rounded-full",onClick:Og,children:o.jsx(Fw,{className:"w-4 h-4"})})}),o.jsx(K,{content:"Reset View",side:"bottom",children:o.jsx(A,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 rounded-full",onClick:$g,children:o.jsx(fw,{className:"w-4 h-4"})})}),o.jsx(K,{content:"Toggle Minimap",side:"bottom",children:o.jsx(A,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 rounded-full",onClick:Ug,children:o.jsx(ha,{className:"w-4 h-4"})})})]}),o.jsx("div",{className:`flex items-center justify-center w-8 h-8 transition-all duration-300 ease-out ${hi?"opacity-50 scale-90":"opacity-100 scale-100"}`,"aria-hidden":!0,children:o.jsx(Ih,{className:"w-4 h-4 text-muted-foreground"})})]})}),o.jsxs("div",{className:"bg-gray-100 flex-1 min-h-0 flex items-center justify-center overflow-hidden relative",children:[o.jsxs("div",{className:`absolute top-4 left-4 z-20 p-3 bg-white/90 dark:bg-neutral-900/90 backdrop-blur-sm rounded-lg border border-border shadow-lg transition-opacity duration-300 ${ju?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-hidden":!ju,children:[o.jsx(A,{variant:"ghost",size:"sm",className:"absolute top-1 right-1 w-6 h-6 p-0",onClick:()=>Yp(!1),children:o.jsx(He,{className:"w-3 h-3"})}),o.jsxs("div",{className:"space-y-2 pr-6",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-700 dark:text-gray-300",children:[o.jsx(J0,{className:"w-4 h-4"}),o.jsx("span",{children:"Left Click to Paint"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-700 dark:text-gray-300",children:[o.jsx(Zi,{className:"w-4 h-4"}),o.jsx("span",{children:"Right Click to Delete"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-700 dark:text-gray-300",children:[o.jsx(sw,{className:"w-4 h-4"}),o.jsx("span",{children:"Spacebar + Mouse to Pan"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-700 dark:text-gray-300",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Zi,{className:"w-4 h-4"}),o.jsx(Cs,{className:"w-2 h-2 absolute top-1 left-1.5 opacity-60"})]}),o.jsx("span",{children:"Mouse Wheel to Zoom In-Out"})]})]})]}),o.jsx("canvas",{ref:s,id:"mapCanvas",className:`tile-canvas w-full h-full max-w-full max-h-full canvas-fade ${Xe?"during-sidebar-transition":""}`}),o.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-opacity duration-200 ${u?"opacity-0 pointer-events-none":"opacity-100 pointer-events-auto bg-background/80 backdrop-blur-sm"}`,"aria-hidden":u,children:o.jsxs("div",{className:`flex items-center gap-3 px-4 py-2 rounded-full border-2 border-orange-500/80 bg-background/95 shadow-lg backdrop-blur-sm transition-opacity duration-200 ${u?"opacity-0":"opacity-100"}`,children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Create a map"}),o.jsx(A,{size:"sm",variant:"default",className:"w-9 h-9 p-0 rounded-full bg-orange-500 text-white shadow-sm transition-all duration-150 hover:bg-orange-600 hover:shadow-md hover:-translate-y-0.5 focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-2",onClick:_l,disabled:cr,children:o.jsx(xo,{className:"w-4 h-4"})})]})}),o.jsxs("div",{className:`absolute bottom-4 left-4 z-10 p-2 rounded-md text-xs font-mono flex items-center gap-2 transition-opacity duration-200 ${rt?"opacity-100 pointer-events-auto bg-white/90 dark:bg-neutral-900/90 border border-gray-200 dark:border-neutral-600 text-gray-800 dark:text-white shadow-sm":"opacity-0 pointer-events-none"}`,"aria-hidden":!rt,children:[o.jsx(Eh,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),o.jsx("span",{children:rt?`${rt.x}, ${rt.y}`:""}),o.jsx("div",{className:`ml-2 transition-opacity duration-200 ${rt&&re?"opacity-100":"opacity-0 pointer-events-none"}`,children:o.jsx(K,{content:"Active GID number of selected tilebrush",children:o.jsx(c0,{variant:"secondary",className:"text-xs px-2 py-1 bg-black/80 text-white border-gray-600 hover:bg-black/90",children:o.jsx("span",{id:"activeGid",children:O})})})})]}),o.jsxs("div",{className:`absolute bottom-4 left-32 z-10 p-2 rounded-md text-xs flex items-center gap-3 transition-opacity duration-200 ${jl?"opacity-100 pointer-events-auto bg-orange-600/90 border border-orange-500 text-white":"opacity-0 pointer-events-none"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 font-mono",children:[o.jsx(An,{className:"w-4 h-4 text-orange-200"}),o.jsx("span",{children:jl?`${yg} tiles selected`:""})]}),o.jsxs("div",{className:`flex items-center gap-1 ${jl?"":"pointer-events-none"}`,children:[o.jsx(K,{content:"Fill selection with active tile",children:o.jsx(A,{size:"sm",variant:"ghost",className:"h-6 px-2 text-xs text-white hover:bg-orange-500/50",onClick:Kg,children:"Fill"})}),o.jsx(K,{content:"Delete selected tiles (DEL)",children:o.jsx(A,{size:"sm",variant:"ghost",className:"h-6 px-2 text-xs text-white hover:bg-orange-500/50",onClick:Zg,children:"Delete"})}),o.jsx(K,{content:"Clear selection (ESC)",children:o.jsx(A,{size:"sm",variant:"ghost",className:"h-6 px-2 text-xs text-white hover:bg-orange-500/50",onClick:Qg,children:"Clear"})})]})]}),o.jsx("div",{ref:ng,className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-30",onMouseEnter:Qp,onMouseLeave:Zp,onFocus:Jp,onBlur:eg,tabIndex:Nn?-1:0,"aria-label":"Tool selection",children:o.jsxs("div",{className:`flex items-center bg-white/90 dark:bg-neutral-900/90 border border-border rounded-full shadow-md transition-all duration-300 ease-in-out ${Nn?"gap-1 px-2 py-1":"gap-0 px-1 py-1"}`,children:[o.jsxs("div",{className:`relative flex-shrink-0 transition-all duration-300 ease-out ${Nn||we==="brush"?"opacity-100 scale-100 max-w-[3rem] w-auto":"opacity-0 scale-90 max-w-0 w-0 pointer-events-none"}`,children:[o.jsx(A,{variant:we==="brush"?"default":"ghost",size:"sm",className:"w-7 h-7 p-1 rounded-full tool-button",onClick:()=>Cn("brush"),onMouseEnter:d=>{Vu(),Fe("Brush Tool",d.currentTarget)},onMouseLeave:()=>{Gu(),Ke()},children:bg()}),sg&&o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 bg-white dark:bg-neutral-900 border border-border rounded shadow-lg p-1 flex gap-1 min-w-max z-50",onMouseEnter:Vu,onMouseLeave:Gu,children:[o.jsx(A,{variant:Tn==="brush"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>qr("brush"),onMouseEnter:d=>Fe("Brush Tool",d.currentTarget),onMouseLeave:Ke,children:o.jsx(Ji,{className:"w-3 h-3"})}),o.jsx(A,{variant:Tn==="bucket"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>qr("bucket"),onMouseEnter:d=>Fe("Bucket Fill",d.currentTarget),onMouseLeave:Ke,children:o.jsx(fa,{className:"w-3 h-3"})}),o.jsx(A,{variant:Tn==="eraser"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>qr("eraser"),onMouseEnter:d=>Fe("Eraser",d.currentTarget),onMouseLeave:Ke,children:o.jsx(da,{className:"w-3 h-3"})}),o.jsx(A,{variant:Tn==="clear"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button border-red-500 hover:border-red-600 hover:bg-red-50",onClick:()=>Si(!0),onMouseEnter:d=>Fe("Clear Layer",d.currentTarget),onMouseLeave:Ke,children:o.jsx(He,{className:"w-3 h-3 text-red-500"})})]})]}),o.jsxs("div",{className:`relative flex-shrink-0 transition-all duration-300 ease-out ${Nn||we==="selection"?"opacity-100 scale-100 max-w-[3rem] w-auto":"opacity-0 scale-90 max-w-0 w-0 pointer-events-none"}`,children:[o.jsx(A,{variant:we==="selection"?"default":"ghost",size:"sm",className:"w-7 h-7 p-1 rounded-full tool-button",onClick:()=>Cn("selection"),onMouseEnter:d=>{qu(),Fe("Selection Tool",d.currentTarget)},onMouseLeave:()=>{Ku(),Ke()},children:kg()}),ig&&o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 bg-white dark:bg-neutral-900 border border-border rounded shadow-lg p-1 flex gap-1 min-w-max z-50",onMouseEnter:qu,onMouseLeave:Ku,children:[o.jsx(A,{variant:Mn==="rectangular"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>ki("rectangular"),onMouseEnter:d=>Fe("Rectangular Selection",d.currentTarget),onMouseLeave:Ke,children:o.jsx(An,{className:"w-3 h-3"})}),o.jsx(A,{variant:Mn==="magic-wand"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>ki("magic-wand"),onMouseEnter:d=>Fe("Magic Wand",d.currentTarget),onMouseLeave:Ke,children:o.jsx(pa,{className:"w-3 h-3"})}),o.jsx(A,{variant:Mn==="same-tile"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>ki("same-tile"),onMouseEnter:d=>Fe("Select Same Tile",d.currentTarget),onMouseLeave:Ke,children:o.jsx(pr,{className:"w-3 h-3"})}),o.jsx(A,{variant:Mn==="circular"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>ki("circular"),onMouseEnter:d=>Fe("Circular Select",d.currentTarget),onMouseLeave:Ke,children:o.jsx(Cs,{className:"w-3 h-3"})})]})]}),o.jsxs("div",{className:`relative flex-shrink-0 transition-all duration-300 ease-out ${Nn||we==="shape"?"opacity-100 scale-100 max-w-[3rem] w-auto":"opacity-0 scale-90 max-w-0 w-0 pointer-events-none"}`,children:[o.jsx(A,{variant:we==="shape"?"default":"ghost",size:"sm",className:"w-7 h-7 p-1 rounded-full tool-button",onClick:()=>Cn("shape"),onMouseEnter:d=>{Qu(),Fe("Shape Tool",d.currentTarget)},onMouseLeave:()=>{Zu(),Ke()},children:jg()}),og&&o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 bg-white dark:bg-neutral-900 border border-border rounded shadow-lg p-1 flex gap-1 min-w-max z-50",onMouseEnter:Qu,onMouseLeave:Zu,children:[o.jsx(K,{content:"Rectangle Shape",children:o.jsx(A,{variant:sr==="rectangle"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>ul("rectangle"),children:o.jsx(An,{className:"w-3 h-3"})})}),o.jsx(K,{content:"Circle Shape",children:o.jsx(A,{variant:sr==="circle"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>ul("circle"),children:o.jsx(Cs,{className:"w-3 h-3"})})}),o.jsx(K,{content:"Line Shape",children:o.jsx(A,{variant:sr==="line"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>ul("line"),children:o.jsx(Ph,{className:"w-3 h-3"})})})]})]}),o.jsxs("div",{className:`relative flex-shrink-0 transition-all duration-300 ease-out ${Nn||we==="stamp"?"opacity-100 scale-100 max-w-[3rem] w-auto":"opacity-0 scale-90 max-w-0 w-0 pointer-events-none"}`,children:[o.jsx(A,{variant:we==="stamp"?"default":"ghost",size:"sm",className:"w-7 h-7 p-1 rounded-full tool-button",onClick:()=>Cn("stamp"),onMouseEnter:d=>Fe("Stamp Tool - Group tiles into a stamp and place them together",d.currentTarget),onMouseLeave:Ke,children:o.jsx(Sw,{className:"w-3 h-3"})}),we==="stamp"&&o.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg p-2 min-w-[200px] z-10",children:o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"flex gap-1",children:[o.jsx(K,{content:"Select and place existing stamps",children:o.jsx(A,{variant:ir==="select"?"default":"ghost",size:"sm",className:"flex-1 text-xs",onClick:()=>Zr("select"),children:"Select"})}),o.jsx(K,{content:"Create stamp from selection",children:o.jsx(A,{variant:ir==="create"?"default":"ghost",size:"sm",className:"flex-1 text-xs",onClick:()=>Zr("create"),children:"Create"})})]}),ir==="create"&&o.jsxs("div",{className:"border-t pt-2",children:[o.jsx("div",{className:"text-xs font-medium mb-1",children:"Create New Stamp"}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("input",{type:"text",placeholder:"Stamp name",value:Jr,onChange:d=>Mu(d.target.value),className:"flex-1 text-xs px-2 py-1 border rounded",onKeyDown:d=>{d.key==="Enter"&&Ju()}}),o.jsx(A,{size:"sm",className:"text-xs",onClick:Ju,disabled:!Jr.trim(),children:"Create"})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"First select tiles, then create stamp"})]}),ir==="select"&&o.jsxs("div",{className:"border-t pt-2 max-h-32 overflow-y-auto",children:[o.jsx("div",{className:"text-xs font-medium mb-1",children:"Available Stamps"}),Tu.length===0?o.jsx("div",{className:"text-xs text-gray-500",children:"No stamps created yet"}):o.jsx("div",{className:"flex flex-col gap-1",children:Tu.map(d=>o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(K,{content:`${d.name} (${d.width}x${d.height})`,children:o.jsx(A,{variant:Qr===d.id?"default":"ghost",size:"sm",className:"flex-1 text-xs justify-start",onClick:()=>vg(d.id),children:d.name})}),o.jsx(K,{content:"Delete stamp",children:o.jsx(A,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-red-500",onClick:()=>wg(d.id),children:o.jsx(He,{className:"w-3 h-3"})})})]},d.id))})]})]})})]}),o.jsx("div",{className:`flex-shrink-0 transition-all duration-300 ease-out ${Nn||we==="eyedropper"?"opacity-100 scale-100 max-w-[3rem] w-auto":"opacity-0 scale-90 max-w-0 w-0 pointer-events-none"}`,children:o.jsx(A,{variant:we==="eyedropper"?"default":"ghost",size:"sm",className:"w-7 h-7 p-1 rounded-full tool-button",onClick:()=>Cn("eyedropper"),onMouseEnter:d=>Fe("Eyedropper Tool - Pick a tile from the map to reuse",d.currentTarget),onMouseLeave:Ke,children:o.jsx(Lh,{className:"w-3 h-3"})})})]})})]})]})]}),o.jsx(z1,{}),o.jsx(ws,{open:lg,onOpenChange:Kr,children:o.jsxs(bs,{children:[o.jsxs(ks,{children:[o.jsx(js,{children:"Separate Brush"}),o.jsx(Ss,{children:"Are you sure you want to separate this brush?"})]}),o.jsxs(Ns,{children:[o.jsx(A,{variant:"outline",onClick:()=>Kr(!1),children:"Cancel"}),o.jsx(A,{onClick:Sg,children:"Separate"})]})]})}),o.jsx(ws,{open:oe!==null,onOpenChange:d=>d?void 0:Li(),children:o.jsxs(bs,{className:"max-w-md",children:[o.jsxs(ks,{children:[o.jsx(js,{children:(oe==null?void 0:oe.type)==="npc"?"Add NPC":"Add Enemy"}),o.jsxs(Ss,{children:["Define the placement details for this ",(oe==null?void 0:oe.type)==="npc"?"NPC":"enemy","."]})]}),oe&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),o.jsx(F,{value:oe.name,onChange:d=>fr("name",d.target.value),placeholder:oe.type==="npc"?"Village Elder":"Goblin Scout"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"X Position"}),o.jsx(F,{type:"number",value:oe.x,onChange:d=>fr("x",d.target.value),min:0,max:(n==null?void 0:n.getMapWidth())??void 0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Y Position"}),o.jsx(F,{type:"number",value:oe.y,onChange:d=>fr("y",d.target.value),min:0,max:(n==null?void 0:n.getMapHeight())??void 0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tileset Location"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(F,{className:"flex-1",value:oe.tilesetPath,onChange:d=>fr("tilesetPath",d.target.value),placeholder:"Desktop/mytilesets/npcs/mynpc.png",readOnly:rr,onClick:rr?()=>{sd()}:void 0}),o.jsx(A,{type:"button",variant:"outline",size:"sm",onClick:()=>{sd()},disabled:!rr,children:"Browse"})]})]}),Bu&&o.jsx("div",{className:"text-sm text-red-500",children:Bu})]}),o.jsxs(Ns,{children:[o.jsx(A,{variant:"outline",onClick:Li,children:"Cancel"}),o.jsx(A,{onClick:Tg,children:(oe==null?void 0:oe.type)==="npc"?"Add NPC":"Add Enemy"})]})]})}),o.jsx(ws,{open:gg,onOpenChange:d=>{d?Ti(!0):id()},children:o.jsxs(bs,{className:"max-w-5xl w-full h-[90vh] flex flex-col",children:[o.jsxs(ks,{children:[o.jsx(js,{children:q?`Edit ${q.type}`:"Add Object"}),o.jsxs(Ss,{children:["Configure ",(q==null?void 0:q.type)||"object"," properties for Flare engine compatibility."]})]}),Hu.length>0&&o.jsxs("div",{className:"mb-3 rounded-md border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive",children:[o.jsx("p",{className:"font-semibold mb-1",children:"Please fix the following:"}),o.jsx("ul",{className:"ml-4 list-disc space-y-1",children:Hu.map((d,v)=>o.jsx("li",{children:d},`${d}-${v}`))})]}),o.jsx("div",{className:"flex-1 overflow-y-auto pr-2 minimal-scroll",children:q&&o.jsxs("div",{className:"space-y-4 pb-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),o.jsx(F,{value:q.name||"",onChange:d=>$e({...q,name:d.target.value}),placeholder:"Object name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),o.jsx(F,{value:q.category||"",onChange:d=>$e({...q,category:d.target.value}),placeholder:q.type==="enemy"?"creature":"block"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"X Position"}),o.jsx(F,{type:"number",value:q.x,onChange:d=>$e({...q,x:Number(d.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Y Position"}),o.jsx(F,{type:"number",value:q.y,onChange:d=>$e({...q,y:Number(d.target.value)})})]})]}),(q.type==="npc"||q.type==="enemy")&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tileset Location"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(F,{className:"flex-1",value:H("tilesetPath",""),onChange:d=>D("tilesetPath",d.target.value),placeholder:"Desktop/mytilesets/npcs/mynpc.png",readOnly:rr,onClick:rr?()=>{od()}:void 0}),o.jsx(A,{type:"button",variant:"outline",size:"sm",onClick:()=>{od()},disabled:!rr,children:"Browse"})]})]}),q.type==="enemy"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Level"}),o.jsx(F,{type:"number",value:q.level||1,onChange:d=>$e({...q,level:Number(d.target.value)}),min:"1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Number"}),o.jsx(F,{type:"number",value:q.number||1,onChange:d=>$e({...q,number:Number(d.target.value)}),min:"1"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Wander Radius"}),o.jsx(F,{type:"number",value:q.wander_radius||4,onChange:d=>$e({...q,wander_radius:Number(d.target.value)}),min:"0"})]}),o.jsxs("div",{className:"space-y-3 border border-border rounded-md p-3 bg-muted/20",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-semibold",children:"Enemy Specifications"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure Flare StatBlock-compatible values."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"XP"}),o.jsx(F,{type:"number",value:H("xp",""),onChange:d=>D("xp",d.target.value),min:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"XP Scaling Table"}),o.jsx(F,{value:H("xp_scaling",""),onChange:d=>D("xp_scaling",d.target.value),placeholder:"tables/xp_scaling.txt"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Defeat Status"}),o.jsx(F,{value:H("defeat_status",""),onChange:d=>D("defeat_status",d.target.value),placeholder:"campaign_status_id"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Convert Status"}),o.jsx(F,{value:H("convert_status",""),onChange:d=>D("convert_status",d.target.value),placeholder:"campaign_status_id"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"First Defeat Loot"}),o.jsx(F,{value:H("first_defeat_loot",""),onChange:d=>D("first_defeat_loot",d.target.value),placeholder:"items/id.txt"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Animations Definition"}),o.jsx(F,{value:H("animations",""),onChange:d=>D("animations",d.target.value),placeholder:"animations/enemies/foo.txt"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Loot Entries (one per line)"}),o.jsx("textarea",{className:"w-full min-h-[80px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("loot",""),onChange:d=>D("loot",d.target.value),placeholder:"item_id, chance"})]}),(()=>{const d=H("loot_count",""),[v="",S=""]=d.split(",").map(T=>T.trim());return o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Loot Count Min"}),o.jsx(F,{type:"number",value:v,min:"0",onChange:T=>{const _=T.target.value;_?D("loot_count",S?`${_},${S}`:_):D("loot_count","")}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Loot Count Max"}),o.jsx(F,{type:"number",value:S,min:"0",onChange:T=>{const _=T.target.value;v?D("loot_count",_?`${v},${_}`:v):D("loot_count","")}})]})]})})(),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Threat Range (engage, stop)"}),(()=>{const d=H("threat_range",""),[v="",S=""]=d.split(",").map(T=>T.trim());return o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(F,{type:"number",value:v,onChange:T=>{const _=T.target.value;_?D("threat_range",S?`${_},${S}`:_):D("threat_range",S?`0,${S}`:"")}}),o.jsx(F,{type:"number",value:S,onChange:T=>{const _=T.target.value;v?D("threat_range",_?`${v},${_}`:v):D("threat_range","")}})]})})()]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Flee Range"}),o.jsx(F,{type:"number",value:H("flee_range",""),onChange:d=>D("flee_range",d.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Chance Pursue (%)"}),o.jsx(F,{type:"number",value:H("chance_pursue",""),onChange:d=>D("chance_pursue",d.target.value),min:"0",max:"100",step:"0.1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Chance Flee (%)"}),o.jsx(F,{type:"number",value:H("chance_flee",""),onChange:d=>D("chance_flee",d.target.value),min:"0",max:"100",step:"0.1"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Waypoint Pause"}),o.jsx(F,{value:H("waypoint_pause",""),onChange:d=>D("waypoint_pause",d.target.value),placeholder:"250ms"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Turn Delay"}),o.jsx(F,{value:H("turn_delay",""),onChange:d=>D("turn_delay",d.target.value),placeholder:"100ms"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Combat Style"}),o.jsxs("select",{className:"w-full rounded-md border border-border bg-background px-2 py-1 text-sm",value:H("combat_style",""),onChange:d=>D("combat_style",d.target.value),children:[o.jsx("option",{value:"",children:"Default"}),o.jsx("option",{value:"default",children:"default"}),o.jsx("option",{value:"aggressive",children:"aggressive"}),o.jsx("option",{value:"passive",children:"passive"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Triggered Powers (state,power,chance per line)"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("power",""),onChange:d=>D("power",d.target.value),placeholder:"melee,power/melee_slash,25"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Passive Powers (one power id per line)"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("passive_powers",""),onChange:d=>D("passive_powers",d.target.value),placeholder:"power_id"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quest Loot (one per line: status,not_status,item_id)"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("quest_loot",""),onChange:d=>D("quest_loot",d.target.value),placeholder:"status_required,status_block,item_id"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Flee Duration"}),o.jsx(F,{value:H("flee_duration",""),onChange:d=>D("flee_duration",d.target.value),placeholder:"1.5s"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Flee Cooldown"}),o.jsx(F,{value:H("flee_cooldown",""),onChange:d=>D("flee_cooldown",d.target.value),placeholder:"5s"})]})]}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{key:"humanoid",label:"Humanoid"},{key:"lifeform",label:"Lifeform"},{key:"flying",label:"Flying"},{key:"intangible",label:"Intangible"},{key:"facing",label:"Facing"},{key:"suppress_hp",label:"Hide HP Bar"}].map(d=>o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:H(d.key,"false")==="true",onChange:v=>Ll(d.key,v.target.checked)}),d.label]},d.key))})]})]}),q.type==="npc"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-3 border border-border rounded-md p-3 bg-muted/20",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-semibold",children:"Dialog"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure dialog tree content and metadata."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dialog ID"}),o.jsx(F,{value:H("dialog.id",""),onChange:d=>D("dialog.id",d.target.value),placeholder:"villager_intro"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Topic"}),o.jsx(F,{value:H("dialog.topic",""),onChange:d=>D("dialog.topic",d.target.value),placeholder:"Greetings"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Group"}),o.jsx(F,{value:H("dialog.group",""),onChange:d=>D("dialog.group",d.target.value),placeholder:"main_story"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Voice File(s)"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("dialog.voice",""),onChange:d=>D("dialog.voice",d.target.value),placeholder:"voice/npcs/intro.ogg"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Lines (Him)"}),o.jsx("textarea",{className:"w-full min-h-[80px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("dialog.him",""),onChange:d=>D("dialog.him",d.target.value),placeholder:"Hello there!"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Lines (Her)"}),o.jsx("textarea",{className:"w-full min-h-[80px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("dialog.her",""),onChange:d=>D("dialog.her",d.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Lines (You)"}),o.jsx("textarea",{className:"w-full min-h-[80px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("dialog.you",""),onChange:d=>D("dialog.you",d.target.value),placeholder:"What brings you here?"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Portrait (Him)"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("dialog.portrait_him",""),onChange:d=>D("dialog.portrait_him",d.target.value),placeholder:"portraits/npcs/villager.png"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Portrait (Her)"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("dialog.portrait_her",""),onChange:d=>D("dialog.portrait_her",d.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Portrait (You)"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("dialog.portrait_you",""),onChange:d=>D("dialog.portrait_you",d.target.value)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Response IDs (one per line, must precede dialog text)"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("dialog.response",""),onChange:d=>D("dialog.response",d.target.value)})]}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{key:"dialog.allow_movement",label:"Allow Movement",defaultValue:"false"},{key:"dialog.take_a_party",label:"Take/Release Party",defaultValue:"false"},{key:"dialog.response_only",label:"Response Only",defaultValue:"false"}].map(d=>o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:H(d.key,d.defaultValue||"false")==="true",onChange:v=>Ll(d.key,v.target.checked)}),d.label]},d.key))})]}),o.jsxs("div",{className:"space-y-3 border border-border rounded-md p-3 bg-muted/20",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-semibold",children:"NPC Details"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure appearance, behavior, and requirements."})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"NPC Name"}),o.jsx(F,{value:H("npc.name",q.name||""),onChange:d=>D("npc.name",d.target.value),placeholder:"Villager"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Portrait"}),o.jsx(F,{value:H("npc.portrait",""),onChange:d=>D("npc.portrait",d.target.value),placeholder:"portraits/npcs/villager.png"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Definition File"}),o.jsx(F,{value:H("npc.filename",""),onChange:d=>D("npc.filename",d.target.value),placeholder:"npcs/villager.txt"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Direction"}),o.jsx(F,{value:H("npc.direction",""),onChange:d=>D("npc.direction",d.target.value),placeholder:"south"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Waypoints (x,y per line)"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("npc.waypoints",""),onChange:d=>D("npc.waypoints",d.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Wander Radius"}),o.jsx(F,{type:"number",value:H("npc.wander_radius",""),onChange:d=>D("npc.wander_radius",d.target.value),min:"0"})]})]}),o.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{key:"npc.show_on_minimap",label:"Show on Minimap",defaultValue:"true"},{key:"npc.talker",label:"Talkable",defaultValue:"true"},{key:"npc.vendor",label:"Vendor",defaultValue:"false"}].map(d=>o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4",checked:H(d.key,d.defaultValue||"false")==="true",onChange:v=>Ll(d.key,v.target.checked)}),d.label]},d.key))}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Requires Status (one per line)"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("npc.requires_status",""),onChange:d=>D("npc.requires_status",d.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Requires Not Status"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("npc.requires_not_status",""),onChange:d=>D("npc.requires_not_status",d.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Requires Item (one per line)"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("npc.requires_item",""),onChange:d=>D("npc.requires_item",d.target.value),placeholder:"items/potion:2"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Requires Not Item"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("npc.requires_not_item",""),onChange:d=>D("npc.requires_not_item",d.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Requires Level ≥"}),o.jsx(F,{type:"number",value:H("npc.requires_level",""),onChange:d=>D("npc.requires_level",d.target.value),min:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Requires Level <"}),o.jsx(F,{type:"number",value:H("npc.requires_not_level",""),onChange:d=>D("npc.requires_not_level",d.target.value),min:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Requires Class"}),o.jsx(F,{value:H("npc.requires_class",""),onChange:d=>D("npc.requires_class",d.target.value),placeholder:"warrior"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Requires Currency ≥"}),o.jsx(F,{type:"number",value:H("npc.requires_currency",""),onChange:d=>D("npc.requires_currency",d.target.value),min:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Requires Currency <"}),o.jsx(F,{type:"number",value:H("npc.requires_not_currency",""),onChange:d=>D("npc.requires_not_currency",d.target.value),min:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Requires Not Class"}),o.jsx(F,{value:H("npc.requires_not_class",""),onChange:d=>D("npc.requires_not_class",d.target.value)})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"text-sm font-semibold",children:"Vendor Options"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Vendor Requires Status"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("npc.vendor_requires_status",""),onChange:d=>D("npc.vendor_requires_status",d.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Vendor Requires Not Status"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("npc.vendor_requires_not_status",""),onChange:d=>D("npc.vendor_requires_not_status",d.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Constant Stock (items per line)"}),o.jsx("textarea",{className:"w-full min-h-[80px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("npc.constant_stock",""),onChange:d=>D("npc.constant_stock",d.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status Stock (status: items)"}),o.jsx("textarea",{className:"w-full min-h-[80px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("npc.status_stock",""),onChange:d=>D("npc.status_stock",d.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Random Stock (loot definitions)"}),o.jsx("textarea",{className:"w-full min-h-[80px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("npc.random_stock",""),onChange:d=>D("npc.random_stock",d.target.value)})]})]}),(()=>{const d=H("npc.random_stock_count",""),[v="",S=""]=d.split(",").map(T=>T.trim());return o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Random Stock Min"}),o.jsx(F,{type:"number",value:v,min:"0",onChange:T=>{const _=T.target.value;_?D("npc.random_stock_count",S?`${_},${S}`:_):D("npc.random_stock_count",S?`0,${S}`:"")}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Random Stock Max"}),o.jsx(F,{type:"number",value:S,min:"0",onChange:T=>{const _=T.target.value;v?D("npc.random_stock_count",_?`${v},${_}`:v):D("npc.random_stock_count","")}})]})]})})(),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Buy Ratio"}),o.jsx(F,{type:"number",value:H("npc.vendor_ratio_buy",""),onChange:d=>D("npc.vendor_ratio_buy",d.target.value),step:"0.01"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sell Ratio"}),o.jsx(F,{type:"number",value:H("npc.vendor_ratio_sell",""),onChange:d=>D("npc.vendor_ratio_sell",d.target.value),step:"0.01"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sell Ratio (Old)"}),o.jsx(F,{type:"number",value:H("npc.vendor_ratio_sell_old",""),onChange:d=>D("npc.vendor_ratio_sell_old",d.target.value),step:"0.01"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Vox Intro (one file per line)"}),o.jsx("textarea",{className:"w-full min-h-[60px] text-sm rounded-md border border-border bg-background px-2 py-1",value:H("npc.vox_intro",""),onChange:d=>D("npc.vox_intro",d.target.value)})]})]})]}),q.type==="event"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Activate"}),o.jsx(F,{value:q.activate||"on_trigger",onChange:d=>$e({...q,activate:d.target.value}),placeholder:"on_trigger, on_load, etc."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hotspot"}),o.jsx(F,{value:q.hotspot||"0,0,1,1",onChange:d=>$e({...q,hotspot:d.target.value}),placeholder:"x,y,width,height"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tooltip"}),o.jsx(F,{value:q.tooltip||"",onChange:d=>$e({...q,tooltip:d.target.value}),placeholder:"Hover text"})]})]})]})}),o.jsxs(Ns,{className:"mt-4 flex-shrink-0",children:[o.jsx(A,{variant:"outline",onClick:id,children:"Cancel"}),o.jsx(A,{onClick:Mg,children:"Save"})]})]})}),o.jsx(ws,{open:f,onOpenChange:d=>{p(d),d||w(null)},children:o.jsxs(bs,{className:"max-w-md",children:[o.jsxs(ks,{children:[o.jsx(js,{children:"Create Map"}),o.jsx(Ss,{children:"Set the name, dimensions, and starting status for your new map."})]}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Map Name"}),o.jsx(F,{value:y,onChange:d=>{g(d.target.value),x&&w(null)},placeholder:"Enter map name"}),x&&o.jsx("p",{className:"mt-1 text-xs text-red-500",children:x})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Width (tiles)"}),o.jsx(F,{type:"number",min:1,max:100,value:b,onChange:d=>k(Math.max(1,Number.parseInt(d.target.value,10)||0))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Height (tiles)"}),o.jsx(F,{type:"number",min:1,max:100,value:j,onChange:d=>N(Math.max(1,Number.parseInt(d.target.value,10)||0))})]})]}),o.jsxs("div",{className:"flex items-center justify-between rounded-md border border-border px-3 py-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{htmlFor:"starting-map-checkbox",className:"text-sm font-medium text-muted-foreground",children:"Starting Map"}),o.jsx(K,{content:"If this map is the map that players will start the game then mark this option",children:o.jsx(ua,{className:"h-4 w-4 text-muted-foreground","aria-hidden":!0})})]}),o.jsx("input",{id:"starting-map-checkbox",type:"checkbox",className:"h-4 w-4 rounded border border-border accent-orange-500",checked:P,onChange:d=>E(d.target.checked),"aria-checked":P,"aria-label":"Set this map as the starting map"})]})]}),o.jsxs(Ns,{children:[o.jsx(A,{variant:"outline",onClick:()=>{p(!1),w(null)},children:"Cancel"}),o.jsx(A,{onClick:Hg,disabled:cr,className:"flex items-center gap-2",children:cr?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),o.jsx("span",{children:"Creating..."})]}):o.jsx("span",{children:"Create"})})]})]})}),o.jsx(ws,{open:xg,onOpenChange:Mi,children:o.jsxs(bs,{className:"max-w-md",children:[o.jsxs(ks,{children:[o.jsx(js,{children:"Edit Hero Position"}),o.jsx(Ss,{children:"Set the hero spawn position on the map."})]}),Ce&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"X Position"}),o.jsx(F,{type:"number",min:0,max:Ce.mapWidth-1,defaultValue:Ce.currentX,onChange:d=>{const v=parseInt(d.target.value);isNaN(v)||os({...Ce,currentX:v})}}),o.jsxs("span",{className:"text-xs text-gray-500",children:["(0 - ",Ce.mapWidth-1,")"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Y Position"}),o.jsx(F,{type:"number",min:0,max:Ce.mapHeight-1,defaultValue:Ce.currentY,onChange:d=>{const v=parseInt(d.target.value);isNaN(v)||os({...Ce,currentY:v})}}),o.jsxs("span",{className:"text-xs text-gray-500",children:["(0 - ",Ce.mapHeight-1,")"]})]})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Current position: (",Ce.currentX,", ",Ce.currentY,")"]})]}),o.jsxs(Ns,{children:[o.jsx(A,{variant:"outline",onClick:Pg,children:"Cancel"}),o.jsx(A,{onClick:()=>Ce&&Eg(Ce.currentX,Ce.currentY),children:"Confirm"})]})]})}),pg&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-black rounded-lg shadow-xl p-6 max-w-md mx-4 relative",children:[o.jsx("button",{onClick:()=>$u(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-gray-200 transition-colors",children:o.jsx(He,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:o.jsx(w0,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-white",children:"Export Successful"})]}),o.jsxs("p",{className:"text-gray-300 flex items-center gap-2",children:["Map files and tile definitions saved to",o.jsxs("span",{className:"inline-flex items-center gap-1 font-medium text-white",children:[o.jsx(go,{className:"w-4 h-4"}),"Export"]}),"."]})]})}),ur&&o.jsx("div",{className:`custom-tooltip ${ur.visible?"visible":""} ${ur.fadeOut?"fade-out":""}`,style:{left:ur.x,top:ur.y},children:ur.content})]})})}wa.createRoot(document.getElementById("root")).render(o.jsx(me.StrictMode,{children:o.jsx(W1,{})}));
