function Vp(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Zu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qu={exports:{}},Li={},Ju={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var us=Symbol.for("react.element"),Gp=Symbol.for("react.portal"),Kp=Symbol.for("react.fragment"),Qp=Symbol.for("react.strict_mode"),Zp=Symbol.for("react.profiler"),qp=Symbol.for("react.provider"),Jp=Symbol.for("react.context"),em=Symbol.for("react.forward_ref"),tm=Symbol.for("react.suspense"),nm=Symbol.for("react.memo"),rm=Symbol.for("react.lazy"),Sc=Symbol.iterator;function sm(t){return t===null||typeof t!="object"?null:(t=Sc&&t[Sc]||t["@@iterator"],typeof t=="function"?t:null)}var ed={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},td=Object.assign,nd={};function ar(t,e,n){this.props=t,this.context=e,this.refs=nd,this.updater=n||ed}ar.prototype.isReactComponent={};ar.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ar.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rd(){}rd.prototype=ar.prototype;function Gl(t,e,n){this.props=t,this.context=e,this.refs=nd,this.updater=n||ed}var Kl=Gl.prototype=new rd;Kl.constructor=Gl;td(Kl,ar.prototype);Kl.isPureReactComponent=!0;var kc=Array.isArray,sd=Object.prototype.hasOwnProperty,Ql={current:null},id={key:!0,ref:!0,__self:!0,__source:!0};function od(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)sd.call(e,r)&&!id.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:us,type:t,key:i,ref:o,props:s,_owner:Ql.current}}function im(t,e){return{$$typeof:us,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zl(t){return typeof t=="object"&&t!==null&&t.$$typeof===us}function om(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bc=/\/+/g;function io(t,e){return typeof t=="object"&&t!==null&&t.key!=null?om(""+t.key):e.toString(36)}function Xs(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case us:case Gp:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+io(o,0):r,kc(s)?(n="",t!=null&&(n=t.replace(bc,"$&/")+"/"),Xs(s,e,n,"",function(u){return u})):s!=null&&(Zl(s)&&(s=im(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(bc,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",kc(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+io(i,a);o+=Xs(i,e,n,c,s)}else if(c=sm(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+io(i,a++),o+=Xs(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function js(t,e,n){if(t==null)return t;var r=[],s=0;return Xs(t,r,"","",function(i){return e.call(n,i,s++)}),r}function lm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ae={current:null},Vs={transition:null},am={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:Vs,ReactCurrentOwner:Ql};function ld(){throw Error("act(...) is not supported in production builds of React.")}U.Children={map:js,forEach:function(t,e,n){js(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return js(t,function(){e++}),e},toArray:function(t){return js(t,function(e){return e})||[]},only:function(t){if(!Zl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};U.Component=ar;U.Fragment=Kp;U.Profiler=Zp;U.PureComponent=Gl;U.StrictMode=Qp;U.Suspense=tm;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=am;U.act=ld;U.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=td({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ql.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)sd.call(e,c)&&!id.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:us,type:t.type,key:s,ref:i,props:r,_owner:o}};U.createContext=function(t){return t={$$typeof:Jp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qp,_context:t},t.Consumer=t};U.createElement=od;U.createFactory=function(t){var e=od.bind(null,t);return e.type=t,e};U.createRef=function(){return{current:null}};U.forwardRef=function(t){return{$$typeof:em,render:t}};U.isValidElement=Zl;U.lazy=function(t){return{$$typeof:rm,_payload:{_status:-1,_result:t},_init:lm}};U.memo=function(t,e){return{$$typeof:nm,type:t,compare:e===void 0?null:e}};U.startTransition=function(t){var e=Vs.transition;Vs.transition={};try{t()}finally{Vs.transition=e}};U.unstable_act=ld;U.useCallback=function(t,e){return Ae.current.useCallback(t,e)};U.useContext=function(t){return Ae.current.useContext(t)};U.useDebugValue=function(){};U.useDeferredValue=function(t){return Ae.current.useDeferredValue(t)};U.useEffect=function(t,e){return Ae.current.useEffect(t,e)};U.useId=function(){return Ae.current.useId()};U.useImperativeHandle=function(t,e,n){return Ae.current.useImperativeHandle(t,e,n)};U.useInsertionEffect=function(t,e){return Ae.current.useInsertionEffect(t,e)};U.useLayoutEffect=function(t,e){return Ae.current.useLayoutEffect(t,e)};U.useMemo=function(t,e){return Ae.current.useMemo(t,e)};U.useReducer=function(t,e,n){return Ae.current.useReducer(t,e,n)};U.useRef=function(t){return Ae.current.useRef(t)};U.useState=function(t){return Ae.current.useState(t)};U.useSyncExternalStore=function(t,e,n){return Ae.current.useSyncExternalStore(t,e,n)};U.useTransition=function(){return Ae.current.useTransition()};U.version="18.3.1";Ju.exports=U;var y=Ju.exports;const he=Zu(y),cm=Vp({__proto__:null,default:he},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var um=y,dm=Symbol.for("react.element"),hm=Symbol.for("react.fragment"),fm=Object.prototype.hasOwnProperty,pm=um.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mm={key:!0,ref:!0,__self:!0,__source:!0};function ad(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)fm.call(e,r)&&!mm.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:dm,type:t,key:i,ref:o,props:s,_owner:pm.current}}Li.Fragment=hm;Li.jsx=ad;Li.jsxs=ad;qu.exports=Li;var l=qu.exports,Go={},cd={exports:{}},Ze={},ud={exports:{}},dd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,R){var O=L.length;L.push(R);e:for(;0<O;){var V=O-1>>>1,G=L[V];if(0<s(G,R))L[V]=R,L[O]=G,O=V;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var R=L[0],O=L.pop();if(O!==R){L[0]=O;e:for(var V=0,G=L.length,J=G>>>1;V<J;){var be=2*(V+1)-1,ln=L[be],ie=be+1,Je=L[ie];if(0>s(ln,O))ie<G&&0>s(Je,ln)?(L[V]=Je,L[ie]=O,V=ie):(L[V]=ln,L[be]=O,V=be);else if(ie<G&&0>s(Je,O))L[V]=Je,L[ie]=O,V=ie;else break e}}return R}function s(L,R){var O=L.sortIndex-R.sortIndex;return O!==0?O:L.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,h=null,f=3,S=!1,v=!1,k=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(L){for(var R=n(u);R!==null;){if(R.callback===null)r(u);else if(R.startTime<=L)r(u),R.sortIndex=R.expirationTime,e(c,R);else break;R=n(u)}}function x(L){if(k=!1,m(L),!v)if(n(c)!==null)v=!0,ge(j);else{var R=n(u);R!==null&&ke(x,R.startTime-L)}}function j(L,R){v=!1,k&&(k=!1,g(E),E=-1),S=!0;var O=f;try{for(m(R),h=n(c);h!==null&&(!(h.expirationTime>R)||L&&!q());){var V=h.callback;if(typeof V=="function"){h.callback=null,f=h.priorityLevel;var G=V(h.expirationTime<=R);R=t.unstable_now(),typeof G=="function"?h.callback=G:h===n(c)&&r(c),m(R)}else r(c);h=n(c)}if(h!==null)var J=!0;else{var be=n(u);be!==null&&ke(x,be.startTime-R),J=!1}return J}finally{h=null,f=O,S=!1}}var N=!1,C=null,E=-1,$=5,z=-1;function q(){return!(t.unstable_now()-z<$)}function D(){if(C!==null){var L=t.unstable_now();z=L;var R=!0;try{R=C(!0,L)}finally{R?ce():(N=!1,C=null)}}else N=!1}var ce;if(typeof p=="function")ce=function(){p(D)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ue=H.port2;H.port1.onmessage=D,ce=function(){ue.postMessage(null)}}else ce=function(){b(D,0)};function ge(L){C=L,N||(N=!0,ce())}function ke(L,R){E=b(function(){L(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){v||S||(v=!0,ge(j))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var O=f;f=R;try{return L()}finally{f=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,R){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var O=f;f=L;try{return R()}finally{f=O}},t.unstable_scheduleCallback=function(L,R,O){var V=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?V+O:V):O=V,L){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=O+G,L={id:d++,callback:R,priorityLevel:L,startTime:O,expirationTime:G,sortIndex:-1},O>V?(L.sortIndex=O,e(u,L),n(c)===null&&L===n(u)&&(k?(g(E),E=-1):k=!0,ke(x,O-V))):(L.sortIndex=G,e(c,L),v||S||(v=!0,ge(j))),L},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(L){var R=f;return function(){var O=f;f=R;try{return L.apply(this,arguments)}finally{f=O}}}})(dd);ud.exports=dd;var gm=ud.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym=y,Qe=gm;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hd=new Set,Xr={};function Tn(t,e){tr(t,e),tr(t+"Capture",e)}function tr(t,e){for(Xr[t]=e,t=0;t<e.length;t++)hd.add(e[t])}var At=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ko=Object.prototype.hasOwnProperty,vm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jc={},Nc={};function xm(t){return Ko.call(Nc,t)?!0:Ko.call(jc,t)?!1:vm.test(t)?Nc[t]=!0:(jc[t]=!0,!1)}function wm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Sm(t,e,n,r){if(e===null||typeof e>"u"||wm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _e(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ce[t]=new _e(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ce[e]=new _e(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ce[t]=new _e(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ce[t]=new _e(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ce[t]=new _e(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ce[t]=new _e(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ce[t]=new _e(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ce[t]=new _e(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ce[t]=new _e(t,5,!1,t.toLowerCase(),null,!1,!1)});var ql=/[\-:]([a-z])/g;function Jl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ql,Jl);Ce[e]=new _e(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ql,Jl);Ce[e]=new _e(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ql,Jl);Ce[e]=new _e(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ce[t]=new _e(t,1,!1,t.toLowerCase(),null,!1,!1)});Ce.xlinkHref=new _e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ce[t]=new _e(t,1,!1,t.toLowerCase(),null,!0,!0)});function ea(t,e,n,r){var s=Ce.hasOwnProperty(e)?Ce[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Sm(e,n,s,r)&&(n=null),r||s===null?xm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ot=ym.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ns=Symbol.for("react.element"),Rn=Symbol.for("react.portal"),On=Symbol.for("react.fragment"),ta=Symbol.for("react.strict_mode"),Qo=Symbol.for("react.profiler"),fd=Symbol.for("react.provider"),pd=Symbol.for("react.context"),na=Symbol.for("react.forward_ref"),Zo=Symbol.for("react.suspense"),qo=Symbol.for("react.suspense_list"),ra=Symbol.for("react.memo"),Ht=Symbol.for("react.lazy"),md=Symbol.for("react.offscreen"),Cc=Symbol.iterator;function Sr(t){return t===null||typeof t!="object"?null:(t=Cc&&t[Cc]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,oo;function zr(t){if(oo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);oo=e&&e[1]||""}return`
`+oo+t}var lo=!1;function ao(t,e){if(!t||lo)return"";lo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{lo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zr(t):""}function km(t){switch(t.tag){case 5:return zr(t.type);case 16:return zr("Lazy");case 13:return zr("Suspense");case 19:return zr("SuspenseList");case 0:case 2:case 15:return t=ao(t.type,!1),t;case 11:return t=ao(t.type.render,!1),t;case 1:return t=ao(t.type,!0),t;default:return""}}function Jo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case On:return"Fragment";case Rn:return"Portal";case Qo:return"Profiler";case ta:return"StrictMode";case Zo:return"Suspense";case qo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pd:return(t.displayName||"Context")+".Consumer";case fd:return(t._context.displayName||"Context")+".Provider";case na:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ra:return e=t.displayName||null,e!==null?e:Jo(t.type)||"Memo";case Ht:e=t._payload,t=t._init;try{return Jo(t(e))}catch{}}return null}function bm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jo(e);case 8:return e===ta?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jm(t){var e=gd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cs(t){t._valueTracker||(t._valueTracker=jm(t))}function yd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function oi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function el(t,e){var n=e.checked;return ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=tn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vd(t,e){e=e.checked,e!=null&&ea(t,"checked",e,!1)}function tl(t,e){vd(t,e);var n=tn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nl(t,e.type,n):e.hasOwnProperty("defaultValue")&&nl(t,e.type,tn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ec(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nl(t,e,n){(e!=="number"||oi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ir=Array.isArray;function Kn(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+tn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function rl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Ir(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tn(n)}}function xd(t,e){var n=tn(e.value),r=tn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ts,Sd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ts=Ts||document.createElement("div"),Ts.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ts.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nm=["Webkit","ms","Moz","O"];Object.keys(Dr).forEach(function(t){Nm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dr[e]=Dr[t]})});function kd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dr.hasOwnProperty(t)&&Dr[t]?(""+e).trim():e+"px"}function bd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=kd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Cm=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function il(t,e){if(e){if(Cm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function ol(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ll=null;function sa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var al=null,Qn=null,Zn=null;function Lc(t){if(t=fs(t)){if(typeof al!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Di(e),al(t.stateNode,t.type,e))}}function jd(t){Qn?Zn?Zn.push(t):Zn=[t]:Qn=t}function Nd(){if(Qn){var t=Qn,e=Zn;if(Zn=Qn=null,Lc(t),e)for(t=0;t<e.length;t++)Lc(e[t])}}function Cd(t,e){return t(e)}function Td(){}var co=!1;function Ed(t,e,n){if(co)return t(e,n);co=!0;try{return Cd(t,e,n)}finally{co=!1,(Qn!==null||Zn!==null)&&(Td(),Nd())}}function Gr(t,e){var n=t.stateNode;if(n===null)return null;var r=Di(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var cl=!1;if(At)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){cl=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{cl=!1}function Tm(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Rr=!1,li=null,ai=!1,ul=null,Em={onError:function(t){Rr=!0,li=t}};function Mm(t,e,n,r,s,i,o,a,c){Rr=!1,li=null,Tm.apply(Em,arguments)}function Pm(t,e,n,r,s,i,o,a,c){if(Mm.apply(this,arguments),Rr){if(Rr){var u=li;Rr=!1,li=null}else throw Error(M(198));ai||(ai=!0,ul=u)}}function En(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Md(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zc(t){if(En(t)!==t)throw Error(M(188))}function Lm(t){var e=t.alternate;if(!e){if(e=En(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return zc(s),t;if(i===r)return zc(s),e;i=i.sibling}throw Error(M(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function Pd(t){return t=Lm(t),t!==null?Ld(t):null}function Ld(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ld(t);if(e!==null)return e;t=t.sibling}return null}var zd=Qe.unstable_scheduleCallback,Ic=Qe.unstable_cancelCallback,zm=Qe.unstable_shouldYield,Im=Qe.unstable_requestPaint,fe=Qe.unstable_now,Am=Qe.unstable_getCurrentPriorityLevel,ia=Qe.unstable_ImmediatePriority,Id=Qe.unstable_UserBlockingPriority,ci=Qe.unstable_NormalPriority,_m=Qe.unstable_LowPriority,Ad=Qe.unstable_IdlePriority,zi=null,wt=null;function Dm(t){if(wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(zi,t,void 0,(t.current.flags&128)===128)}catch{}}var pt=Math.clz32?Math.clz32:$m,Rm=Math.log,Om=Math.LN2;function $m(t){return t>>>=0,t===0?32:31-(Rm(t)/Om|0)|0}var Es=64,Ms=4194304;function Ar(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ui(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ar(a):(i&=o,i!==0&&(r=Ar(i)))}else o=n&~s,o!==0?r=Ar(o):i!==0&&(r=Ar(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pt(e),s=1<<n,r|=t[n],e&=~s;return r}function Fm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hm(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-pt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Fm(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function dl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _d(){var t=Es;return Es<<=1,!(Es&4194240)&&(Es=64),t}function uo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ds(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pt(e),t[e]=n}function Wm(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-pt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function oa(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Z=0;function Dd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Rd,la,Od,$d,Fd,hl=!1,Ps=[],Vt=null,Gt=null,Kt=null,Kr=new Map,Qr=new Map,Bt=[],Bm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ac(t,e){switch(t){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":Kt=null;break;case"pointerover":case"pointerout":Kr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qr.delete(e.pointerId)}}function br(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fs(e),e!==null&&la(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ym(t,e,n,r,s){switch(e){case"focusin":return Vt=br(Vt,t,e,n,r,s),!0;case"dragenter":return Gt=br(Gt,t,e,n,r,s),!0;case"mouseover":return Kt=br(Kt,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Kr.set(i,br(Kr.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Qr.set(i,br(Qr.get(i)||null,t,e,n,r,s)),!0}return!1}function Hd(t){var e=pn(t.target);if(e!==null){var n=En(e);if(n!==null){if(e=n.tag,e===13){if(e=Md(n),e!==null){t.blockedOn=e,Fd(t.priority,function(){Od(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ll=r,n.target.dispatchEvent(r),ll=null}else return e=fs(n),e!==null&&la(e),t.blockedOn=n,!1;e.shift()}return!0}function _c(t,e,n){Gs(t)&&n.delete(e)}function Um(){hl=!1,Vt!==null&&Gs(Vt)&&(Vt=null),Gt!==null&&Gs(Gt)&&(Gt=null),Kt!==null&&Gs(Kt)&&(Kt=null),Kr.forEach(_c),Qr.forEach(_c)}function jr(t,e){t.blockedOn===e&&(t.blockedOn=null,hl||(hl=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,Um)))}function Zr(t){function e(s){return jr(s,t)}if(0<Ps.length){jr(Ps[0],t);for(var n=1;n<Ps.length;n++){var r=Ps[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vt!==null&&jr(Vt,t),Gt!==null&&jr(Gt,t),Kt!==null&&jr(Kt,t),Kr.forEach(e),Qr.forEach(e),n=0;n<Bt.length;n++)r=Bt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Bt.length&&(n=Bt[0],n.blockedOn===null);)Hd(n),n.blockedOn===null&&Bt.shift()}var qn=Ot.ReactCurrentBatchConfig,di=!0;function Xm(t,e,n,r){var s=Z,i=qn.transition;qn.transition=null;try{Z=1,aa(t,e,n,r)}finally{Z=s,qn.transition=i}}function Vm(t,e,n,r){var s=Z,i=qn.transition;qn.transition=null;try{Z=4,aa(t,e,n,r)}finally{Z=s,qn.transition=i}}function aa(t,e,n,r){if(di){var s=fl(t,e,n,r);if(s===null)So(t,e,r,hi,n),Ac(t,r);else if(Ym(s,t,e,n,r))r.stopPropagation();else if(Ac(t,r),e&4&&-1<Bm.indexOf(t)){for(;s!==null;){var i=fs(s);if(i!==null&&Rd(i),i=fl(t,e,n,r),i===null&&So(t,e,r,hi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else So(t,e,r,null,n)}}var hi=null;function fl(t,e,n,r){if(hi=null,t=sa(r),t=pn(t),t!==null)if(e=En(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Md(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hi=t,null}function Wd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Am()){case ia:return 1;case Id:return 4;case ci:case _m:return 16;case Ad:return 536870912;default:return 16}default:return 16}}var Ut=null,ca=null,Ks=null;function Bd(){if(Ks)return Ks;var t,e=ca,n=e.length,r,s="value"in Ut?Ut.value:Ut.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ks=s.slice(t,1<r?1-r:void 0)}function Qs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ls(){return!0}function Dc(){return!1}function qe(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ls:Dc,this.isPropagationStopped=Dc,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),e}var cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=qe(cr),hs=ae({},cr,{view:0,detail:0}),Gm=qe(hs),ho,fo,Nr,Ii=ae({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:da,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nr&&(Nr&&t.type==="mousemove"?(ho=t.screenX-Nr.screenX,fo=t.screenY-Nr.screenY):fo=ho=0,Nr=t),ho)},movementY:function(t){return"movementY"in t?t.movementY:fo}}),Rc=qe(Ii),Km=ae({},Ii,{dataTransfer:0}),Qm=qe(Km),Zm=ae({},hs,{relatedTarget:0}),po=qe(Zm),qm=ae({},cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Jm=qe(qm),eg=ae({},cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tg=qe(eg),ng=ae({},cr,{data:0}),Oc=qe(ng),rg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ig={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function og(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ig[t])?!!e[t]:!1}function da(){return og}var lg=ae({},hs,{key:function(t){if(t.key){var e=rg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:da,charCode:function(t){return t.type==="keypress"?Qs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ag=qe(lg),cg=ae({},Ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$c=qe(cg),ug=ae({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:da}),dg=qe(ug),hg=ae({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),fg=qe(hg),pg=ae({},Ii,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mg=qe(pg),gg=[9,13,27,32],ha=At&&"CompositionEvent"in window,Or=null;At&&"documentMode"in document&&(Or=document.documentMode);var yg=At&&"TextEvent"in window&&!Or,Yd=At&&(!ha||Or&&8<Or&&11>=Or),Fc=" ",Hc=!1;function Ud(t,e){switch(t){case"keyup":return gg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $n=!1;function vg(t,e){switch(t){case"compositionend":return Xd(e);case"keypress":return e.which!==32?null:(Hc=!0,Fc);case"textInput":return t=e.data,t===Fc&&Hc?null:t;default:return null}}function xg(t,e){if($n)return t==="compositionend"||!ha&&Ud(t,e)?(t=Bd(),Ks=ca=Ut=null,$n=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yd&&e.locale!=="ko"?null:e.data;default:return null}}var wg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wg[t.type]:e==="textarea"}function Vd(t,e,n,r){jd(r),e=fi(e,"onChange"),0<e.length&&(n=new ua("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $r=null,qr=null;function Sg(t){sh(t,0)}function Ai(t){var e=Wn(t);if(yd(e))return t}function kg(t,e){if(t==="change")return e}var Gd=!1;if(At){var mo;if(At){var go="oninput"in document;if(!go){var Bc=document.createElement("div");Bc.setAttribute("oninput","return;"),go=typeof Bc.oninput=="function"}mo=go}else mo=!1;Gd=mo&&(!document.documentMode||9<document.documentMode)}function Yc(){$r&&($r.detachEvent("onpropertychange",Kd),qr=$r=null)}function Kd(t){if(t.propertyName==="value"&&Ai(qr)){var e=[];Vd(e,qr,t,sa(t)),Ed(Sg,e)}}function bg(t,e,n){t==="focusin"?(Yc(),$r=e,qr=n,$r.attachEvent("onpropertychange",Kd)):t==="focusout"&&Yc()}function jg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ai(qr)}function Ng(t,e){if(t==="click")return Ai(e)}function Cg(t,e){if(t==="input"||t==="change")return Ai(e)}function Tg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gt=typeof Object.is=="function"?Object.is:Tg;function Jr(t,e){if(gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ko.call(e,s)||!gt(t[s],e[s]))return!1}return!0}function Uc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xc(t,e){var n=Uc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uc(n)}}function Qd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zd(){for(var t=window,e=oi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=oi(t.document)}return e}function fa(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Eg(t){var e=Zd(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Qd(n.ownerDocument.documentElement,n)){if(r!==null&&fa(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Xc(n,i);var o=Xc(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Mg=At&&"documentMode"in document&&11>=document.documentMode,Fn=null,pl=null,Fr=null,ml=!1;function Vc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ml||Fn==null||Fn!==oi(r)||(r=Fn,"selectionStart"in r&&fa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fr&&Jr(Fr,r)||(Fr=r,r=fi(pl,"onSelect"),0<r.length&&(e=new ua("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fn)))}function zs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hn={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionend:zs("Transition","TransitionEnd")},yo={},qd={};At&&(qd=document.createElement("div").style,"AnimationEvent"in window||(delete Hn.animationend.animation,delete Hn.animationiteration.animation,delete Hn.animationstart.animation),"TransitionEvent"in window||delete Hn.transitionend.transition);function _i(t){if(yo[t])return yo[t];if(!Hn[t])return t;var e=Hn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qd)return yo[t]=e[n];return t}var Jd=_i("animationend"),eh=_i("animationiteration"),th=_i("animationstart"),nh=_i("transitionend"),rh=new Map,Gc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rn(t,e){rh.set(t,e),Tn(e,[t])}for(var vo=0;vo<Gc.length;vo++){var xo=Gc[vo],Pg=xo.toLowerCase(),Lg=xo[0].toUpperCase()+xo.slice(1);rn(Pg,"on"+Lg)}rn(Jd,"onAnimationEnd");rn(eh,"onAnimationIteration");rn(th,"onAnimationStart");rn("dblclick","onDoubleClick");rn("focusin","onFocus");rn("focusout","onBlur");rn(nh,"onTransitionEnd");tr("onMouseEnter",["mouseout","mouseover"]);tr("onMouseLeave",["mouseout","mouseover"]);tr("onPointerEnter",["pointerout","pointerover"]);tr("onPointerLeave",["pointerout","pointerover"]);Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zg=new Set("cancel close invalid load scroll toggle".split(" ").concat(_r));function Kc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Pm(r,e,void 0,t),t.currentTarget=null}function sh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Kc(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Kc(s,a,u),i=c}}}if(ai)throw t=ul,ai=!1,ul=null,t}function ne(t,e){var n=e[wl];n===void 0&&(n=e[wl]=new Set);var r=t+"__bubble";n.has(r)||(ih(e,t,2,!1),n.add(r))}function wo(t,e,n){var r=0;e&&(r|=4),ih(n,t,r,e)}var Is="_reactListening"+Math.random().toString(36).slice(2);function es(t){if(!t[Is]){t[Is]=!0,hd.forEach(function(n){n!=="selectionchange"&&(zg.has(n)||wo(n,!1,t),wo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Is]||(e[Is]=!0,wo("selectionchange",!1,e))}}function ih(t,e,n,r){switch(Wd(e)){case 1:var s=Xm;break;case 4:s=Vm;break;default:s=aa}n=s.bind(null,e,n,t),s=void 0,!cl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function So(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=pn(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Ed(function(){var u=i,d=sa(n),h=[];e:{var f=rh.get(t);if(f!==void 0){var S=ua,v=t;switch(t){case"keypress":if(Qs(n)===0)break e;case"keydown":case"keyup":S=ag;break;case"focusin":v="focus",S=po;break;case"focusout":v="blur",S=po;break;case"beforeblur":case"afterblur":S=po;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Rc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Qm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=dg;break;case Jd:case eh:case th:S=Jm;break;case nh:S=fg;break;case"scroll":S=Gm;break;case"wheel":S=mg;break;case"copy":case"cut":case"paste":S=tg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=$c}var k=(e&4)!==0,b=!k&&t==="scroll",g=k?f!==null?f+"Capture":null:f;k=[];for(var p=u,m;p!==null;){m=p;var x=m.stateNode;if(m.tag===5&&x!==null&&(m=x,g!==null&&(x=Gr(p,g),x!=null&&k.push(ts(p,x,m)))),b)break;p=p.return}0<k.length&&(f=new S(f,v,null,n,d),h.push({event:f,listeners:k}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",f&&n!==ll&&(v=n.relatedTarget||n.fromElement)&&(pn(v)||v[_t]))break e;if((S||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,S?(v=n.relatedTarget||n.toElement,S=u,v=v?pn(v):null,v!==null&&(b=En(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(S=null,v=u),S!==v)){if(k=Rc,x="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(k=$c,x="onPointerLeave",g="onPointerEnter",p="pointer"),b=S==null?f:Wn(S),m=v==null?f:Wn(v),f=new k(x,p+"leave",S,n,d),f.target=b,f.relatedTarget=m,x=null,pn(d)===u&&(k=new k(g,p+"enter",v,n,d),k.target=m,k.relatedTarget=b,x=k),b=x,S&&v)t:{for(k=S,g=v,p=0,m=k;m;m=_n(m))p++;for(m=0,x=g;x;x=_n(x))m++;for(;0<p-m;)k=_n(k),p--;for(;0<m-p;)g=_n(g),m--;for(;p--;){if(k===g||g!==null&&k===g.alternate)break t;k=_n(k),g=_n(g)}k=null}else k=null;S!==null&&Qc(h,f,S,k,!1),v!==null&&b!==null&&Qc(h,b,v,k,!0)}}e:{if(f=u?Wn(u):window,S=f.nodeName&&f.nodeName.toLowerCase(),S==="select"||S==="input"&&f.type==="file")var j=kg;else if(Wc(f))if(Gd)j=Cg;else{j=jg;var N=bg}else(S=f.nodeName)&&S.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=Ng);if(j&&(j=j(t,u))){Vd(h,j,n,d);break e}N&&N(t,f,u),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&nl(f,"number",f.value)}switch(N=u?Wn(u):window,t){case"focusin":(Wc(N)||N.contentEditable==="true")&&(Fn=N,pl=u,Fr=null);break;case"focusout":Fr=pl=Fn=null;break;case"mousedown":ml=!0;break;case"contextmenu":case"mouseup":case"dragend":ml=!1,Vc(h,n,d);break;case"selectionchange":if(Mg)break;case"keydown":case"keyup":Vc(h,n,d)}var C;if(ha)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else $n?Ud(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Yd&&n.locale!=="ko"&&($n||E!=="onCompositionStart"?E==="onCompositionEnd"&&$n&&(C=Bd()):(Ut=d,ca="value"in Ut?Ut.value:Ut.textContent,$n=!0)),N=fi(u,E),0<N.length&&(E=new Oc(E,t,null,n,d),h.push({event:E,listeners:N}),C?E.data=C:(C=Xd(n),C!==null&&(E.data=C)))),(C=yg?vg(t,n):xg(t,n))&&(u=fi(u,"onBeforeInput"),0<u.length&&(d=new Oc("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=C))}sh(h,e)})}function ts(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fi(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Gr(t,n),i!=null&&r.unshift(ts(t,i,s)),i=Gr(t,e),i!=null&&r.push(ts(t,i,s))),t=t.return}return r}function _n(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qc(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Gr(n,i),c!=null&&o.unshift(ts(n,c,a))):s||(c=Gr(n,i),c!=null&&o.push(ts(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Ig=/\r\n?/g,Ag=/\u0000|\uFFFD/g;function Zc(t){return(typeof t=="string"?t:""+t).replace(Ig,`
`).replace(Ag,"")}function As(t,e,n){if(e=Zc(e),Zc(t)!==e&&n)throw Error(M(425))}function pi(){}var gl=null,yl=null;function vl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xl=typeof setTimeout=="function"?setTimeout:void 0,_g=typeof clearTimeout=="function"?clearTimeout:void 0,qc=typeof Promise=="function"?Promise:void 0,Dg=typeof queueMicrotask=="function"?queueMicrotask:typeof qc<"u"?function(t){return qc.resolve(null).then(t).catch(Rg)}:xl;function Rg(t){setTimeout(function(){throw t})}function ko(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Zr(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Zr(e)}function Qt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ur=Math.random().toString(36).slice(2),xt="__reactFiber$"+ur,ns="__reactProps$"+ur,_t="__reactContainer$"+ur,wl="__reactEvents$"+ur,Og="__reactListeners$"+ur,$g="__reactHandles$"+ur;function pn(t){var e=t[xt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_t]||n[xt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jc(t);t!==null;){if(n=t[xt])return n;t=Jc(t)}return e}t=n,n=t.parentNode}return null}function fs(t){return t=t[xt]||t[_t],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Di(t){return t[ns]||null}var Sl=[],Bn=-1;function sn(t){return{current:t}}function re(t){0>Bn||(t.current=Sl[Bn],Sl[Bn]=null,Bn--)}function ee(t,e){Bn++,Sl[Bn]=t.current,t.current=e}var nn={},Pe=sn(nn),Fe=sn(!1),wn=nn;function nr(t,e){var n=t.type.contextTypes;if(!n)return nn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function He(t){return t=t.childContextTypes,t!=null}function mi(){re(Fe),re(Pe)}function eu(t,e,n){if(Pe.current!==nn)throw Error(M(168));ee(Pe,e),ee(Fe,n)}function oh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(M(108,bm(t)||"Unknown",s));return ae({},n,r)}function gi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nn,wn=Pe.current,ee(Pe,t),ee(Fe,Fe.current),!0}function tu(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=oh(t,e,wn),r.__reactInternalMemoizedMergedChildContext=t,re(Fe),re(Pe),ee(Pe,t)):re(Fe),ee(Fe,n)}var Pt=null,Ri=!1,bo=!1;function lh(t){Pt===null?Pt=[t]:Pt.push(t)}function Fg(t){Ri=!0,lh(t)}function on(){if(!bo&&Pt!==null){bo=!0;var t=0,e=Z;try{var n=Pt;for(Z=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pt=null,Ri=!1}catch(s){throw Pt!==null&&(Pt=Pt.slice(t+1)),zd(ia,on),s}finally{Z=e,bo=!1}}return null}var Yn=[],Un=0,yi=null,vi=0,nt=[],rt=0,Sn=null,Lt=1,zt="";function dn(t,e){Yn[Un++]=vi,Yn[Un++]=yi,yi=t,vi=e}function ah(t,e,n){nt[rt++]=Lt,nt[rt++]=zt,nt[rt++]=Sn,Sn=t;var r=Lt;t=zt;var s=32-pt(r)-1;r&=~(1<<s),n+=1;var i=32-pt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Lt=1<<32-pt(e)+s|n<<s|r,zt=i+t}else Lt=1<<i|n<<s|r,zt=t}function pa(t){t.return!==null&&(dn(t,1),ah(t,1,0))}function ma(t){for(;t===yi;)yi=Yn[--Un],Yn[Un]=null,vi=Yn[--Un],Yn[Un]=null;for(;t===Sn;)Sn=nt[--rt],nt[rt]=null,zt=nt[--rt],nt[rt]=null,Lt=nt[--rt],nt[rt]=null}var Ke=null,Ge=null,se=!1,ft=null;function ch(t,e){var n=st(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ke=t,Ge=Qt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ke=t,Ge=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Sn!==null?{id:Lt,overflow:zt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=st(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ke=t,Ge=null,!0):!1;default:return!1}}function kl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bl(t){if(se){var e=Ge;if(e){var n=e;if(!nu(t,e)){if(kl(t))throw Error(M(418));e=Qt(n.nextSibling);var r=Ke;e&&nu(t,e)?ch(r,n):(t.flags=t.flags&-4097|2,se=!1,Ke=t)}}else{if(kl(t))throw Error(M(418));t.flags=t.flags&-4097|2,se=!1,Ke=t}}}function ru(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ke=t}function _s(t){if(t!==Ke)return!1;if(!se)return ru(t),se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vl(t.type,t.memoizedProps)),e&&(e=Ge)){if(kl(t))throw uh(),Error(M(418));for(;e;)ch(t,e),e=Qt(e.nextSibling)}if(ru(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ge=Qt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ge=null}}else Ge=Ke?Qt(t.stateNode.nextSibling):null;return!0}function uh(){for(var t=Ge;t;)t=Qt(t.nextSibling)}function rr(){Ge=Ke=null,se=!1}function ga(t){ft===null?ft=[t]:ft.push(t)}var Hg=Ot.ReactCurrentBatchConfig;function Cr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Ds(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function su(t){var e=t._init;return e(t._payload)}function dh(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=en(g,p),g.index=0,g.sibling=null,g}function i(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,p,m,x){return p===null||p.tag!==6?(p=Po(m,g.mode,x),p.return=g,p):(p=s(p,m),p.return=g,p)}function c(g,p,m,x){var j=m.type;return j===On?d(g,p,m.props.children,x,m.key):p!==null&&(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ht&&su(j)===p.type)?(x=s(p,m.props),x.ref=Cr(g,p,m),x.return=g,x):(x=ri(m.type,m.key,m.props,null,g.mode,x),x.ref=Cr(g,p,m),x.return=g,x)}function u(g,p,m,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=Lo(m,g.mode,x),p.return=g,p):(p=s(p,m.children||[]),p.return=g,p)}function d(g,p,m,x,j){return p===null||p.tag!==7?(p=xn(m,g.mode,x,j),p.return=g,p):(p=s(p,m),p.return=g,p)}function h(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Po(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ns:return m=ri(p.type,p.key,p.props,null,g.mode,m),m.ref=Cr(g,null,p),m.return=g,m;case Rn:return p=Lo(p,g.mode,m),p.return=g,p;case Ht:var x=p._init;return h(g,x(p._payload),m)}if(Ir(p)||Sr(p))return p=xn(p,g.mode,m,null),p.return=g,p;Ds(g,p)}return null}function f(g,p,m,x){var j=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return j!==null?null:a(g,p,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ns:return m.key===j?c(g,p,m,x):null;case Rn:return m.key===j?u(g,p,m,x):null;case Ht:return j=m._init,f(g,p,j(m._payload),x)}if(Ir(m)||Sr(m))return j!==null?null:d(g,p,m,x,null);Ds(g,m)}return null}function S(g,p,m,x,j){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(m)||null,a(p,g,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ns:return g=g.get(x.key===null?m:x.key)||null,c(p,g,x,j);case Rn:return g=g.get(x.key===null?m:x.key)||null,u(p,g,x,j);case Ht:var N=x._init;return S(g,p,m,N(x._payload),j)}if(Ir(x)||Sr(x))return g=g.get(m)||null,d(p,g,x,j,null);Ds(p,x)}return null}function v(g,p,m,x){for(var j=null,N=null,C=p,E=p=0,$=null;C!==null&&E<m.length;E++){C.index>E?($=C,C=null):$=C.sibling;var z=f(g,C,m[E],x);if(z===null){C===null&&(C=$);break}t&&C&&z.alternate===null&&e(g,C),p=i(z,p,E),N===null?j=z:N.sibling=z,N=z,C=$}if(E===m.length)return n(g,C),se&&dn(g,E),j;if(C===null){for(;E<m.length;E++)C=h(g,m[E],x),C!==null&&(p=i(C,p,E),N===null?j=C:N.sibling=C,N=C);return se&&dn(g,E),j}for(C=r(g,C);E<m.length;E++)$=S(C,g,E,m[E],x),$!==null&&(t&&$.alternate!==null&&C.delete($.key===null?E:$.key),p=i($,p,E),N===null?j=$:N.sibling=$,N=$);return t&&C.forEach(function(q){return e(g,q)}),se&&dn(g,E),j}function k(g,p,m,x){var j=Sr(m);if(typeof j!="function")throw Error(M(150));if(m=j.call(m),m==null)throw Error(M(151));for(var N=j=null,C=p,E=p=0,$=null,z=m.next();C!==null&&!z.done;E++,z=m.next()){C.index>E?($=C,C=null):$=C.sibling;var q=f(g,C,z.value,x);if(q===null){C===null&&(C=$);break}t&&C&&q.alternate===null&&e(g,C),p=i(q,p,E),N===null?j=q:N.sibling=q,N=q,C=$}if(z.done)return n(g,C),se&&dn(g,E),j;if(C===null){for(;!z.done;E++,z=m.next())z=h(g,z.value,x),z!==null&&(p=i(z,p,E),N===null?j=z:N.sibling=z,N=z);return se&&dn(g,E),j}for(C=r(g,C);!z.done;E++,z=m.next())z=S(C,g,E,z.value,x),z!==null&&(t&&z.alternate!==null&&C.delete(z.key===null?E:z.key),p=i(z,p,E),N===null?j=z:N.sibling=z,N=z);return t&&C.forEach(function(D){return e(g,D)}),se&&dn(g,E),j}function b(g,p,m,x){if(typeof m=="object"&&m!==null&&m.type===On&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Ns:e:{for(var j=m.key,N=p;N!==null;){if(N.key===j){if(j=m.type,j===On){if(N.tag===7){n(g,N.sibling),p=s(N,m.props.children),p.return=g,g=p;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ht&&su(j)===N.type){n(g,N.sibling),p=s(N,m.props),p.ref=Cr(g,N,m),p.return=g,g=p;break e}n(g,N);break}else e(g,N);N=N.sibling}m.type===On?(p=xn(m.props.children,g.mode,x,m.key),p.return=g,g=p):(x=ri(m.type,m.key,m.props,null,g.mode,x),x.ref=Cr(g,p,m),x.return=g,g=x)}return o(g);case Rn:e:{for(N=m.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=s(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=Lo(m,g.mode,x),p.return=g,g=p}return o(g);case Ht:return N=m._init,b(g,p,N(m._payload),x)}if(Ir(m))return v(g,p,m,x);if(Sr(m))return k(g,p,m,x);Ds(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=s(p,m),p.return=g,g=p):(n(g,p),p=Po(m,g.mode,x),p.return=g,g=p),o(g)):n(g,p)}return b}var sr=dh(!0),hh=dh(!1),xi=sn(null),wi=null,Xn=null,ya=null;function va(){ya=Xn=wi=null}function xa(t){var e=xi.current;re(xi),t._currentValue=e}function jl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jn(t,e){wi=t,ya=Xn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($e=!0),t.firstContext=null)}function ot(t){var e=t._currentValue;if(ya!==t)if(t={context:t,memoizedValue:e,next:null},Xn===null){if(wi===null)throw Error(M(308));Xn=t,wi.dependencies={lanes:0,firstContext:t}}else Xn=Xn.next=t;return e}var mn=null;function wa(t){mn===null?mn=[t]:mn.push(t)}function fh(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,wa(e)):(n.next=s.next,s.next=n),e.interleaved=n,Dt(t,r)}function Dt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wt=!1;function Sa(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ph(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function It(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,K&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Dt(t,n)}return s=r.interleaved,s===null?(e.next=e,wa(r)):(e.next=s.next,s.next=e),r.interleaved=e,Dt(t,n)}function Zs(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,oa(t,n)}}function iu(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Si(t,e,n,r){var s=t.updateQueue;Wt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,a=i;do{var f=a.lane,S=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:S,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,k=a;switch(f=e,S=n,k.tag){case 1:if(v=k.payload,typeof v=="function"){h=v.call(S,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=k.payload,f=typeof v=="function"?v.call(S,h,f):v,f==null)break e;h=ae({},h,f);break e;case 2:Wt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else S={eventTime:S,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=S,c=h):d=d.next=S,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);bn|=o,t.lanes=o,t.memoizedState=h}}function ou(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(M(191,s));s.call(r)}}}var ps={},St=sn(ps),rs=sn(ps),ss=sn(ps);function gn(t){if(t===ps)throw Error(M(174));return t}function ka(t,e){switch(ee(ss,e),ee(rs,t),ee(St,ps),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sl(e,t)}re(St),ee(St,e)}function ir(){re(St),re(rs),re(ss)}function mh(t){gn(ss.current);var e=gn(St.current),n=sl(e,t.type);e!==n&&(ee(rs,t),ee(St,n))}function ba(t){rs.current===t&&(re(St),re(rs))}var oe=sn(0);function ki(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jo=[];function ja(){for(var t=0;t<jo.length;t++)jo[t]._workInProgressVersionPrimary=null;jo.length=0}var qs=Ot.ReactCurrentDispatcher,No=Ot.ReactCurrentBatchConfig,kn=0,le=null,ve=null,we=null,bi=!1,Hr=!1,is=0,Wg=0;function Te(){throw Error(M(321))}function Na(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gt(t[n],e[n]))return!1;return!0}function Ca(t,e,n,r,s,i){if(kn=i,le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qs.current=t===null||t.memoizedState===null?Xg:Vg,t=n(r,s),Hr){i=0;do{if(Hr=!1,is=0,25<=i)throw Error(M(301));i+=1,we=ve=null,e.updateQueue=null,qs.current=Gg,t=n(r,s)}while(Hr)}if(qs.current=ji,e=ve!==null&&ve.next!==null,kn=0,we=ve=le=null,bi=!1,e)throw Error(M(300));return t}function Ta(){var t=is!==0;return is=0,t}function vt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?le.memoizedState=we=t:we=we.next=t,we}function lt(){if(ve===null){var t=le.alternate;t=t!==null?t.memoizedState:null}else t=ve.next;var e=we===null?le.memoizedState:we.next;if(e!==null)we=e,ve=t;else{if(t===null)throw Error(M(310));ve=t,t={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},we===null?le.memoizedState=we=t:we=we.next=t}return we}function os(t,e){return typeof e=="function"?e(t):e}function Co(t){var e=lt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=ve,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((kn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,o=r):c=c.next=h,le.lanes|=d,bn|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,gt(r,e.memoizedState)||($e=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,le.lanes|=i,bn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function To(t){var e=lt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);gt(i,e.memoizedState)||($e=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function gh(){}function yh(t,e){var n=le,r=lt(),s=e(),i=!gt(r.memoizedState,s);if(i&&(r.memoizedState=s,$e=!0),r=r.queue,Ea(wh.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||we!==null&&we.memoizedState.tag&1){if(n.flags|=2048,ls(9,xh.bind(null,n,r,s,e),void 0,null),Se===null)throw Error(M(349));kn&30||vh(n,e,s)}return s}function vh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=le.updateQueue,e===null?(e={lastEffect:null,stores:null},le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xh(t,e,n,r){e.value=n,e.getSnapshot=r,Sh(e)&&kh(t)}function wh(t,e,n){return n(function(){Sh(e)&&kh(t)})}function Sh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gt(t,n)}catch{return!0}}function kh(t){var e=Dt(t,1);e!==null&&mt(e,t,1,-1)}function lu(t){var e=vt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:t},e.queue=t,t=t.dispatch=Ug.bind(null,le,t),[e.memoizedState,t]}function ls(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=le.updateQueue,e===null?(e={lastEffect:null,stores:null},le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bh(){return lt().memoizedState}function Js(t,e,n,r){var s=vt();le.flags|=t,s.memoizedState=ls(1|e,n,void 0,r===void 0?null:r)}function Oi(t,e,n,r){var s=lt();r=r===void 0?null:r;var i=void 0;if(ve!==null){var o=ve.memoizedState;if(i=o.destroy,r!==null&&Na(r,o.deps)){s.memoizedState=ls(e,n,i,r);return}}le.flags|=t,s.memoizedState=ls(1|e,n,i,r)}function au(t,e){return Js(8390656,8,t,e)}function Ea(t,e){return Oi(2048,8,t,e)}function jh(t,e){return Oi(4,2,t,e)}function Nh(t,e){return Oi(4,4,t,e)}function Ch(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Th(t,e,n){return n=n!=null?n.concat([t]):null,Oi(4,4,Ch.bind(null,e,t),n)}function Ma(){}function Eh(t,e){var n=lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Na(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Mh(t,e){var n=lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Na(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ph(t,e,n){return kn&21?(gt(n,e)||(n=_d(),le.lanes|=n,bn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$e=!0),t.memoizedState=n)}function Bg(t,e){var n=Z;Z=n!==0&&4>n?n:4,t(!0);var r=No.transition;No.transition={};try{t(!1),e()}finally{Z=n,No.transition=r}}function Lh(){return lt().memoizedState}function Yg(t,e,n){var r=Jt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zh(t))Ih(e,n);else if(n=fh(t,e,n,r),n!==null){var s=Ie();mt(n,t,r,s),Ah(n,e,r)}}function Ug(t,e,n){var r=Jt(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zh(t))Ih(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,gt(a,o)){var c=e.interleaved;c===null?(s.next=s,wa(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=fh(t,e,s,r),n!==null&&(s=Ie(),mt(n,t,r,s),Ah(n,e,r))}}function zh(t){var e=t.alternate;return t===le||e!==null&&e===le}function Ih(t,e){Hr=bi=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ah(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,oa(t,n)}}var ji={readContext:ot,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},Xg={readContext:ot,useCallback:function(t,e){return vt().memoizedState=[t,e===void 0?null:e],t},useContext:ot,useEffect:au,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Js(4194308,4,Ch.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Js(4194308,4,t,e)},useInsertionEffect:function(t,e){return Js(4,2,t,e)},useMemo:function(t,e){var n=vt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Yg.bind(null,le,t),[r.memoizedState,t]},useRef:function(t){var e=vt();return t={current:t},e.memoizedState=t},useState:lu,useDebugValue:Ma,useDeferredValue:function(t){return vt().memoizedState=t},useTransition:function(){var t=lu(!1),e=t[0];return t=Bg.bind(null,t[1]),vt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=le,s=vt();if(se){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Se===null)throw Error(M(349));kn&30||vh(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,au(wh.bind(null,r,i,t),[t]),r.flags|=2048,ls(9,xh.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=vt(),e=Se.identifierPrefix;if(se){var n=zt,r=Lt;n=(r&~(1<<32-pt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=is++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Wg++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Vg={readContext:ot,useCallback:Eh,useContext:ot,useEffect:Ea,useImperativeHandle:Th,useInsertionEffect:jh,useLayoutEffect:Nh,useMemo:Mh,useReducer:Co,useRef:bh,useState:function(){return Co(os)},useDebugValue:Ma,useDeferredValue:function(t){var e=lt();return Ph(e,ve.memoizedState,t)},useTransition:function(){var t=Co(os)[0],e=lt().memoizedState;return[t,e]},useMutableSource:gh,useSyncExternalStore:yh,useId:Lh,unstable_isNewReconciler:!1},Gg={readContext:ot,useCallback:Eh,useContext:ot,useEffect:Ea,useImperativeHandle:Th,useInsertionEffect:jh,useLayoutEffect:Nh,useMemo:Mh,useReducer:To,useRef:bh,useState:function(){return To(os)},useDebugValue:Ma,useDeferredValue:function(t){var e=lt();return ve===null?e.memoizedState=t:Ph(e,ve.memoizedState,t)},useTransition:function(){var t=To(os)[0],e=lt().memoizedState;return[t,e]},useMutableSource:gh,useSyncExternalStore:yh,useId:Lh,unstable_isNewReconciler:!1};function dt(t,e){if(t&&t.defaultProps){e=ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $i={isMounted:function(t){return(t=t._reactInternals)?En(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ie(),s=Jt(t),i=It(r,s);i.payload=e,n!=null&&(i.callback=n),e=Zt(t,i,s),e!==null&&(mt(e,t,s,r),Zs(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ie(),s=Jt(t),i=It(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Zt(t,i,s),e!==null&&(mt(e,t,s,r),Zs(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ie(),r=Jt(t),s=It(n,r);s.tag=2,e!=null&&(s.callback=e),e=Zt(t,s,r),e!==null&&(mt(e,t,r,n),Zs(e,t,r))}};function cu(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Jr(n,r)||!Jr(s,i):!0}function _h(t,e,n){var r=!1,s=nn,i=e.contextType;return typeof i=="object"&&i!==null?i=ot(i):(s=He(e)?wn:Pe.current,r=e.contextTypes,i=(r=r!=null)?nr(t,s):nn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$i,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function uu(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$i.enqueueReplaceState(e,e.state,null)}function Cl(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Sa(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ot(i):(i=He(e)?wn:Pe.current,s.context=nr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Nl(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&$i.enqueueReplaceState(s,s.state,null),Si(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function or(t,e){try{var n="",r=e;do n+=km(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Eo(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Kg=typeof WeakMap=="function"?WeakMap:Map;function Dh(t,e,n){n=It(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ci||(Ci=!0,Rl=r),Tl(t,e)},n}function Rh(t,e,n){n=It(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Tl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Tl(t,e),typeof r!="function"&&(qt===null?qt=new Set([this]):qt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function du(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Kg;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=cy.bind(null,t,e,n),e.then(t,t))}function hu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fu(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=It(-1,1),e.tag=2,Zt(n,e,1))),n.lanes|=1),t)}var Qg=Ot.ReactCurrentOwner,$e=!1;function ze(t,e,n,r){e.child=t===null?hh(e,null,n,r):sr(e,t.child,n,r)}function pu(t,e,n,r,s){n=n.render;var i=e.ref;return Jn(e,s),r=Ca(t,e,n,r,i,s),n=Ta(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Rt(t,e,s)):(se&&n&&pa(e),e.flags|=1,ze(t,e,r,s),e.child)}function mu(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ra(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Oh(t,e,i,r,s)):(t=ri(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Jr,n(o,r)&&t.ref===e.ref)return Rt(t,e,s)}return e.flags|=1,t=en(i,r),t.ref=e.ref,t.return=e,e.child=t}function Oh(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Jr(i,r)&&t.ref===e.ref)if($e=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&($e=!0);else return e.lanes=t.lanes,Rt(t,e,s)}return El(t,e,n,r,s)}function $h(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(Gn,Xe),Xe|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ee(Gn,Xe),Xe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ee(Gn,Xe),Xe|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ee(Gn,Xe),Xe|=r;return ze(t,e,s,n),e.child}function Fh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function El(t,e,n,r,s){var i=He(n)?wn:Pe.current;return i=nr(e,i),Jn(e,s),n=Ca(t,e,n,r,i,s),r=Ta(),t!==null&&!$e?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Rt(t,e,s)):(se&&r&&pa(e),e.flags|=1,ze(t,e,n,s),e.child)}function gu(t,e,n,r,s){if(He(n)){var i=!0;gi(e)}else i=!1;if(Jn(e,s),e.stateNode===null)ei(t,e),_h(e,n,r),Cl(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ot(u):(u=He(n)?wn:Pe.current,u=nr(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&uu(e,o,r,u),Wt=!1;var f=e.memoizedState;o.state=f,Si(e,r,o,s),c=e.memoizedState,a!==r||f!==c||Fe.current||Wt?(typeof d=="function"&&(Nl(e,n,d,r),c=e.memoizedState),(a=Wt||cu(e,n,a,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ph(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:dt(e.type,a),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ot(c):(c=He(n)?wn:Pe.current,c=nr(e,c));var S=n.getDerivedStateFromProps;(d=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==c)&&uu(e,o,r,c),Wt=!1,f=e.memoizedState,o.state=f,Si(e,r,o,s);var v=e.memoizedState;a!==h||f!==v||Fe.current||Wt?(typeof S=="function"&&(Nl(e,n,S,r),v=e.memoizedState),(u=Wt||cu(e,n,u,r,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ml(t,e,n,r,i,s)}function Ml(t,e,n,r,s,i){Fh(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&tu(e,n,!1),Rt(t,e,i);r=e.stateNode,Qg.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=sr(e,t.child,null,i),e.child=sr(e,null,a,i)):ze(t,e,a,i),e.memoizedState=r.state,s&&tu(e,n,!0),e.child}function Hh(t){var e=t.stateNode;e.pendingContext?eu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&eu(t,e.context,!1),ka(t,e.containerInfo)}function yu(t,e,n,r,s){return rr(),ga(s),e.flags|=256,ze(t,e,n,r),e.child}var Pl={dehydrated:null,treeContext:null,retryLane:0};function Ll(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wh(t,e,n){var r=e.pendingProps,s=oe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ee(oe,s&1),t===null)return bl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wi(o,r,0,null),t=xn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ll(n),e.memoizedState=Pl,t):Pa(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Zg(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=en(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=en(a,i):(i=xn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ll(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Pl,r}return i=t.child,t=i.sibling,r=en(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pa(t,e){return e=Wi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Rs(t,e,n,r){return r!==null&&ga(r),sr(e,t.child,null,n),t=Pa(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zg(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Eo(Error(M(422))),Rs(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Wi({mode:"visible",children:r.children},s,0,null),i=xn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&sr(e,t.child,null,o),e.child.memoizedState=Ll(o),e.memoizedState=Pl,i);if(!(e.mode&1))return Rs(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(M(419)),r=Eo(i,r,void 0),Rs(t,e,o,r)}if(a=(o&t.childLanes)!==0,$e||a){if(r=Se,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Dt(t,s),mt(r,t,s,-1))}return Da(),r=Eo(Error(M(421))),Rs(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=uy.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ge=Qt(s.nextSibling),Ke=e,se=!0,ft=null,t!==null&&(nt[rt++]=Lt,nt[rt++]=zt,nt[rt++]=Sn,Lt=t.id,zt=t.overflow,Sn=e),e=Pa(e,r.children),e.flags|=4096,e)}function vu(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jl(t.return,e,n)}function Mo(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Bh(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ze(t,e,r.children,n),r=oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vu(t,n,e);else if(t.tag===19)vu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ee(oe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ki(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Mo(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ki(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Mo(e,!0,n,null,i);break;case"together":Mo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ei(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),bn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=en(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=en(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qg(t,e,n){switch(e.tag){case 3:Hh(e),rr();break;case 5:mh(e);break;case 1:He(e.type)&&gi(e);break;case 4:ka(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ee(xi,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ee(oe,oe.current&1),e.flags|=128,null):n&e.child.childLanes?Wh(t,e,n):(ee(oe,oe.current&1),t=Rt(t,e,n),t!==null?t.sibling:null);ee(oe,oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Bh(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ee(oe,oe.current),r)break;return null;case 22:case 23:return e.lanes=0,$h(t,e,n)}return Rt(t,e,n)}var Yh,zl,Uh,Xh;Yh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zl=function(){};Uh=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,gn(St.current);var i=null;switch(n){case"input":s=el(t,s),r=el(t,r),i=[];break;case"select":s=ae({},s,{value:void 0}),r=ae({},r,{value:void 0}),i=[];break;case"textarea":s=rl(t,s),r=rl(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=pi)}il(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xr.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xr.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ne("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Xh=function(t,e,n,r){n!==r&&(e.flags|=4)};function Tr(t,e){if(!se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ee(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Jg(t,e,n){var r=e.pendingProps;switch(ma(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(e),null;case 1:return He(e.type)&&mi(),Ee(e),null;case 3:return r=e.stateNode,ir(),re(Fe),re(Pe),ja(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_s(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ft!==null&&(Fl(ft),ft=null))),zl(t,e),Ee(e),null;case 5:ba(e);var s=gn(ss.current);if(n=e.type,t!==null&&e.stateNode!=null)Uh(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Ee(e),null}if(t=gn(St.current),_s(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[xt]=e,r[ns]=i,t=(e.mode&1)!==0,n){case"dialog":ne("cancel",r),ne("close",r);break;case"iframe":case"object":case"embed":ne("load",r);break;case"video":case"audio":for(s=0;s<_r.length;s++)ne(_r[s],r);break;case"source":ne("error",r);break;case"img":case"image":case"link":ne("error",r),ne("load",r);break;case"details":ne("toggle",r);break;case"input":Tc(r,i),ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ne("invalid",r);break;case"textarea":Mc(r,i),ne("invalid",r)}il(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&As(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&As(r.textContent,a,t),s=["children",""+a]):Xr.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ne("scroll",r)}switch(n){case"input":Cs(r),Ec(r,i,!0);break;case"textarea":Cs(r),Pc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=pi)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xt]=e,t[ns]=r,Yh(t,e,!1,!1),e.stateNode=t;e:{switch(o=ol(n,r),n){case"dialog":ne("cancel",t),ne("close",t),s=r;break;case"iframe":case"object":case"embed":ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<_r.length;s++)ne(_r[s],t);s=r;break;case"source":ne("error",t),s=r;break;case"img":case"image":case"link":ne("error",t),ne("load",t),s=r;break;case"details":ne("toggle",t),s=r;break;case"input":Tc(t,r),s=el(t,r),ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ae({},r,{value:void 0}),ne("invalid",t);break;case"textarea":Mc(t,r),s=rl(t,r),ne("invalid",t);break;default:s=r}il(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?bd(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Sd(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Vr(t,c):typeof c=="number"&&Vr(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Xr.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ne("scroll",t):c!=null&&ea(t,i,c,o))}switch(n){case"input":Cs(t),Ec(t,r,!1);break;case"textarea":Cs(t),Pc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+tn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Kn(t,!!r.multiple,i,!1):r.defaultValue!=null&&Kn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=pi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ee(e),null;case 6:if(t&&e.stateNode!=null)Xh(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=gn(ss.current),gn(St.current),_s(e)){if(r=e.stateNode,n=e.memoizedProps,r[xt]=e,(i=r.nodeValue!==n)&&(t=Ke,t!==null))switch(t.tag){case 3:As(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&As(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xt]=e,e.stateNode=r}return Ee(e),null;case 13:if(re(oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(se&&Ge!==null&&e.mode&1&&!(e.flags&128))uh(),rr(),e.flags|=98560,i=!1;else if(i=_s(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(M(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(M(317));i[xt]=e}else rr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ee(e),i=!1}else ft!==null&&(Fl(ft),ft=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||oe.current&1?xe===0&&(xe=3):Da())),e.updateQueue!==null&&(e.flags|=4),Ee(e),null);case 4:return ir(),zl(t,e),t===null&&es(e.stateNode.containerInfo),Ee(e),null;case 10:return xa(e.type._context),Ee(e),null;case 17:return He(e.type)&&mi(),Ee(e),null;case 19:if(re(oe),i=e.memoizedState,i===null)return Ee(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Tr(i,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ki(t),o!==null){for(e.flags|=128,Tr(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ee(oe,oe.current&1|2),e.child}t=t.sibling}i.tail!==null&&fe()>lr&&(e.flags|=128,r=!0,Tr(i,!1),e.lanes=4194304)}else{if(!r)if(t=ki(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Tr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!se)return Ee(e),null}else 2*fe()-i.renderingStartTime>lr&&n!==1073741824&&(e.flags|=128,r=!0,Tr(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=fe(),e.sibling=null,n=oe.current,ee(oe,r?n&1|2:n&1),e):(Ee(e),null);case 22:case 23:return _a(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xe&1073741824&&(Ee(e),e.subtreeFlags&6&&(e.flags|=8192)):Ee(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function ey(t,e){switch(ma(e),e.tag){case 1:return He(e.type)&&mi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ir(),re(Fe),re(Pe),ja(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ba(e),null;case 13:if(re(oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));rr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return re(oe),null;case 4:return ir(),null;case 10:return xa(e.type._context),null;case 22:case 23:return _a(),null;case 24:return null;default:return null}}var Os=!1,Me=!1,ty=typeof WeakSet=="function"?WeakSet:Set,I=null;function Vn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){de(t,e,r)}else n.current=null}function Il(t,e,n){try{n()}catch(r){de(t,e,r)}}var xu=!1;function ny(t,e){if(gl=di,t=Zd(),fa(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var S;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(S=h.firstChild)!==null;)f=h,h=S;for(;;){if(h===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++d===r&&(c=o),(S=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=S}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(yl={focusedElem:t,selectionRange:n},di=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var k=v.memoizedProps,b=v.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?k:dt(e.type,k),b);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(x){de(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return v=xu,xu=!1,v}function Wr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Il(e,n,i)}s=s.next}while(s!==r)}}function Fi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Al(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Vh(t){var e=t.alternate;e!==null&&(t.alternate=null,Vh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xt],delete e[ns],delete e[wl],delete e[Og],delete e[$g])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Gh(t){return t.tag===5||t.tag===3||t.tag===4}function wu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _l(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=pi));else if(r!==4&&(t=t.child,t!==null))for(_l(t,e,n),t=t.sibling;t!==null;)_l(t,e,n),t=t.sibling}function Dl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dl(t,e,n),t=t.sibling;t!==null;)Dl(t,e,n),t=t.sibling}var je=null,ht=!1;function $t(t,e,n){for(n=n.child;n!==null;)Kh(t,e,n),n=n.sibling}function Kh(t,e,n){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(zi,n)}catch{}switch(n.tag){case 5:Me||Vn(n,e);case 6:var r=je,s=ht;je=null,$t(t,e,n),je=r,ht=s,je!==null&&(ht?(t=je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):je.removeChild(n.stateNode));break;case 18:je!==null&&(ht?(t=je,n=n.stateNode,t.nodeType===8?ko(t.parentNode,n):t.nodeType===1&&ko(t,n),Zr(t)):ko(je,n.stateNode));break;case 4:r=je,s=ht,je=n.stateNode.containerInfo,ht=!0,$t(t,e,n),je=r,ht=s;break;case 0:case 11:case 14:case 15:if(!Me&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Il(n,e,o),s=s.next}while(s!==r)}$t(t,e,n);break;case 1:if(!Me&&(Vn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){de(n,e,a)}$t(t,e,n);break;case 21:$t(t,e,n);break;case 22:n.mode&1?(Me=(r=Me)||n.memoizedState!==null,$t(t,e,n),Me=r):$t(t,e,n);break;default:$t(t,e,n)}}function Su(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ty),e.forEach(function(r){var s=dy.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ct(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:je=a.stateNode,ht=!1;break e;case 3:je=a.stateNode.containerInfo,ht=!0;break e;case 4:je=a.stateNode.containerInfo,ht=!0;break e}a=a.return}if(je===null)throw Error(M(160));Kh(i,o,s),je=null,ht=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){de(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qh(e,t),e=e.sibling}function Qh(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ct(e,t),yt(t),r&4){try{Wr(3,t,t.return),Fi(3,t)}catch(k){de(t,t.return,k)}try{Wr(5,t,t.return)}catch(k){de(t,t.return,k)}}break;case 1:ct(e,t),yt(t),r&512&&n!==null&&Vn(n,n.return);break;case 5:if(ct(e,t),yt(t),r&512&&n!==null&&Vn(n,n.return),t.flags&32){var s=t.stateNode;try{Vr(s,"")}catch(k){de(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&vd(s,i),ol(a,o);var u=ol(a,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?bd(s,h):d==="dangerouslySetInnerHTML"?Sd(s,h):d==="children"?Vr(s,h):ea(s,d,h,u)}switch(a){case"input":tl(s,i);break;case"textarea":xd(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?Kn(s,!!i.multiple,S,!1):f!==!!i.multiple&&(i.defaultValue!=null?Kn(s,!!i.multiple,i.defaultValue,!0):Kn(s,!!i.multiple,i.multiple?[]:"",!1))}s[ns]=i}catch(k){de(t,t.return,k)}}break;case 6:if(ct(e,t),yt(t),r&4){if(t.stateNode===null)throw Error(M(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){de(t,t.return,k)}}break;case 3:if(ct(e,t),yt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zr(e.containerInfo)}catch(k){de(t,t.return,k)}break;case 4:ct(e,t),yt(t);break;case 13:ct(e,t),yt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ia=fe())),r&4&&Su(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Me=(u=Me)||d,ct(e,t),Me=u):ct(e,t),yt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(I=t,d=t.child;d!==null;){for(h=I=d;I!==null;){switch(f=I,S=f.child,f.tag){case 0:case 11:case 14:case 15:Wr(4,f,f.return);break;case 1:Vn(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(k){de(r,n,k)}}break;case 5:Vn(f,f.return);break;case 22:if(f.memoizedState!==null){bu(h);continue}}S!==null?(S.return=f,I=S):bu(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=kd("display",o))}catch(k){de(t,t.return,k)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(k){de(t,t.return,k)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ct(e,t),yt(t),r&4&&Su(t);break;case 21:break;default:ct(e,t),yt(t)}}function yt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Gh(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Vr(s,""),r.flags&=-33);var i=wu(t);Dl(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=wu(t);_l(t,a,o);break;default:throw Error(M(161))}}catch(c){de(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ry(t,e,n){I=t,Zh(t)}function Zh(t,e,n){for(var r=(t.mode&1)!==0;I!==null;){var s=I,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Os;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Me;a=Os;var u=Me;if(Os=o,(Me=c)&&!u)for(I=s;I!==null;)o=I,c=o.child,o.tag===22&&o.memoizedState!==null?ju(s):c!==null?(c.return=o,I=c):ju(s);for(;i!==null;)I=i,Zh(i),i=i.sibling;I=s,Os=a,Me=u}ku(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,I=i):ku(t)}}function ku(t){for(;I!==null;){var e=I;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Me||Fi(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Me)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:dt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ou(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ou(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Zr(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Me||e.flags&512&&Al(e)}catch(f){de(e,e.return,f)}}if(e===t){I=null;break}if(n=e.sibling,n!==null){n.return=e.return,I=n;break}I=e.return}}function bu(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var n=e.sibling;if(n!==null){n.return=e.return,I=n;break}I=e.return}}function ju(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fi(4,e)}catch(c){de(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){de(e,s,c)}}var i=e.return;try{Al(e)}catch(c){de(e,i,c)}break;case 5:var o=e.return;try{Al(e)}catch(c){de(e,o,c)}}}catch(c){de(e,e.return,c)}if(e===t){I=null;break}var a=e.sibling;if(a!==null){a.return=e.return,I=a;break}I=e.return}}var sy=Math.ceil,Ni=Ot.ReactCurrentDispatcher,La=Ot.ReactCurrentOwner,it=Ot.ReactCurrentBatchConfig,K=0,Se=null,me=null,Ne=0,Xe=0,Gn=sn(0),xe=0,as=null,bn=0,Hi=0,za=0,Br=null,Oe=null,Ia=0,lr=1/0,Mt=null,Ci=!1,Rl=null,qt=null,$s=!1,Xt=null,Ti=0,Yr=0,Ol=null,ti=-1,ni=0;function Ie(){return K&6?fe():ti!==-1?ti:ti=fe()}function Jt(t){return t.mode&1?K&2&&Ne!==0?Ne&-Ne:Hg.transition!==null?(ni===0&&(ni=_d()),ni):(t=Z,t!==0||(t=window.event,t=t===void 0?16:Wd(t.type)),t):1}function mt(t,e,n,r){if(50<Yr)throw Yr=0,Ol=null,Error(M(185));ds(t,n,r),(!(K&2)||t!==Se)&&(t===Se&&(!(K&2)&&(Hi|=n),xe===4&&Yt(t,Ne)),We(t,r),n===1&&K===0&&!(e.mode&1)&&(lr=fe()+500,Ri&&on()))}function We(t,e){var n=t.callbackNode;Hm(t,e);var r=ui(t,t===Se?Ne:0);if(r===0)n!==null&&Ic(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ic(n),e===1)t.tag===0?Fg(Nu.bind(null,t)):lh(Nu.bind(null,t)),Dg(function(){!(K&6)&&on()}),n=null;else{switch(Dd(r)){case 1:n=ia;break;case 4:n=Id;break;case 16:n=ci;break;case 536870912:n=Ad;break;default:n=ci}n=of(n,qh.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qh(t,e){if(ti=-1,ni=0,K&6)throw Error(M(327));var n=t.callbackNode;if(er()&&t.callbackNode!==n)return null;var r=ui(t,t===Se?Ne:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ei(t,r);else{e=r;var s=K;K|=2;var i=ef();(Se!==t||Ne!==e)&&(Mt=null,lr=fe()+500,vn(t,e));do try{ly();break}catch(a){Jh(t,a)}while(!0);va(),Ni.current=i,K=s,me!==null?e=0:(Se=null,Ne=0,e=xe)}if(e!==0){if(e===2&&(s=dl(t),s!==0&&(r=s,e=$l(t,s))),e===1)throw n=as,vn(t,0),Yt(t,r),We(t,fe()),n;if(e===6)Yt(t,r);else{if(s=t.current.alternate,!(r&30)&&!iy(s)&&(e=Ei(t,r),e===2&&(i=dl(t),i!==0&&(r=i,e=$l(t,i))),e===1))throw n=as,vn(t,0),Yt(t,r),We(t,fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:hn(t,Oe,Mt);break;case 3:if(Yt(t,r),(r&130023424)===r&&(e=Ia+500-fe(),10<e)){if(ui(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ie(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=xl(hn.bind(null,t,Oe,Mt),e);break}hn(t,Oe,Mt);break;case 4:if(Yt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-pt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sy(r/1960))-r,10<r){t.timeoutHandle=xl(hn.bind(null,t,Oe,Mt),r);break}hn(t,Oe,Mt);break;case 5:hn(t,Oe,Mt);break;default:throw Error(M(329))}}}return We(t,fe()),t.callbackNode===n?qh.bind(null,t):null}function $l(t,e){var n=Br;return t.current.memoizedState.isDehydrated&&(vn(t,e).flags|=256),t=Ei(t,e),t!==2&&(e=Oe,Oe=n,e!==null&&Fl(e)),t}function Fl(t){Oe===null?Oe=t:Oe.push.apply(Oe,t)}function iy(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!gt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yt(t,e){for(e&=~za,e&=~Hi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pt(e),r=1<<n;t[n]=-1,e&=~r}}function Nu(t){if(K&6)throw Error(M(327));er();var e=ui(t,0);if(!(e&1))return We(t,fe()),null;var n=Ei(t,e);if(t.tag!==0&&n===2){var r=dl(t);r!==0&&(e=r,n=$l(t,r))}if(n===1)throw n=as,vn(t,0),Yt(t,e),We(t,fe()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hn(t,Oe,Mt),We(t,fe()),null}function Aa(t,e){var n=K;K|=1;try{return t(e)}finally{K=n,K===0&&(lr=fe()+500,Ri&&on())}}function jn(t){Xt!==null&&Xt.tag===0&&!(K&6)&&er();var e=K;K|=1;var n=it.transition,r=Z;try{if(it.transition=null,Z=1,t)return t()}finally{Z=r,it.transition=n,K=e,!(K&6)&&on()}}function _a(){Xe=Gn.current,re(Gn)}function vn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_g(n)),me!==null)for(n=me.return;n!==null;){var r=n;switch(ma(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mi();break;case 3:ir(),re(Fe),re(Pe),ja();break;case 5:ba(r);break;case 4:ir();break;case 13:re(oe);break;case 19:re(oe);break;case 10:xa(r.type._context);break;case 22:case 23:_a()}n=n.return}if(Se=t,me=t=en(t.current,null),Ne=Xe=e,xe=0,as=null,za=Hi=bn=0,Oe=Br=null,mn!==null){for(e=0;e<mn.length;e++)if(n=mn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}mn=null}return t}function Jh(t,e){do{var n=me;try{if(va(),qs.current=ji,bi){for(var r=le.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}bi=!1}if(kn=0,we=ve=le=null,Hr=!1,is=0,La.current=null,n===null||n.return===null){xe=1,as=e,me=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Ne,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var S=hu(o);if(S!==null){S.flags&=-257,fu(S,o,a,i,e),S.mode&1&&du(i,u,e),e=S,c=u;var v=e.updateQueue;if(v===null){var k=new Set;k.add(c),e.updateQueue=k}else v.add(c);break e}else{if(!(e&1)){du(i,u,e),Da();break e}c=Error(M(426))}}else if(se&&a.mode&1){var b=hu(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),fu(b,o,a,i,e),ga(or(c,a));break e}}i=c=or(c,a),xe!==4&&(xe=2),Br===null?Br=[i]:Br.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Dh(i,c,e);iu(i,g);break e;case 1:a=c;var p=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(qt===null||!qt.has(m)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Rh(i,a,e);iu(i,x);break e}}i=i.return}while(i!==null)}nf(n)}catch(j){e=j,me===n&&n!==null&&(me=n=n.return);continue}break}while(!0)}function ef(){var t=Ni.current;return Ni.current=ji,t===null?ji:t}function Da(){(xe===0||xe===3||xe===2)&&(xe=4),Se===null||!(bn&268435455)&&!(Hi&268435455)||Yt(Se,Ne)}function Ei(t,e){var n=K;K|=2;var r=ef();(Se!==t||Ne!==e)&&(Mt=null,vn(t,e));do try{oy();break}catch(s){Jh(t,s)}while(!0);if(va(),K=n,Ni.current=r,me!==null)throw Error(M(261));return Se=null,Ne=0,xe}function oy(){for(;me!==null;)tf(me)}function ly(){for(;me!==null&&!zm();)tf(me)}function tf(t){var e=sf(t.alternate,t,Xe);t.memoizedProps=t.pendingProps,e===null?nf(t):me=e,La.current=null}function nf(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ey(n,e),n!==null){n.flags&=32767,me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,me=null;return}}else if(n=Jg(n,e,Xe),n!==null){me=n;return}if(e=e.sibling,e!==null){me=e;return}me=e=t}while(e!==null);xe===0&&(xe=5)}function hn(t,e,n){var r=Z,s=it.transition;try{it.transition=null,Z=1,ay(t,e,n,r)}finally{it.transition=s,Z=r}return null}function ay(t,e,n,r){do er();while(Xt!==null);if(K&6)throw Error(M(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Wm(t,i),t===Se&&(me=Se=null,Ne=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$s||($s=!0,of(ci,function(){return er(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=it.transition,it.transition=null;var o=Z;Z=1;var a=K;K|=4,La.current=null,ny(t,n),Qh(n,t),Eg(yl),di=!!gl,yl=gl=null,t.current=n,ry(n),Im(),K=a,Z=o,it.transition=i}else t.current=n;if($s&&($s=!1,Xt=t,Ti=s),i=t.pendingLanes,i===0&&(qt=null),Dm(n.stateNode),We(t,fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ci)throw Ci=!1,t=Rl,Rl=null,t;return Ti&1&&t.tag!==0&&er(),i=t.pendingLanes,i&1?t===Ol?Yr++:(Yr=0,Ol=t):Yr=0,on(),null}function er(){if(Xt!==null){var t=Dd(Ti),e=it.transition,n=Z;try{if(it.transition=null,Z=16>t?16:t,Xt===null)var r=!1;else{if(t=Xt,Xt=null,Ti=0,K&6)throw Error(M(331));var s=K;for(K|=4,I=t.current;I!==null;){var i=I,o=i.child;if(I.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(I=u;I!==null;){var d=I;switch(d.tag){case 0:case 11:case 15:Wr(8,d,i)}var h=d.child;if(h!==null)h.return=d,I=h;else for(;I!==null;){d=I;var f=d.sibling,S=d.return;if(Vh(d),d===u){I=null;break}if(f!==null){f.return=S,I=f;break}I=S}}}var v=i.alternate;if(v!==null){var k=v.child;if(k!==null){v.child=null;do{var b=k.sibling;k.sibling=null,k=b}while(k!==null)}}I=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,I=o;else e:for(;I!==null;){if(i=I,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Wr(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,I=g;break e}I=i.return}}var p=t.current;for(I=p;I!==null;){o=I;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,I=m;else e:for(o=p;I!==null;){if(a=I,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Fi(9,a)}}catch(j){de(a,a.return,j)}if(a===o){I=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,I=x;break e}I=a.return}}if(K=s,on(),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(zi,t)}catch{}r=!0}return r}finally{Z=n,it.transition=e}}return!1}function Cu(t,e,n){e=or(n,e),e=Dh(t,e,1),t=Zt(t,e,1),e=Ie(),t!==null&&(ds(t,1,e),We(t,e))}function de(t,e,n){if(t.tag===3)Cu(t,t,n);else for(;e!==null;){if(e.tag===3){Cu(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qt===null||!qt.has(r))){t=or(n,t),t=Rh(e,t,1),e=Zt(e,t,1),t=Ie(),e!==null&&(ds(e,1,t),We(e,t));break}}e=e.return}}function cy(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ie(),t.pingedLanes|=t.suspendedLanes&n,Se===t&&(Ne&n)===n&&(xe===4||xe===3&&(Ne&130023424)===Ne&&500>fe()-Ia?vn(t,0):za|=n),We(t,e)}function rf(t,e){e===0&&(t.mode&1?(e=Ms,Ms<<=1,!(Ms&130023424)&&(Ms=4194304)):e=1);var n=Ie();t=Dt(t,e),t!==null&&(ds(t,e,n),We(t,n))}function uy(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rf(t,n)}function dy(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),rf(t,n)}var sf;sf=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Fe.current)$e=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $e=!1,qg(t,e,n);$e=!!(t.flags&131072)}else $e=!1,se&&e.flags&1048576&&ah(e,vi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ei(t,e),t=e.pendingProps;var s=nr(e,Pe.current);Jn(e,n),s=Ca(null,e,r,t,s,n);var i=Ta();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,He(r)?(i=!0,gi(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sa(e),s.updater=$i,e.stateNode=s,s._reactInternals=e,Cl(e,r,t,n),e=Ml(null,e,r,!0,i,n)):(e.tag=0,se&&i&&pa(e),ze(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ei(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=fy(r),t=dt(r,t),s){case 0:e=El(null,e,r,t,n);break e;case 1:e=gu(null,e,r,t,n);break e;case 11:e=pu(null,e,r,t,n);break e;case 14:e=mu(null,e,r,dt(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dt(r,s),El(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dt(r,s),gu(t,e,r,s,n);case 3:e:{if(Hh(e),t===null)throw Error(M(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ph(t,e),Si(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=or(Error(M(423)),e),e=yu(t,e,r,n,s);break e}else if(r!==s){s=or(Error(M(424)),e),e=yu(t,e,r,n,s);break e}else for(Ge=Qt(e.stateNode.containerInfo.firstChild),Ke=e,se=!0,ft=null,n=hh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rr(),r===s){e=Rt(t,e,n);break e}ze(t,e,r,n)}e=e.child}return e;case 5:return mh(e),t===null&&bl(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,vl(r,s)?o=null:i!==null&&vl(r,i)&&(e.flags|=32),Fh(t,e),ze(t,e,o,n),e.child;case 6:return t===null&&bl(e),null;case 13:return Wh(t,e,n);case 4:return ka(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=sr(e,null,r,n):ze(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dt(r,s),pu(t,e,r,s,n);case 7:return ze(t,e,e.pendingProps,n),e.child;case 8:return ze(t,e,e.pendingProps.children,n),e.child;case 12:return ze(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ee(xi,r._currentValue),r._currentValue=o,i!==null)if(gt(i.value,o)){if(i.children===s.children&&!Fe.current){e=Rt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=It(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),jl(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(M(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jl(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ze(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Jn(e,n),s=ot(s),r=r(s),e.flags|=1,ze(t,e,r,n),e.child;case 14:return r=e.type,s=dt(r,e.pendingProps),s=dt(r.type,s),mu(t,e,r,s,n);case 15:return Oh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dt(r,s),ei(t,e),e.tag=1,He(r)?(t=!0,gi(e)):t=!1,Jn(e,n),_h(e,r,s),Cl(e,r,s,n),Ml(null,e,r,!0,t,n);case 19:return Bh(t,e,n);case 22:return $h(t,e,n)}throw Error(M(156,e.tag))};function of(t,e){return zd(t,e)}function hy(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function st(t,e,n,r){return new hy(t,e,n,r)}function Ra(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fy(t){if(typeof t=="function")return Ra(t)?1:0;if(t!=null){if(t=t.$$typeof,t===na)return 11;if(t===ra)return 14}return 2}function en(t,e){var n=t.alternate;return n===null?(n=st(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ri(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ra(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case On:return xn(n.children,s,i,e);case ta:o=8,s|=8;break;case Qo:return t=st(12,n,e,s|2),t.elementType=Qo,t.lanes=i,t;case Zo:return t=st(13,n,e,s),t.elementType=Zo,t.lanes=i,t;case qo:return t=st(19,n,e,s),t.elementType=qo,t.lanes=i,t;case md:return Wi(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fd:o=10;break e;case pd:o=9;break e;case na:o=11;break e;case ra:o=14;break e;case Ht:o=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=st(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function xn(t,e,n,r){return t=st(7,t,r,e),t.lanes=n,t}function Wi(t,e,n,r){return t=st(22,t,r,e),t.elementType=md,t.lanes=n,t.stateNode={isHidden:!1},t}function Po(t,e,n){return t=st(6,t,null,e),t.lanes=n,t}function Lo(t,e,n){return e=st(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function py(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uo(0),this.expirationTimes=uo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Oa(t,e,n,r,s,i,o,a,c){return t=new py(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=st(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sa(i),t}function my(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lf(t){if(!t)return nn;t=t._reactInternals;e:{if(En(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(He(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(He(n))return oh(t,n,e)}return e}function af(t,e,n,r,s,i,o,a,c){return t=Oa(n,r,!0,t,s,i,o,a,c),t.context=lf(null),n=t.current,r=Ie(),s=Jt(n),i=It(r,s),i.callback=e??null,Zt(n,i,s),t.current.lanes=s,ds(t,s,r),We(t,r),t}function Bi(t,e,n,r){var s=e.current,i=Ie(),o=Jt(s);return n=lf(n),e.context===null?e.context=n:e.pendingContext=n,e=It(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zt(s,e,o),t!==null&&(mt(t,s,o,i),Zs(t,s,o)),o}function Mi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $a(t,e){Tu(t,e),(t=t.alternate)&&Tu(t,e)}function gy(){return null}var cf=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fa(t){this._internalRoot=t}Yi.prototype.render=Fa.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));Bi(t,e,null,null)};Yi.prototype.unmount=Fa.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jn(function(){Bi(null,t,null,null)}),e[_t]=null}};function Yi(t){this._internalRoot=t}Yi.prototype.unstable_scheduleHydration=function(t){if(t){var e=$d();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bt.length&&e!==0&&e<Bt[n].priority;n++);Bt.splice(n,0,t),n===0&&Hd(t)}};function Ha(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ui(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Eu(){}function yy(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Mi(o);i.call(u)}}var o=af(e,r,t,0,null,!1,!1,"",Eu);return t._reactRootContainer=o,t[_t]=o.current,es(t.nodeType===8?t.parentNode:t),jn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Mi(c);a.call(u)}}var c=Oa(t,0,!1,null,null,!1,!1,"",Eu);return t._reactRootContainer=c,t[_t]=c.current,es(t.nodeType===8?t.parentNode:t),jn(function(){Bi(e,c,n,r)}),c}function Xi(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Mi(o);a.call(c)}}Bi(e,o,t,s)}else o=yy(n,e,t,s,r);return Mi(o)}Rd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ar(e.pendingLanes);n!==0&&(oa(e,n|1),We(e,fe()),!(K&6)&&(lr=fe()+500,on()))}break;case 13:jn(function(){var r=Dt(t,1);if(r!==null){var s=Ie();mt(r,t,1,s)}}),$a(t,1)}};la=function(t){if(t.tag===13){var e=Dt(t,134217728);if(e!==null){var n=Ie();mt(e,t,134217728,n)}$a(t,134217728)}};Od=function(t){if(t.tag===13){var e=Jt(t),n=Dt(t,e);if(n!==null){var r=Ie();mt(n,t,e,r)}$a(t,e)}};$d=function(){return Z};Fd=function(t,e){var n=Z;try{return Z=t,e()}finally{Z=n}};al=function(t,e,n){switch(e){case"input":if(tl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Di(r);if(!s)throw Error(M(90));yd(r),tl(r,s)}}}break;case"textarea":xd(t,n);break;case"select":e=n.value,e!=null&&Kn(t,!!n.multiple,e,!1)}};Cd=Aa;Td=jn;var vy={usingClientEntryPoint:!1,Events:[fs,Wn,Di,jd,Nd,Aa]},Er={findFiberByHostInstance:pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xy={bundleType:Er.bundleType,version:Er.version,rendererPackageName:Er.rendererPackageName,rendererConfig:Er.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ot.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Pd(t),t===null?null:t.stateNode},findFiberByHostInstance:Er.findFiberByHostInstance||gy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fs.isDisabled&&Fs.supportsFiber)try{zi=Fs.inject(xy),wt=Fs}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vy;Ze.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ha(e))throw Error(M(200));return my(t,e,null,n)};Ze.createRoot=function(t,e){if(!Ha(t))throw Error(M(299));var n=!1,r="",s=cf;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Oa(t,1,!1,null,null,n,!1,r,s),t[_t]=e.current,es(t.nodeType===8?t.parentNode:t),new Fa(e)};Ze.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=Pd(e),t=t===null?null:t.stateNode,t};Ze.flushSync=function(t){return jn(t)};Ze.hydrate=function(t,e,n){if(!Ui(e))throw Error(M(200));return Xi(null,t,e,!0,n)};Ze.hydrateRoot=function(t,e,n){if(!Ha(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=cf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=af(e,null,t,1,n??null,s,!1,i,o),t[_t]=e.current,es(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Yi(e)};Ze.render=function(t,e,n){if(!Ui(e))throw Error(M(200));return Xi(null,t,e,!1,n)};Ze.unmountComponentAtNode=function(t){if(!Ui(t))throw Error(M(40));return t._reactRootContainer?(jn(function(){Xi(null,null,t,!1,function(){t._reactRootContainer=null,t[_t]=null})}),!0):!1};Ze.unstable_batchedUpdates=Aa;Ze.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ui(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return Xi(t,e,n,!1,r)};Ze.version="18.3.1-next-f1338f8080-20240426";function uf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uf)}catch(t){console.error(t)}}uf(),cd.exports=Ze;var ms=cd.exports;const wy=Zu(ms);var Mu=ms;Go.createRoot=Mu.createRoot,Go.hydrateRoot=Mu.hydrateRoot;function Pu(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function df(...t){return e=>{let n=!1;const r=t.map(s=>{const i=Pu(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Pu(t[s],null)}}}}function Nn(...t){return y.useCallback(df(...t),t)}function Pi(t){const e=ky(t),n=y.forwardRef((r,s)=>{const{children:i,...o}=r,a=y.Children.toArray(i),c=a.find(jy);if(c){const u=c.props.children,d=a.map(h=>h===c?y.Children.count(u)>1?y.Children.only(null):y.isValidElement(u)?u.props.children:null:h);return l.jsx(e,{...o,ref:s,children:y.isValidElement(u)?y.cloneElement(u,void 0,d):null})}return l.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var Sy=Pi("Slot");function ky(t){const e=y.forwardRef((n,r)=>{const{children:s,...i}=n;if(y.isValidElement(s)){const o=Cy(s),a=Ny(i,s.props);return s.type!==y.Fragment&&(a.ref=r?df(r,o):o),y.cloneElement(s,a)}return y.Children.count(s)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var by=Symbol("radix.slottable");function jy(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===by}function Ny(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function Cy(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function hf(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=hf(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ff(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=hf(t))&&(r&&(r+=" "),r+=e);return r}const Lu=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,zu=ff,pf=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return zu(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=Lu(d)||Lu(h);return s[u][f]}),a=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...S}=d;return Object.entries(S).every(v=>{let[k,b]=v;return Array.isArray(b)?b.includes({...i,...a}[k]):{...i,...a}[k]===b})?[...u,h,f]:u},[]);return zu(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};function Ty(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=mf(e))&&(r&&(r+=" "),r+=n);return r}function mf(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=mf(t[r]))&&(n&&(n+=" "),n+=e);return n}var Wa="-";function Ey(t){var e=Py(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,s=r===void 0?{}:r;function i(a){var c=a.split(Wa);return c[0]===""&&c.length!==1&&c.shift(),gf(c,e)||My(a)}function o(a,c){var u=n[a]||[];return c&&s[a]?[].concat(u,s[a]):u}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function gf(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),s=r?gf(t.slice(1),r):void 0;if(s)return s;if(e.validators.length!==0){var i=t.join(Wa);return(o=e.validators.find(function(a){var c=a.validator;return c(i)}))==null?void 0:o.classGroupId}}var Iu=/^\[(.+)\]$/;function My(t){if(Iu.test(t)){var e=Iu.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function Py(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},s=zy(Object.entries(t.classGroups),n);return s.forEach(function(i){var o=i[0],a=i[1];Hl(a,r,o,e)}),r}function Hl(t,e,n,r){t.forEach(function(s){if(typeof s=="string"){var i=s===""?e:Au(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(Ly(s)){Hl(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(function(o){var a=o[0],c=o[1];Hl(c,Au(e,a),n,r)})})}function Au(t,e){var n=t;return e.split(Wa).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function Ly(t){return t.isThemeGetter}function zy(t,e){return e?t.map(function(n){var r=n[0],s=n[1],i=s.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var c=a[0],u=a[1];return[e+c,u]})):o});return[r,i]}):t}function Iy(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function s(i,o){n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(o){var a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set:function(o,a){n.has(o)?n.set(o,a):s(o,a)}}}var yf="!";function Ay(t){var e=t.separator||":",n=e.length===1,r=e[0],s=e.length;return function(o){for(var a=[],c=0,u=0,d,h=0;h<o.length;h++){var f=o[h];if(c===0){if(f===r&&(n||o.slice(h,h+s)===e)){a.push(o.slice(u,h)),u=h+s;continue}if(f==="/"){d=h;continue}}f==="["?c++:f==="]"&&c--}var S=a.length===0?o:o.substring(u),v=S.startsWith(yf),k=v?S.substring(1):S,b=d&&d>u?d-u:void 0;return{modifiers:a,hasImportantModifier:v,baseClassName:k,maybePostfixModifierPosition:b}}}function _y(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var s=r[0]==="[";s?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function Dy(t){return{cache:Iy(t.cacheSize),splitModifiers:Ay(t),...Ey(t)}}var Ry=/\s+/;function Oy(t,e){var n=e.splitModifiers,r=e.getClassGroupId,s=e.getConflictingClassGroupIds,i=new Set;return t.trim().split(Ry).map(function(o){var a=n(o),c=a.modifiers,u=a.hasImportantModifier,d=a.baseClassName,h=a.maybePostfixModifierPosition,f=r(h?d.substring(0,h):d),S=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=r(d),!f)return{isTailwindClass:!1,originalClassName:o};S=!1}var v=_y(c).join(":"),k=u?v+yf:v;return{isTailwindClass:!0,modifierId:k,classGroupId:f,originalClassName:o,hasPostfixModifier:S}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,c=o.classGroupId,u=o.hasPostfixModifier,d=a+c;return i.has(d)?!1:(i.add(d),s(c,u).forEach(function(h){return i.add(a+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function $y(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,s,i,o=a;function a(u){var d=e[0],h=e.slice(1),f=h.reduce(function(S,v){return v(S)},d());return r=Dy(f),s=r.cache.get,i=r.cache.set,o=c,c(u)}function c(u){var d=s(u);if(d)return d;var h=Oy(u,r);return i(u,h),h}return function(){return o(Ty.apply(null,arguments))}}function te(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var vf=/^\[(?:([a-z-]+):)?(.+)\]$/i,Fy=/^\d+\/\d+$/,Hy=new Set(["px","full","screen"]),Wy=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,By=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Yy=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ut(t){return yn(t)||Hy.has(t)||Fy.test(t)||Wl(t)}function Wl(t){return Mn(t,"length",Qy)}function Uy(t){return Mn(t,"size",xf)}function Xy(t){return Mn(t,"position",xf)}function Vy(t){return Mn(t,"url",Zy)}function Hs(t){return Mn(t,"number",yn)}function yn(t){return!Number.isNaN(Number(t))}function Gy(t){return t.endsWith("%")&&yn(t.slice(0,-1))}function Mr(t){return _u(t)||Mn(t,"number",_u)}function X(t){return vf.test(t)}function Pr(){return!0}function Ft(t){return Wy.test(t)}function Ky(t){return Mn(t,"",qy)}function Mn(t,e,n){var r=vf.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function Qy(t){return By.test(t)}function xf(){return!1}function Zy(t){return t.startsWith("url(")}function _u(t){return Number.isInteger(Number(t))}function qy(t){return Yy.test(t)}function Jy(){var t=te("colors"),e=te("spacing"),n=te("blur"),r=te("brightness"),s=te("borderColor"),i=te("borderRadius"),o=te("borderSpacing"),a=te("borderWidth"),c=te("contrast"),u=te("grayscale"),d=te("hueRotate"),h=te("invert"),f=te("gap"),S=te("gradientColorStops"),v=te("gradientColorStopPositions"),k=te("inset"),b=te("margin"),g=te("opacity"),p=te("padding"),m=te("saturate"),x=te("scale"),j=te("sepia"),N=te("skew"),C=te("space"),E=te("translate"),$=function(){return["auto","contain","none"]},z=function(){return["auto","hidden","clip","visible","scroll"]},q=function(){return["auto",X,e]},D=function(){return[X,e]},ce=function(){return["",ut]},H=function(){return["auto",yn,X]},ue=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},ge=function(){return["solid","dashed","dotted","double","none"]},ke=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},L=function(){return["start","end","center","between","around","evenly","stretch"]},R=function(){return["","0",X]},O=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},V=function(){return[yn,Hs]},G=function(){return[yn,X]};return{cacheSize:500,theme:{colors:[Pr],spacing:[ut],blur:["none","",Ft,X],brightness:V(),borderColor:[t],borderRadius:["none","","full",Ft,X],borderSpacing:D(),borderWidth:ce(),contrast:V(),grayscale:R(),hueRotate:G(),invert:R(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[Gy,Wl],inset:q(),margin:q(),opacity:V(),padding:D(),saturate:V(),scale:V(),sepia:R(),skew:G(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",X]}],container:["container"],columns:[{columns:[Ft]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(ue(),[X])}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[k]}],"inset-x":[{"inset-x":[k]}],"inset-y":[{"inset-y":[k]}],start:[{start:[k]}],end:[{end:[k]}],top:[{top:[k]}],right:[{right:[k]}],bottom:[{bottom:[k]}],left:[{left:[k]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Mr]}],basis:[{basis:q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",X]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",Mr]}],"grid-cols":[{"grid-cols":[Pr]}],"col-start-end":[{col:["auto",{span:["full",Mr]},X]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Pr]}],"row-start-end":[{row:["auto",{span:[Mr]},X]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",X]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",X]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(L())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(L(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(L(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",X,e]}],"min-w":[{"min-w":["min","max","fit",X,ut]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Ft]},Ft,X]}],h:[{h:[X,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",X,ut]}],"max-h":[{"max-h":[X,e,"min","max","fit"]}],"font-size":[{text:["base",Ft,Wl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Hs]}],"font-family":[{font:[Pr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",X]}],"line-clamp":[{"line-clamp":["none",yn,Hs]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",X,ut]}],"list-image":[{"list-image":["none",X]}],"list-style-type":[{list:["none","disc","decimal",X]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(ge(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ut]}],"underline-offset":[{"underline-offset":["auto",X,ut]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",X]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",X]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(ue(),[Xy])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Uy]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Vy]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[S]}],"gradient-via":[{via:[S]}],"gradient-to":[{to:[S]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[].concat(ge(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:ge()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(ge())}],"outline-offset":[{"outline-offset":[X,ut]}],"outline-w":[{outline:[ut]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[ut]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ft,Ky]}],"shadow-color":[{shadow:[Pr]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":ke()}],"bg-blend":[{"bg-blend":ke()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ft,X]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[m]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[m]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",X]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",X]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",X]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[Mr,X]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",X]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",X]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",X]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ut,Hs]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var e0=$y(Jy);function Be(...t){return e0(ff(t))}const t0=pf("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),A=y.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?Sy:"button";return l.jsx(o,{className:Be(t0({variant:e,size:n,className:t})),ref:i,...s})});A.displayName="Button";function n0({className:t,variant:e="default",...n}){const r={default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"border border-input text-foreground"};return l.jsx("div",{className:Be("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",r[e],t),...n})}const Y=({content:t,side:e="top",className:n="",children:r,offsetY:s=8})=>{const i=`tooltip-${he.useId()}`,o=he.isValidElement(r)?he.cloneElement(r,{"aria-describedby":i}):l.jsx("span",{tabIndex:0,"aria-describedby":i,className:"inline-flex",children:r}),a=he.useRef(null),c=he.useRef(null),u=he.useRef(null),[d,h]=he.useState(!1),[f,S]=he.useState(null),v=he.useCallback(()=>{let p=s;if(a.current)try{const m=a.current.dataset;if(m&&m.tooltipOffset){const x=parseInt(m.tooltipOffset,10);Number.isNaN(x)||(p=x)}}catch{}return p},[s]),k=he.useCallback(()=>{if(!a.current)return;const p=a.current.getBoundingClientRect(),m=v(),x=p.left+p.width/2,j=40;let N=p.top;e==="top"?N=p.top-j-m:e==="bottom"||e==="auto"?N=p.bottom+m:N=p.top+p.height/2,S({left:x,top:N})},[e,v]);he.useEffect(()=>(window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)),[k]);const b=()=>{requestAnimationFrame(()=>k()),h(!0)},g=()=>{h(!1)};return he.useEffect(()=>{if(!d||!u.current||!a.current)return;const p=u.current.getBoundingClientRect(),m=a.current.getBoundingClientRect(),x=v(),j=p.width/2;let N=m.left+m.width/2;const C=8+j,E=window.innerWidth-8-j;N<C&&(N=C),N>E&&(N=E);let $=m.top-p.height-x;(e==="bottom"||e==="auto")&&($=m.bottom+x),$=Math.max(8,Math.min(window.innerHeight-p.height-8,$)),S({left:N,top:$})},[d,e,v]),l.jsxs(l.Fragment,{children:[l.jsx("span",{ref:a,onMouseEnter:b,onFocus:b,onMouseLeave:g,onBlur:g,className:`relative inline-flex ${n}`,children:o}),typeof document<"u"&&f&&d&&ms.createPortal(l.jsxs("div",{ref:u,id:i,role:"tooltip",className:"pointer-events-none opacity-100 scale-100 transition duration-150 ease-out select-none absolute z-50",style:{left:f.left,top:f.top,transform:"translateX(-50%)",pointerEvents:"none"},children:[l.jsx("span",{ref:c,className:"inline-block bg-black text-white text-xs px-3 py-1.5 rounded-md shadow-md max-w-[18rem] break-words",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t}),l.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 mt-[-6px] w-2 h-2 rotate-45 bg-black","aria-hidden":!0})]}),document.body)]})},pe=y.forwardRef(({className:t,type:e,...n},r)=>l.jsx("input",{type:e,className:Be("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));pe.displayName="Input";function zo({open:t,onOpenChange:e,children:n}){return t?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx("div",{className:"fixed inset-0 bg-black/80",onClick:()=>e(!1)}),l.jsx("div",{className:"relative z-50",children:n})]}):null}function Io({className:t,children:e,...n}){return l.jsx("div",{className:Be("bg-background border border-border rounded-lg p-6 w-full max-w-lg mx-auto shadow-lg",t),...n,children:e})}function Ao({className:t,children:e,...n}){return l.jsx("div",{className:Be("flex flex-col space-y-1.5 text-center sm:text-left",t),...n,children:e})}function _o({className:t,children:e,...n}){return l.jsx("h3",{className:Be("text-lg font-semibold leading-none tracking-tight",t),...n,children:e})}function Do({className:t,children:e,...n}){return l.jsx("p",{className:Be("text-sm text-muted-foreground",t),...n,children:e})}function Ro({className:t,children:e,...n}){return l.jsx("div",{className:Be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n,children:e})}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s0=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Du=t=>{const e=s0(t);return e.charAt(0).toUpperCase()+e.slice(1)},wf=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),i0=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>y.createElement("svg",{ref:c,...o0,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:wf("lucide",s),...!i&&!i0(a)&&{"aria-hidden":"true"},...a},[...o.map(([u,d])=>y.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=(t,e)=>{const n=y.forwardRef(({className:r,...s},i)=>y.createElement(l0,{ref:i,iconNode:e,className:wf(`lucide-${r0(Du(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Du(t),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],c0=W("arrow-up-down",a0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=[["circle",{cx:"9",cy:"9",r:"7",key:"p2h5vp"}],["circle",{cx:"15",cy:"15",r:"7",key:"19ennj"}]],d0=W("blend",u0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],f0=W("check",h0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],m0=W("circle-question-mark",p0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Lr=W("circle",g0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],v0=W("download",y0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],Oo=W("eraser",x0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],S0=W("eye-off",w0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],b0=W("eye",k0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],N0=W("folder-open",j0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Sf=W("folder",C0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ru=W("grid-3x3",T0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Ou=W("link-2",E0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],$u=W("map-pin",M0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Fu=W("map",P0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=[["path",{d:"M5 12h14",key:"1ays0h"}]],Bl=W("minus",L0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],I0=W("moon",z0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],_0=W("mouse-pointer-2",A0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=[["rect",{x:"5",y:"2",width:"14",height:"20",rx:"7",key:"11ol66"}],["path",{d:"M12 6v4",key:"16clxf"}]],Ws=W("mouse",D0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],O0=W("mouse-pointer",R0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],$o=W("move",$0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]],Fo=W("paint-bucket",F0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v4",key:"qmzblu"}],["path",{d:"M17 2a1 1 0 0 1 1 1v9H6V3a1 1 0 0 1 1-1z",key:"ycvu00"}],["path",{d:"M6 12a1 1 0 0 0-1 1v1a2 2 0 0 0 2 2h2a1 1 0 0 1 1 1v2.9a2 2 0 1 0 4 0V17a1 1 0 0 1 1-1h2a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1",key:"iw4wnp"}]],Bs=W("paintbrush-vertical",H0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Hu=W("pen",W0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=[["path",{d:"m12 9-8.414 8.414A2 2 0 0 0 3 18.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 3.828 21h1.344a2 2 0 0 0 1.414-.586L15 12",key:"1y3wsu"}],["path",{d:"m18 9 .4.4a1 1 0 1 1-3 3l-3.8-3.8a1 1 0 1 1 3-3l.4.4 3.4-3.4a1 1 0 1 1 3 3z",key:"110lr1"}],["path",{d:"m2 22 .414-.414",key:"jhxm08"}]],Wu=W("pipette",B0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],U0=W("plus",Y0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],V0=W("redo-2",X0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Bu=W("rotate-ccw",G0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Yu=W("save",K0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Z0=W("scissors",Q0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Uu=W("settings",q0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],ev=W("shapes",J0);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ho=W("shield",tv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],fn=W("square",nv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],sv=W("stamp",rv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ov=W("sun",iv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Dn=W("target",lv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],cv=W("trash-2",av);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],dv=W("undo-2",uv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Wo=W("upload",hv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Bo=W("wand-sparkles",fv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Re=W("x",pv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Xu=W("zoom-in",mv);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],yv=W("zoom-out",gv);class Yo{constructor(e){this.showMinimap=!0,this.isDarkMode=!1,this.debugMode=!1,this.mapWidth=20,this.mapHeight=15,this.tileSizeX=64,this.tileSizeY=32,this.orientation="isometric",this.tileContentThreshold=10,this.objectSeparationSensitivity=.5,this.detectedTileData=new Map,this.layerTilesets=new Map,this.layerTileData=new Map,this.layerActiveGid=new Map,this.tilesets=[],this.tilesetImage=null,this.tilesetFileName=null,this.tilesetColumns=0,this.tilesetRows=0,this.tileCount=0,this.tileLayers=[],this.activeLayerId=null,this.nextLayerId=1,this.collisionData=[],this.objects=[],this.selectedObject=null,this.nextObjectId=1,this.selectedObjectId=null,this.heroX=0,this.heroY=0,this.isDraggingHero=!1,this.heroLastClickTime=0,this.tool="tiles",this.currentTool="brush",this.currentSelectionTool="rectangular",this.currentShapeTool="rectangle",this.currentStampMode="select",this.activeGid=0,this.isMouseDown=!1,this.selection={active:!1,startX:-1,startY:-1,endX:-1,endY:-1,tiles:[]},this.isSelecting=!1,this.shapeDrawing={active:!1,startX:-1,startY:-1,endX:-1,endY:-1,preview:[]},this.isDrawingShape=!1,this.hoverX=-1,this.hoverY=-1,this.zoom=1,this.panX=0,this.panY=0,this.isPanning=!1,this.lastPanX=0,this.lastPanY=0,this.spacePressed=!1,this.history=[],this.historyIndex=-1,this.maxHistorySize=50,this.isApplyingHistory=!1,this.hasUnsavedChanges=!1,this.autoSaveTimeout=null,this.lastSaveTimestamp=0,this.autoSaveCallback=null,this.saveStatusCallback=null,this.AUTO_SAVE_DELAY=8e3,this.IMMEDIATE_SAVE_DELAY=2e3,this.autoSaveEnabled=!0,this.eyedropperCallback=null,this.stamps=new Map,this.activeStamp=null,this.stampPreview={x:0,y:0,visible:!1},this.stampCallback=null,this.heroEditCallback=null,this.mapCanvas=e,this.initializeCanvas(),this.initializeState(),this.bindEvents(),this.createDefaultLayers(),this.saveState(),this.draw()}getTileCount(){return this.tileCount}setTileContentThreshold(e){this.tileContentThreshold=Math.max(0,Math.min(255,e))}getTileContentThreshold(){return this.tileContentThreshold}refreshTilePalette(e=!1){this.tilesetImage&&this.createTilePalette(e)}getDetectedTileInfo(){const e=[];return this.detectedTileData.forEach((n,r)=>{e.push({gid:r,width:n.width,height:n.height,sourceX:n.sourceX,sourceY:n.sourceY})}),e.sort((n,r)=>n.gid-r.gid)}getDetectedTilesForLayer(e){const n=this.layerTileData.get(e);return n?Array.from(n.entries()):[]}getCurrentLayerActiveGid(){const e=this.tileLayers.find(n=>n.id===this.activeLayerId);return e&&this.layerActiveGid.get(e.type)||0}setCurrentLayerActiveGid(e){const n=this.tileLayers.find(r=>r.id===this.activeLayerId);n&&(this.layerActiveGid.set(n.type,e),this.activeGid=e)}mergeBrushes(e){if(e.length<2)return;const n=e.map(h=>this.detectedTileData.get(h)).filter(h=>h!==void 0);if(n.length!==e.length)throw new Error("Some selected brushes not found");let r=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;for(const h of n)r=Math.min(r,h.sourceX),s=Math.min(s,h.sourceY),i=Math.max(i,h.sourceX+h.width),o=Math.max(o,h.sourceY+h.height);const a={sourceX:r,sourceY:s,width:i-r,height:o-s},c=Array.from(this.detectedTileData.entries()),u=c.findIndex(([h])=>e.includes(h)),d=c.filter(([h])=>!e.includes(h));d.splice(u,0,[e[0],a]),this.detectedTileData.clear(),d.forEach(([h,f],S)=>{this.detectedTileData.set(S,f)}),this.createTilePalette(!0),this.markAsChanged(!0),console.log(`Merged ${e.length} brushes into new brush at position ${u}`)}separateBrush(e){console.log(`separateBrush called with brushId: ${e}`);const n=this.detectedTileData.get(e);if(!n)throw console.error(`Brush ${e} not found`),new Error(`Brush ${e} not found`);console.log(`Separating brush ${e} with data:`,n);const r=Array.from(this.detectedTileData.entries()),s=r.findIndex(([a])=>a===e),i=r.filter(([a])=>a!==e),o=[];if(this.tilesetImage){const a=document.createElement("canvas");a.width=n.width,a.height=n.height;const c=a.getContext("2d");if(c){c.drawImage(this.tilesetImage,n.sourceX,n.sourceY,n.width,n.height,0,0,n.width,n.height);const d=c.getImageData(0,0,n.width,n.height).data;console.log(`Analyzing brush area: ${n.width}x${n.height}`);const h=this.findVerticalGaps(d,n.width,n.height);if(console.log("Found vertical gaps:",h),h.length>0){let f=0;for(const S of h){if(S>f){const v=S-f,k=this.findObjectBoundsInRegion(d,n.width,n.height,f,0,v,n.height);k&&k.width>0&&k.height>0&&o.push({sourceX:n.sourceX+k.x,sourceY:n.sourceY+k.y,width:k.width,height:k.height})}f=S+1}if(f<n.width){const S=n.width-f,v=this.findObjectBoundsInRegion(d,n.width,n.height,f,0,S,n.height);v&&v.width>0&&v.height>0&&o.push({sourceX:n.sourceX+v.x,sourceY:n.sourceY+v.y,width:v.width,height:v.height})}}else{const f=new Array(n.width*n.height).fill(!1);for(let S=0;S<n.height;S++)for(let v=0;v<n.width;v++){const k=S*n.width+v;if(f[k]||this.isPixelTransparent(d,v,S,n.width))continue;console.log(`Starting flood fill at pixel (${v}, ${S})`);const b=this.floodFillObjectDataInRegion(d,n.width,n.height,v,S,f);b&&this.isValidObjectSize(b.bounds)?(console.log("Found valid connected component:",b),o.push({sourceX:n.sourceX+b.bounds.x,sourceY:n.sourceY+b.bounds.y,width:b.bounds.width,height:b.bounds.height})):b&&console.log("Found invalid connected component (too small):",b)}}}}if(console.log(`Found ${o.length} new brushes from separation:`,o),o.length<=1){console.log(`No separation needed - only found ${o.length} component(s)`);return}o.forEach((a,c)=>{i.splice(s+c,0,[s+c,a])}),this.detectedTileData.clear(),i.forEach(([a,c],u)=>{this.detectedTileData.set(u,c)}),this.createTilePalette(!0),this.markAsChanged(!0),console.log(`Separated brush ${e} into ${o.length} new brushes`)}removeBrush(e){if(console.log(`removeBrush called with brushId: ${e}`),console.log("detectedTileData keys before removal:",Array.from(this.detectedTileData.keys())),!this.detectedTileData.has(e))throw console.error(`Brush ${e} not found in detectedTileData`),new Error(`Brush ${e} not found`);const n=Array.from(this.detectedTileData.entries());console.log("brushArray before filtering:",n.map(([s,i])=>s));const r=n.filter(([s])=>s!==e);console.log("filteredArray after filtering:",r.map(([s,i])=>s)),this.detectedTileData.clear(),r.forEach(([s,i],o)=>{this.detectedTileData.set(o,i)}),console.log("detectedTileData keys after rebuild:",Array.from(this.detectedTileData.keys())),this.createTilePalette(!0),this.markAsChanged(!0),console.log(`Removed brush ${e}`)}reorderBrush(e,n){const r=Array.from(this.detectedTileData.entries());if(e<0||e>=r.length||n<0||n>=r.length)throw new Error("Invalid brush indices for reordering");const[s]=r.splice(e,1);r.splice(n,0,s),this.detectedTileData.clear(),r.forEach(([i,o],a)=>{this.detectedTileData.set(a,o)}),this.createTilePalette(!0),this.markAsChanged(!0),console.log(`Reordered brush from index ${e} to ${n}`)}findVerticalGaps(e,n,r){const s=[];for(let i=1;i<n-1;i++){let o=!1;for(let a=0;a<r;a++)if(!this.isPixelTransparent(e,i,a,n)){o=!0;break}if(!o){let a=!1,c=!1;for(let u=0;u<r;u++)if(!this.isPixelTransparent(e,i-1,u,n)){a=!0;break}for(let u=0;u<r;u++)if(!this.isPixelTransparent(e,i+1,u,n)){c=!0;break}a&&c&&s.push(i)}}return console.log(`Detected ${s.length} vertical gaps at columns:`,s),s}findObjectBoundsInRegion(e,n,r,s,i,o,a){let c=s+o,u=s,d=i+a,h=i,f=!1;for(let S=i;S<i+a&&S<r;S++)for(let v=s;v<s+o&&v<n;v++)this.isPixelTransparent(e,v,S,n)||(f=!0,c=Math.min(c,v),u=Math.max(u,v),d=Math.min(d,S),h=Math.max(h,S));return f?{x:c,y:d,width:u-c+1,height:h-d+1}:null}floodFillObjectDataInRegion(e,n,r,s,i,o){const a=[{x:s,y:i}];let c=s,u=s,d=i,h=i,f=0;const S=[];for(;a.length>0;){const m=a.pop(),{x,y:j}=m;if(x<0||x>=n||j<0||j>=r)continue;const N=j*n+x;o[N]||this.isPixelTransparent(e,x,j,n)||(o[N]=!0,f++,S.push({x,y:j}),c=Math.min(c,x),u=Math.max(u,x),d=Math.min(d,j),h=Math.max(h,j),a.push({x:x+1,y:j}),a.push({x:x-1,y:j}),a.push({x,y:j+1}),a.push({x,y:j-1}))}if(f===0)return null;const v=1,k=Math.max(0,c-v),b=Math.max(0,d-v),g=Math.min(n-1,u+v),p=Math.min(r-1,h+v);return{bounds:{x:k,y:b,width:g-k+1,height:p-b+1},pixels:S}}initializeCanvas(){const e=this.mapCanvas.getContext("2d");if(!e)throw new Error("Unable to get canvas context");if(this.ctx=e,this.ctx.imageSmoothingEnabled=!1,this.resizeCanvas(),window.addEventListener("resize",()=>this.resizeCanvas()),window.ResizeObserver){const n=new ResizeObserver(()=>this.resizeCanvas());this.mapCanvas.parentElement&&n.observe(this.mapCanvas.parentElement)}}resizeCanvas(){const e=this.mapCanvas.parentElement;e&&requestAnimationFrame(()=>{const n=e.getBoundingClientRect(),r=Math.max(1,Math.floor(n.width)),s=Math.max(1,Math.floor(n.height));(this.mapCanvas.width!==r||this.mapCanvas.height!==s)&&(this.mapCanvas.width=r,this.mapCanvas.height=s,this.draw())})}initializeState(){this.collisionData=new Array(this.mapWidth*this.mapHeight).fill(0)}bindEvents(){this.mapCanvas.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.mapCanvas.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.mapCanvas.addEventListener("mouseup",this.handleMouseUp.bind(this)),this.mapCanvas.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),this.mapCanvas.addEventListener("contextmenu",e=>e.preventDefault()),this.mapCanvas.addEventListener("wheel",this.handleWheel.bind(this)),document.addEventListener("keydown",this.handleKeyDown.bind(this)),document.addEventListener("keyup",this.handleKeyUp.bind(this)),this.mapCanvas.tabIndex=0}createDefaultLayers(){this.tileLayers=[{id:1,name:"NPC Layer",type:"npc",data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1},{id:2,name:"Enemy Layer",type:"enemy",data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1},{id:3,name:"Event Layer",type:"event",data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1},{id:4,name:"Collision Layer",type:"collision",data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1},{id:5,name:"Object Layer",type:"object",data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1},{id:6,name:"Background Layer",type:"background",data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1}],this.activeLayerId=6,this.nextLayerId=7,this.sortLayersByPriority()}handleMouseDown(e){const n=this.mapCanvas.getBoundingClientRect(),r=e.clientX-n.left,s=e.clientY-n.top;if(this.spacePressed)this.isPanning=!0,this.lastPanX=r,this.lastPanY=s,this.mapCanvas.style.cursor="grabbing";else{this.isMouseDown=!0;const i=this.screenToTile(r,s);if(i){if(this.isHeroAtPosition(i.x,i.y)){this.handleHeroClick(i.x,i.y,e);return}this.tool==="tiles"?this.handleTileClick(i.x,i.y,e.button===2):this.tool==="selection"?this.handleSelectionStart(i.x,i.y,e.button===2):this.tool==="shape"?this.handleShapeStart(i.x,i.y,e.button===2):this.tool==="eyedropper"?this.handleEyedropper(i.x,i.y)&&(this.isMouseDown=!1):this.tool==="stamp"&&this.handleStampClick(i.x,i.y,e.button===2)}}}handleMouseMove(e){const n=this.mapCanvas.getBoundingClientRect(),r=e.clientX-n.left,s=e.clientY-n.top;if(this.isPanning&&this.spacePressed){const i=r-this.lastPanX,o=s-this.lastPanY;this.setPan(i,o),this.lastPanX=r,this.lastPanY=s}else{const i=this.screenToTile(r,s);i&&(this.hoverX=i.x,this.hoverY=i.y,this.updateCursorForHover(),this.tool==="stamp"&&this.currentStampMode==="place"&&this.activeStamp&&(this.stampPreview.x=i.x,this.stampPreview.y=i.y,this.stampPreview.visible=!0),this.isMouseDown&&!this.spacePressed&&(this.isDraggingHero?this.setHeroPosition(i.x,i.y):this.tool==="tiles"?this.handleTileClick(i.x,i.y,!1):this.isSelecting?this.handleSelectionDrag(i.x,i.y):this.isDrawingShape&&this.handleShapeDrag(i.x,i.y)))}this.draw()}handleMouseUp(){this.isSelecting?this.handleSelectionEnd():this.isDrawingShape&&this.handleShapeEnd(),this.isDraggingHero&&(this.isDraggingHero=!1),this.isMouseDown=!1,this.isPanning=!1}handleMouseLeave(){this.hideObjectTooltip(),this.hoverX=-1,this.hoverY=-1,this.draw()}handleHeroClick(e,n,r){const s=Date.now();s-this.heroLastClickTime<300?this.openHeroEditDialog():this.isDraggingHero=!0,this.heroLastClickTime=s}openHeroEditDialog(){this.heroEditCallback?this.heroEditCallback(this.heroX,this.heroY,this.mapWidth,this.mapHeight,(e,n)=>{this.setHeroPosition(e,n)}):alert(`Hero position: (${this.heroX}, ${this.heroY}). Set up hero edit dialog in React component.`)}handleWheel(e){e.preventDefault();const n=e.deltaY>0?.9:1.1;this.setZoom(this.zoom*n)}handleKeyDown(e){if(e.code==="Space"&&(e.preventDefault(),this.spacePressed=!0,this.mapCanvas.style.cursor="grab"),e.ctrlKey||e.metaKey)switch(e.code){case"KeyZ":e.preventDefault(),e.shiftKey?this.redo():this.undo();break;case"KeyY":e.preventDefault(),this.redo();break;case"KeyA":e.preventDefault(),this.selectAll();break}switch(e.code){case"Delete":case"Backspace":e.preventDefault(),this.deleteSelection();break;case"Escape":e.preventDefault(),this.clearSelection(),this.isDrawingShape&&(this.shapeDrawing.active=!1,this.isDrawingShape=!1,this.shapeDrawing.preview=[],this.draw());break}}handleKeyUp(e){e.code==="Space"&&(e.preventDefault(),this.spacePressed=!1,this.mapCanvas.style.cursor="crosshair")}screenToTile(e,n){const r=this.screenToWorld(e,n);return this.raycastToTile(r.x,r.y)}handleStampClick(e,n,r){if(r){this.stampPreview.visible=!1,this.draw();return}this.currentStampMode==="create"?this.handleSelectionStart(e,n,r):this.currentStampMode==="place"&&this.activeStamp&&this.placeStamp(e,n)}handleTileClick(e,n,r){if(this.activeLayerId!==null){const s=this.tileLayers.find(i=>i.id===this.activeLayerId);if(s){const i=n*this.mapWidth+e,o=s.data[i];let a;const c=this.getCurrentLayerActiveGid();if(r)a=0;else switch(this.currentTool){case"brush":if(c===0)return;a=c;break;case"eraser":a=0;break;case"bucket":if(c===0)return;o!==c&&(this.saveState(),this.bucketFill(s,e,n,c),this.markAsChanged(),this.draw());return;default:if(c===0)return;a=c;break}o!==a&&(this.saveState(),console.log(`Painting on layer: ${s.name} (ID: ${s.id}, Type: ${s.type})`),console.log(`Position: (${e}, ${n}), Index: ${i}`),console.log(`Current value: ${o}, New value: ${a}`),console.log(`Active GID for this layer: ${c}`),s.data[i]=a,(s.type==="event"||s.type==="enemy"||s.type==="npc"||s.type==="object")&&(a>0?this.createObjectFromTile(e,n,s.type,a):this.removeObjectAtPosition(e,n)),this.markAsChanged(),this.draw())}}}handleSelectionStart(e,n,r){if(r){this.clearSelection();return}const s=this.tileLayers.find(i=>i.id===this.activeLayerId);s&&(this.selection.startX=e,this.selection.startY=n,this.selection.endX=e,this.selection.endY=n,this.currentSelectionTool==="magic-wand"?(this.selectMagicWand(s,e,n),this.draw()):this.currentSelectionTool==="same-tile"?(this.selectSameTile(s,e,n),this.draw()):this.isSelecting=!0)}handleSelectionDrag(e,n){this.isSelecting&&(this.selection.endX=e,this.selection.endY=n,this.draw())}handleSelectionEnd(){if(!this.isSelecting)return;const e=this.tileLayers.find(n=>n.id===this.activeLayerId);e&&(this.currentSelectionTool==="rectangular"?this.selectRectangular(e,this.selection.startX,this.selection.startY,this.selection.endX,this.selection.endY):this.currentSelectionTool==="circular"&&this.selectCircular(e,this.selection.startX,this.selection.startY,this.selection.endX,this.selection.endY),this.isSelecting=!1,this.draw())}handleShapeStart(e,n,r){if(r){this.shapeDrawing.active=!1,this.isDrawingShape=!1,this.draw();return}this.shapeDrawing.active=!0,this.shapeDrawing.startX=e,this.shapeDrawing.startY=n,this.shapeDrawing.endX=e,this.shapeDrawing.endY=n,this.shapeDrawing.preview=[],this.isDrawingShape=!0}handleShapeDrag(e,n){if(this.isDrawingShape){switch(this.shapeDrawing.endX=e,this.shapeDrawing.endY=n,this.currentShapeTool){case"rectangle":this.shapeDrawing.preview=this.drawRectangleShape(this.shapeDrawing.startX,this.shapeDrawing.startY,this.shapeDrawing.endX,this.shapeDrawing.endY);break;case"circle":this.shapeDrawing.preview=this.drawCircleShape(this.shapeDrawing.startX,this.shapeDrawing.startY,this.shapeDrawing.endX,this.shapeDrawing.endY);break;case"line":this.shapeDrawing.preview=this.drawLineShape(this.shapeDrawing.startX,this.shapeDrawing.startY,this.shapeDrawing.endX,this.shapeDrawing.endY);break}this.draw()}}handleShapeEnd(){if(!this.isDrawingShape)return;const e=this.tileLayers.find(r=>r.id===this.activeLayerId);if(!e)return;const n=this.getCurrentLayerActiveGid();this.shapeDrawing.preview.length>0&&n>0&&(this.saveState(),this.shapeDrawing.preview.forEach(r=>{const s=r.y*this.mapWidth+r.x;e.data[s]=n}),this.markAsChanged()),this.shapeDrawing.active=!1,this.isDrawingShape=!1,this.shapeDrawing.preview=[],this.draw()}handleEyedropper(e,n){const r=this.tileLayers.find(s=>s.id===this.activeLayerId);if(!r)return null;if(e>=0&&e<this.mapWidth&&n>=0&&n<this.mapHeight){const s=n*this.mapWidth+e,i=r.data[s];if(i>0)return this.setCurrentLayerActiveGid(i),this.updateTilePaletteSelection(),this.tool="tiles",this.currentTool="brush",this.mapCanvas.style.cursor="crosshair",this.eyedropperCallback&&this.eyedropperCallback(),i}return null}updateTilePaletteSelection(){const e=document.getElementById("activeGid");e&&(e.textContent=this.activeGid.toString()),document.querySelectorAll(".tile-palette .tile").forEach((r,s)=>{const i=r;s===this.activeGid-1?(i.classList.add("selected"),i.scrollIntoView({behavior:"smooth",block:"nearest"})):i.classList.remove("selected")})}draw(){this.ctx.clearRect(0,0,this.mapCanvas.width,this.mapCanvas.height),this.ctx.save(),this.drawGrid(),this.drawTiles(),this.hoverX>=0&&this.hoverY>=0&&this.drawHover(),this.drawSelection(),this.drawHeroPosition(),this.drawShapePreview(),this.ctx.restore(),this.drawMiniMap(),this.drawStampPreview(),this.drawDebugInfo()}mapToScreen(e,n){const r=(e-n)*(this.tileSizeX/2),s=(e+n)*(this.tileSizeY/2),i=this.mapCanvas.width/2+this.panX,o=100+this.panY;return{x:(r+i)*this.zoom,y:(s+o)*this.zoom}}screenToMap(e,n){const r=e/this.zoom,s=n/this.zoom,i=this.mapCanvas.width/2+this.panX,o=100+this.panY,a=r-i,c=s-o,u=a-this.tileSizeX/2,d=c-this.tileSizeY/2,h=this.tileSizeX/2,f=this.tileSizeY/2,S=(u/h+d/f)/2,v=(d/f-u/h)/2;return{x:Math.floor(S),y:Math.floor(v)}}screenToWorld(e,n){const r=e/this.zoom,s=n/this.zoom,i=this.mapCanvas.width/2+this.panX,o=100+this.panY;return{x:r-i,y:s-o}}raycastToTile(e,n){const r=[],s=this.worldToScreen(e,n);for(let i=0;i<this.mapHeight;i++)for(let o=0;o<this.mapWidth;o++)if(this.isPointInTileDiamond(e,n,o,i)){const a=this.mapToScreen(o,i),c=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));r.push({x:o,y:i,distance:c})}return r.length>0?(r.sort((i,o)=>i.distance-o.distance),{x:r[0].x,y:r[0].y}):null}isPointInTileDiamond(e,n,r,s){const i=this.mapToScreen(r,s),o=this.worldToScreen(e,n),a=o.x-i.x,c=o.y-i.y,u=this.tileSizeX/2*this.zoom,d=this.tileSizeY/2*this.zoom,h=.9,f=Math.abs(a/u),S=Math.abs(c/d);return f+S<=h}tileToWorld(e,n){return{x:(e-n)*(this.tileSizeX/2),y:(e+n)*(this.tileSizeY/2)}}worldToScreen(e,n){const r=this.mapCanvas.width/2+this.panX,s=100+this.panY;return{x:(e+r)*this.zoom,y:(n+s)*this.zoom}}drawDebugInfo(){if(this.debugMode){this.ctx.strokeStyle="rgba(255, 0, 0, 0.5)",this.ctx.lineWidth=1;for(let e=0;e<this.mapHeight;e++)for(let n=0;n<this.mapWidth;n++){const r=this.mapToScreen(n,e),s=this.tileSizeX/2*this.zoom,i=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(r.x,r.y-i),this.ctx.lineTo(r.x+s,r.y),this.ctx.lineTo(r.x,r.y+i),this.ctx.lineTo(r.x-s,r.y),this.ctx.closePath(),this.ctx.stroke(),this.ctx.strokeStyle="rgba(0, 255, 0, 0.5)",this.ctx.lineWidth=1;const o=this.tileSizeX*this.zoom,a=this.tileSizeY*this.zoom,c=r.y+i,u=r.x-o/2,d=c-a;this.ctx.strokeRect(u,d,o,a),this.ctx.strokeStyle="rgba(255, 0, 0, 0.5)",this.ctx.fillStyle="rgba(255, 255, 255, 0.8)",this.ctx.font="10px Arial",this.ctx.textAlign="center",this.ctx.fillText(`${n},${e}`,r.x,r.y)}}}toggleDebugMode(){this.debugMode=!this.debugMode,this.draw()}getDebugMode(){return this.debugMode}setZoom(e){this.zoom=Math.max(.1,Math.min(5,e)),this.draw()}getZoom(){return this.zoom}zoomIn(){this.setZoom(this.zoom*1.2)}zoomOut(){this.setZoom(this.zoom/1.2)}resetZoom(){this.zoom=1,this.panX=0,this.panY=0,this.draw()}toggleMinimap(){this.showMinimap=!this.showMinimap,this.draw()}setPan(e,n){this.panX+=e,this.panY+=n,this.draw()}resizeCanvasToContainer(){this.resizeCanvas()}drawGrid(){this.ctx.strokeStyle=this.isDarkMode?"#666":"#999",this.ctx.lineWidth=Math.max(1,Math.min(3,2/this.zoom)),this.ctx.globalAlpha=.8;for(let e=0;e<this.mapHeight;e++)for(let n=0;n<this.mapWidth;n++){const r=this.mapToScreen(n,e),s=this.tileSizeX/2*this.zoom,i=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(r.x,r.y-i),this.ctx.lineTo(r.x+s,r.y),this.ctx.lineTo(r.x,r.y+i),this.ctx.lineTo(r.x-s,r.y),this.ctx.closePath(),this.ctx.stroke()}this.ctx.globalAlpha=1}drawTiles(){const e=[...this.tileLayers].reverse();for(const n of e){if(!n.visible)continue;const r=this.layerTilesets.get(n.type);if(!r||!r.image)continue;this.ctx.globalAlpha=n.transparency||1;const s=this.layerTileData.get(n.type)||new Map;for(let i=0;i<this.mapHeight;i++)for(let o=0;o<this.mapWidth;o++){const a=i*this.mapWidth+o,c=n.data[a];c>0&&this.drawTileFromLayer(o,i,c,r,s)}}this.ctx.globalAlpha=1}drawTileFromLayer(e,n,r,s,i){if(!s.image||r<=0)return;const o=i.get(r);let a,c,u,d;if(o)a=o.sourceX,c=o.sourceY,u=o.width,d=o.height;else{const p=r-1;a=p%s.columns*this.tileSizeX,c=Math.floor(p/s.columns)*this.tileSizeY,u=this.tileSizeX,d=this.tileSizeY}const h=this.mapToScreen(e,n),f=u*this.zoom,S=d*this.zoom,v=this.tileSizeY/2*this.zoom,k=h.y+v,b=h.x-f/2,g=k-S;this.ctx.drawImage(s.image,a,c,u,d,b,g,f,S)}drawTile(e,n,r){if(!this.tilesetImage||r<=0)return;const s=this.detectedTileData.get(r);let i,o,a,c;if(s)i=s.sourceX,o=s.sourceY,a=s.width,c=s.height;else{const b=r-1;i=b%this.tilesetColumns*this.tileSizeX,o=Math.floor(b/this.tilesetColumns)*this.tileSizeY,a=this.tileSizeX,c=this.tileSizeY}const u=this.mapToScreen(e,n),d=a*this.zoom,h=c*this.zoom,f=this.tileSizeY/2*this.zoom,S=u.y+f,v=u.x-d/2,k=S-h;this.ctx.drawImage(this.tilesetImage,i,o,a,c,v,k,d,h)}drawHover(){const e=this.mapToScreen(this.hoverX,this.hoverY),n=this.tileSizeX/2*this.zoom,r=this.tileSizeY/2*this.zoom,s=this.getActiveLayer();s&&["enemy","npc","object","event","background"].includes(s.type)&&this.getObjectsAtPosition(this.hoverX,this.hoverY).length>0?(this.ctx.save(),[{color:"rgba(255, 107, 0, 0.1)",width:8},{color:"rgba(255, 107, 0, 0.2)",width:6},{color:"rgba(255, 107, 0, 0.3)",width:4},{color:"rgba(255, 107, 0, 0.5)",width:2}].forEach(c=>{this.ctx.strokeStyle=c.color,this.ctx.lineWidth=Math.max(1,Math.min(c.width,c.width/this.zoom)),this.ctx.shadowColor="#ff6b00",this.ctx.shadowBlur=Math.max(2,Math.min(10,c.width/this.zoom)),this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y-r),this.ctx.lineTo(e.x+n,e.y),this.ctx.lineTo(e.x,e.y+r),this.ctx.lineTo(e.x-n,e.y),this.ctx.closePath(),this.ctx.stroke()}),this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0,this.ctx.strokeStyle="#ff6b00",this.ctx.lineWidth=Math.max(1,Math.min(3,3/this.zoom)),this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y-r),this.ctx.lineTo(e.x+n,e.y),this.ctx.lineTo(e.x,e.y+r),this.ctx.lineTo(e.x-n,e.y),this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore()):(this.ctx.strokeStyle="#007acc",this.ctx.lineWidth=Math.max(1,Math.min(3,2/this.zoom)),this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y-r),this.ctx.lineTo(e.x+n,e.y),this.ctx.lineTo(e.x,e.y+r),this.ctx.lineTo(e.x-n,e.y),this.ctx.closePath(),this.ctx.stroke())}drawSelection(){this.isSelecting&&(this.currentSelectionTool==="rectangular"||this.currentSelectionTool==="circular")&&(this.ctx.strokeStyle="#ff6b00",this.ctx.lineWidth=Math.max(1,Math.min(2,2/this.zoom)),this.ctx.setLineDash([5,5]),this.currentSelectionTool==="rectangular"?this.drawRectangularSelectionPreview():this.currentSelectionTool==="circular"&&this.drawCircularSelectionPreview(),this.ctx.setLineDash([])),this.selection.active&&this.selection.tiles.length>0&&(this.ctx.strokeStyle="#00ff00",this.ctx.lineWidth=Math.max(1,Math.min(2,2/this.zoom)),this.selection.tiles.forEach(e=>{const n=this.mapToScreen(e.x,e.y),r=this.tileSizeX/2*this.zoom,s=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(n.x,n.y-s),this.ctx.lineTo(n.x+r,n.y),this.ctx.lineTo(n.x,n.y+s),this.ctx.lineTo(n.x-r,n.y),this.ctx.closePath(),this.ctx.stroke()}))}drawRectangularSelectionPreview(){const e=Math.min(this.selection.startX,this.selection.endX),n=Math.max(this.selection.startX,this.selection.endX),r=Math.min(this.selection.startY,this.selection.endY),s=Math.max(this.selection.startY,this.selection.endY);for(let i=r;i<=s;i++)for(let o=e;o<=n;o++)if(o>=0&&o<this.mapWidth&&i>=0&&i<this.mapHeight){const a=this.mapToScreen(o,i),c=this.tileSizeX/2*this.zoom,u=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(a.x,a.y-u),this.ctx.lineTo(a.x+c,a.y),this.ctx.lineTo(a.x,a.y+u),this.ctx.lineTo(a.x-c,a.y),this.ctx.closePath(),this.ctx.stroke()}}drawCircularSelectionPreview(){const e=Math.sqrt(Math.pow(this.selection.endX-this.selection.startX,2)+Math.pow(this.selection.endY-this.selection.startY,2));for(let n=0;n<this.mapHeight;n++)for(let r=0;r<this.mapWidth;r++)if(Math.sqrt(Math.pow(r-this.selection.startX,2)+Math.pow(n-this.selection.startY,2))<=e){const i=this.mapToScreen(r,n),o=this.tileSizeX/2*this.zoom,a=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(i.x,i.y-a),this.ctx.lineTo(i.x+o,i.y),this.ctx.lineTo(i.x,i.y+a),this.ctx.lineTo(i.x-o,i.y),this.ctx.closePath(),this.ctx.stroke()}}drawShapePreview(){!this.isDrawingShape||this.shapeDrawing.preview.length===0||(this.ctx.strokeStyle="#0099ff",this.ctx.lineWidth=Math.max(1,Math.min(2,2/this.zoom)),this.ctx.setLineDash([3,3]),this.shapeDrawing.preview.forEach(e=>{const n=this.mapToScreen(e.x,e.y),r=this.tileSizeX/2*this.zoom,s=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(n.x,n.y-s),this.ctx.lineTo(n.x+r,n.y),this.ctx.lineTo(n.x,n.y+s),this.ctx.lineTo(n.x-r,n.y),this.ctx.closePath(),this.ctx.stroke()}),this.ctx.setLineDash([]))}drawHeroPosition(){const e=this.mapToScreen(this.heroX,this.heroY),n=this.tileSizeX/2*this.zoom,r=this.tileSizeY/2*this.zoom;this.ctx.save(),this.hoverX===this.heroX&&this.hoverY===this.heroY&&[{color:"rgba(255, 107, 0, 0.1)",width:8},{color:"rgba(255, 107, 0, 0.2)",width:6},{color:"rgba(255, 107, 0, 0.3)",width:4},{color:"rgba(255, 107, 0, 0.5)",width:2}].forEach(o=>{this.ctx.strokeStyle=o.color,this.ctx.lineWidth=Math.max(1,Math.min(o.width,o.width/this.zoom)),this.ctx.shadowColor="#ff6b00",this.ctx.shadowBlur=Math.max(2,Math.min(10,o.width/this.zoom)),this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y-r),this.ctx.lineTo(e.x+n,e.y),this.ctx.lineTo(e.x,e.y+r),this.ctx.lineTo(e.x-n,e.y),this.ctx.closePath(),this.ctx.stroke()}),this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0,this.ctx.fillStyle="#ff6b00",this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y-r),this.ctx.lineTo(e.x+n,e.y),this.ctx.lineTo(e.x,e.y+r),this.ctx.lineTo(e.x-n,e.y),this.ctx.closePath(),this.ctx.fill(),this.ctx.strokeStyle="#ff8c00",this.ctx.lineWidth=Math.max(1,Math.min(2,2/this.zoom)),this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y-r),this.ctx.lineTo(e.x+n,e.y),this.ctx.lineTo(e.x,e.y+r),this.ctx.lineTo(e.x-n,e.y),this.ctx.closePath(),this.ctx.stroke(),this.drawHeroIcon(e.x,e.y),this.ctx.restore()}drawHeroIcon(e,n){const s=Math.max(12,Math.min(20,16*this.zoom))/2;this.ctx.save(),this.ctx.fillStyle="#ffffff",this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=1.5,this.ctx.beginPath(),this.ctx.arc(e,n-s*.6,s*.25,0,Math.PI*2),this.ctx.fill(),this.ctx.beginPath(),this.ctx.roundRect(e-s*.3,n-s*.2,s*.6,s*.8,s*.15),this.ctx.fill(),this.ctx.restore()}drawStampPreview(){if(!(!this.stampPreview.visible||!this.activeStamp)){this.ctx.strokeStyle="#00ff00",this.ctx.fillStyle="rgba(0, 255, 0, 0.2)",this.ctx.lineWidth=Math.max(1,Math.min(2,2/this.zoom)),this.ctx.setLineDash([3,3]);for(let e=0;e<this.activeStamp.height;e++)for(let n=0;n<this.activeStamp.width;n++){const r=this.stampPreview.x+n,s=this.stampPreview.y+e;if(r>=0&&r<this.mapWidth&&s>=0&&s<this.mapHeight){const i=this.mapToScreen(r,s),o=this.tileSizeX/2*this.zoom,a=this.tileSizeY/2*this.zoom;this.ctx.beginPath(),this.ctx.moveTo(i.x,i.y-a),this.ctx.lineTo(i.x+o,i.y),this.ctx.lineTo(i.x,i.y+a),this.ctx.lineTo(i.x-o,i.y),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()}}this.ctx.setLineDash([])}}drawMiniMap(){if(!this.showMinimap)return;const e=150,n=120,r=10,s=this.mapCanvas.width-e-r,i=this.mapCanvas.height-n-r;this.ctx.save();const o=5,a=s-o,c=i-o,u=e+o*2,d=n+o*2,h=Math.min(12,Math.floor(Math.min(u,d)/6)),f=Math.min(8,Math.floor(Math.min(e,n)/8)),S=(j,N,C,E,$)=>{const z=Math.max(0,Math.min($,Math.min(C,E)/2));this.ctx.beginPath(),this.ctx.moveTo(j+z,N),this.ctx.lineTo(j+C-z,N),this.ctx.quadraticCurveTo(j+C,N,j+C,N+z),this.ctx.lineTo(j+C,N+E-z),this.ctx.quadraticCurveTo(j+C,N+E,j+C-z,N+E),this.ctx.lineTo(j+z,N+E),this.ctx.quadraticCurveTo(j,N+E,j,N+E-z),this.ctx.lineTo(j,N+z),this.ctx.quadraticCurveTo(j,N,j+z,N),this.ctx.closePath()};this.ctx.fillStyle=this.isDarkMode?"rgba(42, 42, 42, 0.9)":"rgba(0, 0, 0, 0.7)",S(a,c,u,d,h),this.ctx.fill(),this.ctx.fillStyle=this.isDarkMode?"#2a2a2a":"#f0f0f0",S(s,i,e,n,f),this.ctx.fill(),this.ctx.strokeStyle=this.isDarkMode?"#999":"#333",this.ctx.lineWidth=1,S(s,i,e,n,f),this.ctx.stroke();const v=Math.floor(e/this.mapWidth)||1,k=Math.floor(n/this.mapHeight)||1,b=Math.max(1,Math.min(v,k)),g=this.mapWidth*b,p=this.mapHeight*b,m=s+Math.floor((e-g)/2),x=i+Math.floor((n-p)/2);this.ctx.imageSmoothingEnabled=!1;for(let j=0;j<this.tileLayers.length;j++){const N=this.tileLayers[j];if(N.visible)for(let C=0;C<this.mapHeight;C++)for(let E=0;E<this.mapWidth;E++){const $=C*this.mapWidth+E,z=N.data[$];if(z>0){const q=m+E*b,D=x+C*b,ce=z*137.5%360;this.ctx.fillStyle=`hsl(${ce}, 55%, ${j===0?"45%":"60%"})`,this.ctx.fillRect(q,D,b,b)}}}if(b>=3){this.ctx.strokeStyle=this.isDarkMode?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.05)",this.ctx.lineWidth=.5;for(let j=0;j<this.mapHeight;j++)for(let N=0;N<this.mapWidth;N++){const C=m+N*b+.25,E=x+j*b+.25;this.ctx.strokeRect(C,E,b-.5,b-.5)}}this.ctx.restore()}handleFileUpload(e,n){if(n==="tileset"){const r=new FileReader;r.onload=s=>{var o;const i=new Image;i.onload=()=>{this.tilesetImage=i,this.tilesetFileName=e.name,this.tilesetColumns=Math.floor(i.width/this.tileSizeX),this.tilesetRows=Math.floor(i.height/this.tileSizeY),this.tileCount=this.tilesetColumns*this.tilesetRows,this.createTilePalette(),this.draw()},i.src=(o=s.target)==null?void 0:o.result},r.readAsDataURL(e)}else if(n==="layerTileset"){const r=this.tileLayers.find(s=>s.id===this.activeLayerId);r&&this.setLayerTileset(r.type,e)}}createTilePalette(e=!1){const n=document.getElementById("tilesContainer");if(!n||!this.tilesetImage)return;n.innerHTML="";let r;if(e&&this.detectedTileData.size>0)r=Array.from(this.detectedTileData.entries()).map(([i,o])=>({index:i,sourceX:o.sourceX,sourceY:o.sourceY,width:o.width,height:o.height}));else{this.detectedTileData.clear(),r=this.detectVariableSizedTiles().map(a=>(this.detectedTileData.set(a.index,{sourceX:a.sourceX,sourceY:a.sourceY,width:a.width,height:a.height}),a));const o=this.tileLayers.find(a=>a.id===this.activeLayerId);if(o){const a=new Map;for(const[c,u]of this.detectedTileData.entries())a.set(c,u);this.layerTileData.set(o.type,a),console.log(`Stored ${a.size} newly detected tiles for layer type: ${o.type}`)}}let s=0;for(const i of r){const o=document.createElement("canvas");o.width=i.width,o.height=i.height,o.width=i.width,o.height=i.height,o.className="palette-tile",o.style.setProperty("--tile-width",`${i.width}px`),o.style.setProperty("--tile-height",`${i.height}px`);const a=o.getContext("2d");a&&a.drawImage(this.tilesetImage,i.sourceX,i.sourceY,i.width,i.height,0,0,i.width,i.height);const c=document.createElement("div");c.className="brush-wrapper",c.style.position="relative",c.style.display="inline-block",c.style.margin="2px";const u=document.createElement("div");u.className="selection-number",u.style.position="absolute",u.style.top="2px",u.style.left="2px",u.style.background="red",u.style.color="white",u.style.borderRadius="50%",u.style.width="16px",u.style.height="16px",u.style.fontSize="10px",u.style.display="none",u.style.alignItems="center",u.style.justifyContent="center",u.style.fontWeight="bold",u.style.zIndex="10";const d=document.createElement("div");d.className="remove-overlay",d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.right="0",d.style.bottom="0",d.style.background="rgba(255, 0, 0, 0.7)",d.style.display="none",d.style.alignItems="center",d.style.justifyContent="center",d.style.fontSize="24px",d.style.color="white",d.style.cursor="pointer",d.style.zIndex="10",d.textContent="✕";const h=document.createElement("div");h.className="separate-icon",h.style.position="absolute",h.style.top="50%",h.style.left="50%",h.style.transform="translate(-50%, -50%)",h.style.display="none",h.style.alignItems="center",h.style.justifyContent="center",h.style.background="none",h.style.color="white",h.style.zIndex="2",h.style.pointerEvents="none",h.style.width="24px",h.style.height="24px",h.innerHTML=`
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="6" cy="6" r="3"></circle>
          <circle cx="6" cy="18" r="3"></circle>
          <line x1="20" y1="4" x2="8.12" y2="15.88"></line>
          <line x1="14.47" y1="14.48" x2="20" y2="20"></line>
          <line x1="8.12" y1="8.12" x2="12" y2="12"></line>
        </svg>
      `;const f=document.createElement("div");f.className="merge-icon",f.style.position="absolute",f.style.top="50%",f.style.left="50%",f.style.transform="translate(-50%, -50%)",f.style.display="none",f.style.alignItems="center",f.style.justifyContent="center",f.style.background="none",f.style.color="white",f.style.zIndex="2",f.style.pointerEvents="none",f.style.width="24px",f.style.height="24px",f.innerHTML=`
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m8 6 4-4 4 4"></path>
          <path d="M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22"></path>
          <path d="m20 22-6.828-6.828A4 4 0 0 1 12 12.3"></path>
        </svg>
      `,d.addEventListener("click",b=>{b.preventDefault(),b.stopPropagation(),console.log(`Remove overlay clicked for tile index: ${i.index}`),this.handleBrushRemove(i.index)}),o.addEventListener("click",b=>{b.preventDefault();const g=document.querySelector("[data-brush-tool]"),p=(g==null?void 0:g.getAttribute("data-brush-tool"))||"none";console.log(`Tile clicked! Index: ${i.index}, Current brush tool: ${p}`),p==="merge"?(console.log("Handling merge tool selection"),this.handleBrushMerge(i.index,c)):p==="separate"?(console.log("Handling separate tool"),this.handleBrushSeparate(i.index)):p==="remove"?(console.log("Handling remove tool"),this.handleBrushRemove(i.index)):(console.log("Normal tile selection"),this.setCurrentLayerActiveGid(i.index),this.updateActiveTile())}),c.draggable=!1,c.addEventListener("dragstart",b=>{const g=document.querySelector("[data-brush-tool]");((g==null?void 0:g.getAttribute("data-brush-tool"))||"none")==="move"?(c.style.opacity="0.5",b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text/plain",i.index.toString()),this.dispatchBrushEvent("dragstart",i.index)):b.preventDefault()}),c.addEventListener("dragend",b=>{c.style.opacity="1",this.dispatchBrushEvent("dragend",i.index)}),c.addEventListener("dragover",b=>{const g=document.querySelector("[data-brush-tool]");((g==null?void 0:g.getAttribute("data-brush-tool"))||"none")==="move"&&(b.preventDefault(),b.dataTransfer.dropEffect="move",c.style.borderTop="3px solid #007acc")}),c.addEventListener("dragleave",b=>{c.style.borderTop=""}),c.addEventListener("drop",b=>{b.preventDefault(),c.style.borderTop="";const g=document.querySelector("[data-brush-tool]");if(((g==null?void 0:g.getAttribute("data-brush-tool"))||"none")==="move"){const m=parseInt(b.dataTransfer.getData("text/plain")),x=i.index;m!==x&&this.dispatchBrushEvent("drop",{from:m,to:x})}});const S=()=>{const b=document.querySelector("[data-brush-tool]"),g=(b==null?void 0:b.getAttribute("data-brush-tool"))||"none";c.classList.remove("separate-mode","merge-mode","merge-selected-first","merge-selected-second"),c.draggable=!1,c.style.cursor="",c.title="",c.setAttribute("data-tile-index",i.index.toString()),g==="move"?(c.draggable=!0,c.style.cursor="move",c.title="Drag to reorder"):g==="separate"?(c.classList.add("separate-mode"),c.style.cursor="pointer",c.title="Click to separate"):g==="merge"&&(c.classList.add("merge-mode"),c.style.cursor="pointer",c.title="Click to merge (max 2 brushes)")};S();const v=new MutationObserver(()=>{S()}),k=document.querySelector("[data-brush-tool]");k&&v.observe(k,{attributes:!0,attributeFilter:["data-brush-tool"]}),c.addEventListener("mouseenter",()=>{const b=document.querySelector("[data-brush-tool]");((b==null?void 0:b.getAttribute("data-brush-tool"))||"none")==="remove"&&(d.style.display="flex")}),c.addEventListener("mouseleave",()=>{d.style.display="none"}),o.setAttribute("data-tile-index",i.index.toString()),o.setAttribute("data-tile-width",i.width.toString()),o.setAttribute("data-tile-height",i.height.toString()),o.setAttribute("data-source-x",i.sourceX.toString()),o.setAttribute("data-source-y",i.sourceY.toString()),c.appendChild(o),c.appendChild(u),c.appendChild(d),c.appendChild(h),c.appendChild(f),n.appendChild(c),s++}console.log(`Created ${s} variable-sized tiles from tileset`)}handleBrushMerge(e,n){const r=document.querySelector(".merge-selected-first"),s=document.querySelector(".merge-selected-second");if(n.classList.contains("merge-selected-first")||n.classList.contains("merge-selected-second")){n.classList.remove("merge-selected-first","merge-selected-second");return}if(!r)n.classList.add("merge-selected-first");else if(!s)n.classList.add("merge-selected-second"),setTimeout(()=>{const i=parseInt(r.getAttribute("data-tile-index")||"0");this.performMerge(i,e),r.classList.remove("merge-selected-first"),n.classList.remove("merge-selected-second")},300);else return}performMerge(e,n){console.log(`Merging tiles ${e} and ${n}`);try{this.mergeBrushes([e,n]),console.log(`Successfully merged brushes ${e} and ${n}`)}catch(r){console.error("Failed to merge brushes:",r)}}handleBrushSeparate(e){this.dispatchBrushEvent("separate",e)}handleBrushRemove(e){console.log(`handleBrushRemove called with tileIndex: ${e}`),this.dispatchBrushEvent("remove",e)}dispatchBrushEvent(e,n){const r=new CustomEvent("brushAction",{detail:typeof n=="number"?{action:e,tileIndex:n}:{action:e,...n}});document.dispatchEvent(r)}detectVariableSizedTiles(){if(!this.tilesetImage)return[];const e=[],n=document.createElement("canvas");n.width=this.tilesetImage.width,n.height=this.tilesetImage.height;const r=n.getContext("2d");if(!r)return[];r.drawImage(this.tilesetImage,0,0);const i=r.getImageData(0,0,this.tilesetImage.width,this.tilesetImage.height).data,o=new Array(this.tilesetImage.width*this.tilesetImage.height).fill(!1);let a=1;const c=[];for(let u=0;u<this.tilesetImage.height;u++)for(let d=0;d<this.tilesetImage.width;d++){const h=u*this.tilesetImage.width+d;if(o[h]||this.isPixelTransparent(i,d,u,this.tilesetImage.width))continue;const f=this.floodFillObjectData(i,this.tilesetImage.width,this.tilesetImage.height,d,u,o);f&&this.isValidObjectSize(f.bounds)&&c.push(f)}for(const u of c){const d=this.intelligentObjectSplit(u);for(const h of d)e.push({index:a++,sourceX:h.x,sourceY:h.y,width:h.width,height:h.height})}return e}isPixelTransparent(e,n,r,s){const i=(r*s+n)*4+3;return e[i]<=this.tileContentThreshold}floodFillObjectData(e,n,r,s,i,o){const a=[{x:s,y:i}];let c=s,u=s,d=i,h=i,f=0;const S=[];for(;a.length>0;){const m=a.pop(),{x,y:j}=m;if(x<0||x>=n||j<0||j>=r)continue;const N=j*n+x;o[N]||this.isPixelTransparent(e,x,j,n)||(o[N]=!0,f++,S.push({x,y:j}),c=Math.min(c,x),u=Math.max(u,x),d=Math.min(d,j),h=Math.max(h,j),a.push({x:x+1,y:j}),a.push({x:x-1,y:j}),a.push({x,y:j+1}),a.push({x,y:j-1}),a.push({x:x+1,y:j+1}),a.push({x:x+1,y:j-1}),a.push({x:x-1,y:j+1}),a.push({x:x-1,y:j-1}))}if(f===0)return null;const v=1,k=Math.max(0,c-v),b=Math.max(0,d-v),g=Math.min(n-1,u+v),p=Math.min(r-1,h+v);return{bounds:{x:k,y:b,width:g-k+1,height:p-b+1},pixels:S}}intelligentObjectSplit(e){const{bounds:n,pixels:r}=e,{width:s,height:i}=n,o=r.length,a=s*i,c=o/a,u=Math.max(this.tileSizeX,this.tileSizeY),d=this.shouldSplitDirection(r,n,"horizontal",u),h=this.shouldSplitDirection(r,n,"vertical",u),f=this.isFloorPattern(n,r),S=this.isVerticalWall(n,r),v=this.isHorizontalWall(n,r);return console.log(`Object analysis: ${s}x${i}, density: ${c.toFixed(2)}, floor: ${f}, vWall: ${S}, hWall: ${v}`),f?(console.log("Detected floor/ground pattern - splitting into individual tiles"),this.splitObjectByGrid(e,"horizontal")):S?(console.log("Detected vertical wall/structure - keeping as single tile"),[n]):v?(console.log("Detected horizontal wall - keeping as single tile"),[n]):d&&s>this.tileSizeX*1.5?(console.log("Splitting horizontal arrangement into individual objects"),this.splitObjectByGrid(e,"horizontal")):h&&i>this.tileSizeY*1.5&&!this.isLikelySingleVerticalObject(n,r)?(console.log("Splitting vertical arrangement into individual objects"),this.splitObjectByGrid(e,"vertical")):c<.4&&a>u*u*2?(console.log("Splitting sparse large object"),this.splitObjectByDensity(e)):(s>this.tileSizeX*1.8||i>this.tileSizeY*1.8)&&!S&&!v&&c<.8?(console.log("Splitting large non-wall object into tile-sized pieces"),this.splitObjectByGrid(e,s>i?"horizontal":"vertical")):(console.log("Keeping as single object"),[n])}isVerticalWall(e,n){const{width:r,height:s}=e,i=s/r,o=n.length/(r*s);if(i<1.5||o<.5)return!1;const a=this.hasConsistentVerticalWidth(n,e),c=this.hasVerticalContinuity(n,e),u=s>this.tileSizeY*1.5&&r<=this.tileSizeX*1.2;return a&&c||u&&o>.6}isHorizontalWall(e,n){const{width:r,height:s}=e,i=r/s,o=n.length/(r*s);if(i<2||o<.6||s<this.tileSizeY*.7)return!1;const a=this.hasConsistentHorizontalHeight(n,e),c=this.hasHorizontalContinuity(n,e);return a&&c}isLikelySingleVerticalObject(e,n){const{width:r,height:s}=e;return n.length/(r*s)>.7?!0:this.hasVerticalContinuity(n,e)}hasConsistentVerticalWidth(e,n){const{y:r,height:s}=n,i=Math.max(1,Math.floor(s/5)),o=[];for(let d=0;d<5;d++){const h=r+d*i,f=Math.min(h+i,r+s);let S=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER,k=!1;for(const b of e)b.y>=h&&b.y<f&&(S=Math.min(S,b.x),v=Math.max(v,b.x),k=!0);k&&o.push(v-S+1)}if(o.length<2)return!1;const a=o.reduce((d,h)=>d+h,0)/o.length,c=o.reduce((d,h)=>d+Math.pow(h-a,2),0)/o.length,u=Math.sqrt(c);return a>0&&u/a<.3}hasConsistentHorizontalHeight(e,n){const{x:r,width:s}=n,i=Math.max(1,Math.floor(s/5)),o=[];for(let d=0;d<5;d++){const h=r+d*i,f=Math.min(h+i,r+s);let S=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER,k=!1;for(const b of e)b.x>=h&&b.x<f&&(S=Math.min(S,b.y),v=Math.max(v,b.y),k=!0);k&&o.push(v-S+1)}if(o.length<2)return!1;const a=o.reduce((d,h)=>d+h,0)/o.length,c=o.reduce((d,h)=>d+Math.pow(h-a,2),0)/o.length,u=Math.sqrt(c);return a>0&&u/a<.3}hasVerticalContinuity(e,n){const{y:r,height:s}=n,i=Math.max(1,Math.floor(s/10));let o=0,a=0;for(let c=r;c<r+s;c+=i){const u=Math.min(c+i,r+s);let d=!1;for(const h of e)if(h.y>=c&&h.y<u){d=!0;break}d&&o++,a++}return a>0&&o/a>=.7}hasHorizontalContinuity(e,n){const{x:r,width:s}=n,i=Math.max(1,Math.floor(s/10));let o=0,a=0;for(let c=r;c<r+s;c+=i){const u=Math.min(c+i,r+s);let d=!1;for(const h of e)if(h.x>=c&&h.x<u){d=!0;break}d&&o++,a++}return a>0&&o/a>=.7}isFloorPattern(e,n){const{width:r,height:s}=e,i=s<=this.tileSizeY*.6,o=r>this.tileSizeX*1.3,a=this.hasRepeatingHorizontalPattern(n,e),c=this.hasDiamondLikeShape(n,e);return i&&o||a&&o||c&&o}hasRepeatingHorizontalPattern(e,n){const{x:r,width:s}=n,i=this.tileSizeX,o=Math.floor(s/i);if(o<2)return!1;const a=[];for(let h=0;h<o;h++){const f=r+h*i,S=f+i;let v=0;for(const k of e)k.x>=f&&k.x<S&&v++;a.push(v)}const c=a.reduce((h,f)=>h+f,0)/a.length,u=a.reduce((h,f)=>h+Math.pow(f-c,2),0)/a.length,d=Math.sqrt(u);return c>0&&d/c<.5}hasDiamondLikeShape(e,n){const{y:r,height:s}=n,i=[];for(let h=0;h<s;h++){let f=0;for(const S of e)S.y===r+h&&f++;i.push(f)}if(i.length<3)return!1;const o=Math.floor(i.length*.2),a=Math.floor(i.length*.3),c=Math.floor(i.length*.7),u=(i.slice(0,o).reduce((h,f)=>h+f,0)+i.slice(-o).reduce((h,f)=>h+f,0))/(o*2||1);return i.slice(a,c).reduce((h,f)=>h+f,0)/(c-a||1)>u*1.2}shouldSplitDirection(e,n,r,s){const{x:i,y:o,width:a,height:c}=n;if(r==="horizontal"){const u=[],d=Math.max(1,Math.floor(a/(a/s)));for(let v=0;v<a;v+=d){let k=0;for(const b of e)b.x>=i+v&&b.x<i+v+d&&k++;u.push(k)}let h=0,f=0;const S=u.reduce((v,k)=>v+k,0)/u.length;for(let v=0;v<u.length;v++)u[v]<S*.3?h++:u[v]>S*.7&&f++;return f>=2&&h>=1}else{const u=[],d=Math.max(1,Math.floor(c/(c/s)));for(let v=0;v<c;v+=d){let k=0;for(const b of e)b.y>=o+v&&b.y<o+v+d&&k++;u.push(k)}let h=0,f=0;const S=u.reduce((v,k)=>v+k,0)/u.length;for(let v=0;v<u.length;v++)u[v]<S*.3?h++:u[v]>S*.7&&f++;return f>=2&&h>=1}}splitObjectByGrid(e,n){const{bounds:r}=e,s=[];if(n==="horizontal"){const i=this.tileSizeX;for(let o=r.x;o<r.x+r.width;o+=i){const a=this.findContentInRegion(e.pixels,{x:o,y:r.y,width:Math.min(i,r.x+r.width-o),height:r.height});a&&s.push(a)}}else{const i=this.tileSizeY;for(let o=r.y;o<r.y+r.height;o+=i){const a=this.findContentInRegion(e.pixels,{x:r.x,y:o,width:r.width,height:Math.min(i,r.y+r.height-o)});a&&s.push(a)}}return s.length>0?s:[r]}splitObjectByDensity(e){const{bounds:n}=e,r=Math.min(this.tileSizeX,this.tileSizeY),s=[];for(let i=n.y;i<n.y+n.height;i+=r)for(let o=n.x;o<n.x+n.width;o+=r){const a=this.findContentInRegion(e.pixels,{x:o,y:i,width:Math.min(r,n.x+n.width-o),height:Math.min(r,n.y+n.height-i)});a&&s.push(a)}return s.length>0?s:[n]}findContentInRegion(e,n){let r=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,a=!1;for(const u of e)u.x>=n.x&&u.x<n.x+n.width&&u.y>=n.y&&u.y<n.y+n.height&&(r=Math.min(r,u.x),s=Math.max(s,u.x),i=Math.min(i,u.y),o=Math.max(o,u.y),a=!0);if(!a)return null;const c=1;return{x:Math.max(0,r-c),y:Math.max(0,i-c),width:s-r+1+c*2,height:o-i+1+c*2}}isValidObjectSize(e){var s,i;const r=Math.max(((s=this.tilesetImage)==null?void 0:s.width)||512,((i=this.tilesetImage)==null?void 0:i.height)||512);return e.width>=8&&e.height>=8&&e.width<=r&&e.height<=r&&e.width*e.height>=8*8}setObjectSeparationSensitivity(e){this.objectSeparationSensitivity=Math.max(0,Math.min(1,e))}getObjectSeparationSensitivity(){return this.objectSeparationSensitivity}tileHasContent(e){try{const r=e.getImageData(0,0,this.tileSizeX,this.tileSizeY).data;for(let s=3;s<r.length;s+=4)if(r[s]>this.tileContentThreshold)return!0;return!1}catch(n){return console.warn("Could not analyze tile content, assuming tile has content:",n),!0}}updateActiveTile(){const e=document.getElementById("activeGid");if(e&&(e.textContent=this.activeGid.toString()),document.querySelectorAll(".palette-tile").forEach(r=>r.classList.remove("selected")),this.activeGid>0){const r=document.querySelector(`.palette-tile[data-tile-index="${this.activeGid}"]`);r&&r.classList.add("selected")}}resizeMap(e,n){this.mapWidth=e,this.mapHeight=n;for(const r of this.tileLayers){const s=new Array(e*n).fill(0);for(let i=0;i<Math.min(n,this.mapHeight);i++)for(let o=0;o<Math.min(e,this.mapWidth);o++){const a=i*this.mapWidth+o,c=i*e+o;a<r.data.length&&(s[c]=r.data[a])}r.data=s}this.draw(),this.markAsChanged(!0)}addLayer(e,n){if(this.tileLayers.find(i=>i.type===n))return!1;this.saveState();const s={id:this.nextLayerId++,name:e,type:n,data:new Array(this.mapWidth*this.mapHeight).fill(0),visible:!0,transparency:1};return this.tileLayers.push(s),this.sortLayersByPriority(),this.activeLayerId=s.id,this.draw(),this.markAsChanged(!0),!0}sortLayersByPriority(){const e={npc:1,enemy:2,event:3,collision:4,object:5,background:6};this.tileLayers.sort((n,r)=>e[n.type]-e[r.type])}deleteLayer(e){if(this.tileLayers.length<=1)return!1;const n=this.tileLayers.findIndex(r=>r.id===e);return n!==-1?(this.saveState(),this.tileLayers.splice(n,1),this.activeLayerId===e&&(this.activeLayerId=this.tileLayers.length>0?this.tileLayers[0].id:null),this.draw(),this.markAsChanged(!0),!0):!1}setActiveLayer(e){this.activeLayerId=e;const n=this.tileLayers.find(r=>r.id===e);n&&this.updateCurrentTileset(n.type),this.draw()}toggleLayerVisibility(e){const n=this.tileLayers.find(r=>r.id===e);n&&(n.visible=!n.visible,this.draw())}setLayerTransparency(e,n){const r=this.tileLayers.find(s=>s.id===e);r&&(r.transparency=Math.max(0,Math.min(1,n)),this.draw())}setMapSize(e,n){this.mapWidth=e,this.mapHeight=n,this.collisionData=new Array(e*n).fill(0),this.tileLayers.forEach(r=>{const s=r.data;r.data=new Array(e*n).fill(0);for(let i=0;i<Math.min(n,15);i++)for(let o=0;o<Math.min(e,20);o++){const a=i*20+o,c=i*e+o;a<s.length&&(r.data[c]=s[a])}}),this.draw()}renameLayer(e,n){const r=this.tileLayers.find(s=>s.id===e);r&&(r.name=n)}changeLayerType(e,n,r){const s=this.tileLayers.find(i=>i.id===e);return s?(s.type=n,s.name=r,this.sortLayersByPriority(),!0):!1}setLayerType(e,n){const r=this.tileLayers.find(s=>s.id===e);r&&(r.type=n,this.sortLayersByPriority())}getLayers(){return this.tileLayers}getActiveLayerId(){return this.activeLayerId}getHoverCoordinates(){return this.hoverX>=0&&this.hoverY>=0?{x:this.hoverX,y:this.hoverY}:null}getActiveLayer(){return this.activeLayerId!==null&&this.tileLayers.find(e=>e.id===this.activeLayerId)||null}setCurrentTool(e){this.currentTool=e,this.tool="tiles"}getCurrentTool(){return this.currentTool}setCurrentSelectionTool(e){this.currentSelectionTool=e,this.tool="selection"}getCurrentSelectionTool(){return this.currentSelectionTool}setCurrentShapeTool(e){this.currentShapeTool=e,this.tool="shape"}getCurrentShapeTool(){return this.currentShapeTool}setEyedropperTool(){this.tool="eyedropper",this.mapCanvas.style.cursor="crosshair"}isEyedropperActive(){return this.tool==="eyedropper"}setEyedropperCallback(e){this.eyedropperCallback=e}setStampTool(){this.tool="stamp",this.mapCanvas.style.cursor="crosshair",this.stampPreview.visible=!1}isStampActive(){return this.tool==="stamp"}setCurrentStampMode(e){this.currentStampMode=e,this.stampPreview.visible=e==="place"&&this.activeStamp!==null,this.draw()}getCurrentStampMode(){return this.currentStampMode}createStampFromSelection(e){if(!this.selection.active||this.selection.tiles.length===0)return!1;let n=1/0,r=1/0,s=-1/0,i=-1/0;for(const h of this.selection.tiles)n=Math.min(n,h.x),r=Math.min(r,h.y),s=Math.max(s,h.x),i=Math.max(i,h.y);const o=s-n+1,a=i-r+1,c=[],u=this.activeLayerId||0;for(const h of this.selection.tiles)h.gid>0&&c.push({tileId:h.gid,layerId:u,x:h.x-n,y:h.y-r});const d={id:Date.now().toString(),name:e,width:o,height:a,tiles:c};return this.stamps.set(d.id,d),this.clearSelection(),this.stampCallback&&this.stampCallback(Array.from(this.stamps.values())),!0}setActiveStamp(e){e&&this.stamps.has(e)?(this.activeStamp=this.stamps.get(e),this.currentStampMode="place",this.stampPreview.visible=!0):(this.activeStamp=null,this.stampPreview.visible=!1),this.draw()}getStamps(){return Array.from(this.stamps.values())}deleteStamp(e){return this.stamps.has(e)?(this.stamps.delete(e),this.activeStamp&&this.activeStamp.id===e&&(this.activeStamp=null,this.stampPreview.visible=!1),this.stampCallback&&this.stampCallback(Array.from(this.stamps.values())),this.draw(),!0):!1}setStampCallback(e){this.stampCallback=e}setHeroEditCallback(e){this.heroEditCallback=e}placeStamp(e,n){if(this.activeStamp&&!(e<0||n<0||e+this.activeStamp.width>this.mapWidth||n+this.activeStamp.height>this.mapHeight)){for(const r of this.activeStamp.tiles){const s=e+r.x,o=(n+r.y)*this.mapWidth+s;let a=this.tileLayers.find(c=>c.id===r.layerId);!a&&this.activeLayerId!==null&&(a=this.tileLayers.find(c=>c.id===this.activeLayerId)),a&&(a.data[o]=r.tileId)}this.saveState(),this.draw()}}clearSelection(){this.selection.active=!1,this.selection.tiles=[],this.draw()}hasActiveSelection(){return this.selection.active&&this.selection.tiles.length>0}getSelection(){return[...this.selection.tiles]}selectAll(){const e=this.tileLayers.find(n=>n.id===this.activeLayerId);if(e){this.selection.tiles=[];for(let n=0;n<this.mapHeight;n++)for(let r=0;r<this.mapWidth;r++){const s=n*this.mapWidth+r,i=e.data[s];this.selection.tiles.push({x:r,y:n,gid:i})}this.selection.active=!0,this.draw()}}deleteSelection(){if(!this.selection.active||this.selection.tiles.length===0)return;const e=this.tileLayers.find(n=>n.id===this.activeLayerId);e&&(this.saveState(),this.selection.tiles.forEach(n=>{const r=n.y*this.mapWidth+n.x;e.data[r]=0}),this.clearSelection(),this.markAsChanged(),this.draw())}fillSelection(){if(!this.selection.active||this.selection.tiles.length===0||this.activeGid===0)return;const e=this.tileLayers.find(n=>n.id===this.activeLayerId);e&&(this.saveState(),this.selection.tiles.forEach(n=>{const r=n.y*this.mapWidth+n.x;e.data[r]=this.activeGid}),this.markAsChanged(),this.draw())}bucketFill(e,n,r,s){const i=e.data[r*this.mapWidth+n];if(i===s)return;const o=[{x:n,y:r}],a=new Set;for(;o.length>0;){const{x:c,y:u}=o.pop(),d=u*this.mapWidth+c;c<0||c>=this.mapWidth||u<0||u>=this.mapHeight||a.has(d)||e.data[d]===i&&(a.add(d),e.data[d]=s,o.push({x:c+1,y:u}),o.push({x:c-1,y:u}),o.push({x:c,y:u+1}),o.push({x:c,y:u-1}))}}selectRectangular(e,n,r,s,i){this.selection.tiles=[];const o=Math.min(n,s),a=Math.max(n,s),c=Math.min(r,i),u=Math.max(r,i);for(let d=c;d<=u;d++)for(let h=o;h<=a;h++)if(h>=0&&h<this.mapWidth&&d>=0&&d<this.mapHeight){const f=d*this.mapWidth+h,S=e.data[f];this.selection.tiles.push({x:h,y:d,gid:S})}this.selection.active=!0}selectMagicWand(e,n,r){const s=e.data[r*this.mapWidth+n];this.selection.tiles=[];const i=[{x:n,y:r}],o=new Set;for(;i.length>0;){const{x:a,y:c}=i.pop(),u=c*this.mapWidth+a;a<0||a>=this.mapWidth||c<0||c>=this.mapHeight||o.has(u)||e.data[u]===s&&(o.add(u),this.selection.tiles.push({x:a,y:c,gid:s}),i.push({x:a+1,y:c}),i.push({x:a-1,y:c}),i.push({x:a,y:c+1}),i.push({x:a,y:c-1}))}this.selection.active=!0}selectSameTile(e,n,r){const s=e.data[r*this.mapWidth+n];this.selection.tiles=[];for(let i=0;i<this.mapHeight;i++)for(let o=0;o<this.mapWidth;o++){const a=i*this.mapWidth+o;e.data[a]===s&&this.selection.tiles.push({x:o,y:i,gid:s})}this.selection.active=!0}selectCircular(e,n,r,s,i){this.selection.tiles=[];const o=Math.sqrt(Math.pow(s-n,2)+Math.pow(i-r,2));for(let a=0;a<this.mapHeight;a++)for(let c=0;c<this.mapWidth;c++)if(Math.sqrt(Math.pow(c-n,2)+Math.pow(a-r,2))<=o){const d=a*this.mapWidth+c,h=e.data[d];this.selection.tiles.push({x:c,y:a,gid:h})}this.selection.active=!0}drawRectangleShape(e,n,r,s){const i=[],o=Math.min(e,r),a=Math.max(e,r),c=Math.min(n,s),u=Math.max(n,s);for(let d=o;d<=a;d++)for(let h=c;h<=u;h++)(d===o||d===a||h===c||h===u)&&d>=0&&d<this.mapWidth&&h>=0&&h<this.mapHeight&&i.push({x:d,y:h});return i}drawCircleShape(e,n,r,s){const i=[],o=Math.sqrt(Math.pow(r-e,2)+Math.pow(s-n,2));for(let a=0;a<360;a+=1){const c=a*Math.PI/180,u=Math.round(e+o*Math.cos(c)),d=Math.round(n+o*Math.sin(c));u>=0&&u<this.mapWidth&&d>=0&&d<this.mapHeight&&(i.some(h=>h.x===u&&h.y===d)||i.push({x:u,y:d}))}return i}drawLineShape(e,n,r,s){const i=[],o=Math.abs(r-e),a=Math.abs(s-n),c=e<r?1:-1,u=n<s?1:-1;let d=o-a,h=e,f=n,S=!1;for(;!S;){if(h>=0&&h<this.mapWidth&&f>=0&&f<this.mapHeight&&i.push({x:h,y:f}),h===r&&f===s){S=!0;continue}const v=2*d;v>-a&&(d-=a,h+=c),v<o&&(d+=o,f+=u)}return i}setLayerTileset(e,n){const r=new Image;r.onload=()=>{const s=Math.floor(r.width/this.tileSizeX),i=Math.floor(r.height/this.tileSizeY),o=s*i;this.layerTilesets.set(e,{image:r,fileName:n.name,columns:s,rows:i,count:o});const a=this.tileLayers.find(c=>c.id===this.activeLayerId);a&&a.type===e&&this.updateCurrentTileset(e)},r.src=URL.createObjectURL(n)}getCurrentLayerType(){const e=this.tileLayers.find(n=>n.id===this.activeLayerId);return e?e.type:null}hasLayerTileset(e){return this.layerTilesets.has(e)}updateCurrentTileset(e){const n=this.layerTilesets.get(e);if(n){this.tilesetImage=n.image,this.tilesetFileName=n.fileName,this.tilesetColumns=n.columns,this.tilesetRows=n.rows,this.tileCount=n.count;const r=this.layerTileData.get(e);if(this.detectedTileData.clear(),r)for(const[i,o]of r.entries())this.detectedTileData.set(i,o);const s=this.layerActiveGid.get(e)||0;this.activeGid=s,this.createTilePalette()}else this.tilesetImage=null,this.tilesetFileName=null,this.tilesetColumns=0,this.tilesetRows=0,this.tileCount=0,this.detectedTileData.clear(),this.activeGid=0,this.clearTilePalette()}clearTilePalette(){const e=document.getElementById("tilesContainer");e&&(e.innerHTML="")}clearLayer(){if(this.activeLayerId!==null){const e=this.tileLayers.find(n=>n.id===this.activeLayerId);e&&e.data.fill(0)}this.draw()}removeLayerTileset(){const e=this.tileLayers.find(n=>n.id===this.activeLayerId);if(e){const n=e.type;this.layerTilesets.delete(n),this.layerTileData.delete(n),this.tilesetImage=null,this.tilesetFileName=null,this.tilesetColumns=0,this.tilesetRows=0,this.tileCount=0,this.detectedTileData.clear(),this.activeGid=0,this.clearTilePalette(),this.draw()}}exportFlareMap(){if(!this.tilesetImage||!this.tilesetFileName){alert("Please load a tileset first before exporting.");return}const e=this.generateFlareMapTxt(),n=this.generateFlareTilesetDef();this.downloadFile(e,"map.txt","text/plain"),this.downloadFile(n,"tileset.txt","text/plain"),console.log("Flare-compatible map exported successfully!"),console.log("📁 Files exported:"),console.log("  • map.txt (place in maps/ folder)"),console.log("  • tileset.txt (place in tilesetdefs/ folder)"),console.log("🎮 Format: Fully compatible with Flare Engine"),this.logGlobalTilesetMapping()}logGlobalTilesetMapping(){console.log("🗺️ Global Tileset Mapping:");const e=[];let n=1;this.tilesetFileName&&(e.push({fileName:this.tilesetFileName,count:this.tileCount,layerType:"main",offset:n}),n+=this.tileCount);const r=new Set;this.tilesetFileName&&r.add(this.tilesetFileName);for(const[s,i]of this.layerTilesets.entries())i.fileName&&!r.has(i.fileName)&&(e.push({fileName:i.fileName,count:i.count,layerType:s,offset:n}),n+=i.count,r.add(i.fileName));for(const s of e){const i=s.offset+s.count-1;console.log(`  ${s.fileName} (${s.layerType}): IDs ${s.offset}-${i} (${s.count} tiles)`)}}autoSaveExport(){if(!this.tilesetImage||!this.tilesetFileName||!this.tileLayers.some(n=>n.data.some(r=>r!==0)))return!1;try{return this.saveToLocalStorage(),!0}catch(n){return console.warn("Auto-save failed:",n),!1}}generateFlareMapTxt(){var u;const e=[];e.push("[header]"),e.push(`width=${this.mapWidth}`),e.push(`height=${this.mapHeight}`),e.push(`tilewidth=${this.tileSizeX}`),e.push(`tileheight=${this.tileSizeY}`),e.push("orientation=isometric"),e.push(`hero_pos=${this.heroX},${this.heroY}`),e.push("music=music/default_theme.ogg"),e.push("tileset=tilesetdefs/tileset.txt"),e.push(`title=${((u=this.tilesetFileName)==null?void 0:u.replace(/\.[^/.]+$/,""))||"Untitled Map"}`),e.push("");const n=[];let r=1;this.tilesetFileName&&(n.push({fileName:this.tilesetFileName,count:this.tileCount,layerType:"main",offset:r}),r+=this.tileCount);const s=new Set;this.tilesetFileName&&s.add(this.tilesetFileName);for(const[d,h]of this.layerTilesets.entries())h.fileName&&!s.has(h.fileName)&&(n.push({fileName:h.fileName,count:h.count,layerType:d,offset:r}),r+=h.count,s.add(h.fileName));const i=new Map;for(const d of n)i.set(d.fileName,d.offset);e.push("[tilesets]");for(const d of n)e.push(`tileset=../images/tilesets/${d.fileName},${this.tileSizeX},${this.tileSizeY},0,0`);e.push("");const o=["background","object","collision"];for(const d of o){const h=this.tileLayers.find(v=>v.type===d&&v.visible);if(!h)continue;e.push("[layer]"),e.push(`type=${h.type}`),e.push("data=");const f=this.layerTilesets.get(d),S=f!=null&&f.fileName&&i.get(f.fileName)||0;for(let v=0;v<this.mapHeight;v++){const k=[];for(let b=0;b<this.mapWidth;b++){const g=v*this.mapWidth+b,p=h.data[g];let m=0;p>0&&(m=S+(p-1)),k.push(m.toString())}e.push(k.join(","))}e.push("")}const a=this.objects.filter(d=>d.type==="event");for(const d of a){e.push("[event]"),e.push(`# ${d.name}`),e.push("type=event"),e.push(`location=${d.x},${d.y},${d.width},${d.height}`),d.activate&&e.push(`activate=${d.activate}`),d.hotspot&&e.push(`hotspot=${d.hotspot}`),d.intermap&&e.push(`intermap=${d.intermap}`),d.loot&&e.push(`loot=${d.loot}`),d.soundfx&&e.push(`soundfx=${d.soundfx}`),d.mapmod&&e.push(`mapmod=${d.mapmod}`),d.repeat!==void 0&&e.push(`repeat=${d.repeat}`),d.tooltip&&e.push(`tooltip=${d.tooltip}`);for(const[h,f]of Object.entries(d.properties))e.push(`${h}=${f}`);e.push("")}const c=this.objects.filter(d=>d.type==="enemy");for(const d of c){e.push("[enemy]"),e.push("type=enemy"),e.push(`location=${d.x},${d.y},${d.width},${d.height}`),d.category&&e.push(`category=${d.category}`),d.level&&e.push(`level=${d.level}`),d.number&&e.push(`number=${d.number}`),d.wander_radius!==void 0&&e.push(`wander_radius=${d.wander_radius}`);for(const[h,f]of Object.entries(d.properties))e.push(`${h}=${f}`);e.push("")}return e.join(`
`)}generateFlareTilesetDef(){const e=[];if(!this.tilesetFileName&&this.layerTilesets.size===0)return`# No tilesets found - please load tilesets before exporting
`;const n=[];let r=1;this.tilesetFileName&&(n.push({fileName:this.tilesetFileName,count:this.tileCount,layerType:"main",offset:r,tileset:{columns:this.tilesetColumns,rows:this.tilesetRows,count:this.tileCount}}),r+=this.tileCount);const s=new Set;this.tilesetFileName&&s.add(this.tilesetFileName);for(const[i,o]of this.layerTilesets.entries())o.fileName&&!s.has(o.fileName)&&(n.push({fileName:o.fileName,count:o.count,layerType:i,offset:r,tileset:o}),r+=o.count,s.add(o.fileName));for(const i of n)e.push(`img=../images/tilesets/${i.fileName}`);e.push("");for(const i of n){const o=i.tileset;for(let a=0;a<i.count;a++){const c=i.offset+a,u=a%o.columns*this.tileSizeX,d=Math.floor(a/o.columns)*this.tileSizeY,h=this.tileSizeX,f=this.tileSizeY,S=Math.floor(this.tileSizeX/2),v=Math.floor(this.tileSizeY/2);e.push(`tile=${c},${u},${d},${h},${f},${S},${v}`)}}return e.join(`
`)}downloadFile(e,n,r){const s=new Blob([e],{type:r}),i=URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=n,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}saveState(){if(this.isApplyingHistory)return;const e={layers:this.tileLayers.map(n=>({...n,data:[...n.data]})),objects:this.objects.map(n=>({...n}))};this.history=this.history.slice(0,this.historyIndex+1),this.history.push(e),this.historyIndex=this.history.length-1,this.history.length>this.maxHistorySize&&(this.history.shift(),this.historyIndex--),this.markAsChanged(!1)}deepCopyLayers(e){return e.map(n=>({...n,data:[...n.data]}))}deepCopyObjects(e){return e.map(n=>({...n}))}undo(){this.historyIndex>0&&(this.historyIndex--,this.applyHistoryState())}redo(){this.historyIndex<this.history.length-1&&(this.historyIndex++,this.applyHistoryState())}applyHistoryState(){if(this.historyIndex>=0&&this.historyIndex<this.history.length){this.isApplyingHistory=!0;const e=this.history[this.historyIndex];this.tileLayers=this.deepCopyLayers(e.layers),this.objects=this.deepCopyObjects(e.objects),this.draw(),this.isApplyingHistory=!1}}setAutoSaveCallback(e){this.autoSaveCallback=e}setSaveStatusCallback(e){this.saveStatusCallback=e}setAutoSaveEnabled(e){this.autoSaveEnabled=e,!e&&this.autoSaveTimeout&&(clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=null)}setDarkMode(e){this.isDarkMode=e,this.draw()}markAsChanged(e=!1){if(!this.autoSaveEnabled)return;this.hasUnsavedChanges=!0,this.updateSaveStatus("unsaved"),this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout);const n=e?this.IMMEDIATE_SAVE_DELAY:this.AUTO_SAVE_DELAY;this.autoSaveTimeout=window.setTimeout(()=>{this.performAutoSave()},n)}async performAutoSave(){if(this.hasUnsavedChanges)try{this.updateSaveStatus("saving"),this.autoSaveExport()?(this.autoSaveCallback&&await this.autoSaveCallback(),this.hasUnsavedChanges=!1,this.lastSaveTimestamp=Date.now(),this.updateSaveStatus("saved")):this.updateSaveStatus("saved"),this.autoSaveTimeout=null}catch(e){console.error("Auto-save failed:",e),this.updateSaveStatus("error"),this.autoSaveTimeout=window.setTimeout(()=>{this.performAutoSave()},15e3)}}saveToLocalStorage(){try{const e={timestamp:Date.now(),mapWidth:this.mapWidth,mapHeight:this.mapHeight,layers:this.tileLayers,objects:this.objects,heroX:this.heroX,heroY:this.heroY,tilesetFileName:this.tilesetFileName,tilesetImage:this.tilesetImage?this.canvasToDataURL(this.tilesetImage):null,tileSizeX:this.tileSizeX,tileSizeY:this.tileSizeY,detectedTileData:Array.from(this.detectedTileData.entries()),tileContentThreshold:this.tileContentThreshold,objectSeparationSensitivity:this.objectSeparationSensitivity};localStorage.setItem("tilemap_autosave_backup",JSON.stringify(e))}catch(e){console.warn("Failed to save to localStorage:",e)}}canvasToDataURL(e){const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");return r?(r.drawImage(e,0,0),n.toDataURL("image/png")):""}generateMinimapDataUrl(){try{const r=Math.max(1,Math.floor(Math.min(160/Math.max(1,this.mapWidth),120/Math.max(1,this.mapHeight)))),s=this.mapWidth*r,i=this.mapHeight*r,o=document.createElement("canvas");o.width=s,o.height=i;const a=o.getContext("2d");if(!a)return"";a.imageSmoothingEnabled=!1,a.fillStyle="#ffffff",a.fillRect(0,0,s,i);for(let c=0;c<this.tileLayers.length;c++){const u=this.tileLayers[c];if(u.visible)for(let d=0;d<this.mapHeight;d++)for(let h=0;h<this.mapWidth;h++){const f=d*this.mapWidth+h,S=u.data[f];if(S>0){const v=S*137.5%360;a.fillStyle=`hsl(${v},55%,${c===0?"45%":"60%"})`,a.fillRect(h*r,d*r,r,r)}}}return o.toDataURL("image/png")}catch(e){return console.warn("generateMinimapDataUrl failed",e),""}}loadFromLocalStorage(){try{const e=localStorage.getItem("tilemap_autosave_backup");if(!e)return!1;const n=JSON.parse(e);if(Date.now()-n.timestamp>24*60*60*1e3)return!1;if(this.mapWidth=n.mapWidth,this.mapHeight=n.mapHeight,this.tileLayers=n.layers,this.objects=n.objects,this.tilesetFileName=n.tilesetFileName,n.heroX!==void 0&&n.heroY!==void 0?(this.heroX=Math.max(0,Math.min(n.heroX,this.mapWidth-1)),this.heroY=Math.max(0,Math.min(n.heroY,this.mapHeight-1))):(this.heroX=0,this.heroY=0),n.tileContentThreshold!==void 0&&(this.tileContentThreshold=n.tileContentThreshold),n.objectSeparationSensitivity!==void 0&&(this.objectSeparationSensitivity=n.objectSeparationSensitivity),n.detectedTileData){this.detectedTileData.clear();for(const[s,i]of n.detectedTileData)this.detectedTileData.set(s,i)}if(n.tilesetImage){const s=new Image;s.onload=()=>{this.tilesetImage=s,this.tilesetColumns=Math.floor(s.width/this.tileSizeX),this.tilesetRows=Math.floor(s.height/this.tileSizeY),this.tileCount=this.tilesetColumns*this.tilesetRows,n.detectedTileData&&n.detectedTileData.length>0?this.createTilePalette(!0):this.createTilePalette(),this.updateActiveTile(),this.draw()},s.src=n.tilesetImage}return this.draw(),!0}catch(e){return console.error("Failed to load from localStorage:",e),!1}}clearLocalStorageBackup(){localStorage.removeItem("tilemap_autosave_backup")}async saveProjectData(e){var n,r;try{console.log("=== SAVE PROJECT DATA DEBUG ==="),console.log("Project path:",e),console.log("Number of layer tilesets:",this.layerTilesets.size);const s={},i=[];console.log("=== SAVING LAYER TILESETS ===");for(const[a,c]of this.layerTilesets.entries())if(c.image&&c.fileName){console.log(`Saving tileset for layer ${a}: ${c.fileName}`);const u=this.canvasToDataURL(c.image);s[c.fileName]=u,i.push({layerType:a,fileName:c.fileName,name:c.fileName.replace(/\.[^/.]+$/,""),columns:c.columns,rows:c.rows,count:c.count,detectedTiles:this.getDetectedTilesForLayer(a)}),console.log(`Saved tileset: ${c.fileName} (${u.length} bytes)`)}else console.log(`No tileset image for layer ${a}`);if(this.layerTilesets.size===0&&this.tilesetImage&&this.tilesetFileName){console.log("Saving legacy tileset:",this.tilesetFileName);const a=this.canvasToDataURL(this.tilesetImage);s[this.tilesetFileName]=a,i.push({fileName:this.tilesetFileName,name:this.tilesetFileName.replace(/\.[^/.]+$/,""),detectedTiles:Array.from(this.detectedTileData.entries())})}const o={name:((n=this.tilesetFileName)==null?void 0:n.replace(/\.[^/.]+$/,""))||"Untitled Map",width:this.mapWidth,height:this.mapHeight,tileSize:64,layers:this.tileLayers,objects:this.objects,heroX:this.heroX,heroY:this.heroY,tilesets:i,tilesetImages:s,minimap:this.generateMinimapDataUrl(),version:"1.0",tileContentThreshold:this.tileContentThreshold,objectSeparationSensitivity:this.objectSeparationSensitivity};if(console.log("Project data prepared:",{name:o.name,tilesetCount:Object.keys(o.tilesetImages).length,layerCount:o.layers.length,layerTilesetCount:i.length}),(r=window.electronAPI)!=null&&r.saveMapProject){console.log("Saving via Electron API...");const a=await window.electronAPI.saveMapProject(e,o);return console.log("Electron save result:",a),a}else return console.log("Falling back to localStorage save..."),this.saveToLocalStorage(),!0}catch(s){return console.error("Error saving project data:",s),!1}}updateSaveStatus(e){this.saveStatusCallback&&this.saveStatusCallback(e)}getUnsavedChanges(){return this.hasUnsavedChanges}getLastSaveTime(){return this.lastSaveTimestamp}forceSave(){this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout),this.performAutoSave()}addMapObject(e,n,r,s=1,i=1){const o={id:this.nextObjectId++,name:`${e}_${this.nextObjectId-1}`,type:e,x:n,y:r,width:s,height:i,properties:{}};return e==="event"?(o.activate="on_trigger",o.hotspot="location",o.tooltip="Event"):e==="enemy"&&(o.category="enemy",o.level=1,o.number=1,o.wander_radius=4),this.objects.push(o),this.saveState(),o}removeMapObject(e){var r;const n=this.objects.findIndex(s=>s.id===e);return n>=0?(this.objects.splice(n,1),((r=this.selectedObject)==null?void 0:r.id)===e&&(this.selectedObject=null),this.saveState(),!0):!1}updateMapObject(e,n){const r=this.objects.find(s=>s.id===e);return r?(Object.assign(r,n),this.saveState(),!0):!1}getMapObjects(){return[...this.objects]}getObjectsAtPosition(e,n){return this.objects.filter(r=>r.x===e&&r.y===n)}isHeroAtPosition(e,n){return this.heroX===e&&this.heroY===n}setHeroPosition(e,n){this.heroX=Math.max(0,Math.min(e,this.mapWidth-1)),this.heroY=Math.max(0,Math.min(n,this.mapHeight-1)),this.saveState(),this.draw()}getHeroPosition(){return{x:this.heroX,y:this.heroY}}updateCursorForHover(){if(this.isHeroAtPosition(this.hoverX,this.hoverY)){this.mapCanvas.style.cursor="move",this.showHeroTooltip();return}const e=this.getActiveLayer();if(e&&["enemy","npc","object","event","background"].includes(e.type)){const r=this.getObjectsAtPosition(this.hoverX,this.hoverY);if(r.length>0){this.mapCanvas.style.cursor="pointer",this.showObjectTooltip(r[0]);return}}this.spacePressed?this.mapCanvas.style.cursor=this.isPanning?"grabbing":"grab":this.mapCanvas.style.cursor="crosshair",this.hideObjectTooltip()}showObjectTooltip(e){let n=document.getElementById("object-tooltip");n||(n=document.createElement("div"),n.id="object-tooltip",n.style.position="absolute",n.style.background="rgba(0, 0, 0, 0.35)",n.style.color="white",n.style.padding="4px 6px",n.style.borderRadius="3px",n.style.fontSize="11px",n.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',n.style.lineHeight="1.2",n.style.pointerEvents="none",n.style.zIndex="1000",n.style.border="1px solid rgba(255, 107, 0, 0.8)",n.style.boxShadow="0 1px 4px rgba(0,0,0,0.3)",n.style.backdropFilter="blur(2px)",document.body.appendChild(n));const r=`
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
        <rect x="5" y="2" width="14" height="20" rx="7"/>
        <path d="M12 6v4"/>
      </svg>
    `,s=e.type==="enemy"?e.category||"enemy":e.type;n.innerHTML=`
      <div style="font-weight: bold; margin-bottom: 2px; color: #ff6b00; font-size: 10px;">
        ${r}Double click to edit
      </div>
      <div style="font-weight: bold; margin-bottom: 1px;">${e.name||"Unnamed"}</div>
      <div style="font-size: 10px; color: rgba(255,255,255,0.9);">Type: ${s}</div>
    `;const i=this.mapCanvas.getBoundingClientRect(),o=this.mapToScreen(this.hoverX,this.hoverY);n.style.left=`${i.left+o.x+20}px`,n.style.top=`${i.top+o.y-10}px`,n.style.display="block"}hideObjectTooltip(){const e=document.getElementById("object-tooltip");e&&(e.style.display="none")}showHeroTooltip(){let e=document.getElementById("object-tooltip");e||(e=document.createElement("div"),e.id="object-tooltip",e.style.position="absolute",e.style.background="rgba(0, 0, 0, 0.35)",e.style.color="white",e.style.padding="4px 6px",e.style.borderRadius="3px",e.style.fontSize="11px",e.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',e.style.lineHeight="1.2",e.style.pointerEvents="none",e.style.zIndex="1000",e.style.border="1px solid rgba(255, 107, 0, 0.8)",e.style.boxShadow="0 1px 4px rgba(0,0,0,0.3)",e.style.backdropFilter="blur(2px)",document.body.appendChild(e));const n=`
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
        <rect x="5" y="2" width="14" height="20" rx="7"/>
        <path d="M12 6v4"/>
      </svg>
    `;e.innerHTML=`
      <div style="font-weight: bold; margin-bottom: 2px; color: #ff6b00; font-size: 10px;">
        ${n}Double click to edit or drag to move
      </div>
      <div style="font-weight: bold; margin-bottom: 1px;">Hero Position</div>
      <div style="font-size: 10px; color: rgba(255,255,255,0.9);">Position: (${this.heroX}, ${this.heroY})</div>
    `;const r=this.mapCanvas.getBoundingClientRect(),s=this.mapToScreen(this.hoverX,this.hoverY);e.style.left=`${r.left+s.x+20}px`,e.style.top=`${r.top+s.y-10}px`,e.style.display="block"}createObjectFromTile(e,n,r,s){console.log(`Creating object from tile at (${e}, ${n}) for layer type: ${r}`);const i=this.objects.find(u=>u.x===e&&u.y===n);if(i){console.log(`Found existing object at (${e}, ${n}), updating instead of creating new one`);const u={name:`${r}_${e}_${n}`,type:r==="npc"?"npc":r};this.updateMapObject(i.id,u);return}let o;if(r==="event")o="event";else if(r==="enemy"||r==="npc"||r==="object")o="enemy";else{console.log(`Unsupported layer type: ${r}`);return}console.log(`Creating new ${o} object at (${e}, ${n})`);const a=this.addMapObject(o,e,n,1,1);console.log(`Created object with ID: ${a.id}`);const c={name:`${r}_${e}_${n}`,category:o==="event"?"block":r==="npc"?"npc":r==="object"?"object":"creature"};o==="enemy"?(c.level=1,c.number=1,c.wander_radius=r==="npc"||r==="object"?0:4):(c.activate="on_trigger",c.hotspot="0,0,1,1"),this.updateMapObject(a.id,c)}removeObjectAtPosition(e,n){const r=this.objects.find(s=>s.x===e&&s.y===n);r&&this.removeMapObject(r.id)}selectObject(e){const n=this.objects.find(r=>r.id===e);return this.selectedObject=n||null,this.selectedObject}getSelectedObject(){return this.selectedObject}resetForNewProject(){this.clearLocalStorageBackup(),this.tilesetImage=null,this.tilesetFileName=null,this.tilesetColumns=0,this.tilesetRows=0,this.tileCount=0,this.detectedTileData.clear(),this.clearTilePalette(),this.tileLayers=[],this.activeLayerId=null,this.nextLayerId=1,this.objects=[],this.nextObjectId=1,this.selectedObjectId=null,this.heroX=0,this.heroY=0,this.isDraggingHero=!1,this.layerTilesets.clear(),this.tilesets=[],this.collisionData=[],this.selection={active:!1,startX:-1,startY:-1,endX:-1,endY:-1,tiles:[]},this.isSelecting=!1,this.shapeDrawing={active:!1,startX:-1,startY:-1,endX:-1,endY:-1,preview:[]},this.isDrawingShape=!1,this.stamps.clear(),this.activeStamp=null,this.stampPreview={x:0,y:0,visible:!1},this.hasUnsavedChanges=!1,this.lastSaveTimestamp=0,this.autoSaveTimeout&&(clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=null),this.createDefaultLayers(),this.history=[],this.historyIndex=-1,this.saveState(),this.ctx.clearRect(0,0,this.mapCanvas.width,this.mapCanvas.height),this.draw()}loadProjectData(e){try{if(console.log("=== LOADING PROJECT DATA IN EDITOR ==="),console.log("Project data:",{hasLayers:!!(e.layers&&e.layers.length>0),layerCount:e.layers?e.layers.length:0,hasObjects:!!(e.objects&&e.objects.length>0),objectCount:e.objects?e.objects.length:0,width:e.width,height:e.height,hasTilesets:!!(e.tilesets&&e.tilesets.length>0),tilesetCount:e.tilesets?e.tilesets.length:0}),e.tileContentThreshold!==void 0&&(this.tileContentThreshold=e.tileContentThreshold),e.objectSeparationSensitivity!==void 0&&(this.objectSeparationSensitivity=e.objectSeparationSensitivity),this.layerTilesets.clear(),e.tilesets&&Array.isArray(e.tilesets)){console.log("Loading tilesets:",e.tilesets.length);let n=0;const r=e.tilesets.length;for(const s of e.tilesets)if(s.fileName&&e.tilesetImages&&e.tilesetImages[s.fileName]){const i=e.tilesetImages[s.fileName],o=new Image;o.onload=()=>{console.log(`Tileset ${s.fileName} loaded for layer: ${s.layerType||"legacy"}`);const a={image:o,fileName:s.fileName,columns:s.columns||Math.floor(o.width/this.tileSizeX),rows:s.rows||Math.floor(o.height/this.tileSizeY),count:s.count||(s.columns||Math.floor(o.width/this.tileSizeX))*(s.rows||Math.floor(o.height/this.tileSizeY))};if(s.layerType)this.layerTilesets.set(s.layerType,a),console.log(`Set tileset for layer type ${s.layerType}`);else{this.tilesetImage=o,this.tilesetFileName=s.fileName,this.tilesetColumns=a.columns,this.tilesetRows=a.rows,this.tileCount=a.count;const c=this.tileLayers.find(u=>u.id===this.activeLayerId);c&&!this.layerTilesets.has(c.type)&&(this.layerTilesets.set(c.type,a),console.log(`Assigned legacy tileset to active layer: ${c.type}`))}if(s.detectedTiles&&Array.isArray(s.detectedTiles))if(console.log(`Restoring ${s.detectedTiles.length} detected tiles for ${s.layerType||"legacy"}`),s.layerType){const c=new Map;for(const[u,d]of s.detectedTiles)c.set(u,d);this.layerTileData.set(s.layerType,c),console.log(`Stored ${c.size} tiles for layer type: ${s.layerType}`)}else{this.detectedTileData.clear();for(const[u,d]of s.detectedTiles)this.detectedTileData.set(u,d);const c=this.tileLayers.find(u=>u.id===this.activeLayerId);if(c){const u=new Map;for(const[d,h]of s.detectedTiles)u.set(d,h);this.layerTileData.set(c.type,u)}}if(n++,n===r){console.log("All tilesets loaded, updating UI for active layer");const c=this.tileLayers.find(u=>u.id===this.activeLayerId);c&&this.updateCurrentTileset(c.type)}},o.src=i}else if(n++,n===r){console.log("All tilesets processed, updating UI for active layer");const i=this.tileLayers.find(o=>o.id===this.activeLayerId);i&&this.updateCurrentTileset(i.type)}}if(e.detectedTileData&&Array.isArray(e.detectedTileData)){this.detectedTileData.clear();for(const[n,r]of e.detectedTileData)this.detectedTileData.set(n,r)}e.layers&&e.layers.length>0?(console.log("Loading layers:",e.layers.length),this.tileLayers=[...e.layers],this.tileLayers.length>0&&(!this.activeLayerId||!this.tileLayers.find(n=>n.id===this.activeLayerId))&&(this.activeLayerId=this.tileLayers[0].id,console.log("Set active layer to:",this.activeLayerId))):(console.log("No layers found in project data, creating default layers"),this.createDefaultLayers()),e.objects&&e.objects.length>0&&(console.log("Loading objects:",e.objects.length),this.objects=[...e.objects]),e.width&&e.height&&(console.log("Setting map dimensions:",e.width,"x",e.height),this.mapWidth=e.width,this.mapHeight=e.height),e.heroX!==void 0&&e.heroY!==void 0?(console.log("Loading hero position:",e.heroX,",",e.heroY),this.heroX=Math.max(0,Math.min(e.heroX,this.mapWidth-1)),this.heroY=Math.max(0,Math.min(e.heroY,this.mapHeight-1))):(console.log("No hero position found, defaulting to (0,0)"),this.heroX=0,this.heroY=0),console.log("Project data loaded successfully"),this.draw()}catch(n){console.error("Error loading project data:",n)}}async loadTilesetFromDataURL(e,n){return new Promise((r,s)=>{console.log("Loading tileset from dataURL:",n,"Length:",e.length);const i=new Image;i.onload=()=>{console.log("Tileset image loaded successfully:",i.width,"x",i.height),this.tilesetImage=i,this.tilesetFileName=n,this.tilesetColumns=Math.floor(i.width/this.tileSizeX),this.tilesetRows=Math.floor(i.height/this.tileSizeY),this.tileCount=this.tilesetColumns*this.tilesetRows,console.log("Tileset properties:",{columns:this.tilesetColumns,rows:this.tilesetRows,tileCount:this.tileCount});const o=this.tileLayers.find(c=>c.id===this.activeLayerId);if(o){console.log("Setting tileset for active layer type:",o.type),this.layerTilesets.set(o.type,{image:i,fileName:n,columns:this.tilesetColumns,rows:this.tilesetRows,count:this.tileCount});const c=this.layerTileData.has(o.type);if(console.log(`Layer ${o.type} has existing tile data:`,c),!c)this.detectedTileData.clear();else{const u=this.layerTileData.get(o.type);if(this.detectedTileData.clear(),u)for(const[d,h]of u.entries())this.detectedTileData.set(d,h)}}else console.log("No active layer found, storing as global tileset");const a=o?this.layerTileData.has(o.type):!1;this.createTilePalette(a),console.log("Tile detection completed, detected tiles:",this.detectedTileData.size),this.draw(),console.log("Tileset loaded and palette created"),r()},i.onerror=o=>{console.error("Failed to load tileset image:",o),s(new Error("Failed to load tileset from data URL"))},i.src=e})}debugLayerData(){console.log("=== LAYER DATA DEBUG ===");for(const e of this.tileLayers){const n=e.data.filter(s=>s>0).length,r=this.layerTilesets.get(e.type);console.log(`Layer ${e.name} (${e.type}): ${n} painted tiles, has tileset: ${!!(r!=null&&r.image)}`)}}redraw(){this.draw()}getMapWidth(){return this.mapWidth}getMapHeight(){return this.mapHeight}}const vv=1,xv=1e6;let Uo=0;function wv(){return Uo=(Uo+1)%Number.MAX_SAFE_INTEGER,Uo.toString()}const Xo=new Map,Vu=t=>{if(Xo.has(t))return;const e=setTimeout(()=>{Xo.delete(t),Ur({type:"REMOVE_TOAST",toastId:t})},xv);Xo.set(t,e)},Sv=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,vv)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Vu(n):t.toasts.forEach(r=>{Vu(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},si=[];let ii={toasts:[]};function Ur(t){ii=Sv(ii,t),si.forEach(e=>{e(ii)})}function kv({...t}){const e=wv(),n=s=>Ur({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Ur({type:"DISMISS_TOAST",toastId:e});return Ur({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function kf(){const[t,e]=y.useState(ii);return y.useEffect(()=>(si.push(e),()=>{const n=si.indexOf(e);n>-1&&si.splice(n,1)}),[t]),{...t,toast:kv,dismiss:n=>Ur({type:"DISMISS_TOAST",toastId:n})}}function Ve(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function bf(t,e=[]){let n=[];function r(i,o){const a=y.createContext(o),c=n.length;n=[...n,o];const u=h=>{var g;const{scope:f,children:S,...v}=h,k=((g=f==null?void 0:f[t])==null?void 0:g[c])||a,b=y.useMemo(()=>v,Object.values(v));return l.jsx(k.Provider,{value:b,children:S})};u.displayName=i+"Provider";function d(h,f){var k;const S=((k=f==null?void 0:f[t])==null?void 0:k[c])||a,v=y.useContext(S);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=n.map(o=>y.createContext(o));return function(a){const c=(a==null?void 0:a[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return s.scopeName=t,[r,bv(s,...e)]}function bv(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...a,...h}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function jv(t){const e=t+"CollectionProvider",[n,r]=bf(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=k=>{const{scope:b,children:g}=k,p=he.useRef(null),m=he.useRef(new Map).current;return l.jsx(s,{scope:b,itemMap:m,collectionRef:p,children:g})};o.displayName=e;const a=t+"CollectionSlot",c=Pi(a),u=he.forwardRef((k,b)=>{const{scope:g,children:p}=k,m=i(a,g),x=Nn(b,m.collectionRef);return l.jsx(c,{ref:x,children:p})});u.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Pi(d),S=he.forwardRef((k,b)=>{const{scope:g,children:p,...m}=k,x=he.useRef(null),j=Nn(b,x),N=i(d,g);return he.useEffect(()=>(N.itemMap.set(x,{ref:x,...m}),()=>void N.itemMap.delete(x))),l.jsx(f,{[h]:"",ref:j,children:p})});S.displayName=d;function v(k){const b=i(t+"CollectionConsumer",k);return he.useCallback(()=>{const p=b.collectionRef.current;if(!p)return[];const m=Array.from(p.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((N,C)=>m.indexOf(N.ref.current)-m.indexOf(C.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:u,ItemSlot:S},v,r]}var Nv=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],kt=Nv.reduce((t,e)=>{const n=Pi(`Primitive.${e}`),r=y.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function jf(t,e){t&&ms.flushSync(()=>t.dispatchEvent(e))}function Cn(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Cv(t,e=globalThis==null?void 0:globalThis.document){const n=Cn(t);y.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Tv="DismissableLayer",Yl="dismissableLayer.update",Ev="dismissableLayer.pointerDownOutside",Mv="dismissableLayer.focusOutside",Gu,Nf=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cf=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=t,u=y.useContext(Nf),[d,h]=y.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,S]=y.useState({}),v=Nn(e,C=>h(C)),k=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=k.indexOf(b),p=d?k.indexOf(d):-1,m=u.layersWithOutsidePointerEventsDisabled.size>0,x=p>=g,j=Lv(C=>{const E=C.target,$=[...u.branches].some(z=>z.contains(E));!x||$||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),N=zv(C=>{const E=C.target;[...u.branches].some(z=>z.contains(E))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return Cv(C=>{p===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),y.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Gu=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Ku(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Gu)}},[d,f,n,u]),y.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Ku())},[d,u]),y.useEffect(()=>{const C=()=>S({});return document.addEventListener(Yl,C),()=>document.removeEventListener(Yl,C)},[]),l.jsx(kt.div,{...c,ref:v,style:{pointerEvents:m?x?"auto":"none":void 0,...t.style},onFocusCapture:Ve(t.onFocusCapture,N.onFocusCapture),onBlurCapture:Ve(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Ve(t.onPointerDownCapture,j.onPointerDownCapture)})});Cf.displayName=Tv;var Pv="DismissableLayerBranch",Tf=y.forwardRef((t,e)=>{const n=y.useContext(Nf),r=y.useRef(null),s=Nn(e,r);return y.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),l.jsx(kt.div,{...t,ref:s})});Tf.displayName=Pv;function Lv(t,e=globalThis==null?void 0:globalThis.document){const n=Cn(t),r=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){Ef(Ev,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function zv(t,e=globalThis==null?void 0:globalThis.document){const n=Cn(t),r=y.useRef(!1);return y.useEffect(()=>{const s=i=>{i.target&&!r.current&&Ef(Mv,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Ku(){const t=new CustomEvent(Yl);document.dispatchEvent(t)}function Ef(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?jf(s,i):s.dispatchEvent(i)}var Iv=Cf,Av=Tf,cs=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},_v="Portal",Mf=y.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=y.useState(!1);cs(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?wy.createPortal(l.jsx(kt.div,{...r,ref:e}),o):null});Mf.displayName=_v;function Dv(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var Pf=t=>{const{present:e,children:n}=t,r=Rv(e),s=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),i=Nn(r.ref,Ov(s));return typeof n=="function"||r.isPresent?y.cloneElement(s,{ref:i}):null};Pf.displayName="Presence";function Rv(t){const[e,n]=y.useState(),r=y.useRef(null),s=y.useRef(t),i=y.useRef("none"),o=t?"mounted":"unmounted",[a,c]=Dv(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=Ys(r.current);i.current=a==="mounted"?u:"none"},[a]),cs(()=>{const u=r.current,d=s.current;if(d!==t){const f=i.current,S=Ys(u);t?c("MOUNT"):S==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==S?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),cs(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=S=>{const k=Ys(r.current).includes(CSS.escape(S.animationName));if(S.target===e&&k&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=S=>{S.target===e&&(i.current=Ys(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Ys(t){return(t==null?void 0:t.animationName)||"none"}function Ov(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var $v=cm[" useInsertionEffect ".trim().toString()]||cs;function Fv({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=Hv({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:s;{const d=y.useRef(t!==void 0);y.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=y.useCallback(d=>{var h;if(a){const f=Wv(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[c,u]}function Hv({defaultProp:t,onChange:e}){const[n,r]=y.useState(t),s=y.useRef(n),i=y.useRef(e);return $v(()=>{i.current=e},[e]),y.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function Wv(t){return typeof t=="function"}var Bv=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Yv="VisuallyHidden",Ba=y.forwardRef((t,e)=>l.jsx(kt.span,{...t,ref:e,style:{...Bv,...t.style}}));Ba.displayName=Yv;var Ya="ToastProvider",[Ua,Uv,Xv]=jv("Toast"),[Lf,yx]=bf("Toast",[Xv]),[Vv,Vi]=Lf(Ya),zf=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,c]=y.useState(null),[u,d]=y.useState(0),h=y.useRef(!1),f=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ya}\`. Expected non-empty \`string\`.`),l.jsx(Ua.Provider,{scope:e,children:l.jsx(Vv,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:y.useCallback(()=>d(S=>S+1),[]),onToastRemove:y.useCallback(()=>d(S=>S-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};zf.displayName=Ya;var If="ToastViewport",Gv=["F8"],Ul="toast.viewportPause",Xl="toast.viewportResume",Af=y.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Gv,label:s="Notifications ({hotkey})",...i}=t,o=Vi(If,n),a=Uv(n),c=y.useRef(null),u=y.useRef(null),d=y.useRef(null),h=y.useRef(null),f=Nn(e,h,o.onViewportChange),S=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;y.useEffect(()=>{const b=g=>{var m;r.length!==0&&r.every(x=>g[x]||g.code===x)&&((m=h.current)==null||m.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),y.useEffect(()=>{const b=c.current,g=h.current;if(v&&b&&g){const p=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(Ul);g.dispatchEvent(N),o.isClosePausedRef.current=!0}},m=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(Xl);g.dispatchEvent(N),o.isClosePausedRef.current=!1}},x=N=>{!b.contains(N.relatedTarget)&&m()},j=()=>{b.contains(document.activeElement)||m()};return b.addEventListener("focusin",p),b.addEventListener("focusout",x),b.addEventListener("pointermove",p),b.addEventListener("pointerleave",j),window.addEventListener("blur",p),window.addEventListener("focus",m),()=>{b.removeEventListener("focusin",p),b.removeEventListener("focusout",x),b.removeEventListener("pointermove",p),b.removeEventListener("pointerleave",j),window.removeEventListener("blur",p),window.removeEventListener("focus",m)}}},[v,o.isClosePausedRef]);const k=y.useCallback(({tabbingDirection:b})=>{const p=a().map(m=>{const x=m.ref.current,j=[x,...lx(x)];return b==="forwards"?j:j.reverse()});return(b==="forwards"?p.reverse():p).flat()},[a]);return y.useEffect(()=>{const b=h.current;if(b){const g=p=>{var j,N,C;const m=p.altKey||p.ctrlKey||p.metaKey;if(p.key==="Tab"&&!m){const E=document.activeElement,$=p.shiftKey;if(p.target===b&&$){(j=u.current)==null||j.focus();return}const D=k({tabbingDirection:$?"backwards":"forwards"}),ce=D.findIndex(H=>H===E);Vo(D.slice(ce+1))?p.preventDefault():$?(N=u.current)==null||N.focus():(C=d.current)==null||C.focus()}};return b.addEventListener("keydown",g),()=>b.removeEventListener("keydown",g)}},[a,k]),l.jsxs(Av,{ref:c,role:"region","aria-label":s.replace("{hotkey}",S),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&l.jsx(Vl,{ref:u,onFocusFromOutsideViewport:()=>{const b=k({tabbingDirection:"forwards"});Vo(b)}}),l.jsx(Ua.Slot,{scope:n,children:l.jsx(kt.ol,{tabIndex:-1,...i,ref:f})}),v&&l.jsx(Vl,{ref:d,onFocusFromOutsideViewport:()=>{const b=k({tabbingDirection:"backwards"});Vo(b)}})]})});Af.displayName=If;var _f="ToastFocusProxy",Vl=y.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Vi(_f,n);return l.jsx(Ba,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&r()}})});Vl.displayName=_f;var gs="Toast",Kv="toast.swipeStart",Qv="toast.swipeMove",Zv="toast.swipeCancel",qv="toast.swipeEnd",Df=y.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,c]=Fv({prop:r,defaultProp:s??!0,onChange:i,caller:gs});return l.jsx(Pf,{present:n||a,children:l.jsx(tx,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:Cn(t.onPause),onResume:Cn(t.onResume),onSwipeStart:Ve(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ve(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ve(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ve(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Df.displayName=gs;var[Jv,ex]=Lf(gs,{onClose(){}}),tx=y.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:S,...v}=t,k=Vi(gs,n),[b,g]=y.useState(null),p=Nn(e,H=>g(H)),m=y.useRef(null),x=y.useRef(null),j=s||k.duration,N=y.useRef(0),C=y.useRef(j),E=y.useRef(0),{onToastAdd:$,onToastRemove:z}=k,q=Cn(()=>{var ue;(b==null?void 0:b.contains(document.activeElement))&&((ue=k.viewport)==null||ue.focus()),o()}),D=y.useCallback(H=>{!H||H===1/0||(window.clearTimeout(E.current),N.current=new Date().getTime(),E.current=window.setTimeout(q,H))},[q]);y.useEffect(()=>{const H=k.viewport;if(H){const ue=()=>{D(C.current),u==null||u()},ge=()=>{const ke=new Date().getTime()-N.current;C.current=C.current-ke,window.clearTimeout(E.current),c==null||c()};return H.addEventListener(Ul,ge),H.addEventListener(Xl,ue),()=>{H.removeEventListener(Ul,ge),H.removeEventListener(Xl,ue)}}},[k.viewport,j,c,u,D]),y.useEffect(()=>{i&&!k.isClosePausedRef.current&&D(j)},[i,j,k.isClosePausedRef,D]),y.useEffect(()=>($(),()=>z()),[$,z]);const ce=y.useMemo(()=>b?Bf(b):null,[b]);return k.viewport?l.jsxs(l.Fragment,{children:[ce&&l.jsx(nx,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:ce}),l.jsx(Jv,{scope:n,onClose:q,children:ms.createPortal(l.jsx(Ua.ItemSlot,{scope:n,children:l.jsx(Iv,{asChild:!0,onEscapeKeyDown:Ve(a,()=>{k.isFocusedToastEscapeKeyDownRef.current||q(),k.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(kt.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":k.swipeDirection,...v,ref:p,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ve(t.onKeyDown,H=>{H.key==="Escape"&&(a==null||a(H.nativeEvent),H.nativeEvent.defaultPrevented||(k.isFocusedToastEscapeKeyDownRef.current=!0,q()))}),onPointerDown:Ve(t.onPointerDown,H=>{H.button===0&&(m.current={x:H.clientX,y:H.clientY})}),onPointerMove:Ve(t.onPointerMove,H=>{if(!m.current)return;const ue=H.clientX-m.current.x,ge=H.clientY-m.current.y,ke=!!x.current,L=["left","right"].includes(k.swipeDirection),R=["left","up"].includes(k.swipeDirection)?Math.min:Math.max,O=L?R(0,ue):0,V=L?0:R(0,ge),G=H.pointerType==="touch"?10:2,J={x:O,y:V},be={originalEvent:H,delta:J};ke?(x.current=J,Us(Qv,h,be,{discrete:!1})):Qu(J,k.swipeDirection,G)?(x.current=J,Us(Kv,d,be,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(ue)>G||Math.abs(ge)>G)&&(m.current=null)}),onPointerUp:Ve(t.onPointerUp,H=>{const ue=x.current,ge=H.target;if(ge.hasPointerCapture(H.pointerId)&&ge.releasePointerCapture(H.pointerId),x.current=null,m.current=null,ue){const ke=H.currentTarget,L={originalEvent:H,delta:ue};Qu(ue,k.swipeDirection,k.swipeThreshold)?Us(qv,S,L,{discrete:!0}):Us(Zv,f,L,{discrete:!0}),ke.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),k.viewport)})]}):null}),nx=t=>{const{__scopeToast:e,children:n,...r}=t,s=Vi(gs,e),[i,o]=y.useState(!1),[a,c]=y.useState(!1);return ix(()=>o(!0)),y.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:l.jsx(Mf,{asChild:!0,children:l.jsx(Ba,{...r,children:i&&l.jsxs(l.Fragment,{children:[s.label," ",n]})})})},rx="ToastTitle",Rf=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(kt.div,{...r,ref:e})});Rf.displayName=rx;var sx="ToastDescription",Of=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(kt.div,{...r,ref:e})});Of.displayName=sx;var $f="ToastAction",Ff=y.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?l.jsx(Wf,{altText:n,asChild:!0,children:l.jsx(Xa,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${$f}\`. Expected non-empty \`string\`.`),null)});Ff.displayName=$f;var Hf="ToastClose",Xa=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=ex(Hf,n);return l.jsx(Wf,{asChild:!0,children:l.jsx(kt.button,{type:"button",...r,ref:e,onClick:Ve(t.onClick,s.onClose)})})});Xa.displayName=Hf;var Wf=y.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return l.jsx(kt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Bf(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),ox(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Bf(r))}}),e}function Us(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?jf(s,i):s.dispatchEvent(i)}var Qu=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function ix(t=()=>{}){const e=Cn(t);cs(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function ox(t){return t.nodeType===t.ELEMENT_NODE}function lx(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Vo(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var ax=zf,Yf=Af,Uf=Df,Xf=Rf,Vf=Of,Gf=Ff,Kf=Xa;const cx=ax,Qf=y.forwardRef(({className:t,...e},n)=>l.jsx(Yf,{ref:n,className:Be("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Qf.displayName=Yf.displayName;const ux=pf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Zf=y.forwardRef(({className:t,variant:e,...n},r)=>l.jsx(Uf,{ref:r,className:Be(ux({variant:e}),t),...n}));Zf.displayName=Uf.displayName;const dx=y.forwardRef(({className:t,...e},n)=>l.jsx(Gf,{ref:n,className:Be("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));dx.displayName=Gf.displayName;const qf=y.forwardRef(({className:t,...e},n)=>l.jsx(Kf,{ref:n,className:Be("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:l.jsx(Re,{className:"h-4 w-4"})}));qf.displayName=Kf.displayName;const Jf=y.forwardRef(({className:t,...e},n)=>l.jsx(Xf,{ref:n,className:Be("text-sm font-semibold",t),...e}));Jf.displayName=Xf.displayName;const ep=y.forwardRef(({className:t,...e},n)=>l.jsx(Vf,{ref:n,className:Be("text-sm opacity-90",t),...e}));ep.displayName=Vf.displayName;function hx(){const{toasts:t}=kf();return l.jsxs(cx,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return l.jsxs(Zf,{...i,children:[l.jsxs("div",{className:"grid gap-1",children:[n&&l.jsx(Jf,{children:n}),r&&l.jsx(ep,{children:r})]}),s,l.jsx(qf,{})]},e)}),l.jsx(Qf,{})]})}var fx={};const px=({onCreateNewMap:t,onOpenMap:e,isDarkMode:n})=>{const[r,s]=y.useState(!1),[i,o]=y.useState([]),[a,c]=y.useState({}),[u,d]=y.useState({name:"New Map",width:20,height:15,tileSize:64,location:""});y.useEffect(()=>{(async()=>{const x=localStorage.getItem("recentMaps");if(!x)return;let j=JSON.parse(x);const N=window.electronAPI;if(N&&typeof N.checkProjectExists=="function")try{const E=(await Promise.all(j.map(async $=>{try{return await N.checkProjectExists($.path)?$:null}catch{return $}}))).filter(Boolean);j=E,E.length!==JSON.parse(x).length&&localStorage.setItem("recentMaps",JSON.stringify(E))}catch(C){console.warn("Prune recent maps failed:",C)}o(j)})()},[]),y.useEffect(()=>{if(!i||i.length===0)return;const m=async x=>{const j=x;if(j.thumbnailDataUrl){c(N=>({...N,[x.id]:j.thumbnailDataUrl}));return}try{const N=window.electronAPI;if(N&&typeof N.getProjectThumbnail=="function"){const C=await N.getProjectThumbnail(x.path);if(C){c(E=>({...E,[x.id]:C}));return}}if(!(N&&typeof N.getProjectThumbnail=="function")){c(C=>({...C,[x.id]:null}));return}}catch(N){console.error("Failed to load thumbnail for",x.path,N)}c(N=>({...N,[x.id]:null}))};return i.forEach(x=>{m(x)}),()=>{Object.values(a).forEach(x=>{x&&x.startsWith("blob:")&&URL.revokeObjectURL(x)})}},[i]);const h=m=>{localStorage.setItem("recentMaps",JSON.stringify(m)),o(m)},f=async()=>{var m;try{if((m=window.electronAPI)!=null&&m.selectDirectory){const x=await window.electronAPI.selectDirectory();x&&d({...u,location:x})}else if("showDirectoryPicker"in window){const x=await window.showDirectoryPicker();d({...u,location:x.name})}else{const x="C:\\Users\\"+(navigator.userAgent.includes("Windows")&&fx.USERNAME||"User")+"\\Documents\\TileMaps";d({...u,location:x})}}catch(x){console.error("Error selecting directory:",x)}},S=async()=>{var m;if(!u.location){alert("Please select a location for your map project");return}try{const x=`${u.location}\\${u.name}`;if((m=window.electronAPI)!=null&&m.createMapProject){if(await window.electronAPI.createMapProject(u)){const C=[{id:Date.now().toString(),name:u.name,lastModified:"Just now",path:x},...i.slice(0,9)];h(C),t(u,x)}}else console.log("Creating map project:",u),t(u)}catch(x){console.error("Error creating map project:",x),alert("Error creating map project. Please try again.")}},v=m=>{e(m.path)},k=async()=>{var m;try{if((m=window.electronAPI)!=null&&m.selectDirectory){const x=await window.electronAPI.selectDirectory();x&&e(x)}else alert("Open Map Project functionality requires the desktop app")}catch(x){console.error("Error opening map project:",x)}},b=()=>{var m;(m=window.electronAPI)!=null&&m.minimize?window.electronAPI.minimize():console.log("Minimize clicked - Electron API not available")},g=()=>{var m;(m=window.electronAPI)!=null&&m.maximize?window.electronAPI.maximize():console.log("Maximize clicked - Electron API not available")},p=()=>{var m;(m=window.electronAPI)!=null&&m.close?window.electronAPI.close():console.log("Close clicked - Electron API not available")};return r?l.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-neutral-900 dark:to-neutral-800 flex flex-col ${n?"dark":""}`,children:[l.jsxs("div",{className:"bg-gray-100 dark:bg-neutral-900 text-orange-600 dark:text-orange-400 flex justify-between items-center px-4 py-1 select-none drag-region border-b border-gray-200 dark:border-neutral-700",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("img",{src:"/flare-ico.png",alt:"Flarism Logo",className:"w-6 h-6"}),l.jsx("span",{className:"text-sm font-semibold",children:"Flarism"})]}),l.jsxs("div",{className:"flex no-drag",children:[l.jsx(Y,{content:"Minimize",children:l.jsx("button",{onClick:b,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-neutral-700 px-3 py-1 text-sm rounded transition-colors",children:l.jsx(Bl,{className:"w-4 h-4"})})}),l.jsx(Y,{content:"Maximize",children:l.jsx("button",{onClick:g,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-neutral-700 px-3 py-1 text-sm rounded transition-colors",children:l.jsx(fn,{className:"w-4 h-4"})})}),l.jsx(Y,{content:"Close",children:l.jsx("button",{onClick:p,className:"text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 hover:bg-gray-200 dark:hover:bg-neutral-700 px-3 py-1 text-sm rounded transition-colors",children:l.jsx(Re,{className:"w-4 h-4"})})})]})]}),l.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl p-8 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"inline-flex items-center justify-center",children:l.jsx("img",{src:"/flare-logo.png",alt:"Flare Logo",className:"w-40 h-40 object-contain"})}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create a New Flare Project"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Configure your new project"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Name"}),l.jsx(pe,{value:u.name,onChange:m=>d({...u,name:m.target.value}),placeholder:"Enter map name"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Width (tiles)"}),l.jsx(pe,{type:"number",value:u.width,onChange:m=>d({...u,width:parseInt(m.target.value)||20}),min:"5",max:"100"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Height (tiles)"}),l.jsx(pe,{type:"number",value:u.height,onChange:m=>d({...u,height:parseInt(m.target.value)||15}),min:"5",max:"100"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Location"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(pe,{value:u.location,onChange:m=>d({...u,location:m.target.value}),placeholder:"Select folder for your project",readOnly:!0}),l.jsx(A,{type:"button",variant:"outline",onClick:f,children:l.jsx(Sf,{className:"w-4 h-4"})})]})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx(A,{variant:"outline",onClick:()=>s(!1),className:"flex-1",children:"Back"}),l.jsx(A,{onClick:S,className:"flex-1",children:"Create Map"})]})]})})]}):l.jsxs("div",{className:`h-screen overflow-hidden bg-gradient-to-br from-slate-50 to-slate-100 dark:from-neutral-900 dark:to-neutral-800 flex flex-col ${n?"dark":""}`,children:[l.jsxs("div",{className:"bg-gray-100 dark:bg-neutral-900 text-orange-600 dark:text-orange-400 flex justify-between items-center px-4 py-1 select-none drag-region border-b border-gray-200 dark:border-neutral-700",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("img",{src:"/flare-ico.png",alt:"Flarism Logo",className:"w-4 h-6"}),l.jsx("span",{className:"text-sm font-semibold",children:"Flarism"})]}),l.jsxs("div",{className:"flex no-drag",children:[l.jsx(Y,{content:"Minimize",children:l.jsx("button",{onClick:b,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-neutral-700 px-3 py-1 text-sm rounded transition-colors",children:l.jsx(Bl,{className:"w-4 h-4"})})}),l.jsx(Y,{content:"Maximize",children:l.jsx("button",{onClick:g,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-neutral-700 px-3 py-1 text-sm rounded transition-colors",children:l.jsx(fn,{className:"w-4 h-4"})})}),l.jsx(Y,{content:"Close",children:l.jsx("button",{onClick:p,className:"text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 hover:bg-gray-200 dark:hover:bg-neutral-700 px-3 py-1 text-sm rounded transition-colors",children:l.jsx(Re,{className:"w-4 h-4"})})})]})]}),l.jsxs("div",{className:"flex flex-1 min-h-0 overflow-hidden",children:[l.jsxs("div",{className:"w-80 bg-white dark:bg-neutral-900 border-r border-slate-200 dark:border-neutral-700 p-6 flex flex-col h-full",children:[l.jsx("div",{className:"mb-4 flex items-center justify-between",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Projects"})}),l.jsxs("div",{className:"flex-1 min-h-0 h-full",children:[l.jsx("div",{className:"space-y-2 overflow-y-auto minimal-scroll px-1 py-1 h-full",children:i.map(m=>l.jsx("div",{className:"p-3 rounded-lg border border-slate-200 dark:border-neutral-700 hover:bg-slate-50 dark:hover:bg-neutral-800 cursor-pointer transition-colors",onClick:()=>v(m),children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-20 h-20 bg-orange-100 dark:bg-orange-900 rounded overflow-hidden flex items-center justify-center",children:a[m.id]?l.jsx("img",{src:a[m.id]||"",alt:`${m.name} thumbnail`,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Ru,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:m.name}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:m.lastModified})]})]})},m.id))}),i.length===0&&l.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[l.jsx(Ru,{className:"w-20 h-20 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),l.jsx("p",{children:"No recent project"}),l.jsx("p",{className:"text-sm",children:"Create your first projet to get started"})]})]})]}),l.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:l.jsxs("div",{className:"text-center max-w-md",children:[l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"inline-flex items-center justify-center w-50 h-20",children:l.jsx("img",{src:"/flare-logo.png",alt:"Flare Logo",className:"w-100 h-100 object-contain"})}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Flarism is an unofficial, community-made editor inspired by the Flare engine. It is not affiliated with the official Flare developers."})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs(A,{onClick:()=>s(!0),className:"w-full h-12 text-lg",size:"lg",children:[l.jsx(U0,{className:"w-5 h-5 mr-2"}),"Create New Projet"]}),l.jsxs(A,{variant:"outline",onClick:k,className:"w-full h-12 text-lg",size:"lg",children:[l.jsx(N0,{className:"w-5 h-5 mr-2"}),"Open Existing Project"]})]})]})})]})]})};function mx(){const[t,e]=y.useState(!0),[n,r]=y.useState(null),s=y.useRef(null),[i,o]=y.useState(20),[a,c]=y.useState(15),[u]=y.useState("(none)"),[d,h]=y.useState(!0),[f,S]=y.useState([]),[v,k]=y.useState(null),[b,g]=y.useState(!1),[p,m]=y.useState(!1),[x,j]=y.useState(!1),[N,C]=y.useState("engine"),[E,$]=y.useState(!0),[z,q]=y.useState(null),[D,ce]=y.useState("brush"),[H,ue]=y.useState(!1),[ge,ke]=y.useState(!1),[L,R]=y.useState(!1),[O,V]=y.useState("brush"),[G,J]=y.useState("rectangular"),[be,ln]=y.useState("rectangle"),[ie,Je]=y.useState("none"),[Gi,ys]=y.useState([]),[tp,vs]=y.useState(!1),[xs,Va]=y.useState(null),[Ga,np]=y.useState([]),[dr,Ka]=y.useState(null),[Pn,hr]=y.useState("select"),[gx,Ki]=y.useState(!1),[fr,Qa]=y.useState(""),[rp,ws]=y.useState(!1),[Ln,pr]=y.useState(null),[Za,qa]=y.useState("Untitled Map"),[Ye,sp]=y.useState(()=>{const w=localStorage.getItem("isDarkMode");return w?JSON.parse(w):!1}),[Ss,ip]=y.useState("saved"),[mr,op]=y.useState(!0),[lp,Ja]=y.useState(0),[Qi,ec]=y.useState(!1),[zn,ap]=y.useState(!1),[et,tc]=y.useState(null),[nc,rc]=y.useState(!1),[Zi,sc]=y.useState(!1),[cp,an]=y.useState(0),[up,ic]=y.useState(!1),[In,gr]=y.useState(null),cn=y.useRef(null),[dp,ks]=y.useState(!1),[Q,tt]=y.useState(null),[hp,bs]=y.useState(!1),[ye,yr]=y.useState(null),bt=y.useRef(null),jt=y.useRef(null),Nt=y.useRef(null),qi=y.useRef(null),[Ji,fp]=y.useState(null),[pp,mp]=y.useState(0),[gp,yp]=y.useState(!1),{toast:eo}=kf();y.useEffect(()=>()=>{},[eo]),y.useEffect(()=>{Ye?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),n&&n.setDarkMode(Ye),localStorage.setItem("isDarkMode",JSON.stringify(Ye))},[Ye,n]);const An=y.useCallback(w=>{w.setAutoSaveCallback(async()=>{try{window.electronAPI&&et&&await w.saveProjectData(et)}catch(T){console.warn("Auto-save to disk failed:",T)}Ja(Date.now())}),w.setSaveStatusCallback(T=>{ip(T),ap(T==="unsaved"||T==="error")}),w.setAutoSaveEnabled(mr),w.setEyedropperCallback(()=>{ce("brush"),V("brush")}),w.setStampCallback(T=>{np(T)}),w.setHeroEditCallback((T,P,_,F,B)=>{yr({currentX:T,currentY:P,mapWidth:_,mapHeight:F,onConfirm:B}),bs(!0)})},[mr,et]);y.useEffect(()=>{if(s.current&&!t&&!n&&!nc){const w=new Yo(s.current);w.setDarkMode(Ye),An(w),r(w)}},[t,n,An,nc,Ye]),y.useEffect(()=>{if(!n)return;const w=()=>{const _=n.getHoverCoordinates();fp(_)};let T;const P=()=>{w(),T=requestAnimationFrame(P)};return P(),()=>{T&&cancelAnimationFrame(T)}},[n]),y.useEffect(()=>{if(n&&D==="brush"){const T={brush:"brush",bucket:"bucket",eraser:"eraser"}[O]||"brush";n.setCurrentTool(T)}else if(n&&D==="selection"){const T={rectangular:"rectangular","magic-wand":"magic-wand","same-tile":"same-tile",circular:"circular"}[G]||"rectangular";n.setCurrentSelectionTool(T)}else if(n&&D==="shape"){const T={rectangle:"rectangle",circle:"circle",line:"line"}[be]||"rectangle";n.setCurrentShapeTool(T)}else n&&D==="eyedropper"?n.setEyedropperTool():n&&D==="stamp"&&n.setStampTool()},[n,D,O,G,be]),y.useEffect(()=>{!n||D!=="stamp"||n.setCurrentStampMode(Pn)},[n,D,Pn]),y.useEffect(()=>{!n||D!=="stamp"||n.setActiveStamp(dr)},[n,D,dr]),y.useEffect(()=>{if(!n)return;const T=setInterval(()=>{const P=n.getSelection(),_=n.hasActiveSelection();mp(P.length),yp(_)},100);return()=>clearInterval(T)},[n]);const at=y.useCallback(()=>{if(n){const w=n.getLayers();S([...w]);const T=n.getActiveLayerId();k(T)}},[n]);y.useEffect(()=>{n&&at()},[n,at]),y.useEffect(()=>{const w=T=>{b&&g(!1)};return b&&document.addEventListener("click",w),()=>{document.removeEventListener("click",w)}},[b]);const Le=y.useCallback((w,T)=>{if(qi.current){const P=qi.current.getBoundingClientRect();let _=window.innerWidth/2;if(s&&s.current){const B=s.current.getBoundingClientRect();_=B.left+B.width/2}const F=Math.max(8,P.top-60);gr({content:w,x:_,y:F,visible:!0,fadeOut:!1})}else{const P=T.getBoundingClientRect(),_=P.left+P.width/2,F=P.top-10;gr({content:w,x:_,y:F,visible:!0,fadeOut:!1})}cn.current&&clearTimeout(cn.current),cn.current=setTimeout(()=>{gr(P=>P?{...P,fadeOut:!0}:null),setTimeout(()=>{gr(null)},300)},1e3)},[]),De=y.useCallback(()=>{cn.current&&clearTimeout(cn.current),gr(null)},[]);y.useEffect(()=>()=>{cn.current&&clearTimeout(cn.current),bt.current&&clearTimeout(bt.current),jt.current&&clearTimeout(jt.current),Nt.current&&clearTimeout(Nt.current)},[]);const oc=y.useCallback(()=>{bt.current&&clearTimeout(bt.current),jt.current&&clearTimeout(jt.current),Nt.current&&clearTimeout(Nt.current),ke(!1),R(!1),Ki(!1),ue(!0)},[]),lc=y.useCallback(()=>{bt.current=setTimeout(()=>{ue(!1)},1e3)},[]),ac=y.useCallback(()=>{bt.current&&clearTimeout(bt.current),jt.current&&clearTimeout(jt.current),Nt.current&&clearTimeout(Nt.current),ue(!1),R(!1),Ki(!1),ke(!0)},[]),cc=y.useCallback(()=>{jt.current=setTimeout(()=>{ke(!1)},1e3)},[]),uc=y.useCallback(()=>{bt.current&&clearTimeout(bt.current),jt.current&&clearTimeout(jt.current),Nt.current&&clearTimeout(Nt.current),ue(!1),ke(!1),R(!0)},[]),dc=y.useCallback(()=>{Nt.current=setTimeout(()=>{R(!1)},1e3)},[]),hc=y.useCallback(()=>{if(!n||!fr.trim())return;n.createStampFromSelection(fr.trim())&&(Qa(""),Ki(!1),hr("select"))},[n,fr]),vp=y.useCallback(w=>{Ka(w),hr("place")},[]),xp=y.useCallback(w=>{n&&(n.deleteStamp(w),dr===w&&(Ka(null),hr("select")))},[n,dr]),wp=()=>{switch(O){case"bucket":return l.jsx(Fo,{className:"w-4 h-4"});case"eraser":return l.jsx(Oo,{className:"w-4 h-4"});default:return l.jsx(Bs,{className:"w-4 h-4"})}},Sp=()=>{switch(G){case"magic-wand":return l.jsx(Bo,{className:"w-4 h-4"});case"same-tile":return l.jsx(Dn,{className:"w-4 h-4"});case"circular":return l.jsx(Lr,{className:"w-4 h-4"});default:return l.jsx(O0,{className:"w-4 h-4"})}},kp=()=>{switch(be){case"circle":return l.jsx(Lr,{className:"w-4 h-4"});case"line":return l.jsx(Hu,{className:"w-4 h-4"});default:return l.jsx(ev,{className:"w-4 h-4"})}};y.useCallback(()=>{if(!(!n||Gi.length<2))try{n.mergeBrushes(Gi),ys([]),Je("none")}catch(w){console.error("Failed to merge brushes:",w)}},[n,Gi]),y.useCallback(()=>{ys([]),Je("none")},[]);const fc=y.useCallback(w=>{Va(w),vs(!0)},[]),bp=y.useCallback(()=>{if(!(!n||xs===null)){try{n.separateBrush(xs),console.log(`Separated brush with ID: ${xs}`)}catch(w){console.error("Failed to separate brush:",w)}vs(!1),Va(null),Je("none")}},[n,xs]),pc=y.useCallback(w=>{n&&(console.log(`handleRemoveBrush called with brushId: ${w}`),pr({type:"removeBrush",payload:w}))},[n]),mc=y.useCallback((w,T)=>{if(n)try{const P=n.getDetectedTileInfo(),_=P.findIndex(B=>B.gid===w),F=P.findIndex(B=>B.gid===T);_!==-1&&F!==-1&&(n.reorderBrush(_,F),console.log(`Reordered brush ${w} to position of ${T}`))}catch(P){console.error("Failed to reorder brush:",P)}},[n]),gc=y.useCallback(w=>{if(!n)return;const T=n.getMapObjects().find(P=>P.id===w);T&&(tt(T),ks(!0))},[n]),jp=y.useCallback(w=>{n&&(n.updateMapObject(w.id,w),tt(null),ks(!1))},[n]),Np=y.useCallback((w,T)=>{ye!=null&&ye.onConfirm&&ye.onConfirm(w,T),bs(!1),yr(null)},[ye]),Cp=y.useCallback(()=>{bs(!1),yr(null)},[]);y.useEffect(()=>{if(!n||!s.current)return;const w=P=>{console.log("Double-click detected on canvas");const _=n.getActiveLayer();if(console.log("Active layer:",_),!_){console.log("No active layer found");return}if(!["enemy","npc","object","event","background"].includes(_.type)){console.log(`Layer type '${_.type}' is not interactive, skipping double-click`);return}const B=n.getHoverCoordinates();if(console.log("Hover coordinates:",B),B){const Ue=n.getMapObjects(),xr=n.getObjectsAtPosition(B.x,B.y);console.log("All objects:",Ue.length),console.log("Objects at hover position:",xr);const un=Ue.find(Ct=>Ct.x===B.x&&Ct.y===B.y);console.log("Object at position (find method):",un),un?(console.log(`Opening edit dialog for object ID: ${un.id}`),gc(un.id)):console.log("No object found at hover position")}},T=s.current;return T.addEventListener("dblclick",w),()=>{T.removeEventListener("dblclick",w)}},[n,gc]),y.useEffect(()=>{console.log(`Brush tool changed to: ${ie}`);const w=document.querySelector("[data-brush-tool]");if(w)w.setAttribute("data-brush-tool",ie),console.log(`Updated existing data-brush-tool attribute to: ${ie}`);else{const T=document.createElement("div");T.setAttribute("data-brush-tool",ie),T.style.display="none",document.body.appendChild(T),console.log(`Created new data-brush-tool element with value: ${ie}`)}},[ie]),y.useEffect(()=>{const w=T=>{const{action:P,tileIndex:_}=T.detail;switch(P){case"select":ys(F=>[...F,_]);break;case"deselect":ys(F=>F.filter(B=>B!==_));break;case"separate":fc(_);break;case"remove":pc(_);break;case"drop":T.detail.from&&T.detail.to&&mc(T.detail.from,T.detail.to);break}};return document.addEventListener("brushAction",w),()=>{document.removeEventListener("brushAction",w)}},[fc,pc,mc]);const Tp=y.useCallback(async(w,T)=>{try{console.log("=== LOAD PROJECT DATA DEBUG ==="),console.log("Map config received:",{name:T.name,tilesets:T.tilesets?T.tilesets.length:0,tilesetImages:T.tilesetImages?Object.keys(T.tilesetImages).length:0,layers:T.layers?T.layers.length:0}),console.log("Map config full structure:",T),console.log("Creating layers from config...");const P=T.layers||[];console.log("Layers from config:",P);for(const _ of P)if(console.log("Processing layer:",_),w.addLayer(_.name,_.type)){console.log(`Created layer: ${_.type} - ${_.name}`);const B=w.getLayers().find(Ue=>Ue.type===_.type);B&&_.data&&Array.isArray(_.data)&&(console.log(`Setting data for layer ${B.id} with ${_.data.length} tiles`),B.data=_.data)}else console.log(`Failed to create layer: ${_.type} - ${_.name}`);return console.log("=== CALLING EDITOR loadProjectData ==="),w.loadProjectData(T),console.log("Project data loading completed"),!0}catch(P){return console.error("Error loading project data:",P),!1}},[]);y.useEffect(()=>{z&&s.current&&!t&&(console.log("Canvas available and map config pending, creating editor..."),(async()=>{var T;try{console.log("Creating new editor with pending config...");const P=new Yo(s.current);console.log("Clearing local storage backup..."),P.clearLocalStorageBackup(),console.log("Setting map size..."),P.setMapSize(z.width,z.height),console.log("Loading project data...");const _=await Tp(P,z);if(console.log("Project data loading result:",_),console.log("=== EDITOR STATE AFTER loadProjectData ==="),console.log("Tile count after loadProjectData:",P.getTileCount()),console.log("Active layer after loadProjectData:",P.getActiveLayerId()),console.log("Layers after loadProjectData:",P.getLayers().map(F=>({id:F.id,name:F.name,type:F.type}))),(T=window.electronAPI)!=null&&T.discoverTilesetImages&&et){console.log("Calling discoverTilesetImages for path:",et);const F=await window.electronAPI.discoverTilesetImages(et),B=(F==null?void 0:F.tilesetImages)||{},Ue=Object.keys(B),xr=z,un=xr.tilesets&&Array.isArray(xr.tilesets)&&xr.tilesets.some(Ct=>Ct.layerType);if(console.log("Has per-layer tilesets in project:",un),console.log("Available discovered images:",Ue),!un&&Ue.length>0){console.log("No per-layer tilesets found, using fallback assignment");const Ct=Tt=>(Tt||"").toLowerCase().replace(/\.[^/.]+$/,"").replace(/[^a-z0-9]+/g," ").trim(),yc=P.getActiveLayerId(),Up=P.getLayers();let vc=!1;for(const Tt of Up){const xc=[Ct(Tt.type),Ct(Tt.name)];let Et=null;for(const wr of Ue){const so=Ct(wr);if(xc.includes(so)){Et=wr;break}}if(!Et){const wr=Ue.find(so=>{const Xp=Ct(so);return xc.some(wc=>wc&&Xp.includes(wc))});wr&&(Et=wr)}!Et&&Ue.length===1&&(Et=Ue[0]),Et?(console.log(`Assigning tileset '${Et}' to layer ${Tt.id} (${Tt.type})`),P.setActiveLayer(Tt.id),await P.loadTilesetFromDataURL(B[Et],Et),vc=!0):console.log(`No matching tileset found for layer ${Tt.id} (${Tt.type})`)}yc!==null&&P.setActiveLayer(yc),vc&&P.forceSave()}else console.log("Per-layer tilesets already loaded, skipping fallback assignment")}console.log("Setting up autosave and updating UI..."),P.setDarkMode(Ye),An(P),r(P),setTimeout(()=>{at();const F=P.getActiveLayerId(),B=P.getLayers().find(Ue=>Ue.id===F);console.log("Final UI update - checking active layer:",F,B==null?void 0:B.type),P.redraw()},150),q(null)}catch(P){console.error("Failed to create editor with pending config:",P),q(null)}})())},[z,t,et,An,at]);const Ep=(w,T)=>{var _;const P=(_=w.target.files)==null?void 0:_[0];P&&(n!=null&&n.handleFileUpload)&&n.handleFileUpload(P,T)},Mp=w=>{n&&(n.setActiveLayer(w),k(w))},Pp=w=>{if(n){n.toggleLayerVisibility(w);const T=n.getLayers();S([...T])}},Lp=(w,T)=>{if(n){const P=f.find(_=>_.id===w);if(P){const _=P.transparency||0,F=Math.max(0,Math.min(1,_+T));n.setLayerTransparency(w,F),at()}}},zp=()=>{n!=null&&n.resizeMap&&n.resizeMap(i,a)},Ip=()=>{n!=null&&n.zoomIn&&n.zoomIn()},Ap=()=>{n!=null&&n.zoomOut&&n.zoomOut()},_p=()=>{n!=null&&n.resetZoom&&n.resetZoom()},to=y.useCallback(()=>{n!=null&&n.undo&&(n.undo(),at())},[n,at]),no=y.useCallback(()=>{n!=null&&n.redo&&(n.redo(),at())},[n,at]),Dp=async()=>{var w;if(!n||!et){eo({title:"Export Failed",description:"No project loaded or editor not initialized.",variant:"destructive"});return}sc(!0),an(0);try{an(25);const T=n.generateFlareMapTxt();an(50);const P=n.generateFlareTilesetDef();if(an(75),(w=window.electronAPI)!=null&&w.saveExportFiles){const _=await window.electronAPI.saveExportFiles(et,Za,T,P);if(an(100),_)setTimeout(()=>{ic(!0)},1500);else throw new Error("Failed to save export files")}else n.exportFlareMap(),an(100)}catch(T){console.error("Export failed:",T),eo({title:"Export Failed",description:"An error occurred while exporting the map.",variant:"destructive"})}finally{setTimeout(()=>{sc(!1),an(0)},1e3)}},vr=y.useCallback(async()=>{if(n){ec(!0);try{if(window.electronAPI&&et){const w=await n.saveProjectData(et);await new Promise(T=>setTimeout(T,300)),w&&Ja(Date.now())}else n.forceSave(),await new Promise(w=>setTimeout(w,500))}catch(w){console.error("Save error:",w)}finally{ec(!1)}}},[n,et]),Rp=()=>{n!=null&&n.toggleMinimap&&n.toggleMinimap(),h(!d)},Op=(w,T)=>{if(localStorage.removeItem("tilemap_autosave_backup"),tc(T??null),o(w.width),c(w.height),qa(w.name),e(!1),n&&r(null),s.current){const P=new Yo(s.current);P.resetForNewProject(),P.setMapSize(w.width,w.height),P.setDarkMode(Ye),An(P),r(P),at()}},ro=y.useCallback(async w=>{var T;console.log("=== HANDLE OPEN MAP CALLED ===",w),console.log("Project path details:",{path:w,timestamp:new Date().toISOString()});try{if(rc(!0),tc(w),(T=window.electronAPI)!=null&&T.openMapProject){console.log("Calling electronAPI.openMapProject...");const P=await window.electronAPI.openMapProject(w);if(console.log("=== RAW MAP CONFIG RECEIVED ==="),console.log("Full mapConfig object:",JSON.stringify(P,null,2)),P){console.log("=== MAP CONFIG ANALYSIS ==="),console.log("Map dimensions:",{width:P.width,height:P.height}),console.log("Map name:",P.name);const _=P;console.log("Tilesets count:",_.tilesets?_.tilesets.length:0),console.log("Tileset images count:",_.tilesetImages?Object.keys(_.tilesetImages).length:0),console.log("Layers count:",_.layers?_.layers.length:0),_.tilesets&&(console.log("=== TILESETS DETAILS ==="),_.tilesets.forEach((F,B)=>{console.log(`Tileset ${B}:`,{fileName:F.fileName,tileWidth:F.tileWidth,tileHeight:F.tileHeight,spacing:F.spacing,margin:F.margin,tileCount:F.tileCount})})),_.layers&&(console.log("=== LAYERS DETAILS ==="),_.layers.forEach((F,B)=>{console.log(`Layer ${B}:`,{id:F.id,name:F.name,type:F.type,visible:F.visible,opacity:F.opacity,dataLength:F.data?F.data.length:0})})),_.tilesetImages&&(console.log("=== TILESET IMAGES DETAILS ==="),Object.entries(_.tilesetImages).forEach(([F,B])=>{console.log(`Image ${F}:`,{dataType:typeof B,dataLength:B?B.length:0,isDataURL:typeof B=="string"&&B.startsWith("data:")})})),console.log("Setting map dimensions and clearing editor..."),o(P.width),c(P.height),e(!1),console.log("Clearing existing editor..."),n?(console.log("Found existing editor, clearing it"),r(null)):console.log("No existing editor to clear"),console.log("Storing map config for deferred editor creation"),q(P)}}else console.log("Opening map project:",w)}catch(P){console.error("Error opening map project:",P)}finally{rc(!1)}},[n,An,at]);y.useEffect(()=>{window.electronAPI&&(window.electronAPI.onMenuSaveMap(async()=>{await vr()}),window.electronAPI.onMenuOpenMap(async()=>{const w=await window.electronAPI.selectDirectory();w&&await ro(w)}),window.electronAPI.onMenuNewMap(()=>{e(!0)}),window.electronAPI.onMenuUndo(()=>{to()}),window.electronAPI.onMenuRedo(()=>{no()}))},[vr,ro,to,no]),y.useEffect(()=>{window.electronAPI&&(window.electronAPI.onBeforeClose(async()=>{await window.electronAPI.confirmClose(zn)}),window.electronAPI.onSaveAndClose(async()=>{try{await vr(),window.electronAPI.closeAfterSave()}catch(w){console.error("Failed to save before close:",w),window.electronAPI.closeAfterSave()}}))},[zn,vr]),y.useEffect(()=>{const w=T=>{if(zn)return T.preventDefault(),T.returnValue="",""};return window.addEventListener("beforeunload",w),()=>{window.removeEventListener("beforeunload",w)}},[zn]);const $p=()=>{var w;(w=window.electronAPI)!=null&&w.minimize?window.electronAPI.minimize():console.log("Minimize clicked - Electron API not available")},Fp=()=>{var w;(w=window.electronAPI)!=null&&w.maximize?window.electronAPI.maximize():console.log("Maximize clicked - Electron API not available")},Hp=()=>{var w;(w=window.electronAPI)!=null&&w.close?window.electronAPI.close():console.log("Close clicked - Electron API not available")},Wp=()=>{n&&n.fillSelection()},Bp=()=>{n&&n.clearSelection()},Yp=()=>{n&&n.deleteSelection()};return l.jsx(l.Fragment,{children:t?l.jsx(px,{onCreateNewMap:Op,onOpenMap:ro,isDarkMode:Ye}):l.jsxs("div",{className:"h-screen bg-background text-foreground flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"bg-gray-100 dark:bg-neutral-900 text-orange-600 dark:text-orange-400 flex justify-between items-center px-4 py-1 select-none drag-region border-b border-gray-200 dark:border-neutral-700",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("img",{src:"/flare-ico.png",alt:"Flarism Logo",className:"w-4 h-6"}),l.jsx("span",{className:"text-sm font-semibold text-orange-600 dark:text-orange-400",children:"Flarism"})]}),l.jsx("div",{className:"text-sm font-medium"}),l.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[Ss==="saving"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-orange-600",children:"Saving..."})]}),Ss==="saved"&&lp>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),l.jsx("span",{className:"text-green-600",children:"Saved"})]}),Ss==="error"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),l.jsx("span",{className:"text-red-600",children:"Save Error"})]}),Ss==="unsaved"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),l.jsx("span",{className:"text-yellow-600",children:"Unsaved"})]})]})]}),l.jsxs("div",{className:"flex no-drag",children:[l.jsx(Y,{content:"Minimize",children:l.jsx("button",{onClick:$p,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 p-1 rounded transition-colors",children:l.jsx(Bl,{className:"w-4 h-4"})})}),l.jsx(Y,{content:"Maximize",children:l.jsx("button",{onClick:Fp,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 p-1 rounded transition-colors",children:l.jsx(fn,{className:"w-4 h-4"})})}),l.jsx(Y,{content:"Close",children:l.jsx("button",{onClick:Hp,className:"text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 hover:bg-gray-200 dark:hover:bg-gray-700 p-1 rounded transition-colors",children:l.jsx(Re,{className:"w-4 h-4"})})})]})]}),l.jsxs("main",{className:"flex flex-1 min-h-0",children:[l.jsxs("aside",{className:"w-80 border-r border-border bg-muted/30 p-4 overflow-y-auto flex flex-col",children:[l.jsxs("section",{className:"flex flex-col flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Tileset Brushes"}),l.jsx(Y,{content:"Import a PNG tileset for the active layer",side:"bottom",children:l.jsxs(A,{variant:"outline",size:"sm",className:"relative bg-orange-500 hover:bg-orange-600 text-white border-orange-500 hover:border-orange-600 h-6 text-xs px-2 shadow-sm",children:[l.jsx(Wo,{className:"w-3 h-3 mr-1"}),"Import",l.jsx("input",{type:"file",accept:"image/png",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:w=>Ep(w,"layerTileset")})]})})]}),l.jsx("div",{id:"tilesetMeta",className:"text-sm text-muted-foreground mb-2"}),l.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:l.jsxs("div",{className:"relative flex-1 min-h-0 overflow-auto h-full",children:[l.jsx("div",{id:"tilesContainer",className:"tile-palette h-full"}),l.jsx("div",{"data-brush-tool":ie,className:"hidden"}),l.jsx("div",{className:"absolute bottom-2 left-2 z-10",children:l.jsx(Y,{content:"Active GID number of selected tilebrush",children:l.jsx(n0,{variant:"secondary",className:"text-xs px-2 py-1 bg-black/80 text-white border-gray-600 hover:bg-black/90",children:l.jsx("span",{id:"activeGid",children:u})})})})]})}),l.jsxs("div",{className:"flex items-center justify-between mb-1 mt-2",children:[l.jsx("div",{className:"text-xs text-muted-foreground",children:"Brush Tools"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(Y,{content:"Move/Reorder brushes",children:l.jsx(A,{variant:ie==="move"?"default":"outline",size:"sm",className:"text-xs px-1 py-1 h-6 shadow-sm",onClick:()=>Je(ie==="move"?"none":"move"),children:l.jsx(c0,{className:"w-3 h-3"})})}),l.jsx(Y,{content:"Merge brushes",children:l.jsx(A,{variant:ie==="merge"?"default":"outline",size:"sm",className:"text-xs px-1 py-1 h-6 shadow-sm",onClick:()=>Je(ie==="merge"?"none":"merge"),children:l.jsx(Ou,{className:"w-3 h-3"})})}),l.jsx(Y,{content:"Separate brushes",children:l.jsx(A,{variant:ie==="separate"?"default":"outline",size:"sm",className:"text-xs px-1 py-1 h-6 shadow-sm",onClick:()=>Je(ie==="separate"?"none":"separate"),children:l.jsx(Z0,{className:"w-3 h-3"})})}),l.jsx(Y,{content:"Remove brushes",children:l.jsx(A,{variant:ie==="remove"?"default":"outline",size:"sm",className:"text-xs px-1 py-1 h-6 shadow-sm",onClick:()=>Je(ie==="remove"?"none":"remove"),children:l.jsx(cv,{className:"w-3 h-3"})})}),l.jsx(Y,{content:"Remove tileset for current layer",children:l.jsx(A,{variant:"outline",size:"sm",className:"text-xs px-1 py-1 h-6 border-red-500 hover:border-red-600 hover:bg-red-50 shadow-sm",onClick:()=>{pr({type:"removeTileset"})},children:l.jsx(Re,{className:"w-3 h-3 text-red-500"})})})]})]})]}),l.jsxs("section",{className:"mb-4 flex-shrink-0",children:[l.jsx("h2",{className:"text-sm font-semibold mb-2",children:"Layers"}),l.jsx("div",{className:"mb-2 space-y-0.5 max-h-48 overflow-y-auto",children:f.map(w=>l.jsx("div",{className:`px-2 py-1 border rounded transition-colors text-xs ${v===w.id?"border-orange-500 bg-orange-50 dark:bg-orange-900/20 dark:border-orange-400":"border-border hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:l.jsx("div",{className:"cursor-pointer",onClick:()=>Mp(w.id),children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Y,{content:w.visible?"Hide layer":"Show layer",children:l.jsx(A,{variant:"ghost",size:"sm",onClick:T=>{T.stopPropagation(),Pp(w.id)},className:"w-4 h-4 p-0 hover:bg-gray-200 dark:hover:bg-gray-700",children:w.visible?l.jsx(b0,{className:"w-2.5 h-2.5"}):l.jsx(S0,{className:"w-2.5 h-2.5 text-gray-400 dark:text-gray-500"})})}),l.jsx(A,{variant:"ghost",size:"sm",className:"w-4 h-4 p-0 hover:bg-gray-200 dark:hover:bg-gray-700",onMouseEnter:T=>{const P=Math.round((w.transparency||0)*100);Le(l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ws,{className:"w-3 h-3"}),"Transparency (",P,"%)"]}),T.currentTarget)},onMouseLeave:De,onWheel:T=>{T.preventDefault();const P=T.deltaY>0?.1:-.1,_=w.transparency||0,F=Math.max(0,Math.min(1,_+P));Lp(w.id,P);const B=Math.round(F*100);Le(l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ws,{className:"w-3 h-3"}),"Transparency (",B,"%)"]}),T.currentTarget)},children:l.jsx(d0,{className:"w-2.5 h-2.5"})}),l.jsx("span",{className:"text-xs font-medium truncate",children:w.name})]})})})},w.id))})]}),l.jsxs("section",{className:"flex-shrink-0",children:[l.jsx("div",{className:"w-full h-1.5 mb-2",children:Zi?l.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-full overflow-hidden",children:l.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 h-full transition-all duration-1000 ease-out rounded-full",style:{width:`${cp}%`}})}):l.jsx("div",{className:"w-full h-full"})}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(Y,{content:"Export the map file and tilesetdef",children:l.jsx(A,{onClick:Dp,className:"shadow-sm flex items-center gap-1 px-3 py-1 h-7 text-xs w-20",size:"sm",disabled:Zi,children:Zi?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),l.jsx("span",{children:"Export"})]}):l.jsxs(l.Fragment,{children:[l.jsx(v0,{className:"w-3 h-3"}),l.jsx("span",{children:"Export"})]})})}),l.jsx(Y,{content:zn?"Save changes":"All changes saved",children:l.jsx(A,{onClick:vr,className:`w-7 h-7 p-0 shadow-sm transition-colors ${Qi?"bg-blue-500 hover:bg-blue-600":zn?"bg-orange-500 hover:bg-orange-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,disabled:Qi,size:"sm",children:Qi?l.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}):l.jsx(Yu,{className:"w-3 h-3"})})}),l.jsx(Y,{content:"Help & Documentation",children:l.jsx(A,{onClick:()=>j(!0),className:"w-7 h-7 p-0 shadow-sm",variant:"outline",size:"sm",children:l.jsx(m0,{className:"w-3 h-3"})})}),l.jsx(Y,{content:"Map Settings",children:l.jsx(A,{onClick:()=>m(!0),className:"w-7 h-7 p-0 shadow-sm",variant:"outline",size:"sm",children:l.jsx(Uu,{className:"w-3 h-3"})})})]})]})]}),p&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-background border border-border rounded-lg p-6 w-96",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Map Settings"}),l.jsx(A,{variant:"ghost",size:"sm",onClick:()=>m(!1),className:"w-8 h-8 p-0",children:l.jsx(Re,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Map Name"}),l.jsx(pe,{type:"text",value:Za,onChange:w=>qa(w.target.value),placeholder:"Enter map name",className:"w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Map Width"}),l.jsx(pe,{type:"number",value:i,onChange:w=>o(Number(w.target.value)),min:"1",max:"100",className:"w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Map Height"}),l.jsx(pe,{type:"number",value:a,onChange:w=>c(Number(w.target.value)),min:"1",max:"100",className:"w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Theme (Experimental)"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm",children:"Light Mode"}),l.jsxs("button",{onClick:()=>sp(!Ye),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Ye?"bg-orange-600":"bg-gray-200"}`,children:[l.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${Ye?"translate-x-6":"translate-x-1"}`}),l.jsx("span",{className:"sr-only",children:"Toggle dark mode"})]}),l.jsxs("span",{className:"text-sm flex items-center gap-1",children:[Ye?l.jsx(I0,{className:"w-4 h-4"}):l.jsx(ov,{className:"w-4 h-4"}),"Dark Mode"]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Debug Mode"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm",children:"Disabled"}),l.jsxs("button",{onClick:()=>{n&&n.toggleDebugMode()},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n!=null&&n.getDebugMode()?"bg-orange-600":"bg-gray-200"}`,children:[l.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n!=null&&n.getDebugMode()?"translate-x-6":"translate-x-1"}`}),l.jsx("span",{className:"sr-only",children:"Toggle debug mode"})]}),l.jsxs("span",{className:"text-sm flex items-center gap-1",children:[l.jsx(Dn,{className:"w-4 h-4"}),"Debug Tiles"]})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Shows tile boundaries and coordinates for debugging"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Auto-Save"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm",children:"Disabled"}),l.jsxs("button",{onClick:()=>{const w=!mr;op(w),n&&n.setAutoSaveEnabled(w)},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${mr?"bg-orange-600":"bg-gray-200"}`,children:[l.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${mr?"translate-x-6":"translate-x-1"}`}),l.jsx("span",{className:"sr-only",children:"Toggle auto-save"})]}),l.jsx("span",{className:"text-sm",children:"Enabled"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically saves your work every 8 seconds"})]})]}),l.jsxs("div",{className:"flex gap-2 mt-6",children:[l.jsx(A,{variant:"outline",onClick:()=>m(!1),className:"flex-1",children:"Cancel"}),l.jsx(A,{onClick:()=>{zp(),m(!1)},className:"flex-1",children:"Apply Changes"})]})]})}),rp&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-background border border-border rounded-lg p-6 w-80",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Clear Layer"}),l.jsx(A,{variant:"ghost",size:"sm",onClick:()=>ws(!1),className:"w-8 h-8 p-0",children:l.jsx(Re,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"text-sm text-foreground mb-4",children:"Are you sure you want to clear all tiles from the current layer? This action cannot be undone."}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsx(A,{variant:"outline",onClick:()=>ws(!1),children:"Cancel"}),l.jsx(A,{onClick:()=>{n&&n.clearLayer(),V("brush"),ws(!1)},children:"Clear"})]})]})}),Ln&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-background border border-border rounded-lg p-6 w-80",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Confirm"}),l.jsx(A,{variant:"ghost",size:"sm",onClick:()=>pr(null),className:"w-8 h-8 p-0",children:l.jsx(Re,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"text-sm text-foreground mb-4",children:[Ln.type==="removeBrush"&&"Are you sure you want to remove this brush?",Ln.type==="removeTileset"&&"Are you sure you want to remove the tileset for this layer? This will clear the tileset but keep any placed tiles."]}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsx(A,{variant:"outline",onClick:()=>pr(null),children:"Cancel"}),l.jsx(A,{onClick:()=>{try{if(Ln.type==="removeBrush"){const w=Ln.payload;n&&n.removeBrush(w)}else Ln.type==="removeTileset"&&n&&n.removeLayerTileset()}catch(w){console.error("Confirm action failed:",w)}finally{pr(null)}},children:"Confirm"})]})]})}),x&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-background border border-border rounded-lg p-0 w-[800px] max-h-[80vh] overflow-y-auto help-modal relative",children:[l.jsxs("div",{className:"sticky top-0 z-20 bg-background/95 backdrop-blur-sm border-b border-border py-3 px-4 rounded-t-lg",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Help & Documentation"}),l.jsx(A,{variant:"ghost",size:"sm",onClick:()=>j(!1),className:"w-8 h-8 p-0","aria-label":"Close Help",children:l.jsx(Re,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"flex space-x-1 mt-3 bg-gray-100 dark:bg-neutral-800 rounded-lg p-1",children:[l.jsxs("button",{onClick:()=>C("engine"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all ${N==="engine"?"bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[l.jsx(Dn,{className:"w-4 h-4 inline mr-2"}),"Engine"]}),l.jsxs("button",{onClick:()=>C("collisions"),className:`px-3 py-2 rounded-md text-sm font-medium transition-all ${N==="collisions"?"bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[l.jsx(Ho,{className:"w-4 h-4 inline mr-2"}),"Collisions"]})]})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[N==="engine"&&l.jsxs(l.Fragment,{children:[l.jsxs("section",{children:[l.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[l.jsx(Dn,{className:"w-5 h-5 text-orange-500"}),"Getting Started"]}),l.jsxs("div",{className:"space-y-2 text-gray-700 dark:text-gray-400",children:[l.jsx("p",{children:"Welcome to the Isometric Tile Map Editor! This tool allows you to create beautiful isometric tile-based maps."}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-gray-700 dark:text-gray-400",children:[l.jsx("li",{children:"Start by creating a new map or loading an existing one"}),l.jsx("li",{children:"Import tilesets to begin designing"}),l.jsx("li",{children:"Use layers to organize different elements of your map"}),l.jsx("li",{children:"Export your finished map for use in your projects"})]})]})]}),l.jsxs("section",{children:[l.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2",children:[l.jsx(Fu,{className:"w-5 h-5 text-orange-500"}),"Map Management"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("p",{className:"text-gray-700 dark:text-gray-400",children:"Layers help organize your map content. Each layer can have its own tileset and transparency."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Yu,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Save/Export"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Save your map as JSON or export as PNG image"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Wo,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Load Map"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Load previously saved JSON map files"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Uu,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Map Settings"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure map dimensions, tile size, and other properties"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Ou,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Lock/Unlock"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prevent accidental edits to completed layers"})]})]})]})]})]}),l.jsxs("section",{children:[l.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[l.jsx(Bs,{className:"w-5 h-5 text-orange-500"}),"Drawing Tools"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Bs,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Brush Tool"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Paint individual tiles by clicking"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Fo,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Bucket Fill"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Fill connected areas with the same tile"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Oo,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Eraser"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Remove tiles from the map"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Wu,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Eyedropper"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select a tile from the map to use as brush"})]})]})]})]}),l.jsxs("section",{children:[l.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[l.jsx(fn,{className:"w-5 h-5 text-orange-500"}),"Tileset Management"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("p",{className:"text-gray-700 dark:text-gray-400",children:"Each layer can have its own tileset. Import PNG images to use as tilesets."}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Wo,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Import Tileset"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Click the upload button for each layer to import a tileset image"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Re,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Remove Tileset"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use the red X button to remove a tileset from a layer"})]})]})]})]})]}),l.jsxs("section",{children:[l.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[l.jsx($o,{className:"w-5 h-5 text-orange-500"}),"Navigation & Viewport"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Xu,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Zoom Controls"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use +/- buttons or mouse wheel to zoom in/out"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx($o,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Pan View"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Hold and drag the middle mouse button to pan"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Bu,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Reset View"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reset zoom and center the view"})]})]}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx($u,{className:"w-4 h-4 mt-1 text-orange-500"}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Coordinates"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Hover over the map to see tile coordinates"})]})]})]})]}),l.jsxs("section",{children:[l.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2",children:[l.jsx(Dn,{className:"w-5 h-5 text-orange-500"}),"Keyboard Shortcuts"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 bg-gray-50 dark:bg-neutral-900 p-4 rounded-lg",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-200 dark:bg-neutral-800 px-2 py-1 rounded",children:"Ctrl+Z"}),l.jsx("span",{className:"text-sm text-gray-400",children:"Undo"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-200 dark:bg-neutral-800 px-2 py-1 rounded",children:"Ctrl+Y"}),l.jsx("span",{className:"text-sm text-gray-400",children:"Redo"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-200 dark:bg-neutral-800 px-2 py-1 rounded",children:"Ctrl+S"}),l.jsx("span",{className:"text-sm text-gray-400",children:"Save Map"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-200 dark:bg-neutral-800 px-2 py-1 rounded",children:"Mouse Wheel"}),l.jsx("span",{className:"text-sm text-gray-400",children:"Zoom"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-200 dark:bg-neutral-800 px-2 py-1 rounded",children:"Middle Click + Drag"}),l.jsx("span",{className:"text-sm text-gray-400",children:"Pan"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-200 dark:bg-neutral-800 px-2 py-1 rounded",children:"Hover + Wheel"}),l.jsx("span",{className:"text-sm text-gray-400",children:"Layer Transparency"})]})]})]})]}),l.jsxs("section",{children:[l.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2",children:[l.jsx(Bo,{className:"w-5 h-5 text-orange-500"}),"Tips & Best Practices"]}),l.jsx("div",{className:"space-y-2 text-gray-700 dark:text-gray-400",children:l.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-gray-700 dark:text-gray-400",children:[l.jsx("li",{children:"Use separate layers for different map elements (background, objects, decorations)"}),l.jsx("li",{children:"Name your layers descriptively for better organization"}),l.jsx("li",{children:"Lock completed layers to prevent accidental changes"}),l.jsx("li",{children:"Adjust layer transparency to see underlying elements while editing"}),l.jsx("li",{children:"Use the eyedropper tool to quickly select tiles from existing map areas"}),l.jsx("li",{children:"Save frequently to avoid losing work"}),l.jsx("li",{children:"Test your map export to ensure it looks correct in your target application"})]})})]})]}),N==="collisions"&&l.jsx(l.Fragment,{children:l.jsxs("section",{children:[l.jsxs("h4",{className:"text-xl font-semibold mb-3 flex items-center gap-2 text-gray-800 dark:text-gray-100",children:[l.jsx(Ho,{className:"w-5 h-5 text-orange-500"}),"Summary of Collision Values for Flare"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-700 dark:text-gray-400",children:"Collision values in Flare Engine determine how entities interact with map tiles. Each value has specific behavior that affects movement and visibility."}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full border-collapse border border-gray-300 dark:border-gray-600",children:[l.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 text-left font-semibold text-gray-800 dark:text-gray-100",children:"Value"}),l.jsx("th",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 text-left font-semibold text-gray-800 dark:text-gray-100",children:"Type"}),l.jsx("th",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 text-left font-semibold text-gray-800 dark:text-gray-100",children:"Behavior"})]})}),l.jsxs("tbody",{className:"text-gray-700 dark:text-gray-300",children:[l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-mono bg-red-50 dark:bg-red-900/20",children:"1"}),l.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-medium text-red-600 dark:text-red-400",children:"Red Block"}),l.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2",children:"Impassable wall, visible on minimap"})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-mono bg-red-50 dark:bg-red-900/20",children:"2"}),l.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-medium text-red-600 dark:text-red-400",children:"Dithered Red"}),l.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2",children:"Still blocks entities, minimap shows dithered tile"})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-mono bg-blue-50 dark:bg-blue-900/20",children:"3"}),l.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-medium text-blue-600 dark:text-blue-400",children:"Pit (Blue)"}),l.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2",children:"Ground entities blocked; air can pass"})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-mono bg-blue-50 dark:bg-blue-900/20",children:"4"}),l.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2 font-medium text-blue-600 dark:text-blue-400",children:"Dithered Pit"}),l.jsx("td",{className:"border border-gray-300 dark:border-gray-600 px-4 py-2",children:"Same as 3, but minimap shows dithered"})]})]})]})}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[l.jsxs("h5",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2 flex items-center gap-2",children:[l.jsx(Ho,{className:"w-4 h-4"}),"Usage Guidelines"]}),l.jsxs("ul",{className:"text-blue-700 dark:text-blue-300 text-sm space-y-1 list-disc list-inside",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Value 1 (Red Block):"})," Use for walls, buildings, and solid obstacles that should be clearly visible on the minimap"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Value 2 (Dithered Red):"})," Use for partial barriers or decorative walls that still block movement"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Value 3 (Pit):"})," Use for water, lava, or ground hazards that flying entities can cross"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Value 4 (Dithered Pit):"})," Use for shallow water or transitional pit areas"]})]})]}),l.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg border border-amber-200 dark:border-amber-800",children:[l.jsx("h5",{className:"font-medium text-amber-800 dark:text-amber-200 mb-2",children:"⚠️ Important Notes"}),l.jsxs("ul",{className:"text-amber-700 dark:text-amber-300 text-sm space-y-1 list-disc list-inside",children:[l.jsxs("li",{children:["Collision values are set in the ",l.jsx("strong",{children:"Collision Layer"})," of your map"]}),l.jsx("li",{children:"Each tile position can only have one collision value"}),l.jsx("li",{children:"Collision affects AI pathfinding and player movement"}),l.jsx("li",{children:"Minimap visualization helps players understand map layout"})]})]})]})]})}),l.jsx("div",{className:"pt-4 border-t border-gray-200 text-center",children:l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Flarism | GUI for Flare Engine by ism."})})]})]})}),l.jsxs("section",{className:"flex-1 min-w-0 flex flex-col relative",children:[l.jsxs("div",{className:"absolute top-2 right-2 z-10 flex gap-1",children:[l.jsx(Y,{content:"Undo (Ctrl+Z)",side:"bottom",children:l.jsx(A,{size:"sm",variant:"outline",className:"w-8 h-8 p-0",onClick:to,children:l.jsx(dv,{className:"w-4 h-4"})})}),l.jsx(Y,{content:"Redo (Ctrl+Y)",side:"bottom",children:l.jsx(A,{size:"sm",variant:"outline",className:"w-8 h-8 p-0",onClick:no,children:l.jsx(V0,{className:"w-4 h-4"})})}),l.jsx(Y,{content:"Zoom In",side:"bottom",children:l.jsx(A,{size:"sm",variant:"outline",className:"w-8 h-8 p-0",onClick:Ip,children:l.jsx(Xu,{className:"w-4 h-4"})})}),l.jsx(Y,{content:"Zoom Out",side:"bottom",children:l.jsx(A,{size:"sm",variant:"outline",className:"w-8 h-8 p-0",onClick:Ap,children:l.jsx(yv,{className:"w-4 h-4"})})}),l.jsx(Y,{content:"Reset View",side:"bottom",children:l.jsx(A,{size:"sm",variant:"outline",className:"w-8 h-8 p-0",onClick:_p,children:l.jsx(Bu,{className:"w-4 h-4"})})}),l.jsx(Y,{content:"Toggle Minimap",side:"bottom",children:l.jsx(A,{size:"sm",variant:d?"default":"outline",className:"w-8 h-8 p-0",onClick:Rp,children:l.jsx(Fu,{className:"w-4 h-4"})})})]}),l.jsxs("div",{className:"bg-gray-100 flex-1 min-h-0 flex items-center justify-center overflow-hidden relative",children:[E&&l.jsxs("div",{className:"absolute top-4 left-4 z-20 p-3 bg-white/90 dark:bg-neutral-900/90 backdrop-blur-sm rounded-lg border border-border shadow-lg",children:[l.jsx(A,{variant:"ghost",size:"sm",className:"absolute top-1 right-1 w-6 h-6 p-0",onClick:()=>$(!1),children:l.jsx(Re,{className:"w-3 h-3"})}),l.jsxs("div",{className:"space-y-2 pr-6",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-700 dark:text-gray-300",children:[l.jsx(_0,{className:"w-4 h-4"}),l.jsx("span",{children:"Left Click to Paint"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-700 dark:text-gray-300",children:[l.jsx(Ws,{className:"w-4 h-4"}),l.jsx("span",{children:"Right Click to Delete"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-700 dark:text-gray-300",children:[l.jsx($o,{className:"w-4 h-4"}),l.jsx("span",{children:"Spacebar + Mouse to Pan"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-700 dark:text-gray-300",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Ws,{className:"w-4 h-4"}),l.jsx(Lr,{className:"w-2 h-2 absolute top-1 left-1.5 opacity-60"})]}),l.jsx("span",{children:"Mouse Wheel to Zoom In-Out"})]})]})]}),l.jsx("canvas",{ref:s,id:"mapCanvas",className:"tile-canvas w-full h-full max-w-full max-h-full"}),Ji&&l.jsxs("div",{className:"absolute bottom-4 left-4 z-10 p-2 bg-white/90 dark:bg-neutral-900/90 backdrop-blur-sm rounded-md border border-gray-200 dark:border-neutral-600 text-gray-800 dark:text-white text-xs font-mono flex items-center gap-2 shadow-sm",children:[l.jsx($u,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),l.jsxs("span",{children:[Ji.x,", ",Ji.y]})]}),gp&&l.jsxs("div",{className:"absolute bottom-4 left-32 z-10 p-2 bg-orange-600/90 backdrop-blur-sm rounded-md border border-orange-500 text-white text-xs flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2 font-mono",children:[l.jsx(fn,{className:"w-4 h-4 text-orange-200"}),l.jsxs("span",{children:[pp," tiles selected"]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Y,{content:"Fill selection with active tile",children:l.jsx(A,{size:"sm",variant:"ghost",className:"h-6 px-2 text-xs text-white hover:bg-orange-500/50",onClick:Wp,children:"Fill"})}),l.jsx(Y,{content:"Delete selected tiles (DEL)",children:l.jsx(A,{size:"sm",variant:"ghost",className:"h-6 px-2 text-xs text-white hover:bg-orange-500/50",onClick:Yp,children:"Delete"})}),l.jsx(Y,{content:"Clear selection (ESC)",children:l.jsx(A,{size:"sm",variant:"ghost",className:"h-6 px-2 text-xs text-white hover:bg-orange-500/50",onClick:Bp,children:"Clear"})})]})]}),l.jsx("div",{ref:qi,className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-30",children:l.jsxs("div",{className:"flex items-center gap-1 bg-white/90 dark:bg-neutral-900/90 border border-border rounded-full px-2 py-1 shadow-md",children:[l.jsxs("div",{className:"relative",children:[l.jsx(A,{variant:D==="brush"?"default":"ghost",size:"sm",className:"w-7 h-7 p-1 rounded-full tool-button",onClick:()=>ce("brush"),onMouseEnter:w=>{oc(),Le("Brush Tool",w.currentTarget)},onMouseLeave:()=>{lc(),De()},children:wp()}),H&&l.jsxs("div",{className:"absolute bottom-full left-0 mb-1 bg-white dark:bg-neutral-900 border border-border rounded shadow-lg p-1 flex gap-1 min-w-max z-50",onMouseEnter:oc,onMouseLeave:lc,children:[l.jsx(A,{variant:O==="brush"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>V("brush"),onMouseEnter:w=>Le("Brush Tool",w.currentTarget),onMouseLeave:De,children:l.jsx(Bs,{className:"w-3 h-3"})}),l.jsx(A,{variant:O==="bucket"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>V("bucket"),onMouseEnter:w=>Le("Bucket Fill",w.currentTarget),onMouseLeave:De,children:l.jsx(Fo,{className:"w-3 h-3"})}),l.jsx(A,{variant:O==="eraser"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>V("eraser"),onMouseEnter:w=>Le("Eraser",w.currentTarget),onMouseLeave:De,children:l.jsx(Oo,{className:"w-3 h-3"})}),l.jsx(A,{variant:O==="clear"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button border-red-500 hover:border-red-600 hover:bg-red-50",onClick:()=>ws(!0),onMouseEnter:w=>Le("Clear Layer",w.currentTarget),onMouseLeave:De,children:l.jsx(Re,{className:"w-3 h-3 text-red-500"})})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(A,{variant:D==="selection"?"default":"ghost",size:"sm",className:"w-7 h-7 p-1 rounded-full tool-button",onClick:()=>ce("selection"),onMouseEnter:w=>{ac(),Le("Selection Tool",w.currentTarget)},onMouseLeave:()=>{cc(),De()},children:Sp()}),ge&&l.jsxs("div",{className:"absolute bottom-full left-0 mb-1 bg-white dark:bg-neutral-900 border border-border rounded shadow-lg p-1 flex gap-1 min-w-max z-50",onMouseEnter:ac,onMouseLeave:cc,children:[l.jsx(A,{variant:G==="rectangular"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>J("rectangular"),onMouseEnter:w=>Le("Rectangular Selection",w.currentTarget),onMouseLeave:De,children:l.jsx(fn,{className:"w-3 h-3"})}),l.jsx(A,{variant:G==="magic-wand"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>J("magic-wand"),onMouseEnter:w=>Le("Magic Wand",w.currentTarget),onMouseLeave:De,children:l.jsx(Bo,{className:"w-3 h-3"})}),l.jsx(A,{variant:G==="same-tile"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>J("same-tile"),onMouseEnter:w=>Le("Select Same Tile",w.currentTarget),onMouseLeave:De,children:l.jsx(Dn,{className:"w-3 h-3"})}),l.jsx(A,{variant:G==="circular"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>J("circular"),onMouseEnter:w=>Le("Circular Select",w.currentTarget),onMouseLeave:De,children:l.jsx(Lr,{className:"w-3 h-3"})})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(A,{variant:D==="shape"?"default":"ghost",size:"sm",className:"w-7 h-7 p-1 rounded-full tool-button",onClick:()=>ce("shape"),onMouseEnter:w=>{uc(),Le("Shape Tool",w.currentTarget)},onMouseLeave:()=>{dc(),De()},children:kp()}),L&&l.jsxs("div",{className:"absolute bottom-full left-0 mb-1 bg-white dark:bg-neutral-900 border border-border rounded shadow-lg p-1 flex gap-1 min-w-max z-50",onMouseEnter:uc,onMouseLeave:dc,children:[l.jsx(Y,{content:"Rectangle Shape",children:l.jsx(A,{variant:be==="rectangle"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>ln("rectangle"),children:l.jsx(fn,{className:"w-3 h-3"})})}),l.jsx(Y,{content:"Circle Shape",children:l.jsx(A,{variant:be==="circle"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>ln("circle"),children:l.jsx(Lr,{className:"w-3 h-3"})})}),l.jsx(Y,{content:"Line Shape",children:l.jsx(A,{variant:be==="line"?"default":"ghost",size:"sm",className:"w-6 h-6 p-1 rounded-full sub-tool-button",onClick:()=>ln("line"),children:l.jsx(Hu,{className:"w-3 h-3"})})})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(A,{variant:D==="stamp"?"default":"ghost",size:"sm",className:"w-7 h-7 p-1 rounded-full tool-button",onClick:()=>ce("stamp"),onMouseEnter:w=>Le("Stamp Tool - Group tiles into a stamp and place them together",w.currentTarget),onMouseLeave:De,children:l.jsx(sv,{className:"w-3 h-3"})}),D==="stamp"&&l.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg p-2 min-w-[200px] z-10",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx(Y,{content:"Select and place existing stamps",children:l.jsx(A,{variant:Pn==="select"?"default":"ghost",size:"sm",className:"flex-1 text-xs",onClick:()=>hr("select"),children:"Select"})}),l.jsx(Y,{content:"Create stamp from selection",children:l.jsx(A,{variant:Pn==="create"?"default":"ghost",size:"sm",className:"flex-1 text-xs",onClick:()=>hr("create"),children:"Create"})})]}),Pn==="create"&&l.jsxs("div",{className:"border-t pt-2",children:[l.jsx("div",{className:"text-xs font-medium mb-1",children:"Create New Stamp"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("input",{type:"text",placeholder:"Stamp name",value:fr,onChange:w=>Qa(w.target.value),className:"flex-1 text-xs px-2 py-1 border rounded",onKeyDown:w=>{w.key==="Enter"&&hc()}}),l.jsx(A,{size:"sm",className:"text-xs",onClick:hc,disabled:!fr.trim(),children:"Create"})]}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"First select tiles, then create stamp"})]}),Pn==="select"&&l.jsxs("div",{className:"border-t pt-2 max-h-32 overflow-y-auto",children:[l.jsx("div",{className:"text-xs font-medium mb-1",children:"Available Stamps"}),Ga.length===0?l.jsx("div",{className:"text-xs text-gray-500",children:"No stamps created yet"}):l.jsx("div",{className:"flex flex-col gap-1",children:Ga.map(w=>l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Y,{content:`${w.name} (${w.width}x${w.height})`,children:l.jsx(A,{variant:dr===w.id?"default":"ghost",size:"sm",className:"flex-1 text-xs justify-start",onClick:()=>vp(w.id),children:w.name})}),l.jsx(Y,{content:"Delete stamp",children:l.jsx(A,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 text-red-500",onClick:()=>xp(w.id),children:l.jsx(Re,{className:"w-3 h-3"})})})]},w.id))})]})]})})]}),l.jsx(A,{variant:D==="eyedropper"?"default":"ghost",size:"sm",className:"w-7 h-7 p-1 rounded-full tool-button",onClick:()=>ce("eyedropper"),onMouseEnter:w=>Le("Eyedropper Tool - Pick a tile from the map to reuse",w.currentTarget),onMouseLeave:De,children:l.jsx(Wu,{className:"w-3 h-3"})})]})})]})]})]}),l.jsx(hx,{}),l.jsx(zo,{open:tp,onOpenChange:vs,children:l.jsxs(Io,{children:[l.jsxs(Ao,{children:[l.jsx(_o,{children:"Separate Brush"}),l.jsx(Do,{children:"Are you sure you want to separate this brush?"})]}),l.jsxs(Ro,{children:[l.jsx(A,{variant:"outline",onClick:()=>vs(!1),children:"Cancel"}),l.jsx(A,{onClick:bp,children:"Separate"})]})]})}),l.jsx(zo,{open:dp,onOpenChange:ks,children:l.jsxs(Io,{className:"max-w-md",children:[l.jsxs(Ao,{children:[l.jsx(_o,{children:Q?`Edit ${Q.type}`:"Add Object"}),l.jsxs(Do,{children:["Configure ",(Q==null?void 0:Q.type)||"object"," properties for Flare engine compatibility."]})]}),Q&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),l.jsx(pe,{value:Q.name||"",onChange:w=>tt({...Q,name:w.target.value}),placeholder:"Object name"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),l.jsx(pe,{value:Q.category||"",onChange:w=>tt({...Q,category:w.target.value}),placeholder:Q.type==="enemy"?"creature":"block"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"X Position"}),l.jsx(pe,{type:"number",value:Q.x,onChange:w=>tt({...Q,x:Number(w.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Y Position"}),l.jsx(pe,{type:"number",value:Q.y,onChange:w=>tt({...Q,y:Number(w.target.value)})})]})]}),Q.type==="enemy"&&l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Level"}),l.jsx(pe,{type:"number",value:Q.level||1,onChange:w=>tt({...Q,level:Number(w.target.value)}),min:"1"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Number"}),l.jsx(pe,{type:"number",value:Q.number||1,onChange:w=>tt({...Q,number:Number(w.target.value)}),min:"1"})]})]}),Q.type==="enemy"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Wander Radius"}),l.jsx(pe,{type:"number",value:Q.wander_radius||4,onChange:w=>tt({...Q,wander_radius:Number(w.target.value)}),min:"0"})]}),Q.type==="event"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Activate"}),l.jsx(pe,{value:Q.activate||"on_trigger",onChange:w=>tt({...Q,activate:w.target.value}),placeholder:"on_trigger, on_load, etc."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hotspot"}),l.jsx(pe,{value:Q.hotspot||"0,0,1,1",onChange:w=>tt({...Q,hotspot:w.target.value}),placeholder:"x,y,width,height"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tooltip"}),l.jsx(pe,{value:Q.tooltip||"",onChange:w=>tt({...Q,tooltip:w.target.value}),placeholder:"Hover text"})]})]})]}),l.jsxs(Ro,{children:[l.jsx(A,{variant:"outline",onClick:()=>ks(!1),children:"Cancel"}),l.jsx(A,{onClick:()=>Q&&jp(Q),children:"Save"})]})]})}),l.jsx(zo,{open:hp,onOpenChange:bs,children:l.jsxs(Io,{className:"max-w-md",children:[l.jsxs(Ao,{children:[l.jsx(_o,{children:"Edit Hero Position"}),l.jsx(Do,{children:"Set the hero spawn position on the map."})]}),ye&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"X Position"}),l.jsx(pe,{type:"number",min:0,max:ye.mapWidth-1,defaultValue:ye.currentX,onChange:w=>{const T=parseInt(w.target.value);isNaN(T)||yr({...ye,currentX:T})}}),l.jsxs("span",{className:"text-xs text-gray-500",children:["(0 - ",ye.mapWidth-1,")"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Y Position"}),l.jsx(pe,{type:"number",min:0,max:ye.mapHeight-1,defaultValue:ye.currentY,onChange:w=>{const T=parseInt(w.target.value);isNaN(T)||yr({...ye,currentY:T})}}),l.jsxs("span",{className:"text-xs text-gray-500",children:["(0 - ",ye.mapHeight-1,")"]})]})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Current position: (",ye.currentX,", ",ye.currentY,")"]})]}),l.jsxs(Ro,{children:[l.jsx(A,{variant:"outline",onClick:Cp,children:"Cancel"}),l.jsx(A,{onClick:()=>ye&&Np(ye.currentX,ye.currentY),children:"Confirm"})]})]})}),up&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-black rounded-lg shadow-xl p-6 max-w-md mx-4 relative",children:[l.jsx("button",{onClick:()=>ic(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-gray-200 transition-colors",children:l.jsx(Re,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:l.jsx(f0,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Export Successful"})]}),l.jsxs("p",{className:"text-gray-300 flex items-center gap-2",children:["Map files and tile definitions saved to",l.jsxs("span",{className:"inline-flex items-center gap-1 font-medium text-white",children:[l.jsx(Sf,{className:"w-4 h-4"}),"Export"]}),"."]})]})}),In&&l.jsx("div",{className:`custom-tooltip ${In.visible?"visible":""} ${In.fadeOut?"fade-out":""}`,style:{left:In.x,top:In.y},children:In.content})]})})}Go.createRoot(document.getElementById("root")).render(l.jsx(he.StrictMode,{children:l.jsx(mx,{})}));
